import{a as $,b as q}from"./chunk-CYJUKTB6.js";import{a as U}from"./chunk-VSEUL7VK.js";import"./chunk-NZKTGVGQ.js";import"./chunk-33G4757B.js";import{Fa as D,Ia as p,Jc as L,Mc as Y,Pb as T,Qb as V,Qc as j,Rc as W,Sc as R,Ta as m,Tb as k,Ua as i,Ub as N,Va as t,Vb as B,Wa as M,Wb as A,Wc as H,Xa as F,Y as h,Ya as O,Z as v,Za as g,cb as P,d as z,fb as r,gb as d,hb as _,kb as w,lb as E,mb as S,rb as x,tb as u,ub as I,va as l,za as b}from"./chunk-ORUFO6Z7.js";function K(s,n){s&1&&(i(0,"div",9),M(1,"app-loading",10),t())}function Q(s,n){if(s&1&&(i(0,"option",41),r(1),t()),s&2){let e=n.$implicit;m("value",e.id),l(),_(" ",e.name," ")}}function X(s,n){if(s&1&&(i(0,"div",42)(1,"div",43)(2,"div",44),r(3),t(),i(4,"div",45),r(5),x(6,"currency"),t()(),i(7,"div",46),M(8,"div",47),t(),i(9,"div",48),r(10),x(11,"number"),t()()),s&2){let e=n.$implicit,a=n.index,o=g(2);l(3),d(e.category),l(2),d(u(6,7,e.amount,"INR")),l(3),P("width",e.percentage,"%")("background-color",o.getCategoryColor(a)),l(2),_("",u(11,10,e.percentage,"1.1-1"),"%")}}function Z(s,n){if(s&1&&(i(0,"div",49)(1,"div",50),r(2),x(3,"currency"),t()()),s&2){let e=n.$implicit,a=g(2);P("height",a.getBarHeight(e.amount),"%"),l(2),d(I(3,3,e.amount,"INR","symbol","1.0-0"))}}function ee(s,n){if(s&1&&(i(0,"div",51),r(1),t()),s&2){let e=n.$implicit;l(),_(" ",e.month," ")}}function te(s,n){if(s&1&&(i(0,"div",52)(1,"div",53),r(2),t(),i(3,"div",54)(4,"div",55),r(5),t(),i(6,"div",56),r(7),t(),i(8,"div",57),r(9),x(10,"date"),t()(),i(11,"div",58),r(12),x(13,"currency"),t()()),s&2){let e=n.$implicit,a=n.index,o=g(2);l(2),_("#",a+1),l(3),d(e.description||"No description"),l(2),d(o.getCategoryName(e.categoryId)),l(2),d(u(10,5,e.date,"MMM dd, yyyy")),l(3),d(u(13,8,e.amount,"INR"))}}function ne(s,n){if(s&1){let e=F();i(0,"div",11)(1,"div",12)(2,"div",13)(3,"label",14),r(4,"Time Period"),t(),i(5,"select",15),S("ngModelChange",function(o){h(e);let c=g();return E(c.selectedPeriod,o)||(c.selectedPeriod=o),v(o)}),O("change",function(){h(e);let o=g();return v(o.loadData())}),i(6,"option",16),r(7,"This Month"),t(),i(8,"option",17),r(9,"This Year"),t(),i(10,"option",18),r(11,"All Time"),t()()(),i(12,"div",13)(13,"label",14),r(14,"Category"),t(),i(15,"select",15),S("ngModelChange",function(o){h(e);let c=g();return E(c.selectedCategory,o)||(c.selectedCategory=o),v(o)}),O("change",function(){h(e);let o=g();return v(o.loadData())}),i(16,"option",18),r(17,"All Categories"),t(),p(18,Q,2,2,"option",19),t()()(),i(19,"div",20)(20,"div",21)(21,"div",22),r(22,"\u{1F4B0}"),t(),i(23,"div",23)(24,"div",24),r(25,"Total Amount"),t(),i(26,"div",25),r(27),x(28,"currency"),t()()(),i(29,"div",21)(30,"div",22),r(31,"\u{1F4CA}"),t(),i(32,"div",23)(33,"div",24),r(34,"Transactions"),t(),i(35,"div",25),r(36),t()()(),i(37,"div",21)(38,"div",22),r(39,"\u{1F3F7}\uFE0F"),t(),i(40,"div",23)(41,"div",24),r(42,"Categories"),t(),i(43,"div",25),r(44),t()()()(),i(45,"div",26)(46,"div",27)(47,"div",28)(48,"h3",29),r(49,"Category Breakdown"),t(),i(50,"p",30),r(51,"Expense distribution by category"),t()(),i(52,"div",31)(53,"div",32),p(54,X,12,13,"div",33),t()()(),i(55,"div",27)(56,"div",28)(57,"h3",29),r(58,"Monthly Trend"),t(),i(59,"p",30),r(60,"Expense trends over the last 12 months"),t()(),i(61,"div",31)(62,"div",34)(63,"div",35),p(64,Z,4,8,"div",36),t(),i(65,"div",37),p(66,ee,2,1,"div",38),t()()()(),i(67,"div",27)(68,"div",28)(69,"h3",29),r(70,"Top Expenses"),t(),i(71,"p",30),r(72,"Highest amount transactions"),t()(),i(73,"div",31)(74,"div",39),p(75,te,14,11,"div",40),t()()()()()}if(s&2){let e=g();l(5),w("ngModel",e.selectedPeriod),l(10),w("ngModel",e.selectedCategory),l(3),m("ngForOf",e.categories),l(9),d(u(28,10,e.getTotalAmount(),"INR")),l(9),d(e.getFilteredExpenses().length),l(8),d(e.getExpensesByCategory().length),l(10),m("ngForOf",e.getExpensesByCategory()),l(10),m("ngForOf",e.getMonthlyTrend()),l(2),m("ngForOf",e.getMonthlyTrend()),l(9),m("ngForOf",e.getTopExpenses())}}var G=class s{constructor(n,e){this.expenseService=n;this.categoryService=e}expenses=[];categories=[];isLoading=!0;selectedPeriod="month";selectedCategory="all";ngOnInit(){this.loadData()}ngOnDestroy(){}loadData(){return z(this,null,function*(){try{this.isLoading=!0;let[n,e]=yield Promise.all([this.expenseService.getAll(),this.categoryService.getAll()]);this.expenses=n,this.categories=e}catch(n){console.error("Error loading data:",n)}finally{this.isLoading=!1}})}getFilteredExpenses(){let n=[...this.expenses],e=new Date,a=e.getMonth(),o=e.getFullYear();return this.selectedPeriod==="month"?n=n.filter(c=>{let f=new Date(c.date);return f.getMonth()===a&&f.getFullYear()===o}):this.selectedPeriod==="year"&&(n=n.filter(c=>new Date(c.date).getFullYear()===o)),this.selectedCategory!=="all"&&(n=n.filter(c=>c.categoryId===this.selectedCategory)),n}getCategoryName(n){let e=this.categories.find(a=>a.id===n);return e?e.name:"Unknown"}getTotalAmount(){return this.getFilteredExpenses().reduce((n,e)=>n+e.amount,0)}getExpensesByCategory(){let n=this.getFilteredExpenses(),e=this.getTotalAmount(),a=new Map;return n.forEach(o=>{let c=this.getCategoryName(o.categoryId),f=a.get(c)||0;a.set(c,f+o.amount)}),Array.from(a.entries()).map(([o,c])=>({category:o,amount:c,percentage:e>0?c/e*100:0})).sort((o,c)=>c.amount-o.amount)}getMonthlyTrend(){let n=new Date,e=[];for(let a=11;a>=0;a--){let o=new Date(n.getFullYear(),n.getMonth()-a,1),c=o.toLocaleDateString("en-US",{month:"short"}),J=this.expenses.filter(C=>{let y=new Date(C.date);return y.getMonth()===o.getMonth()&&y.getFullYear()===o.getFullYear()}).reduce((C,y)=>C+y.amount,0);e.push({month:c,amount:J})}return e}getTopExpenses(n=5){return this.getFilteredExpenses().sort((e,a)=>a.amount-e.amount).slice(0,n)}getCategoryColor(n){let e=["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe","#43e97b","#38f9d7","#ffecd2","#fcb69f","#a8edea","#fed6e3"];return e[n%e.length]}getBarHeight(n){let e=Math.max(...this.getMonthlyTrend().map(a=>a.amount));return e>0?n/e*100:0}static \u0275fac=function(e){return new(e||s)(b($),b(q))};static \u0275cmp=D({type:s,selectors:[["app-visualizations"]],decls:12,vars:2,consts:[[1,"visualizations-container"],[1,"page-header"],[1,"header-content"],[1,"header-left"],[1,"page-title"],[1,"title-icon"],[1,"page-subtitle"],["class","loading-container",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-container"],["message","Loading visualizations...","type","card"],[1,"content"],[1,"filters-section"],[1,"filter-group"],[1,"filter-label"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","month"],["value","year"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"summary-cards"],[1,"summary-card"],[1,"card-icon"],[1,"card-content"],[1,"card-title"],[1,"card-value"],[1,"charts-section"],[1,"chart-card"],[1,"chart-header"],[1,"chart-title"],[1,"chart-subtitle"],[1,"chart-content"],[1,"category-list"],["class","category-item",4,"ngFor","ngForOf"],[1,"trend-chart"],[1,"trend-bars"],["class","trend-bar",3,"height",4,"ngFor","ngForOf"],[1,"trend-labels"],["class","trend-label",4,"ngFor","ngForOf"],[1,"expenses-list"],["class","expense-item",4,"ngFor","ngForOf"],[3,"value"],[1,"category-item"],[1,"category-info"],[1,"category-name"],[1,"category-amount"],[1,"category-bar"],[1,"bar-fill"],[1,"category-percentage"],[1,"trend-bar"],[1,"bar-value"],[1,"trend-label"],[1,"expense-item"],[1,"expense-rank"],[1,"expense-details"],[1,"expense-description"],[1,"expense-category"],[1,"expense-date"],[1,"expense-amount"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4)(5,"span",5),r(6,"\u{1F4C8}"),t(),r(7," Visualizations "),t(),i(8,"p",6),r(9,"Interactive charts and insights for your expense data"),t()()()(),p(10,K,2,0,"div",7)(11,ne,76,13,"div",8),t()),e&2&&(l(10),m("ngIf",a.isLoading),l(),m("ngIf",!a.isLoading))},dependencies:[A,T,V,H,W,R,j,L,Y,U,N,B,k],styles:[".visualizations-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f8fafc,#e2e8f0);padding:0;margin:0}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:2rem 0;margin-bottom:2rem;box-shadow:0 4px 20px #0000001a}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1.5rem}.header-left[_ngcontent-%COMP%]{text-align:center}.page-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin:0 0 .5rem;display:flex;align-items:center;justify-content:center;gap:1rem}.title-icon[_ngcontent-%COMP%]{font-size:2.5rem}.page-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.9;margin:0;font-weight:400}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1.5rem 2rem}.filters-section[_ngcontent-%COMP%]{display:flex;gap:2rem;margin-bottom:2rem;padding:1.5rem;background:#fff;border-radius:16px;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb}.filter-group[_ngcontent-%COMP%]{flex:1}.filter-label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#374151;margin-bottom:.5rem;font-size:.9rem}.filter-select[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid #e5e7eb;border-radius:12px;font-size:1rem;background:#fff;transition:all .3s ease;cursor:pointer}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb;display:flex;align-items:center;gap:1rem;transition:all .3s ease}.summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 30px #0000001f}.card-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:60px;height:60px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:12px;color:#fff}.card-content[_ngcontent-%COMP%]{flex:1}.card-title[_ngcontent-%COMP%]{font-size:.9rem;color:#6b7280;font-weight:500;margin-bottom:.25rem;text-transform:uppercase;letter-spacing:.5px}.card-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#111827}.charts-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:2rem}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 4px 20px #00000014;border:1px solid #e5e7eb;transition:all .3s ease}.chart-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 30px #0000001f}.chart-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.chart-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#111827;margin:0 0 .5rem}.chart-subtitle[_ngcontent-%COMP%]{font-size:.9rem;color:#6b7280;margin:0}.chart-content[_ngcontent-%COMP%]{min-height:200px}.category-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.category-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:#f8fafc;border-radius:12px;border:1px solid #e5e7eb}.category-info[_ngcontent-%COMP%]{flex:1;min-width:0}.category-name[_ngcontent-%COMP%]{font-weight:600;color:#111827;margin-bottom:.25rem}.category-amount[_ngcontent-%COMP%]{font-size:.9rem;color:#6b7280;font-weight:500}.category-bar[_ngcontent-%COMP%]{flex:1;height:8px;background:#e5e7eb;border-radius:4px;overflow:hidden;margin:0 1rem}.bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.category-percentage[_ngcontent-%COMP%]{font-weight:600;color:#111827;min-width:60px;text-align:right}.trend-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.trend-bars[_ngcontent-%COMP%]{display:flex;align-items:end;gap:.5rem;height:200px;padding:1rem 0}.trend-bar[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:4px 4px 0 0;position:relative;transition:all .3s ease;min-height:20px;display:flex;align-items:end;justify-content:center}.trend-bar[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a67d8,#6b46c1);transform:scale(1.05)}.bar-value[_ngcontent-%COMP%]{position:absolute;top:-30px;font-size:.8rem;font-weight:600;color:#374151;white-space:nowrap;opacity:0;transition:opacity .3s ease}.trend-bar[_ngcontent-%COMP%]:hover   .bar-value[_ngcontent-%COMP%]{opacity:1}.trend-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:.5rem}.trend-label[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:.8rem;color:#6b7280;font-weight:500}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.expense-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:#f8fafc;border-radius:12px;border:1px solid #e5e7eb;transition:all .3s ease}.expense-item[_ngcontent-%COMP%]:hover{background:#f1f5f9;transform:translate(4px)}.expense-rank[_ngcontent-%COMP%]{width:32px;height:32px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem;flex-shrink:0}.expense-details[_ngcontent-%COMP%]{flex:1;min-width:0}.expense-description[_ngcontent-%COMP%]{font-weight:600;color:#111827;margin-bottom:.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.expense-category[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;margin-bottom:.25rem}.expense-date[_ngcontent-%COMP%]{font-size:.8rem;color:#9ca3af}.expense-amount[_ngcontent-%COMP%]{font-weight:700;color:#111827;font-size:1.1rem;flex-shrink:0}@media (max-width: 768px){.page-title[_ngcontent-%COMP%]{font-size:2rem;flex-direction:column;gap:.5rem}.title-icon[_ngcontent-%COMP%]{font-size:2rem}.filters-section[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.summary-cards[_ngcontent-%COMP%], .charts-section[_ngcontent-%COMP%]{grid-template-columns:1fr}.category-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}.category-bar[_ngcontent-%COMP%]{margin:0}.trend-bars[_ngcontent-%COMP%]{height:150px}.expense-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}.expense-details[_ngcontent-%COMP%]{text-align:center}}@media (max-width: 480px){.content[_ngcontent-%COMP%]{padding:0 1rem 2rem}.page-title[_ngcontent-%COMP%]{font-size:1.75rem}.summary-card[_ngcontent-%COMP%], .chart-card[_ngcontent-%COMP%]{padding:1rem}.trend-bars[_ngcontent-%COMP%]{height:120px}}"]})};export{G as VisualizationsComponent};
