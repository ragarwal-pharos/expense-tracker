var x2=Object.defineProperty,M2=Object.defineProperties;var P2=Object.getOwnPropertyDescriptors;var Ph=Object.getOwnPropertySymbols,A2=Object.getPrototypeOf,iT=Object.prototype.hasOwnProperty,oT=Object.prototype.propertyIsEnumerable,O2=Reflect.get;var rT=(n,e,t)=>e in n?x2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||={})iT.call(e,t)&&rT(n,t,e[t]);if(Ph)for(var t of Ph(e))oT.call(e,t)&&rT(n,t,e[t]);return n},ce=(n,e)=>M2(n,P2(e));var bs=(n,e)=>{var t={};for(var r in n)iT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Ph)for(var r of Ph(n))e.indexOf(r)<0&&oT.call(n,r)&&(t[r]=n[r]);return t};var Co=(n,e,t)=>O2(A2(n),t,e);var E=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var h_;function Ah(){return h_}function Vr(n){let e=h_;return h_=n,e}var sT=Symbol("NotFound");function za(n){return n===sT||n?.name==="\u0275NotFound"}function Fh(n,e){return Object.is(n,e)}var Pt=null,Oh=!1,f_=1,R2=null,Xt=Symbol("SIGNAL");function we(n){let e=Pt;return Pt=n,e}function Lh(){return Pt}var Is={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ha(n){if(Oh)throw new Error("");if(Pt===null)return;Pt.consumerOnSignalRead(n);let e=Pt.nextProducerIndex++;if(Bh(Pt),e<Pt.producerNode.length&&Pt.producerNode[e]!==n&&ql(Pt)){let t=Pt.producerNode[e];Uh(t,Pt.producerIndexOfThis[e])}Pt.producerNode[e]!==n&&(Pt.producerNode[e]=n,Pt.producerIndexOfThis[e]=ql(Pt)?cT(n,Pt,e):0),Pt.producerLastReadVersion[e]=n.version}function aT(){f_++}function Vh(n){if(!(ql(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===f_)){if(!n.producerMustRecompute(n)&&!Wl(n)){kh(n);return}n.producerRecomputeValue(n),kh(n)}}function p_(n){if(n.liveConsumerNode===void 0)return;let e=Oh;Oh=!0;try{for(let t of n.liveConsumerNode)t.dirty||N2(t)}finally{Oh=e}}function g_(){return Pt?.consumerAllowSignalWrites!==!1}function N2(n){n.dirty=!0,p_(n),n.consumerMarkedDirty?.(n)}function kh(n){n.dirty=!1,n.lastCleanEpoch=f_}function Ds(n){return n&&(n.nextProducerIndex=0),we(n)}function qa(n,e){if(we(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ql(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Uh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Wl(n){Bh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Vh(t),r!==t.version))return!0}return!1}function jh(n){if(Bh(n),ql(n))for(let e=0;e<n.producerNode.length;e++)Uh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function cT(n,e,t){if(lT(n),n.liveConsumerNode.length===0&&uT(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=cT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Uh(n,e){if(lT(n),n.liveConsumerNode.length===1&&uT(n))for(let r=0;r<n.producerNode.length;r++)Uh(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Bh(i),i.producerIndexOfThis[r]=e}}function ql(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Bh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function lT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function uT(n){return n.producerNode!==void 0}function $h(n){R2?.(n)}function zh(n,e){let t=Object.create(k2);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Vh(t),Ha(t),t.value===Hl)throw t.error;return t.value};return r[Xt]=t,$h(t),r}var Rh=Symbol("UNSET"),Nh=Symbol("COMPUTING"),Hl=Symbol("ERRORED"),k2=ce(V({},Is),{value:Rh,dirty:!0,error:null,equal:Fh,kind:"computed",producerMustRecompute(n){return n.value===Rh||n.value===Nh},producerRecomputeValue(n){if(n.value===Nh)throw new Error("");let e=n.value;n.value=Nh;let t=Ds(n),r,i=!1;try{r=n.computation(),we(null),i=e!==Rh&&e!==Hl&&r!==Hl&&n.equal(e,r)}catch(o){r=Hl,n.error=o}finally{qa(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function F2(){throw new Error}var dT=F2;function hT(n){dT(n)}function m_(n){dT=n}var L2=null;function y_(n,e){let t=Object.create(Hh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>fT(t);return r[Xt]=t,$h(t),[r,s=>Wa(t,s),s=>__(t,s)]}function fT(n){return Ha(n),n.value}function Wa(n,e){g_()||hT(n),n.equal(n.value,e)||(n.value=e,V2(n))}function __(n,e){g_()||hT(n),Wa(n,e(n.value))}var Hh=ce(V({},Is),{equal:Fh,value:void 0,kind:"signal"});function V2(n){n.version++,aT(),p_(n),L2?.(n)}function _e(n){return typeof n=="function"}function Ga(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var qh=Ga(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ss(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var He=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(_e(r))try{r()}catch(o){e=o instanceof qh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{pT(o)}catch(s){e=e??[],s instanceof qh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new qh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)pT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ss(t,e)}remove(e){let{_finalizers:t}=this;t&&Ss(t,e),e instanceof n&&e._removeParent(this)}};He.EMPTY=(()=>{let n=new He;return n.closed=!0,n})();var v_=He.EMPTY;function Wh(n){return n instanceof He||n&&"closed"in n&&_e(n.remove)&&_e(n.add)&&_e(n.unsubscribe)}function pT(n){_e(n)?n():n.unsubscribe()}var pr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ka={setTimeout(n,e,...t){let{delegate:r}=Ka;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ka;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Gh(n){Ka.setTimeout(()=>{let{onUnhandledError:e}=pr;if(e)e(n);else throw n})}function Ts(){}var gT=C_("C",void 0,void 0);function mT(n){return C_("E",void 0,n)}function yT(n){return C_("N",n,void 0)}function C_(n,e,t){return{kind:n,value:e,error:t}}var xs=null;function Ya(n){if(pr.useDeprecatedSynchronousErrorHandling){let e=!xs;if(e&&(xs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=xs;if(xs=null,t)throw r}}else n()}function _T(n){pr.useDeprecatedSynchronousErrorHandling&&xs&&(xs.errorThrown=!0,xs.error=n)}var Ms=class extends He{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Wh(e)&&e.add(this)):this.destination=B2}static create(e,t,r){return new Qa(e,t,r)}next(e){this.isStopped?w_(yT(e),this):this._next(e)}error(e){this.isStopped?w_(mT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?w_(gT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},j2=Function.prototype.bind;function E_(n,e){return j2.call(n,e)}var b_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Kh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Kh(r)}else Kh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Kh(t)}}},Qa=class extends Ms{constructor(e,t,r){super();let i;if(_e(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&pr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&E_(e.next,o),error:e.error&&E_(e.error,o),complete:e.complete&&E_(e.complete,o)}):i=e}this.destination=new b_(i)}};function Kh(n){pr.useDeprecatedSynchronousErrorHandling?_T(n):Gh(n)}function U2(n){throw n}function w_(n,e){let{onStoppedNotification:t}=pr;t&&Ka.setTimeout(()=>t(n,e))}var B2={closed:!0,next:Ts,error:U2,complete:Ts};var Za=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rn(n){return n}function I_(...n){return D_(n)}function D_(n){return n.length===0?Rn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var de=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=z2(t)?t:new Qa(t,r,i);return Ya(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=vT(r),new r((i,o)=>{let s=new Qa({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Za](){return this}pipe(...t){return D_(t)(this)}toPromise(t){return t=vT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function vT(n){var e;return(e=n??pr.Promise)!==null&&e!==void 0?e:Promise}function $2(n){return n&&_e(n.next)&&_e(n.error)&&_e(n.complete)}function z2(n){return n&&n instanceof Ms||$2(n)&&Wh(n)}function S_(n){return _e(n?.lift)}function ke(n){return e=>{if(S_(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Me(n,e,t,r,i){return new T_(n,e,t,r,i)}var T_=class extends Ms{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ja(){return ke((n,e)=>{let t=null;n._refCount++;let r=Me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Xa=class extends de{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,S_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new He;let t=this.getSubject();e.add(this.source.subscribe(Me(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=He.EMPTY)}return e}refCount(){return Ja()(this)}};var CT=Ga(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Yh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new CT}next(t){Ya(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ya(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ya(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?v_:(this.currentObservers=null,o.push(t),new He(()=>{this.currentObservers=null,Ss(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new de;return t.source=this,t}}return n.create=(e,t)=>new Yh(e,t),n})(),Yh=class extends nt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:v_}};var at=class extends nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var x_={now(){return(x_.delegate||Date).now()},delegate:void 0};var Qh=class extends He{constructor(e,t){super()}schedule(e,t=0){return this}};var Gl={setInterval(n,e,...t){let{delegate:r}=Gl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Gl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ec=class extends Qh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Gl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Gl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ss(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var tc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};tc.now=x_.now;var nc=class extends tc{constructor(e,t=tc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var M_=new nc(ec);var Zh=class extends ec{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Jh=class extends nc{};var P_=new Jh(Zh);var wn=new de(n=>n.complete());function ET(n){return n&&_e(n.schedule)}function wT(n){return n[n.length-1]}function Xh(n){return _e(wT(n))?n.pop():void 0}function Eo(n){return ET(wT(n))?n.pop():void 0}function A_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function IT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function bT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ps(n){return this instanceof Ps?(this.v=n,this):new Ps(n)}function DT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(b){return Promise.resolve(b).then(_,f)}}function a(_,b){r[_]&&(i[_]=function(P){return new Promise(function(R,j){o.push([_,P,R,j])>1||c(_,P)})},b&&(i[_]=b(i[_])))}function c(_,b){try{u(r[_](b))}catch(P){y(o[0][3],P)}}function u(_){_.value instanceof Ps?Promise.resolve(_.value.v).then(d,f):y(o[0][2],_)}function d(_){c("next",_)}function f(_){c("throw",_)}function y(_,b){_(b),o.shift(),o.length&&c(o[0][0],o[0][1])}}function ST(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof bT=="function"?bT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var ef=n=>n&&typeof n.length=="number"&&typeof n!="function";function tf(n){return _e(n?.then)}function nf(n){return _e(n[Za])}function rf(n){return Symbol.asyncIterator&&_e(n?.[Symbol.asyncIterator])}function of(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function H2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sf=H2();function af(n){return _e(n?.[sf])}function cf(n){return DT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ps(t.read());if(i)return yield Ps(void 0);yield yield Ps(r)}}finally{t.releaseLock()}})}function lf(n){return _e(n?.getReader)}function Et(n){if(n instanceof de)return n;if(n!=null){if(nf(n))return q2(n);if(ef(n))return W2(n);if(tf(n))return G2(n);if(rf(n))return TT(n);if(af(n))return K2(n);if(lf(n))return Y2(n)}throw of(n)}function q2(n){return new de(e=>{let t=n[Za]();if(_e(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function W2(n){return new de(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function G2(n){return new de(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Gh)})}function K2(n){return new de(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function TT(n){return new de(e=>{Q2(n,e).catch(t=>e.error(t))})}function Y2(n){return TT(cf(n))}function Q2(n,e){var t,r,i,o;return IT(this,void 0,void 0,function*(){try{for(t=ST(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function bn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function wo(n,e=0){return ke((t,r)=>{t.subscribe(Me(r,i=>bn(r,n,()=>r.next(i),e),()=>bn(r,n,()=>r.complete(),e),i=>bn(r,n,()=>r.error(i),e)))})}function bo(n,e=0){return ke((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function xT(n,e){return Et(n).pipe(bo(e),wo(e))}function MT(n,e){return Et(n).pipe(bo(e),wo(e))}function PT(n,e){return new de(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function AT(n,e){return new de(t=>{let r;return bn(t,e,()=>{r=n[sf](),bn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>_e(r?.return)&&r.return()})}function uf(n,e){if(!n)throw new Error("Iterable cannot be null");return new de(t=>{bn(t,e,()=>{let r=n[Symbol.asyncIterator]();bn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function OT(n,e){return uf(cf(n),e)}function RT(n,e){if(n!=null){if(nf(n))return xT(n,e);if(ef(n))return PT(n,e);if(tf(n))return MT(n,e);if(rf(n))return uf(n,e);if(af(n))return AT(n,e);if(lf(n))return OT(n,e)}throw of(n)}function rt(n,e){return e?RT(n,e):Et(n)}function le(...n){let e=Eo(n);return rt(n,e)}function rc(n,e){let t=_e(n)?n:()=>n,r=i=>i.error(t());return new de(e?i=>e.schedule(r,0,i):r)}function O_(n){return!!n&&(n instanceof de||_e(n.lift)&&_e(n.subscribe))}var Si=Ga(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function pe(n,e){return ke((t,r)=>{let i=0;t.subscribe(Me(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Z2}=Array;function J2(n,e){return Z2(e)?n(...e):n(e)}function df(n){return pe(e=>J2(n,e))}var{isArray:X2}=Array,{getPrototypeOf:eV,prototype:tV,keys:nV}=Object;function hf(n){if(n.length===1){let e=n[0];if(X2(e))return{args:e,keys:null};if(rV(e)){let t=nV(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function rV(n){return n&&typeof n=="object"&&eV(n)===tV}function ff(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Kl(...n){let e=Eo(n),t=Xh(n),{args:r,keys:i}=hf(n);if(r.length===0)return rt([],e);let o=new de(iV(r,e,i?s=>ff(i,s):Rn));return t?o.pipe(df(t)):o}function iV(n,e,t=Rn){return r=>{NT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)NT(e,()=>{let u=rt(n[c],e),d=!1;u.subscribe(Me(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function NT(n,e,t){n?bn(t,n,e):e()}function kT(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,f=!1,y=()=>{f&&!c.length&&!u&&e.complete()},_=P=>u<r?b(P):c.push(P),b=P=>{o&&e.next(P),u++;let R=!1;Et(t(P,d++)).subscribe(Me(e,j=>{i?.(j),o?_(j):e.next(j)},()=>{R=!0},void 0,()=>{if(R)try{for(u--;c.length&&u<r;){let j=c.shift();s?bn(e,s,()=>b(j)):b(j)}y()}catch(j){e.error(j)}}))};return n.subscribe(Me(e,_,()=>{f=!0,y()})),()=>{a?.()}}function yt(n,e,t=1/0){return _e(e)?yt((r,i)=>pe((o,s)=>e(r,o,i,s))(Et(n(r,i))),t):(typeof e=="number"&&(t=e),ke((r,i)=>kT(r,i,n,t)))}function Io(n=1/0){return yt(Rn,n)}function FT(){return Io(1)}function ic(...n){return FT()(rt(n,Eo(n)))}function Yl(n){return new de(e=>{Et(n()).subscribe(e)})}function R_(...n){let e=Xh(n),{args:t,keys:r}=hf(n),i=new de(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;Et(t[d]).subscribe(Me(o,y=>{f||(f=!0,u--),a[d]=y},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?ff(r,a):a),o.complete())}))}});return e?i.pipe(df(e)):i}var Ti=new de(Ts);function _t(n,e){return ke((t,r)=>{let i=0;t.subscribe(Me(r,o=>n.call(e,o,i++)&&r.next(o)))})}function xi(n){return ke((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Me(t,void 0,void 0,s=>{o=Et(n(s,xi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function LT(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Me(s,d=>{let f=u++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Do(n,e){return _e(e)?yt(n,e,1):yt(n,1)}function So(n){return ke((e,t)=>{let r=!1;e.subscribe(Me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function At(n){return n<=0?()=>wn:ke((e,t)=>{let r=0;e.subscribe(Me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function pf(n=oV){return ke((e,t)=>{let r=!1;e.subscribe(Me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function oV(){return new Si}function Ql(n){return ke((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Mi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_t((i,o)=>n(i,o,r)):Rn,At(1),t?So(e):pf(()=>new Si))}function oc(n){return n<=0?()=>wn:ke((e,t)=>{let r=[];e.subscribe(Me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function N_(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_t((i,o)=>n(i,o,r)):Rn,oc(1),t?So(e):pf(()=>new Si))}function k_(n,e){return ke(LT(n,e,arguments.length>=2,!0))}function F_(...n){let e=Eo(n);return ke((t,r)=>{(e?ic(n,t,e):ic(n,t)).subscribe(r)})}function Nt(n,e){return ke((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Me(r,c=>{i?.unsubscribe();let u=0,d=o++;Et(n(c,d)).subscribe(i=Me(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function gf(n){return ke((e,t)=>{Et(n).subscribe(Me(t,()=>t.complete(),Ts)),!t.closed&&e.subscribe(t)})}function kt(n,e,t){let r=_e(n)||e||t?{next:n,error:e,complete:t}:n;return r?ke((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Me(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Rn}function VT(n){let e=we(null);try{return n()}finally{we(e)}}var Cf="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",F=class extends Error{code;constructor(e,t){super(Ri(e,t)),this.code=e}};function sV(n){return`NG0${Math.abs(n)}`}function Ri(n,e){return`${sV(n)}${e?": "+e:""}`}var Ni=globalThis;function Be(n){for(let e in n)if(n[e]===Be)return e;throw Error("")}function BT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ai(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ai).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Ef(n,e){return n?e?`${n} ${e}`:n:e||""}var aV=Be({__forward_ref__:Be});function Nn(n){return n.__forward_ref__=Nn,n.toString=function(){return Ai(this())},n}function $t(n){return Y_(n)?n():n}function Y_(n){return typeof n=="function"&&n.hasOwnProperty(aV)&&n.__forward_ref__===Nn}function $T(n,e){n==null&&Q_(e,n,null,"!=")}function Q_(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function kn(n){return{providers:n.providers||[],imports:n.imports||[]}}function tu(n){return cV(n,wf)}function Z_(n){return tu(n)!==null}function cV(n,e){return n.hasOwnProperty(e)&&n[e]||null}function lV(n){let e=n?.[wf]??null;return e||null}function V_(n){return n&&n.hasOwnProperty(yf)?n[yf]:null}var wf=Be({\u0275prov:Be}),yf=Be({\u0275inj:Be}),Q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function J_(n){return n&&!!n.\u0275providers}var X_=Be({\u0275cmp:Be}),ev=Be({\u0275dir:Be}),tv=Be({\u0275pipe:Be}),nv=Be({\u0275mod:Be}),Xl=Be({\u0275fac:Be}),ks=Be({__NG_ELEMENT_ID__:Be}),jT=Be({__NG_ENV_ID__:Be});function Fs(n){return typeof n=="string"?n:n==null?"":String(n)}function _f(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Fs(n)}var rv=Be({ngErrorCode:Be}),zT=Be({ngErrorMessage:Be}),Jl=Be({ngTokenPath:Be});function iv(n,e){return HT("",-200,e)}function bf(n,e){throw new F(-201,!1)}function uV(n,e){n[Jl]??=[];let t=n[Jl],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?($T(e.provide,"Token with multi: true should have a provide property"),r=_f(e.provide)):r=_f(e),t[0]!==r&&n[Jl].unshift(r)}function dV(n,e){let t=n[Jl],r=n[rv],i=n[zT]||n.message;return n.message=fV(i,r,t,e),n}function HT(n,e,t){let r=new F(e,n);return r[rv]=e,r[zT]=n,t&&(r[Jl]=t),r}function hV(n){return n[rv]}function fV(n,e,t=[],r=null){let i="";t&&t.length>1&&(i=` Path: ${t.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return Ri(e,`${n}${o}${i}`)}var j_;function qT(){return j_}function dn(n){let e=j_;return j_=n,e}function ov(n,e,t){let r=tu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;bf(n,"Injector")}var pV={},As=pV,U_="__NG_DI_FLAG__",B_=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Os(t)||0;try{return this.injector.get(e,r&8?null:As,r)}catch(i){if(za(i))return i;throw i}}};function gV(n,e=0){let t=Ah();if(t===void 0)throw new F(-203,!1);if(t===null)return ov(n,void 0,e);{let r=mV(e),i=t.retrieve(n,r);if(za(i)){if(r.optional)return null;throw i}return i}}function ee(n,e=0){return(qT()||gV)($t(n),e)}function k(n,e){return ee(n,Os(e))}function Os(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function mV(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function $_(n){let e=[];for(let t=0;t<n.length;t++){let r=$t(n[t]);if(Array.isArray(r)){if(r.length===0)throw new F(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=yV(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ee(i,o))}else e.push(ee(r))}return e}function sv(n,e){return n[U_]=e,n.prototype[U_]=e,n}function yV(n){return n[U_]}function To(n,e){let t=n.hasOwnProperty(Xl);return t?n[Xl]:null}function WT(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function GT(n){return n.flat(Number.POSITIVE_INFINITY)}function If(n,e){n.forEach(t=>Array.isArray(t)?If(t,e):e(t))}function av(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function nu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function KT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Df(n,e,t){let r=ac(n,e);return r>=0?n[r|1]=t:(r=~r,KT(n,r,e,t)),r}function Sf(n,e){let t=ac(n,e);if(t>=0)return n[t|1]}function ac(n,e){return _V(n,e,1)}function _V(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Mo={},hn=[],ki=new Q(""),cv=new Q("",-1),lv=new Q(""),eu=class{get(e,t=As){if(t===As){let i=HT("",-201);throw i.name="\u0275NotFound",i}return t}};function uv(n){return n[nv]||null}function Fi(n){return n[X_]||null}function dv(n){return n[ev]||null}function YT(n){return n[tv]||null}function Lt(n){return{\u0275providers:n}}function QT(n){return Lt([{provide:ki,multi:!0,useValue:n}])}function ZT(...n){return{\u0275providers:hv(!0,n),\u0275fromNgModule:!0}}function hv(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return If(e,s=>{let a=s;vf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&JT(i,o),t}function JT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];fv(i,o=>{e(o,r)})}}function vf(n,e,t,r){if(n=$t(n),!n)return!1;let i=null,o=V_(n),s=!o&&Fi(n);if(!o&&!s){let c=n.ngModule;if(o=V_(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)vf(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{If(o.imports,d=>{vf(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&JT(u,e)}if(!a){let u=To(i)||(()=>new i);e({provide:i,useFactory:u,deps:hn},i),e({provide:lv,useValue:i,multi:!0},i),e({provide:ki,useValue:()=>ee(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;fv(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function fv(n,e){for(let t of n)J_(t)&&(t=t.\u0275providers),Array.isArray(t)?fv(t,e):e(t)}var vV=Be({provide:String,useValue:Be});function XT(n){return n!==null&&typeof n=="object"&&vV in n}function CV(n){return!!(n&&n.useExisting)}function EV(n){return!!(n&&n.useFactory)}function Rs(n){return typeof n=="function"}function ex(n){return!!n.useClass}var ru=new Q(""),mf={},UT={},L_;function iu(){return L_===void 0&&(L_=new eu),L_}var vt=class{},Ns=class extends vt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,H_(e,s=>this.processProvider(s)),this.records.set(cv,sc(void 0,this)),i.has("environment")&&this.records.set(vt,sc(void 0,this));let o=this.records.get(ru);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lv,hn,{self:!0}))}retrieve(e,t){let r=Os(t)||0;try{return this.get(e,As,r)}catch(i){if(za(i))return i;throw i}}destroy(){Zl(this),this._destroyed=!0;let e=we(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),we(e)}}onDestroy(e){return Zl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Zl(this);let t=Vr(this),r=dn(void 0),i;try{return e()}finally{Vr(t),dn(r)}}get(e,t=As,r){if(Zl(this),e.hasOwnProperty(jT))return e[jT](this);let i=Os(r),o,s=Vr(this),a=dn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let d=SV(e)&&tu(e);d&&this.injectableDefInScope(d)?u=sc(z_(e),mf):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?iu():this.parent;return t=i&8&&t===As?null:t,c.get(e,t)}catch(c){let u=hV(c);throw u===-200||u===-201?new F(u,null):c}finally{dn(a),Vr(s)}}resolveInjectorInitializers(){let e=we(null),t=Vr(this),r=dn(void 0),i;try{let o=this.get(ki,hn,{self:!0});for(let s of o)s()}finally{Vr(t),dn(r),we(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ai(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=$t(e);let t=Rs(e)?e:$t(e&&e.provide),r=bV(e);if(!Rs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=sc(void 0,mf,!0),i.factory=()=>$_(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=we(null);try{if(t.value===UT)throw iv(Ai(e));return t.value===mf&&(t.value=UT,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&DV(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{we(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=$t(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function z_(n){let e=tu(n),t=e!==null?e.factory:To(n);if(t!==null)return t;if(n instanceof Q)throw new F(204,!1);if(n instanceof Function)return wV(n);throw new F(204,!1)}function wV(n){if(n.length>0)throw new F(204,!1);let t=lV(n);return t!==null?()=>t.factory(n):()=>new n}function bV(n){if(XT(n))return sc(void 0,n.useValue);{let e=pv(n);return sc(e,mf)}}function pv(n,e,t){let r;if(Rs(n)){let i=$t(n);return To(i)||z_(i)}else if(XT(n))r=()=>$t(n.useValue);else if(EV(n))r=()=>n.useFactory(...$_(n.deps||[]));else if(CV(n))r=(i,o)=>ee($t(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=$t(n&&(n.useClass||n.provide));if(IV(n))r=()=>new i(...$_(n.deps));else return To(i)||z_(i)}return r}function Zl(n){if(n.destroyed)throw new F(205,!1)}function sc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function IV(n){return!!n.deps}function DV(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function SV(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function H_(n,e){for(let t of n)Array.isArray(t)?H_(t,e):t&&J_(t)?H_(t.\u0275providers,e):e(t)}function wt(n,e){let t;n instanceof Ns?(Zl(n),t=n):t=new B_(n);let r,i=Vr(t),o=dn(void 0);try{return e()}finally{Vr(i),dn(o)}}function tx(){return qT()!==void 0||Ah()!=null}var mr=0,fe=1,ge=2,Ft=3,Kn=4,Yn=5,ou=6,cc=7,en=8,Ls=9,jr=10,ct=11,lc=12,gv=13,Vs=14,Qn=15,Po=16,js=17,Ur=18,su=19,mv=20,Pi=21,Tf=22,au=23,Fn=24,Us=25,zt=26,nx=1;var Ao=7,cu=8,Bs=9,fn=10;function Br(n){return Array.isArray(n)&&typeof n[nx]=="object"}function yr(n){return Array.isArray(n)&&n[nx]===!0}function yv(n){return(n.flags&4)!==0}function Oo(n){return n.componentOffset>-1}function lu(n){return(n.flags&1)===1}function $r(n){return!!n.template}function uc(n){return(n[ge]&512)!==0}function $s(n){return(n[ge]&256)===256}var _v="svg",rx="math";function Zn(n){for(;Array.isArray(n);)n=n[mr];return n}function vv(n,e){return Zn(e[n])}function _r(n,e){return Zn(e[n.index])}function xf(n,e){return n.data[e]}function Mf(n,e){return n[e]}function Cv(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Jn(n,e){let t=e[n];return Br(t)?t:t[mr]}function ix(n){return(n[ge]&4)===4}function Pf(n){return(n[ge]&128)===128}function ox(n){return yr(n[Ft])}function uu(n,e){return e==null?null:n[e]}function Ev(n){n[js]=0}function wv(n){n[ge]&1024||(n[ge]|=1024,Pf(n)&&dc(n))}function sx(n,e){for(;n>0;)e=e[Vs],n--;return e}function du(n){return!!(n[ge]&9216||n[Fn]?.dirty)}function Af(n){n[jr].changeDetectionScheduler?.notify(8),n[ge]&64&&(n[ge]|=1024),du(n)&&dc(n)}function dc(n){n[jr].changeDetectionScheduler?.notify(0);let e=xo(n);for(;e!==null&&!(e[ge]&8192||(e[ge]|=8192,!Pf(e)));)e=xo(e)}function bv(n,e){if($s(n))throw new F(911,!1);n[Pi]===null&&(n[Pi]=[]),n[Pi].push(e)}function ax(n,e){if(n[Pi]===null)return;let t=n[Pi].indexOf(e);t!==-1&&n[Pi].splice(t,1)}function xo(n){let e=n[Ft];return yr(e)?e[Ft]:e}function Iv(n){return n[cc]??=[]}function Dv(n){return n.cleanup??=[]}function cx(n,e,t,r){let i=Iv(e);i.push(t),n.firstCreatePass&&Dv(n).push(r,i.length-1)}var be={lFrame:Dx(null),bindingsEnabled:!0,skipHydrationRootTNode:null},hu=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(hu||{}),TV=0,q_=!1;function lx(){return be.lFrame.elementDepthCount}function ux(){be.lFrame.elementDepthCount++}function dx(){be.lFrame.elementDepthCount--}function Sv(){return be.bindingsEnabled}function hx(){return be.skipHydrationRootTNode!==null}function fx(n){return be.skipHydrationRootTNode===n}function px(){be.skipHydrationRootTNode=null}function Pe(){return be.lFrame.lView}function Ht(){return be.lFrame.tView}function W(n){return be.lFrame.contextLView=n,n[en]}function G(n){return be.lFrame.contextLView=null,n}function qt(){let n=Tv();for(;n!==null&&n.type===64;)n=n.parent;return n}function Tv(){return be.lFrame.currentTNode}function gx(){let n=be.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function hc(n,e){let t=be.lFrame;t.currentTNode=n,t.isParent=e}function xv(){return be.lFrame.isParent}function mx(){be.lFrame.isParent=!1}function yx(){return be.lFrame.contextLView}function Mv(n){Q_("Must never be called in production mode"),TV=n}function Pv(){return q_}function Av(n){let e=q_;return q_=n,e}function Of(){let n=be.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function _x(){return be.lFrame.bindingIndex}function vx(n){return be.lFrame.bindingIndex=n}function fu(){return be.lFrame.bindingIndex++}function Rf(n){let e=be.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Cx(){return be.lFrame.inI18n}function Ex(n,e){let t=be.lFrame;t.bindingIndex=t.bindingRootIndex=n,Nf(e)}function wx(){return be.lFrame.currentDirectiveIndex}function Nf(n){be.lFrame.currentDirectiveIndex=n}function bx(n){let e=be.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Ov(){return be.lFrame.currentQueryIndex}function kf(n){be.lFrame.currentQueryIndex=n}function xV(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[Yn]:null}function Rv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=xV(o),i===null||(o=o[Vs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=be.lFrame=Ix();return r.currentTNode=e,r.lView=n,!0}function Ff(n){let e=Ix(),t=n[fe];be.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ix(){let n=be.lFrame,e=n===null?null:n.child;return e===null?Dx(n):e}function Dx(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Sx(){let n=be.lFrame;return be.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Nv=Sx;function Lf(){let n=Sx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Tx(n){return(be.lFrame.contextLView=sx(n,be.lFrame.contextLView))[en]}function Li(){return be.lFrame.selectedIndex}function Ro(n){be.lFrame.selectedIndex=n}function Vf(){let n=be.lFrame;return xf(n.tView,n.selectedIndex)}function jf(){be.lFrame.currentNamespace=_v}function xx(){return be.lFrame.currentNamespace}var Mx=!0;function Uf(){return Mx}function Bf(n){Mx=n}function W_(n,e=null,t=null,r){let i=kv(n,e,t,r);return i.resolveInjectorInitializers(),i}function kv(n,e=null,t=null,r,i=new Set){let o=[t||hn,ZT(n)];return r=r||(typeof n=="object"?void 0:Ai(n)),new Ns(o,e||iu(),r||null,i)}var Qe=class n{static THROW_IF_NOT_FOUND=As;static NULL=new eu;static create(e,t){if(Array.isArray(e))return W_({name:""},t,e,"");{let r=e.name??"";return W_({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>ee(cv)});static __NG_ELEMENT_ID__=-1},lt=new Q(""),Xn=(()=>{class n{static __NG_ELEMENT_ID__=MV;static __NG_ENV_ID__=t=>t}return n})(),G_=class extends Xn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return $s(this._lView)}onDestroy(e){let t=this._lView;return bv(t,e),()=>ax(t,e)}};function MV(){return new G_(Pe())}var gr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},tn=new Q("",{providedIn:"root",factory:()=>{let n=k(vt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(gr),e.handleError(t))}}}),Px={provide:ki,useValue:()=>void k(gr),multi:!0},PV=new Q("",{providedIn:"root",factory:()=>{let n=k(lt).defaultView;if(!n)return;let e=k(tn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),k(Xn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function Fv(){return Lt([QT(()=>void k(PV))])}function Lv(n){return typeof n=="function"&&n[Xt]!==void 0}function zr(n,e){let[t,r,i]=y_(n,e?.equal),o=t,s=o[Xt];return o.set=r,o.update=i,o.asReadonly=Ax.bind(o),o}function Ax(){let n=this[Xt];if(n.readonlyFn===void 0){let e=()=>this();e[Xt]=n,n.readonlyFn=e}return n.readonlyFn}function Vv(n){return Lv(n)&&typeof n.set=="function"}var Oi=class{},pu=new Q("",{providedIn:"root",factory:()=>!1});var jv=new Q(""),Uv=new Q("");var $f=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=AV}return n})();function AV(){return new $f(Pe(),qt())}var Hr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new at(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new de(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),fc=(()=>{class n{internalPendingTasks=k(Hr);scheduler=k(Oi);errorHandler=k(tn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})();function gu(...n){}var Bv=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new K_})}return n})(),K_=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function _c(n){return{toString:n}.toString()}var zf="__parameters__";function VV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function cM(n,e,t){return _c(()=>{let r=VV(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(zf)?c[zf]:Object.defineProperty(c,zf,{value:[]})[zf];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var bt=sv(cM("Optional"),8);var D0=sv(cM("SkipSelf"),4);function jV(n){return typeof n=="function"}var Qf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function lM(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Wr=(()=>{let n=()=>uM;return n.ngInherit=!0,n})();function uM(n){return n.type.prototype.ngOnChanges&&(n.setInput=BV),UV}function UV(){let n=hM(this),e=n?.current;if(e){let t=n.previous;if(t===Mo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function BV(n,e,t,r,i){let o=this.declaredInputs[r],s=hM(n)||$V(n,{previous:Mo,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Qf(u&&u.currentValue,t,c===Mo),lM(n,e,i,t)}var dM="__ngSimpleChanges__";function hM(n){return n[dM]||null}function $V(n,e){return n[dM]=e}var Ox=[];var ze=function(n,e=null,t){for(let r=0;r<Ox.length;r++){let i=Ox[r];i(n,e,t)}};function zV(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=uM(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function fM(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Wf(n,e,t){pM(n,e,3,t)}function Gf(n,e,t,r){(n[ge]&3)===t&&pM(n,e,t,r)}function $v(n,e){let t=n[ge];(t&3)===e&&(t&=16383,t+=1,n[ge]=t)}function pM(n,e,t,r){let i=r!==void 0?n[js]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[js]+=65536),(a<o||o==-1)&&(HV(n,t,e,c),n[js]=(n[js]&4294901760)+c+2),c++}function Rx(n,e){ze(4,n,e);let t=we(null);try{e.call(n)}finally{we(t),ze(5,n,e)}}function HV(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ge]>>14<n[js]>>16&&(n[ge]&3)===e&&(n[ge]+=16384,Rx(a,o)):Rx(a,o)}var gc=-1,qs=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function qV(n){return(n.flags&8)!==0}function WV(n){return(n.flags&16)!==0}function GV(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];KV(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function gM(n){return n===3||n===4||n===6}function KV(n){return n.charCodeAt(0)===64}function _u(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Nx(n,t,i,null,e[++r]):Nx(n,t,i,null,null))}}return n}function Nx(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function mM(n){return n!==gc}function Zf(n){return n&32767}function YV(n){return n>>16}function Jf(n,e){let t=YV(n),r=e;for(;t>0;)r=r[Vs],t--;return r}var Xv=!0;function Xf(n){let e=Xv;return Xv=n,e}var QV=256,yM=QV-1,_M=5,ZV=0,qr={};function JV(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ks)&&(r=t[ks]),r==null&&(r=t[ks]=ZV++);let i=r&yM,o=1<<i;e.data[n+(i>>_M)]|=o}function ep(n,e){let t=vM(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,zv(r.data,n),zv(e,null),zv(r.blueprint,null));let i=S0(n,e),o=n.injectorIndex;if(mM(i)){let s=Zf(i),a=Jf(i,e),c=a[fe].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function zv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vM(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function S0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=IM(i),r===null)return gc;if(t++,i=i[Vs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return gc}function e0(n,e,t){JV(n,e,t)}function XV(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(gM(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function CM(n,e,t){if(t&8||n!==void 0)return n;bf(e,"NodeInjector")}function EM(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ls],o=dn(void 0);try{return i?i.get(e,r,t&8):ov(e,r,t&8)}finally{dn(o)}}return CM(r,e,t)}function wM(n,e,t,r=0,i){if(n!==null){if(e[ge]&2048&&!(r&2)){let s=rj(n,e,t,r,qr);if(s!==qr)return s}let o=bM(n,e,t,r,qr);if(o!==qr)return o}return EM(e,t,r,i)}function bM(n,e,t,r,i){let o=tj(t);if(typeof o=="function"){if(!Rv(e,n,r))return r&1?CM(i,t,r):EM(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))bf(t);else return s}finally{Nv()}}else if(typeof o=="number"){let s=null,a=vM(n,e),c=gc,u=r&1?e[Qn][Yn]:null;for((a===-1||r&4)&&(c=a===-1?S0(n,e):e[a+8],c===gc||!Fx(r,!1)?a=-1:(s=e[fe],a=Zf(c),e=Jf(c,e)));a!==-1;){let d=e[fe];if(kx(o,a,d.data)){let f=ej(a,e,t,s,r,u);if(f!==qr)return f}c=e[a+8],c!==gc&&Fx(r,e[fe].data[a+8]===u)&&kx(o,a,e)?(s=d,a=Zf(c),e=Jf(c,e)):a=-1}}return i}function ej(n,e,t,r,i,o){let s=e[fe],a=s.data[n+8],c=r==null?Oo(a)&&Xv:r!=s&&(a.type&3)!==0,u=i&1&&o===a,d=Kf(a,s,t,c,u);return d!==null?vu(e,s,d,a,i):qr}function Kf(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,f=r?a:a+d,y=i?a+d:u;for(let _=f;_<y;_++){let b=s[_];if(_<c&&t===b||_>=c&&b.type===t)return _}if(i){let _=s[c];if(_&&$r(_)&&_.type===t)return c}return null}function vu(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof qs){let a=o;if(a.resolving){let _=_f(s[t]);throw iv(_)}let c=Xf(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],d,f=a.injectImpl?dn(a.injectImpl):null,y=Rv(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&zV(t,s[t],e)}finally{f!==null&&dn(f),Xf(c),a.resolving=!1,Nv()}}return o}function tj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ks)?n[ks]:void 0;return typeof e=="number"?e>=0?e&yM:nj:e}function kx(n,e,t){let r=1<<n;return!!(t[e+(n>>_M)]&r)}function Fx(n,e){return!(n&2)&&!(n&1&&e)}var Hs=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return wM(this._tNode,this._lView,e,Os(r),t)}};function nj(){return new Hs(qt(),Pe())}function wr(n){return _c(()=>{let e=n.prototype.constructor,t=e[Xl]||t0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Xl]||t0(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function t0(n){return Y_(n)?()=>{let e=t0($t(n));return e&&e()}:To(n)}function rj(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ge]&2048&&!uc(s);){let a=bM(o,s,t,r|2,qr);if(a!==qr)return a;let c=o.parent;if(!c){let u=s[mv];if(u){let d=u.get(t,qr,r);if(d!==qr)return d}c=IM(s),s=s[Vs]}o=c}return i}function IM(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[Yn]:null}function bu(n){return XV(qt(),n)}function ij(){return vc(qt(),Pe())}function vc(n,e){return new Wt(_r(n,e))}var Wt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=ij}return n})();function oj(n){return n instanceof Wt?n.nativeElement:n}function sj(){return this._results[Symbol.iterator]()}var tp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new nt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=GT(e);(this._changesDetected=!WT(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=sj};function DM(n){return(n.flags&128)===128}var T0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(T0||{}),SM=new Map,aj=0;function cj(){return aj++}function lj(n){SM.set(n[su],n)}function n0(n){SM.delete(n[su])}var Lx="__ngContext__";function mc(n,e){Br(e)?(n[Lx]=e[su],lj(e)):n[Lx]=e}function TM(n){return MM(n[lc])}function xM(n){return MM(n[Kn])}function MM(n){for(;n!==null&&!yr(n);)n=n[Kn];return n}var r0;function x0(n){r0=n}function PM(){if(r0!==void 0)return r0;if(typeof document<"u")return document;throw new F(210,!1)}var fp=new Q("",{providedIn:"root",factory:()=>uj}),uj="ng",pp=new Q(""),Fo=new Q("",{providedIn:"platform",factory:()=>"unknown"});var gp=new Q(""),mp=new Q("",{providedIn:"root",factory:()=>PM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dj="h",hj="b";var AM=!1,OM=new Q("",{providedIn:"root",factory:()=>AM});var fj=(n,e,t,r)=>{};function pj(n,e,t,r){fj(n,e,t,r)}function M0(n){return(n.flags&32)===32}var gj=()=>null;function RM(n,e,t=!1){return gj(n,e,t)}function NM(n,e){let t=n.contentQueries;if(t!==null){let r=we(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];kf(o),a.contentQueries(2,e[s],s)}}}finally{we(r)}}}function i0(n,e,t){kf(0);let r=we(null);try{e(n,t)}finally{we(r)}}function kM(n,e,t){if(yv(e)){let r=we(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{we(r)}}}var Vi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Vi||{});var Hf;function mj(){if(Hf===void 0&&(Hf=null,Ni.trustedTypes))try{Hf=Ni.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Hf}function Vx(n){return mj()?.createScriptURL(n)||n}var np=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Cf})`}};function Cc(n){return n instanceof np?n.changingThisBreaksApplicationSecurity:n}function P0(n,e){let t=FM(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Cf})`)}return t===e}function FM(n){return n instanceof np&&n.getTypeName()||null}var yj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function LM(n){return n=String(n),n.match(yj)?n:"unsafe:"+n}var yp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(yp||{});function VM(n){let e=UM();return e?e.sanitize(yp.URL,n)||"":P0(n,"URL")?Cc(n):LM(Fs(n))}function jM(n){let e=UM();if(e)return Vx(e.sanitize(yp.RESOURCE_URL,n)||"");if(P0(n,"ResourceURL"))return Vx(Cc(n));throw new F(904,!1)}function _j(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?jM:VM}function A0(n,e,t){return _j(e,t)(n)}function UM(){let n=Pe();return n&&n[jr].sanitizer}function BM(n){return n instanceof Function?n():n}function vj(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var $M="ng-template";function Cj(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&vj(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(O0(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function O0(n){return n.type===4&&n.value!==$M}function Ej(n,e,t){let r=n.type===4&&!t?$M:n.value;return e===r}function wj(n,e,t){let r=4,i=n.attrs,o=i!==null?Dj(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!vr(r)&&!vr(c))return!1;if(s&&vr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Ej(n,c,t)||c===""&&e.length===1){if(vr(r))return!1;s=!0}}else if(r&8){if(i===null||!Cj(n,i,c,t)){if(vr(r))return!1;s=!0}}else{let u=e[++a],d=bj(c,i,O0(n),t);if(d===-1){if(vr(r))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(vr(r))return!1;s=!0}}}}return vr(r)||s}function vr(n){return(n&1)===0}function bj(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Sj(e,n)}function Ij(n,e,t=!1){for(let r=0;r<e.length;r++)if(wj(n,e[r],t))return!0;return!1}function Dj(n){for(let e=0;e<n.length;e++){let t=n[e];if(gM(t))return e}return n.length}function Sj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function jx(n,e){return n?":not("+e.trim()+")":e}function Tj(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!vr(s)&&(e+=jx(o,i),i=""),r=s,o=o||!vr(r);t++}return i!==""&&(e+=jx(o,i)),e}function xj(n){return n.map(Tj).join(",")}function Mj(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!vr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Ln={};function Pj(n,e){return n.createText(e)}function Aj(n,e,t){n.setValue(e,t)}function zM(n,e,t){return n.createElement(e,t)}function rp(n,e,t,r,i){n.insertBefore(e,t,r,i)}function HM(n,e,t){n.appendChild(e,t)}function Ux(n,e,t,r,i){r!==null?rp(n,e,t,r,i):HM(n,e,t)}function Oj(n,e,t){n.removeChild(null,e,t)}function Rj(n,e,t){n.setAttribute(e,"style",t)}function Nj(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function qM(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&GV(n,e,r),i!==null&&Nj(n,e,i),o!==null&&Rj(n,e,o)}function R0(n,e,t,r,i,o,s,a,c,u,d){let f=zt+r,y=f+i,_=kj(f,y),b=typeof u=="function"?u():u;return _[fe]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:d}}function kj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ln);return t}function Fj(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=R0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function N0(n,e,t,r,i,o,s,a,c,u,d){let f=e.blueprint.slice();return f[mr]=i,f[ge]=r|4|128|8|64|1024,(u!==null||n&&n[ge]&2048)&&(f[ge]|=2048),Ev(f),f[Ft]=f[Vs]=n,f[en]=t,f[jr]=s||n&&n[jr],f[ct]=a||n&&n[ct],f[Ls]=c||n&&n[Ls]||null,f[Yn]=o,f[su]=cj(),f[ou]=d,f[mv]=u,f[Qn]=e.type==2?n[Qn]:f,f}function Lj(n,e,t){let r=_r(e,n),i=Fj(t),o=n[jr].rendererFactory,s=k0(n,N0(n,i,null,WM(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function WM(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function GM(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function k0(n,e){return n[lc]?n[gv][Kn]=e:n[lc]=e,n[gv]=e,e}function I(n=1){KM(Ht(),Pe(),Li()+n,!1)}function KM(n,e,t,r){if(!r)if((e[ge]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Wf(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Gf(e,o,0,t)}Ro(t)}var _p=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(_p||{});function o0(n,e,t,r){let i=we(null);try{let[o,s,a]=n.inputs[t],c=null;(s&_p.SignalBased)!==0&&(c=e[o][Xt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):lM(e,c,o,r)}finally{we(i)}}var Er=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Er||{}),Vj;function F0(n,e){return Vj(n,e)}function pc(n,e,t,r,i){if(r!=null){let o,s=!1;yr(r)?o=r:Br(r)&&(s=!0,r=r[mr]);let a=Zn(r);n===0&&t!==null?i==null?HM(e,t,a):rp(e,t,a,i||null,!0):n===1&&t!==null?rp(e,t,a,i||null,!0):n===2?Oj(e,a,s):n===3&&e.destroyNode(a),o!=null&&Qj(e,n,o,t,i)}}function jj(n,e){YM(n,e),e[mr]=null,e[Yn]=null}function Uj(n,e,t,r,i,o){r[mr]=i,r[Yn]=e,vp(n,r,t,1,i,o)}function YM(n,e){e[jr].changeDetectionScheduler?.notify(9),vp(n,e,e[ct],2,null,null)}function Bj(n){let e=n[lc];if(!e)return Hv(n[fe],n);for(;e;){let t=null;if(Br(e))t=e[lc];else{let r=e[fn];r&&(t=r)}if(!t){for(;e&&!e[Kn]&&e!==n;)Br(e)&&Hv(e[fe],e),e=e[Ft];e===null&&(e=n),Br(e)&&Hv(e[fe],e),t=e&&e[Kn]}e=t}}function L0(n,e){let t=n[Bs],r=t.indexOf(e);t.splice(r,1)}function QM(n,e){if($s(e))return;let t=e[ct];t.destroyNode&&vp(n,e,t,3,null,null),Bj(e)}function Hv(n,e){if($s(e))return;let t=we(null);try{e[ge]&=-129,e[ge]|=256,e[Fn]&&jh(e[Fn]),zj(n,e),$j(n,e),e[fe].type===1&&e[ct].destroy();let r=e[Po];if(r!==null&&yr(e[Ft])){r!==e[Ft]&&L0(r,e);let i=e[Ur];i!==null&&i.detachView(n)}n0(e)}finally{we(t)}}function $j(n,e){let t=n.cleanup,r=e[cc];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[cc]=null);let i=e[Pi];if(i!==null){e[Pi]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[au];if(o!==null){e[au]=null;for(let s of o)s.destroy()}}function zj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof qs)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ze(4,a,c);try{c.call(a)}finally{ze(5,a,c)}}else{ze(4,i,o);try{o.call(i)}finally{ze(5,i,o)}}}}}function Hj(n,e,t){return qj(n,e.parent,t)}function qj(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[mr];if(Oo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Vi.None||i===Vi.Emulated)return null}return _r(r,t)}function Wj(n,e,t){return Kj(n,e,t)}function Gj(n,e,t){return n.type&40?_r(n,t):null}var Kj=Gj,Bx;function V0(n,e,t,r){let i=Hj(n,r,e),o=e[ct],s=r.parent||e[Yn],a=Wj(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Ux(o,i,t[c],a,!1);else Ux(o,i,t,a,!1);Bx!==void 0&&Bx(o,r,e,t,i)}function mu(n,e){if(e!==null){let t=e.type;if(t&3)return _r(e,n);if(t&4)return s0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return mu(n,r);{let i=n[e.index];return yr(i)?s0(-1,i):Zn(i)}}else{if(t&128)return mu(n,e.next);if(t&32)return F0(e,n)()||Zn(n[e.index]);{let r=ZM(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=xo(n[Qn]);return mu(i,r)}else return mu(n,e.next)}}}return null}function ZM(n,e){if(e!==null){let r=n[Qn][Yn],i=e.projection;return r.projection[i]}return null}function s0(n,e){let t=fn+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return mu(r,i)}return e[Ao]}function j0(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&mc(Zn(a),r),t.flags|=2),!M0(t))if(c&8)j0(n,e,t.child,r,i,o,!1),pc(e,n,i,a,o);else if(c&32){let u=F0(t,r),d;for(;d=u();)pc(e,n,i,d,o);pc(e,n,i,a,o)}else c&16?Yj(n,e,r,t,i,o):pc(e,n,i,a,o);t=s?t.projectionNext:t.next}}function vp(n,e,t,r,i,o){j0(t,r,n.firstChild,e,i,o,!1)}function Yj(n,e,t,r,i,o){let s=t[Qn],c=s[Yn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];pc(e,n,i,d,o)}else{let u=c,d=s[Ft];DM(r)&&(u.flags|=128),j0(n,e,u,d,i,o,!0)}}function Qj(n,e,t,r,i){let o=t[Ao],s=Zn(t);o!==s&&pc(e,n,r,o,i);for(let a=fn;a<t.length;a++){let c=t[a];vp(c[fe],c,n,e,r,o)}}function Zj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Er.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Er.Important),n.setStyle(t,r,i,o))}}function JM(n,e,t,r,i){let o=Li(),s=r&2;try{Ro(-1),s&&e.length>zt&&KM(n,e,zt,!1),ze(s?2:0,i,t),t(r,i)}finally{Ro(o),ze(s?3:1,i,t)}}function U0(n,e,t){iU(n,e,t),(t.flags&64)===64&&oU(n,e,t)}function XM(n,e,t=_r){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Jj(n,e,t,r){let o=r.get(OM,AM)||t===Vi.ShadowDom,s=n.selectRootElement(e,o);return Xj(s),s}function Xj(n){eU(n)}var eU=()=>null;function tU(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function eP(n,e,t,r,i,o){let s=e[fe];if(B0(n,s,e,t,r)){Oo(n)&&rU(e,n.index);return}n.type&3&&(t=tU(t)),nU(n,e,t,r,i,o)}function nU(n,e,t,r,i,o){if(n.type&3){let s=_r(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function rU(n,e){let t=Jn(e,n);t[ge]&16||(t[ge]|=64)}function iU(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Oo(t)&&Lj(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||ep(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=vu(e,n,s,t);if(mc(c,e),o!==null&&lU(e,s-r,c,a,t,o),$r(a)){let u=Jn(t.index,e);u[en]=vu(e,n,s,t)}}}function oU(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=wx();try{Ro(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Nf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&sU(c,u)}}finally{Ro(-1),Nf(s)}}function sU(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tP(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Ij(e,o.selectors,!1)&&(r??=[],$r(o)?r.unshift(o):r.push(o))}return r}function aU(n,e,t,r,i,o){let s=_r(n,e);cU(e[ct],s,o,n.value,t,r,i)}function cU(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Fs(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function lU(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];o0(r,t,c,u)}}function uU(n,e,t,r,i){let o=zt+t,s=e[fe],a=i(s,e,n,r,t);e[o]=a,hc(n,!0);let c=n.type===2;return c?(qM(e[ct],a,n),(lx()===0||lu(n))&&mc(a,e),ux()):mc(a,e),Uf()&&(!c||!M0(n))&&V0(s,e,a,n),n}function dU(n){let e=n;return xv()?mx():(e=e.parent,hc(e,!1)),e}function hU(n,e){let t=n[Ls];if(!t)return;t.get(tn,null)?.(e)}function B0(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1],f=e.data[u];o0(f,t[u],d,i),a=!0}if(o)for(let c of o){let u=t[c],d=e.data[c];o0(d,u,r,i),a=!0}return a}function fU(n,e){let t=Jn(e,n),r=t[fe];pU(r,t);let i=t[mr];i!==null&&t[ou]===null&&(t[ou]=RM(i,t[Ls])),ze(18),$0(r,t,t[en]),ze(19,t[en])}function pU(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function $0(n,e,t){Ff(e);try{let r=n.viewQuery;r!==null&&i0(1,r,t);let i=n.template;i!==null&&JM(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ur]?.finishViewCreation(n),n.staticContentQueries&&NM(n,e),n.staticViewQueries&&i0(2,n.viewQuery,t);let o=n.components;o!==null&&gU(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ge]&=-5,Lf()}}function gU(n,e){for(let t=0;t<e.length;t++)fU(n,e[t])}function mU(n,e,t,r){let i=we(null);try{let o=e.tView,a=n[ge]&4096?4096:16,c=N0(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Po]=u;let d=n[Ur];return d!==null&&(c[Ur]=d.createEmbeddedView(o)),$0(o,c,t),c}finally{we(i)}}function $x(n,e){return!e||e.firstChild===null||DM(n)}var zx=!1,yU=new Q("");function Cu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Zn(o)),yr(o)&&nP(o,r);let s=t.type;if(s&8)Cu(n,e,t.child,r);else if(s&32){let a=F0(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=ZM(e,t);if(Array.isArray(a))r.push(...a);else{let c=xo(e[Qn]);Cu(c[fe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function nP(n,e){for(let t=fn;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&Cu(r[fe],r,i,e)}n[Ao]!==n[mr]&&e.push(n[Ao])}function rP(n){if(n[Us]!==null){for(let e of n[Us])e.impl.addSequence(e);n[Us].length=0}}var iP=[];function _U(n){return n[Fn]??vU(n)}function vU(n){let e=iP.pop()??Object.create(EU);return e.lView=n,e}function CU(n){n.lView[Fn]!==n&&(n.lView=null,iP.push(n))}var EU=ce(V({},Is),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{dc(n.lView)},consumerOnSignalRead(){this.lView[Fn]=this}});function wU(n){let e=n[Fn]??Object.create(bU);return e.lView=n,e}var bU=ce(V({},Is),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=xo(n.lView);for(;e&&!oP(e[fe]);)e=xo(e);e&&wv(e)},consumerOnSignalRead(){this.lView[Fn]=this}});function oP(n){return n.type!==2}function sP(n){if(n[au]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[au])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ge]&8192)}}var IU=100;function z0(n,e=0){let r=n[jr].rendererFactory,i=!1;i||r.begin?.();try{DU(n,e)}finally{i||r.end?.()}}function DU(n,e){let t=Pv();try{Av(!0),a0(n,e);let r=0;for(;du(n);){if(r===IU)throw new F(103,!1);r++,a0(n,1)}}finally{Av(t)}}function aP(n,e){Mv(e?hu.Exhaustive:hu.OnlyDirtyViews);try{z0(n)}finally{Mv(hu.Off)}}function SU(n,e,t,r){if($s(e))return;let i=e[ge],o=!1,s=!1;Ff(e);let a=!0,c=null,u=null;o||(oP(n)?(u=_U(e),c=Ds(u)):Lh()===null?(a=!1,u=wU(e),c=Ds(u)):e[Fn]&&(jh(e[Fn]),e[Fn]=null));try{Ev(e),vx(n.bindingStartIndex),t!==null&&JM(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let _=n.preOrderCheckHooks;_!==null&&Wf(e,_,null)}else{let _=n.preOrderHooks;_!==null&&Gf(e,_,0,null),$v(e,0)}if(s||TU(e),sP(e),cP(e,0),n.contentQueries!==null&&NM(n,e),!o)if(d){let _=n.contentCheckHooks;_!==null&&Wf(e,_)}else{let _=n.contentHooks;_!==null&&Gf(e,_,1),$v(e,1)}MU(n,e);let f=n.components;f!==null&&uP(e,f,0);let y=n.viewQuery;if(y!==null&&i0(2,y,r),!o)if(d){let _=n.viewCheckHooks;_!==null&&Wf(e,_)}else{let _=n.viewHooks;_!==null&&Gf(e,_,2),$v(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Tf]){for(let _ of e[Tf])_();e[Tf]=null}o||(rP(e),e[ge]&=-73)}catch(d){throw o||dc(e),d}finally{u!==null&&(qa(u,c),a&&CU(u)),Lf()}}function cP(n,e){for(let t=TM(n);t!==null;t=xM(t))for(let r=fn;r<t.length;r++){let i=t[r];lP(i,e)}}function TU(n){for(let e=TM(n);e!==null;e=xM(e)){if(!(e[ge]&2))continue;let t=e[Bs];for(let r=0;r<t.length;r++){let i=t[r];wv(i)}}}function xU(n,e,t){ze(18);let r=Jn(e,n);lP(r,t),ze(19,r[en])}function lP(n,e){Pf(n)&&a0(n,e)}function a0(n,e){let r=n[fe],i=n[ge],o=n[Fn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Wl(o)),s||=!1,o&&(o.dirty=!1),n[ge]&=-9217,s)SU(r,n,r.template,n[en]);else if(i&8192){let a=we(null);try{sP(n),cP(n,1);let c=r.components;c!==null&&uP(n,c,1),rP(n)}finally{we(a)}}}function uP(n,e,t){for(let r=0;r<e.length;r++)xU(n,e[r],t)}function MU(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ro(~i);else{let o=i,s=t[++r],a=t[++r];Ex(s,o);let c=e[o];ze(24,c),a(2,c),ze(25,c)}}}finally{Ro(-1)}}function H0(n,e){let t=Pv()?64:1088;for(n[jr].changeDetectionScheduler?.notify(e);n;){n[ge]|=t;let r=xo(n);if(uc(n)&&!r)return n;n=r}return null}function dP(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function PU(n,e,t,r=!0){let i=e[fe];if(AU(i,e,n,t),r){let s=s0(t,n),a=e[ct],c=a.parentNode(n[Ao]);c!==null&&Uj(i,n[Yn],a,e,c,s)}let o=e[ou];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function c0(n,e){if(n.length<=fn)return;let t=fn+e,r=n[t];if(r){let i=r[Po];i!==null&&i!==n&&L0(i,r),e>0&&(n[t-1][Kn]=r[Kn]);let o=nu(n,fn+e);jj(r[fe],r);let s=o[Ur];s!==null&&s.detachView(o[fe]),r[Ft]=null,r[Kn]=null,r[ge]&=-129}return r}function AU(n,e,t,r){let i=fn+r,o=t.length;r>0&&(t[i-1][Kn]=e),r<o-fn?(e[Kn]=t[i],av(t,fn+r,e)):(t.push(e),e[Kn]=null),e[Ft]=t;let s=e[Po];s!==null&&t!==s&&hP(s,e);let a=e[Ur];a!==null&&a.insertView(n),Af(e),e[ge]|=128}function hP(n,e){let t=n[Bs],r=e[Ft];if(Br(r))n[ge]|=2;else{let i=r[Ft][Qn];e[Qn]!==i&&(n[ge]|=2)}t===null?n[Bs]=[e]:t.push(e)}var No=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[fe];return Cu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[en]}set context(e){this._lView[en]=e}get destroyed(){return $s(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ft];if(yr(e)){let t=e[cu],r=t?t.indexOf(this):-1;r>-1&&(c0(e,r),nu(t,r))}this._attachedToViewContainer=!1}QM(this._lView[fe],this._lView)}onDestroy(e){bv(this._lView,e)}markForCheck(){H0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ge]&=-129}reattach(){Af(this._lView),this._lView[ge]|=128}detectChanges(){this._lView[ge]|=1024,z0(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Ls].get(yU,zx)}catch{this.exhaustive=zx}}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=uc(this._lView),t=this._lView[Po];t!==null&&!e&&L0(t,this._lView),YM(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e;let t=uc(this._lView),r=this._lView[Po];r!==null&&!t&&hP(r,this._lView),Af(this._lView)}};var ko=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=OU;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=mU(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new No(o)}}return n})();function OU(){return Cp(qt(),Pe())}function Cp(n,e){return n.type&4?new ko(e,n,vc(n,e)):null}function q0(n,e,t,r,i){let o=n.data[e];if(o===null)o=RU(n,e,t,r,i),Cx()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=gx();o.injectorIndex=s===null?-1:s.injectorIndex}return hc(o,!0),o}function RU(n,e,t,r,i){let o=Tv(),s=xv(),a=s?o:o&&o.parent,c=n.data[e]=kU(n,a,t,e,r,i);return NU(n,c,o,s),c}function NU(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function kU(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return hx()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Nne=new RegExp(`^(\\d+)*(${hj}|${dj})*(.*)`);var FU=()=>null;function Hx(n,e){return FU(n,e)}var fP=class{},Ep=class{},l0=class{resolveComponentFactory(e){throw new F(917,!1)}},Iu=class{static NULL=new l0},ji=class{},Vn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>LU()}return n})();function LU(){let n=Pe(),e=qt(),t=Jn(e.index,n);return(Br(t)?t:n)[ct]}var pP=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var Yf={},u0=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Yf,r);return i!==Yf||t===Yf?i:this.parentInjector.get(e,t,r)}};function qx(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ef(i,a);else if(o==2){let c=a,u=e[++s];r=Ef(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function z(n,e=0){let t=Pe();if(t===null)return ee(n,e);let r=qt();return wM(r,t,$t(n),e)}function W0(){let n="invalid";throw new Error(n)}function gP(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,u=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,c,u]=d.resolveHostDirectives(s);break}UU(n,e,t,a,o,c,u)}o!==null&&r!==null&&VU(t,r,o)}function VU(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new F(-301,!1);r.push(e[i],o)}}function jU(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function UU(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let y=0;y<a;y++){let _=r[y];!c&&$r(_)&&(c=!0,jU(n,t,y)),e0(ep(t,e),n,_.type)}WU(t,n.data.length,a);for(let y=0;y<a;y++){let _=r[y];_.providersResolver&&_.providersResolver(_)}let u=!1,d=!1,f=GM(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let y=0;y<a;y++){let _=r[y];if(t.mergedAttrs=_u(t.mergedAttrs,_.hostAttrs),$U(n,t,e,f,_),qU(f,_,i),s!==null&&s.has(_)){let[P,R]=s.get(_);t.directiveToIndex.set(_.type,[f,P+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(_))&&t.directiveToIndex.set(_.type,f);_.contentQueries!==null&&(t.flags|=4),(_.hostBindings!==null||_.hostAttrs!==null||_.hostVars!==0)&&(t.flags|=64);let b=_.type.prototype;!u&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(b.ngOnChanges||b.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}BU(n,t,o)}function BU(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Wx(0,e,i,r),Wx(1,e,i,r),Kx(e,r,!1);else{let o=t.get(i);Gx(0,e,o,r),Gx(1,e,o,r),Kx(e,r,!0)}}}function Wx(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),mP(e,o)}}function Gx(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),mP(e,s)}}function mP(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Kx(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||O0(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function $U(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=To(i.type,!0)),s=new qs(o,$r(i),z,null);n.blueprint[r]=s,t[r]=s,zU(n,e,r,GM(n,t,i.hostVars,Ln),i)}function zU(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;HU(s)!=a&&s.push(a),s.push(t,r,o)}}function HU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function qU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;$r(e)&&(t[""]=n)}}function WU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function yP(n,e,t,r,i,o,s,a){let c=e[fe],u=c.consts,d=uu(u,s),f=q0(c,n,t,r,d);return o&&gP(c,e,f,uu(u,a),i),f.mergedAttrs=_u(f.mergedAttrs,f.attrs),f.attrs!==null&&qx(f,f.attrs,!1),f.mergedAttrs!==null&&qx(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function _P(n,e){fM(n,e),yv(e)&&n.queries.elementEnd(e)}function G0(n){return wp(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function vP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function wp(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function CP(n,e,t){return n[e]=t}function Ui(n,e,t){if(t===Ln)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function EP(n,e,t,r){let i=Ui(n,e,t);return Ui(n,e+1,r)||i}function qv(n,e,t){return function r(i){let o=Oo(n)?Jn(n.index,e):e;H0(o,5);let s=e[en],a=Yx(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=Yx(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Yx(n,e,t,r){let i=we(null);try{return ze(6,e,t),t(r)!==!1}catch(o){return hU(n,o),!1}finally{ze(7,e,t),we(i)}}function GU(n,e,t,r,i,o,s,a){let c=lu(n),u=!1,d=null;if(!r&&c&&(d=KU(e,t,o,n.index)),d!==null){let f=d.__ngLastListenerFn__||d;f.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,u=!0}else{let f=_r(n,t),y=r?r(f):f;pj(t,y,o,a);let _=i.listen(y,o,a),b=r?P=>r(Zn(P[n.index])):n.index;wP(b,e,t,o,a,_,!1)}return u}function KU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[cc],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function wP(n,e,t,r,i,o,s){let a=e.firstCreatePass?Dv(e):null,c=Iv(t),u=c.length;c.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function Qx(n,e,t,r,i,o){let s=e[t],a=e[fe],u=a.data[t].outputs[r],f=s[u].subscribe(o);wP(n.index,a,e,i,o,f,!0)}var d0=Symbol("BINDING");var ip=class extends Iu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Fi(e);return new Ws(t,this.ngModule)}};function YU(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&_p.SignalBased)!==0};return i&&(o.transform=i),o})}function QU(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function ZU(n,e,t){let r=e instanceof vt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new u0(t,r):t}function JU(n){let e=n.get(ji,null);if(e===null)throw new F(407,!1);let t=n.get(pP,null),r=n.get(Oi,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function XU(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return zM(e,t,t==="svg"?_v:t==="math"?rx:null)}var Ws=class extends Ep{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=YU(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=QU(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=xj(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){ze(22);let a=we(null);try{let c=this.componentDef,u=e5(r,c,s,o),d=ZU(c,i||this.ngModule,e),f=JU(d),y=f.rendererFactory.createRenderer(null,c),_=r?Jj(y,r,c.encapsulation,d):XU(c,y),b=s?.some(Zx)||o?.some(j=>typeof j!="function"&&j.bindings.some(Zx)),P=N0(null,u,null,512|WM(c),null,null,f,y,d,null,RM(_,d,!0));P[zt]=_,Ff(P);let R=null;try{let j=yP(zt,P,2,"#host",()=>u.directiveRegistry,!0,0);_&&(qM(y,_,j),mc(_,P)),U0(u,P,j),kM(u,j,P),_P(u,j),t!==void 0&&n5(j,this.ngContentSelectors,t),R=Jn(j.index,P),P[en]=R[en],$0(u,P,null)}catch(j){throw R!==null&&n0(R),n0(P),j}finally{ze(23),Lf()}return new op(this.componentType,P,!!b)}finally{we(a)}}};function e5(n,e,t,r){let i=n?["ng-version","20.1.3"]:Mj(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[d0].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let f=r[d];if(typeof f!="function")for(let y of f.bindings){a+=y[d0].requiredVars;let _=d+1;y.create&&(y.targetIdx=_,(o??=[]).push(y)),y.update&&(y.targetIdx=_,(s??=[]).push(y))}}let c=[e];if(r)for(let d of r){let f=typeof d=="function"?d:d.type,y=dv(f);c.push(y)}return R0(0,null,t5(o,s),1,a,c,null,null,null,[i],null)}function t5(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Zx(n){let e=n[d0].kind;return e==="input"||e==="twoWay"}var op=class extends fP{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=xf(t[fe],zt),this.location=vc(this._tNode,t),this.instance=Jn(this._tNode.index,t)[en],this.hostView=this.changeDetectorRef=new No(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=B0(r,i[fe],i,e,t);this.previousInputValues.set(e,t);let s=Jn(r.index,i);H0(s,1)}get injector(){return new Hs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function n5(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Bi=(()=>{class n{static __NG_ELEMENT_ID__=r5}return n})();function r5(){let n=qt();return IP(n,Pe())}var i5=Bi,bP=class extends i5{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return vc(this._hostTNode,this._hostLView)}get injector(){return new Hs(this._hostTNode,this._hostLView)}get parentInjector(){let e=S0(this._hostTNode,this._hostLView);if(mM(e)){let t=Jf(e,this._hostLView),r=Zf(e),i=t[fe].data[r+8];return new Hs(i,t)}else return new Hs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Jx(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-fn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Hx(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,$x(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!jV(e),u;if(c)u=t;else{let R=t||{};u=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let d=c?e:new Ws(Fi(e)),f=r||this.parentInjector;if(!o&&d.ngModule==null){let j=(c?f:this.parentInjector).get(vt,null);j&&(o=j)}let y=Fi(d.componentType??{}),_=Hx(this._lContainer,y?.id??null),b=_?.firstChild??null,P=d.create(f,i,b,o,s,a);return this.insertImpl(P.hostView,u,$x(this._hostTNode,_)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(ox(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ft],u=new bP(c,c[Yn],c[Ft]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return PU(s,i,o,r),e.attachToViewContainerRef(),av(Wv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Jx(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=c0(this._lContainer,t);r&&(nu(Wv(this._lContainer),t),QM(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=c0(this._lContainer,t);return r&&nu(Wv(this._lContainer),t)!=null?new No(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Jx(n){return n[cu]}function Wv(n){return n[cu]||(n[cu]=[])}function IP(n,e){let t,r=e[n.index];return yr(r)?t=r:(t=dP(r,e,null,n),e[n.index]=t,k0(e,t)),s5(t,e,n,r),new bP(t,n,e)}function o5(n,e){let t=n[ct],r=t.createComment(""),i=_r(e,n),o=t.parentNode(i);return rp(t,o,r,t.nextSibling(i),!1),r}var s5=l5,a5=()=>!1;function c5(n,e,t){return a5(n,e,t)}function l5(n,e,t,r){if(n[Ao])return;let i;t.type&8?i=Zn(r):i=o5(e,t),n[Ao]=i}var h0=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},f0=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)K0(e,t).matches!==null&&this.queries[t].setDirty()}},p0=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=y5(e):this.predicate=e}},g0=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},m0=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,u5(t,o)),this.matchTNodeWithReadOption(e,t,Kf(t,e,o,!1,!1))}else r===ko?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Kf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Wt||i===Bi||i===ko&&t.type&4)this.addMatch(t.index,-2);else{let o=Kf(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function u5(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function d5(n,e){return n.type&11?vc(n,e):n.type&4?Cp(n,e):null}function h5(n,e,t,r){return t===-1?d5(e,n):t===-2?f5(n,e,r):vu(n,n[fe],t,e)}function f5(n,e,t){if(t===Wt)return vc(e,n);if(t===ko)return Cp(e,n);if(t===Bi)return IP(e,n)}function DP(n,e,t,r){let i=e[Ur].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(h5(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function y0(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=DP(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let f=fn;f<d.length;f++){let y=d[f];y[Po]===y[Ft]&&y0(y[fe],y,u,r)}if(d[Bs]!==null){let f=d[Bs];for(let y=0;y<f.length;y++){let _=f[y];y0(_[fe],_,u,r)}}}}}return r}function p5(n,e){return n[Ur].queries[e].queryList}function g5(n,e,t){let r=new tp((t&4)===4);return cx(n,e,r,r.destroy),(e[Ur]??=new f0).queries.push(new h0(r))-1}function m5(n,e,t,r){let i=Ht();if(i.firstCreatePass){let o=qt();_5(i,new p0(e,t,r),o.index),v5(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return g5(i,Pe(),t)}function y5(n){return n.split(",").map(e=>e.trim())}function _5(n,e,t){n.queries===null&&(n.queries=new g0),n.queries.track(new m0(e,t))}function v5(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function K0(n,e){return n.queries.getByIndex(e)}function C5(n,e){let t=n[fe],r=K0(t,e);return r.crossesNgTemplate?y0(t,n,e,[]):DP(t,n,r,e)}var Xx=new Set;function $i(n){Xx.has(n)||(Xx.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Gs=class{},bp=class{};var sp=class extends Gs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ip(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=uv(e);this._bootstrapComponents=BM(o.bootstrap),this._r3Injector=kv(e,t,[{provide:Gs,useValue:this},{provide:Iu,useValue:this.componentFactoryResolver},...r],Ai(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ap=class extends bp{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new sp(this.moduleType,e,[])}};var Eu=class extends Gs{injector;componentFactoryResolver=new ip(this);instance=null;constructor(e){super();let t=new Ns([...e.providers,{provide:Gs,useValue:this},{provide:Iu,useValue:this.componentFactoryResolver}],e.parent||iu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ec(n,e,t=null){return new Eu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var E5=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=hv(!1,t.type),i=r.length>0?Ec([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(ee(vt))})}return n})();function Gt(n){return _c(()=>{let e=SP(n),t=ce(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===T0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(E5).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Vi.Emulated,styles:n.styles||hn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&$i("NgStandalone"),TP(t);let r=n.dependencies;return t.directiveDefs=eM(r,w5),t.pipeDefs=eM(r,YT),t.id=D5(t),t})}function w5(n){return Fi(n)||dv(n)}function er(n){return _c(()=>({type:n.type,bootstrap:n.bootstrap||hn,declarations:n.declarations||hn,imports:n.imports||hn,exports:n.exports||hn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function b5(n,e){if(n==null)return Mo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=_p.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function I5(n){if(n==null)return Mo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function qe(n){return _c(()=>{let e=SP(n);return TP(e),e})}function wc(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function SP(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Mo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||hn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:b5(n.inputs,e),outputs:I5(n.outputs),debugInfo:null}}function TP(n){n.features?.forEach(e=>e(n))}function eM(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function D5(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function S5(n){return Object.getPrototypeOf(n.prototype).constructor}function In(n){let e=S5(n.type),t=!0,r=[n];for(;e;){let i;if($r(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Gv(n.inputs),s.declaredInputs=Gv(n.declaredInputs),s.outputs=Gv(n.outputs);let a=i.hostBindings;a&&A5(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&M5(n,c),u&&P5(n,u),T5(n,i),BT(n.outputs,i.outputs),$r(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===In&&(t=!1)}}e=Object.getPrototypeOf(e)}x5(r)}function T5(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function x5(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_u(i.hostAttrs,t=_u(t,i.hostAttrs))}}function Gv(n){return n===Mo?{}:n===hn?[]:n}function M5(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function P5(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function A5(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function O5(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=_u(n.mergedAttrs,n.attrs);let d=n.tView=R0(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),hc(n,!1);let c=N5(t,e,n,r);Uf()&&V0(t,e,c,n),mc(c,e);let u=dP(c,e,c,n);e[r+zt]=u,k0(e,u),c5(u,n,e)}function R5(n,e,t,r,i,o,s,a,c,u,d){let f=t+zt,y;return e.firstCreatePass?(y=q0(e,f,4,s||null,a||null),Sv()&&gP(e,n,y,uu(e.consts,u),tP),fM(e,y)):y=e.data[f],O5(y,n,e,t,r,i,o,c),lu(y)&&U0(e,n,y),u!=null&&XM(n,y,d),y}function te(n,e,t,r,i,o,s,a){let c=Pe(),u=Ht(),d=uu(u.consts,o);return R5(c,u,n,e,t,r,i,d,void 0,s,a),te}var N5=k5;function k5(n,e,t,r){return Bf(!0),e[ct].createComment("")}var Ip=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Ip||{}),Ys=new Q(""),xP=!1,_0=class extends nt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,tx()&&(this.destroyRef=k(Xn,{optional:!0})??void 0,this.pendingTasks=k(Hr,{optional:!0})??void 0)}emit(e){let t=we(null);try{super.next(e)}finally{we(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof He&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ct=_0;function MP(n){let e,t;function r(){n=gu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function tM(n){return queueMicrotask(()=>n()),()=>{n=gu}}var Y0="isAngularZone",cp=Y0+"_ID",F5=0,Te=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ct(!1);onMicrotaskEmpty=new Ct(!1);onStable=new Ct(!1);onError=new Ct(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=xP}=e;if(typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,j5(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Y0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new F(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,L5,gu,gu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},L5={};function Q0(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function V5(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){MP(()=>{n.callbackScheduled=!1,v0(n),n.isCheckStableRunning=!0,Q0(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),v0(n)}function j5(n){let e=()=>{V5(n)},t=F5++;n._inner=n._inner.fork({name:"angular",properties:{[Y0]:!0,[cp]:t,[cp+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(U5(c))return r.invokeTask(o,s,a,c);try{return nM(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),rM(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return nM(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!B5(c)&&e(),rM(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,v0(n),Q0(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function v0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function nM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function rM(n){n._nesting--,Q0(n)}var lp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ct;onMicrotaskEmpty=new Ct;onStable=new Ct;onError=new Ct;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function U5(n){return PP(n,"__ignore_ng_zone__")}function B5(n){return PP(n,"__scheduler_tick__")}function PP(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Z0=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),AP=[0,1,2,3],OP=(()=>{class n{ngZone=k(Te);scheduler=k(Oi);errorHandler=k(gr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(Ys,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ze(16),this.executing=!0;for(let r of AP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ze(17)}register(t){let{view:r}=t;r!==void 0?((r[Us]??=[]).push(t),dc(r),r[ge]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ip.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),up=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Us];e&&(this.view[Us]=e.filter(t=>t!==this))}};function Du(n,e){let t=e?.injector??k(Qe);return $i("NgAfterNextRender"),z5(n,t,e,!0)}function $5(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function z5(n,e,t,r){let i=e.get(Z0);i.impl??=e.get(OP);let o=e.get(Ys,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Xn):null,a=e.get($f,null,{optional:!0}),c=new up(i.impl,$5(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var J0=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var X0=new Q("");function zi(n){return!!n&&typeof n.then=="function"}function Dp(n){return!!n&&typeof n.subscribe=="function"}var eC=new Q("");function bc(n){return Lt([{provide:eC,multi:!0,useValue:n}])}var tC=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(eC,{optional:!0})??[];injector=k(Qe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=wt(this.injector,i);if(zi(o))t.push(o);else if(Dp(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Su=new Q("");function RP(){m_(()=>{let n="";throw new F(600,n)})}function NP(n){return n.isBoundToModule}var H5=10;var tr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(tn);afterRenderManager=k(Z0);zonelessEnabled=k(pu);rootEffectScheduler=k(Bv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new nt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(Hr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(pe(t=>!t))}constructor(){k(Ys,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(vt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Qe.NULL){return this._injector.get(Te).run(()=>{ze(10);let s=t instanceof Ep;if(!this._injector.get(tC).done){let b="";throw new F(405,b)}let c;s?c=t:c=this._injector.get(Iu).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=NP(c)?void 0:this._injector.get(Gs),d=r||c.selector,f=c.create(i,[],d,u),y=f.location.nativeElement,_=f.injector.get(X0,null);return _?.registerApplication(y),f.onDestroy(()=>{this.detachView(f.hostView),yu(this.components,f),_?.unregisterApplication(y)}),this._loadComponent(f),ze(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ze(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ip.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new F(101,!1);let t=we(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,we(t),this.afterTick.next(),ze(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ji,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<H5;)ze(14),this.synchronizeOnce(),ze(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!du(i))continue;let o=r&&!this.zonelessEnabled?0:1;z0(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>du(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;yu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Su,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new F(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Lo(n,e,t,r){let i=Pe(),o=fu();if(Ui(i,o,e)){let s=Ht(),a=Vf();aU(a,i,n,e,t,r)}return Lo}function B(n,e,t){let r=Pe(),i=fu();if(Ui(r,i,e)){let o=Ht(),s=Vf();eP(s,r,n,e,r[ct],t)}return B}function C0(n,e,t,r,i){B0(e,n,t,i?"class":"style",r)}function g(n,e,t,r){let i=Pe(),o=i[fe],s=n+zt,a=o.firstCreatePass?yP(s,i,2,e,tP,Sv(),t,r):o.data[s];if(uU(a,i,n,e,q5),lu(a)){let c=i[fe];U0(c,i,a),kM(c,a,i)}return r!=null&&XM(i,a),g}function m(){let n=Ht(),e=qt(),t=dU(e);return n.firstCreatePass&&_P(n,t),fx(t)&&px(),dx(),t.classesWithoutHost!=null&&qV(t)&&C0(n,t,Pe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&WV(t)&&C0(n,t,Pe(),t.stylesWithoutHost,!1),m}function nr(n,e,t,r){return g(n,e,t,r),m(),nr}var q5=(n,e,t,r,i)=>(Bf(!0),zM(e[ct],r,xx()));function Ve(){return Pe()}var zs=void 0;function W5(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var G5=["en",[["a","p"],["AM","PM"],zs],[["AM","PM"],zs,zs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zs,"{1} 'at' {0}",zs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",W5],Kv={};function pn(n){let e=K5(n),t=iM(e);if(t)return t;let r=e.split("-")[0];if(t=iM(r),t)return t;if(r==="en")return G5;throw new F(701,!1)}function iM(n){return n in Kv||(Kv[n]=Ni.ng&&Ni.ng.common&&Ni.ng.common.locales&&Ni.ng.common.locales[n]),Kv[n]}var ut=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(ut||{});function K5(n){return n.toLowerCase().replace(/_/g,"-")}var Tu="en-US",Y5="USD";var Q5=Tu;function kP(n){typeof n=="string"&&(Q5=n.toLowerCase().replace(/_/g,"-"))}function re(n,e,t){let r=Pe(),i=Ht(),o=qt();return FP(i,r,r[ct],o,n,e,t),re}function FP(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=qv(r,e,o),GU(r,n,e,s,t,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let f=0;f<d.length;f+=2){let y=d[f],_=d[f+1];c??=qv(r,e,o),Qx(r,e,y,_,i,c)}if(u&&u.length)for(let f of u)c??=qv(r,e,o),Qx(r,e,f,i,i,c)}}function $(n=1){return Tx(n)}function nC(n,e,t,r){m5(n,e,t,r)}function rC(n){let e=Pe(),t=Ht(),r=Ov();kf(r+1);let i=K0(t,r);if(n.dirty&&ix(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=C5(e,r);n.reset(o,oj),n.notifyOnChanges()}return!0}return!1}function iC(){return p5(Pe(),Ov())}function Qs(n){let e=yx();return Mf(e,zt+n)}function qf(n,e){return n<<17|e<<2}function Ks(n){return n>>17&32767}function Z5(n){return(n&2)==2}function J5(n,e){return n&131071|e<<17}function E0(n){return n|2}function yc(n){return(n&131068)>>2}function Yv(n,e){return n&-131069|e<<2}function X5(n){return(n&1)===1}function w0(n){return n|1}function e3(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ks(s),c=yc(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||ac(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let y=Ks(n[a+1]);n[r+1]=qf(y,a),y!==0&&(n[y+1]=Yv(n[y+1],r)),n[a+1]=J5(n[a+1],r)}else n[r+1]=qf(a,0),a!==0&&(n[a+1]=Yv(n[a+1],r)),a=r;else n[r+1]=qf(c,0),a===0?a=r:n[c+1]=Yv(n[c+1],r),c=r;u&&(n[r+1]=E0(n[r+1])),oM(n,d,r,!0),oM(n,d,r,!1),t3(e,d,n,r,o),s=qf(a,c),o?e.classBindings=s:e.styleBindings=s}function t3(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ac(o,e)>=0&&(t[r+1]=w0(t[r+1]))}function oM(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ks(i):yc(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];n3(c,e)&&(a=!0,n[s+1]=r?w0(u):E0(u)),s=r?Ks(u):yc(u)}a&&(n[t+1]=r?E0(i):w0(i))}function n3(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ac(n,e)>=0:!1}var Cr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function r3(n){return n.substring(Cr.key,Cr.keyEnd)}function i3(n){return o3(n),LP(n,VP(n,0,Cr.textEnd))}function LP(n,e){let t=Cr.textEnd;return t===e?-1:(e=Cr.keyEnd=s3(n,Cr.key=e,t),VP(n,e,t))}function o3(n){Cr.key=0,Cr.keyEnd=0,Cr.value=0,Cr.valueEnd=0,Cr.textEnd=n.length}function VP(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function s3(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function rr(n,e,t){return jP(n,e,t,!1),rr}function gn(n,e){return jP(n,e,null,!0),gn}function Ic(n){c3(p3,a3,n,!0)}function a3(n,e){for(let t=i3(e);t>=0;t=LP(e,t))Df(n,r3(e),!0)}function jP(n,e,t,r){let i=Pe(),o=Ht(),s=Rf(2);if(o.firstUpdatePass&&BP(o,n,s,r),e!==Ln&&Ui(i,s,e)){let a=o.data[Li()];$P(o,a,i,i[ct],n,i[s+1]=m3(e,t),r,s)}}function c3(n,e,t,r){let i=Ht(),o=Rf(2);i.firstUpdatePass&&BP(i,null,o,r);let s=Pe();if(t!==Ln&&Ui(s,o,t)){let a=i.data[Li()];if(zP(a,r)&&!UP(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Ef(c,t||"")),C0(i,a,s,t,r)}else g3(i,a,s,s[ct],s[o+1],s[o+1]=f3(n,e,t),r,o)}}function UP(n,e){return e>=n.expandoStartIndex}function BP(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Li()],s=UP(n,t);zP(o,r)&&e===null&&!s&&(e=!1),e=l3(i,o,e,r),e3(i,o,e,t,s,r)}}function l3(n,e,t,r){let i=bx(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Qv(null,n,e,t,r),t=wu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Qv(i,n,e,t,r),o===null){let c=u3(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Qv(null,n,e,c[1],r),c=wu(c,e.attrs,r),d3(n,e,r,c))}else o=h3(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function u3(n,e,t){let r=t?e.classBindings:e.styleBindings;if(yc(r)!==0)return n[Ks(r)]}function d3(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ks(i)]=r}function h3(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=wu(r,s,t)}return wu(r,e.attrs,t)}function Qv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=wu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function wu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Df(n,s,t?!0:e[++o]))}return n===void 0?null:n}function f3(n,e,t){if(t==null||t==="")return hn;let r=[],i=Cc(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function p3(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Df(n,r,t)}function g3(n,e,t,r,i,o,s,a){i===Ln&&(i=hn);let c=0,u=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let y=c<i.length?i[c+1]:void 0,_=u<o.length?o[u+1]:void 0,b=null,P;d===f?(c+=2,u+=2,y!==_&&(b=f,P=_)):f===null||d!==null&&d<f?(c+=2,b=d):(u+=2,b=f,P=_),b!==null&&$P(n,e,t,r,b,P,s,a),d=c<i.length?i[c]:null,f=u<o.length?o[u]:null}}function $P(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=X5(u)?sM(c,e,t,i,yc(u),s):void 0;if(!dp(d)){dp(o)||Z5(u)&&(o=sM(c,null,t,i,a,s));let f=vv(Li(),t);Zj(r,s,f,i,o)}}function sM(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,y=t[i+1];y===Ln&&(y=f?hn:void 0);let _=f?Sf(y,r):d===r?y:void 0;if(u&&!dp(_)&&(_=Sf(c,r)),dp(_)&&(a=_,s))return a;let b=n[i+1];i=s?Ks(b):yc(b)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Sf(c,r))}return a}function dp(n){return n!==void 0}function m3(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ai(Cc(n)))),n}function zP(n,e){return(n.flags&(e?8:16))!==0}function v(n,e=""){let t=Pe(),r=Ht(),i=n+zt,o=r.firstCreatePass?q0(r,i,1,e,null):r.data[i],s=y3(r,t,o,e,n);t[i]=s,Uf()&&V0(r,t,s,o),hc(o,!1)}var y3=(n,e,t,r,i)=>(Bf(!0),Pj(e[ct],r));function _3(n,e,t,r=""){return Ui(n,fu(),t)?e+Fs(t)+r:Ln}function v3(n,e,t,r,i,o=""){let s=_x(),a=EP(n,s,t,i);return Rf(2),a?e+Fs(t)+r+Fs(i)+o:Ln}function J(n){return ve("",n),J}function ve(n,e,t){let r=Pe(),i=_3(r,n,e,t);return i!==Ln&&HP(r,Li(),i),ve}function mn(n,e,t,r,i){let o=Pe(),s=v3(o,n,e,t,r,i);return s!==Ln&&HP(o,Li(),s),mn}function HP(n,e,t){let r=vv(e,n);Aj(n[ct],r,t)}function Ae(n,e,t){Vv(e)&&(e=e());let r=Pe(),i=fu();if(Ui(r,i,e)){let o=Ht(),s=Vf();eP(s,r,n,e,r[ct],t)}return Ae}function Ne(n,e){let t=Vv(n);return t&&n.set(e),t}function Oe(n,e){let t=Pe(),r=Ht(),i=qt();return FP(r,t,t[ct],i,n,e),Oe}function C3(n,e,t){let r=Ht();if(r.firstCreatePass){let i=$r(n);b0(t,r.data,r.blueprint,i,!0),b0(e,r.data,r.blueprint,i,!1)}}function b0(n,e,t,r,i){if(n=$t(n),Array.isArray(n))for(let o=0;o<n.length;o++)b0(n[o],e,t,r,i);else{let o=Ht(),s=Pe(),a=qt(),c=Rs(n)?n:$t(n.provide),u=pv(n),d=a.providerIndexes&1048575,f=a.directiveStart,y=a.providerIndexes>>20;if(Rs(n)||!n.multi){let _=new qs(u,i,z,null),b=Jv(c,e,i?d:d+y,f);b===-1?(e0(ep(a,s),o,c),Zv(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),s.push(_)):(t[b]=_,s[b]=_)}else{let _=Jv(c,e,d+y,f),b=Jv(c,e,d,d+y),P=_>=0&&t[_],R=b>=0&&t[b];if(i&&!R||!i&&!P){e0(ep(a,s),o,c);let j=b3(i?w3:E3,t.length,i,r,u,n);!i&&R&&(t[b].providerFactory=j),Zv(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=qP(t[i?b:_],u,!i&&r);Zv(o,n,_>-1?_:b,j)}!i&&r&&R&&t[b].componentProviders++}}}function Zv(n,e,t,r){let i=Rs(e),o=ex(e);if(i||o){let c=(o?$t(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function qP(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Jv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function E3(n,e,t,r,i){return I0(this.multi,[])}function w3(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=vu(r,r[fe],this.providerFactory.index,i);s=c.slice(0,a),I0(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],I0(o,s);return s}function I0(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function b3(n,e,t,r,i,o){let s=new qs(n,t,z,null);return s.multi=[],s.index=e,s.componentProviders=0,qP(s,i,r&&!t),s}function Gr(n,e=[]){return t=>{t.providersResolver=(r,i)=>C3(r,i?i(n):n,e)}}function xu(n,e,t,r){return GP(Pe(),Of(),n,e,t,r)}function WP(n,e){let t=n[e];return t===Ln?void 0:t}function GP(n,e,t,r,i,o){let s=e+t;return Ui(n,s,i)?CP(n,s+1,o?r.call(o,i):r(i)):WP(n,s+1)}function I3(n,e,t,r,i,o,s){let a=e+t;return EP(n,a,i,o)?CP(n,a+2,s?r.call(s,i,o):r(i,o)):WP(n,a+2)}function Ke(n,e){let t=Ht(),r,i=n+zt;t.firstCreatePass?(r=D3(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=To(r.type,!0)),s,a=dn(z);try{let c=Xf(!1),u=o();return Xf(c),Cv(t,Pe(),i,u),u}finally{dn(a)}}function D3(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function nn(n,e,t){let r=n+zt,i=Pe(),o=Mf(i,r);return KP(i,r)?GP(i,Of(),e,o.transform,t,o):o.transform(t)}function yn(n,e,t,r){let i=n+zt,o=Pe(),s=Mf(o,i);return KP(o,i)?I3(o,Of(),e,s.transform,t,r,s):s.transform(t,r)}function KP(n,e){return n[fe].data[e].pure}function oC(n,e){return Cp(n,e)}var hp=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},sC=(()=>{class n{compileModuleSync(t){return new ap(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=uv(t),o=BM(i.declarations).reduce((s,a)=>{let c=Fi(a);return c&&s.push(new Ws(c)),s},[]);return new hp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var S3=(()=>{class n{zone=k(Te);changeDetectionScheduler=k(Oi);applicationRef=k(tr);applicationErrorHandler=k(tn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YP=new Q("",{factory:()=>!1});function aC({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Te(ce(V({},lC()),{scheduleInRootZone:t})),[{provide:Te,useFactory:n},{provide:ki,multi:!0,useFactory:()=>{let r=k(S3,{optional:!0});return()=>r.initialize()}},{provide:ki,multi:!0,useFactory:()=>{let r=k(T3);return()=>{r.initialize()}}},e===!0?{provide:jv,useValue:!0}:[],{provide:Uv,useValue:t??xP},{provide:tn,useFactory:()=>{let r=k(Te),i=k(vt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(gr),o.handleError(s))})}}}]}function cC(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=aC({ngZoneFactory:()=>{let i=lC(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&$i("NgZone_CoalesceEvent"),new Te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Lt([{provide:YP,useValue:!0},{provide:pu,useValue:!1},r])}function lC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var T3=(()=>{class n{subscription=new He;initialized=!1;zone=k(Te);pendingTasks=k(Hr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var QP=(()=>{class n{applicationErrorHandler=k(tn);appRef=k(tr);taskService=k(Hr);ngZone=k(Te);zonelessEnabled=k(pu);tracing=k(Ys,{optional:!0});disableScheduling=k(jv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new He;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(cp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(Uv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof lp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?tM:MP;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(cp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,tM(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function x3(){return typeof $localize<"u"&&$localize.locale||Tu}var Zs=new Q("",{providedIn:"root",factory:()=>k(Zs,{optional:!0,skipSelf:!0})||x3()}),uC=new Q("",{providedIn:"root",factory:()=>Y5});function Dn(n){return VT(n)}function Dc(n,e){return zh(n,e?.equal)}var ZP=class{[Xt];constructor(e){this[Xt]=e}destroy(){this[Xt].destroy()}};var rA=Symbol("InputSignalNode#UNSET"),j3=ce(V({},Hh),{transformFn:void 0,applyValueToInputSignal(n,e){Wa(n,e)}});function iA(n,e){let t=Object.create(j3);t.value=n,t.transformFn=e?.transform;function r(){if(Ha(t),t.value===rA){let i=null;throw new F(-950,i)}return t.value}return r[Xt]=t,r}var Tp=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>bu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},U3=new Q("");U3.__NG_ELEMENT_ID__=n=>{let e=qt();if(e===null)throw new F(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new F(204,!1)};function JP(n,e){return iA(n,e)}function B3(n){return iA(rA,n)}var oA=(JP.required=B3,JP);var Js=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},sA=new Js("20.1.3");var dC=new Q(""),$3=new Q("");function Mu(n){return!n.moduleRef}function z3(n){let e=Mu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Te);return t.run(()=>{Mu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(tn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Mu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(dC);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(dC);s.add(o),n.moduleRef.onDestroy(()=>{yu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return q3(r,t,()=>{let o=e.get(Hr),s=o.add(),a=e.get(tC);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Zs,Tu);if(kP(c||Tu),!e.get($3,!0))return Mu(n)?e.get(tr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Mu(n)){let d=e.get(tr);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return H3?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var H3;function q3(n,e,t){try{let r=t();return zi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Sp=null;function W3(n=[],e){return Qe.create({name:e,providers:[{provide:ru,useValue:"platform"},{provide:dC,useValue:new Set([()=>Sp=null])},...n]})}function G3(n=[]){if(Sp)return Sp;let e=W3(n);return Sp=e,RP(),K3(e),e}function K3(n){let e=n.get(pp,null);wt(n,()=>{e?.forEach(t=>t())})}function Pu(){return!1}var Kr=(()=>{class n{static __NG_ELEMENT_ID__=Y3}return n})();function Y3(n){return Q3(qt(),Pe(),(n&16)===16)}function Q3(n,e,t){if(Oo(n)&&!t){let r=Jn(n.index,e);return new No(r,r)}else if(n.type&175){let r=e[Qn];return new No(r,e)}return null}var hC=class{constructor(){}supports(e){return G0(e)}create(e){return new fC(e)}},Z3=(n,e)=>e,fC=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Z3}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<XP(r,i,o)?t:r,a=XP(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let y=0;y<u;y++){let _=y<o.length?o[y]:o[y]=0,b=_+y;d<=b&&b<u&&(o[y]=_+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!G0(e))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,vP(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new pC(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new xp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new xp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},pC=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},gC=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},xp=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new gC,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function XP(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var mC=class{constructor(){}supports(e){return e instanceof Map||wp(e)}create(){return new yC}},yC=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||wp(e)))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new _C(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},_C=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function eA(){return new vC([new hC])}var vC=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:eA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||eA()),deps:[[n,new D0,new bt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new F(901,!1)}}return n})();function tA(){return new CC([new mC])}var CC=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:tA});factories;constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||tA()),deps:[[n,new D0,new bt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new F(901,!1)}}return n})();function aA(n){ze(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=G3(r),o=[aC({}),{provide:Oi,useExisting:QP},Px,...t||[]],s=new Eu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return z3({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ze(9)}}function Vo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function cA(n){let e=Fi(n);if(!e)return null;let t=new Ws(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var dA=null;function ir(){return dA}function EC(n){dA??=n}var Au=class{},Ou=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(hA),providedIn:"platform"})}return n})(),wC=new Q(""),hA=(()=>{class n extends Ou{_location;_history;_doc=k(lt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ir().getBaseHref(this._doc)}onPopState(t){let r=ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Mp(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function lA(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function br(n){return n&&n[0]!=="?"?`?${n}`:n}var Ir=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(Ap),providedIn:"root"})}return n})(),Pp=new Q(""),Ap=(()=>{class n extends Ir{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Mp(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+br(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+br(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+br(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ee(Ou),ee(Pp,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jo=(()=>{class n{_subject=new nt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=eB(lA(uA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+br(r))}normalize(t){return n.stripTrailingSlash(X3(this._basePath,uA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+br(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+br(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=br;static joinWithSlash=Mp;static stripTrailingSlash=lA;static \u0275fac=function(r){return new(r||n)(ee(Ir))};static \u0275prov=H({token:n,factory:()=>J3(),providedIn:"root"})}return n})();function J3(){return new jo(ee(Ir))}function X3(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function uA(n){return n.replace(/\/index.html$/,"")}function eB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var AC=(()=>{class n extends Ir{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Mp(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+br(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+br(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ee(Ou),ee(Pp,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),vA={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Bp=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Bp||{});var rn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(rn||{}),We=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(We||{}),Sn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Sn||{}),Kt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function CA(n){return pn(n)[ut.LocaleId]}function EA(n,e,t){let r=pn(n),i=[r[ut.DayPeriodsFormat],r[ut.DayPeriodsStandalone]],o=or(i,e);return or(o,t)}function wA(n,e,t){let r=pn(n),i=[r[ut.DaysFormat],r[ut.DaysStandalone]],o=or(i,e);return or(o,t)}function bA(n,e,t){let r=pn(n),i=[r[ut.MonthsFormat],r[ut.MonthsStandalone]],o=or(i,e);return or(o,t)}function IA(n,e){let r=pn(n)[ut.Eras];return or(r,e)}function Ru(n,e){let t=pn(n);return or(t[ut.DateFormat],e)}function Nu(n,e){let t=pn(n);return or(t[ut.TimeFormat],e)}function ku(n,e){let r=pn(n)[ut.DateTimeFormat];return or(r,e)}function Sr(n,e){let t=pn(n),r=t[ut.NumberSymbols][e];if(typeof r>"u"){if(e===Kt.CurrencyDecimal)return t[ut.NumberSymbols][Kt.Decimal];if(e===Kt.CurrencyGroup)return t[ut.NumberSymbols][Kt.Group]}return r}function OC(n,e){return pn(n)[ut.NumberFormats][e]}function tB(n){return pn(n)[ut.Currencies]}function DA(n){if(!n[ut.ExtraData])throw new F(2303,!1)}function SA(n){let e=pn(n);return DA(e),(e[ut.ExtraData][2]||[]).map(r=>typeof r=="string"?bC(r):[bC(r[0]),bC(r[1])])}function TA(n,e,t){let r=pn(n);DA(r);let i=[r[ut.ExtraData][0],r[ut.ExtraData][1]],o=or(i,e)||[];return or(o,t)||[]}function or(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new F(2304,!1)}function bC(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}function xA(n,e,t="en"){let r=tB(t)[n]||vA[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var nB=2;function MA(n){let e,t=vA[n];return t&&(e=t[2]),typeof e=="number"?e:nB}var rB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Op={},iB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function PA(n,e,t,r){let i=fB(n);e=Hi(t,e)||e;let s=[],a;for(;e;)if(a=iB.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=OA(r,c),i=hB(i,r));let u="";return s.forEach(d=>{let f=uB(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Lp(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Hi(n,e){let t=CA(n);if(Op[t]??={},Op[t][e])return Op[t][e];let r="";switch(e){case"shortDate":r=Ru(n,Sn.Short);break;case"mediumDate":r=Ru(n,Sn.Medium);break;case"longDate":r=Ru(n,Sn.Long);break;case"fullDate":r=Ru(n,Sn.Full);break;case"shortTime":r=Nu(n,Sn.Short);break;case"mediumTime":r=Nu(n,Sn.Medium);break;case"longTime":r=Nu(n,Sn.Long);break;case"fullTime":r=Nu(n,Sn.Full);break;case"short":let i=Hi(n,"shortTime"),o=Hi(n,"shortDate");r=Rp(ku(n,Sn.Short),[i,o]);break;case"medium":let s=Hi(n,"mediumTime"),a=Hi(n,"mediumDate");r=Rp(ku(n,Sn.Medium),[s,a]);break;case"long":let c=Hi(n,"longTime"),u=Hi(n,"longDate");r=Rp(ku(n,Sn.Long),[c,u]);break;case"full":let d=Hi(n,"fullTime"),f=Hi(n,"fullDate");r=Rp(ku(n,Sn.Full),[d,f]);break}return r&&(Op[t][e]=r),r}function Rp(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Dr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function oB(n,e){return Dr(n,3).substring(0,e)}function It(n,e,t=0,r=!1,i=!1){return function(o,s){let a=sB(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return oB(a,e);let c=Sr(s,Kt.MinusSign);return Dr(a,e,c,r,i)}}function sB(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new F(2301,!1)}}function Je(n,e,t=rn.Format,r=!1){return function(i,o){return aB(i,o,n,e,t,r)}}function aB(n,e,t,r,i,o){switch(t){case 2:return bA(e,i,r)[n.getMonth()];case 1:return wA(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=SA(e),d=TA(e,i,r),f=u.findIndex(y=>{if(Array.isArray(y)){let[_,b]=y,P=s>=_.hours&&a>=_.minutes,R=s<b.hours||s===b.hours&&a<b.minutes;if(_.hours<b.hours){if(P&&R)return!0}else if(P||R)return!0}else if(y.hours===s&&y.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return EA(e,i,r)[s<12?0:1];case 3:return IA(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new F(2302,!1)}}function Np(n){return function(e,t,r){let i=-1*r,o=Sr(t,Kt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Dr(s,2,o)+Dr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Dr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Dr(s,2,o)+":"+Dr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Dr(s,2,o)+":"+Dr(Math.abs(i%60),2,o);default:throw new F(2302,!1)}}}var cB=0,Fp=4;function lB(n){let e=Lp(n,cB,1).getDay();return Lp(n,0,1+(e<=Fp?Fp:Fp+7)-e)}function AA(n){let e=n.getDay(),t=e===0?-3:Fp-e;return Lp(n.getFullYear(),n.getMonth(),n.getDate()+t)}function IC(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=AA(t),s=lB(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Dr(i,n,Sr(r,Kt.MinusSign))}}function kp(n,e=!1){return function(t,r){let o=AA(t).getFullYear();return Dr(o,n,Sr(r,Kt.MinusSign),e)}}var DC={};function uB(n){if(DC[n])return DC[n];let e;switch(n){case"G":case"GG":case"GGG":e=Je(3,We.Abbreviated);break;case"GGGG":e=Je(3,We.Wide);break;case"GGGGG":e=Je(3,We.Narrow);break;case"y":e=It(0,1,0,!1,!0);break;case"yy":e=It(0,2,0,!0,!0);break;case"yyy":e=It(0,3,0,!1,!0);break;case"yyyy":e=It(0,4,0,!1,!0);break;case"Y":e=kp(1);break;case"YY":e=kp(2,!0);break;case"YYY":e=kp(3);break;case"YYYY":e=kp(4);break;case"M":case"L":e=It(1,1,1);break;case"MM":case"LL":e=It(1,2,1);break;case"MMM":e=Je(2,We.Abbreviated);break;case"MMMM":e=Je(2,We.Wide);break;case"MMMMM":e=Je(2,We.Narrow);break;case"LLL":e=Je(2,We.Abbreviated,rn.Standalone);break;case"LLLL":e=Je(2,We.Wide,rn.Standalone);break;case"LLLLL":e=Je(2,We.Narrow,rn.Standalone);break;case"w":e=IC(1);break;case"ww":e=IC(2);break;case"W":e=IC(1,!0);break;case"d":e=It(2,1);break;case"dd":e=It(2,2);break;case"c":case"cc":e=It(7,1);break;case"ccc":e=Je(1,We.Abbreviated,rn.Standalone);break;case"cccc":e=Je(1,We.Wide,rn.Standalone);break;case"ccccc":e=Je(1,We.Narrow,rn.Standalone);break;case"cccccc":e=Je(1,We.Short,rn.Standalone);break;case"E":case"EE":case"EEE":e=Je(1,We.Abbreviated);break;case"EEEE":e=Je(1,We.Wide);break;case"EEEEE":e=Je(1,We.Narrow);break;case"EEEEEE":e=Je(1,We.Short);break;case"a":case"aa":case"aaa":e=Je(0,We.Abbreviated);break;case"aaaa":e=Je(0,We.Wide);break;case"aaaaa":e=Je(0,We.Narrow);break;case"b":case"bb":case"bbb":e=Je(0,We.Abbreviated,rn.Standalone,!0);break;case"bbbb":e=Je(0,We.Wide,rn.Standalone,!0);break;case"bbbbb":e=Je(0,We.Narrow,rn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Je(0,We.Abbreviated,rn.Format,!0);break;case"BBBB":e=Je(0,We.Wide,rn.Format,!0);break;case"BBBBB":e=Je(0,We.Narrow,rn.Format,!0);break;case"h":e=It(3,1,-12);break;case"hh":e=It(3,2,-12);break;case"H":e=It(3,1);break;case"HH":e=It(3,2);break;case"m":e=It(4,1);break;case"mm":e=It(4,2);break;case"s":e=It(5,1);break;case"ss":e=It(5,2);break;case"S":e=It(6,1);break;case"SS":e=It(6,2);break;case"SSS":e=It(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Np(0);break;case"ZZZZZ":e=Np(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Np(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Np(2);break;default:return null}return DC[n]=e,e}function OA(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function dB(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function hB(n,e,t){let i=n.getTimezoneOffset(),o=OA(e,i);return dB(n,-1*(o-i))}function fB(n){if(fA(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Lp(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(rB))return pB(r)}let e=new Date(n);if(!fA(e))throw new F(2302,!1);return e}function pB(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function fA(n){return n instanceof Date&&!isNaN(n.valueOf())}var gB=/^(\d+)?\.((\d+)(-(\d+))?)?$/,pA=22,Vp=".",Fu="0",mB=";",yB=",",SC="#",gA="\xA4";function RA(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=Sr(t,Kt.Infinity);else{let u=vB(n);s&&(u=_B(u));let d=e.minInt,f=e.minFrac,y=e.maxFrac;if(o){let Y=o.match(gB);if(Y===null)throw new F(2306,!1);let Z=Y[1],ie=Y[3],Ue=Y[5];Z!=null&&(d=TC(Z)),ie!=null&&(f=TC(ie)),Ue!=null?y=TC(Ue):ie!=null&&f>y&&(y=f)}CB(u,f,y);let _=u.digits,b=u.integerLen,P=u.exponent,R=[];for(c=_.every(Y=>!Y);b<d;b++)_.unshift(0);for(;b<0;b++)_.unshift(0);b>0?R=_.splice(b,_.length):(R=_,_=[0]);let j=[];for(_.length>=e.lgSize&&j.unshift(_.splice(-e.lgSize,_.length).join(""));_.length>e.gSize;)j.unshift(_.splice(-e.gSize,_.length).join(""));_.length&&j.unshift(_.join("")),a=j.join(Sr(t,r)),R.length&&(a+=Sr(t,i)+R.join("")),P&&(a+=Sr(t,Kt.Exponential)+"+"+P)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function NA(n,e,t,r,i){let o=OC(e,Bp.Currency),s=FA(o,Sr(e,Kt.MinusSign));return s.minFrac=MA(r),s.maxFrac=s.minFrac,RA(n,s,e,Kt.CurrencyGroup,Kt.CurrencyDecimal,i).replace(gA,t).replace(gA,"").trim()}function kA(n,e,t){let r=OC(e,Bp.Decimal),i=FA(r,Sr(e,Kt.MinusSign));return RA(n,i,e,Kt.Group,Kt.Decimal,t)}function FA(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(mB),i=r[0],o=r[1],s=i.indexOf(Vp)!==-1?i.split(Vp):[i.substring(0,i.lastIndexOf(Fu)+1),i.substring(i.lastIndexOf(Fu)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(SC));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===Fu?t.minFrac=t.maxFrac=d+1:f===SC?t.maxFrac=d+1:t.posSuf+=f}let u=a.split(yB);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,f=o.indexOf(SC);t.negPre=o.substring(0,f).replace(/'/g,""),t.negSuf=o.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function _B(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function vB(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Vp))>-1&&(e=e.replace(Vp,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Fu;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Fu;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>pA&&(r=r.splice(0,pA-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function CB(n,e,t){if(e>t)throw new F(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,u=e+n.integerLen,d=r.reduceRight(function(f,y,_,b){return y=y+f,b[_]=y<10?y:y-10,c&&(b[_]===0&&_>=u?b.pop():c=!1),y>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function TC(n){let e=parseInt(n);if(isNaN(e))throw new F(2305,!1);return e}var xC=/\s+/,mA=[],RC=(()=>{class n{_ngEl;_renderer;initialClasses=mA;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(xC):mA}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(xC):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(xC).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(z(Wt),z(Vn))};static \u0275dir=qe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var jp=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Yr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new jp(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),yA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);yA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(z(Bi),z(ko),z(vC))};static \u0275dir=qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function yA(n,e){n.context.$implicit=e.item}var _n=(()=>{class n{_viewContainer;_context=new Up;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_A(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_A(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(z(Bi),z(ko))};static \u0275dir=qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Up=class{$implicit=null;ngIf=null};function _A(n,e){if(n&&!n.createEmbeddedView)throw new F(2020,!1)}var Lu=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:Er.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(z(Wt),z(CC),z(Vn))};static \u0275dir=qe({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function $p(n,e){return new F(2100,!1)}var MC=class{createSubscription(e,t,r){return Dn(()=>e.subscribe({next:t,error:r}))}dispose(e){Dn(()=>e.unsubscribe())}},PC=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},EB=new PC,wB=new MC,NC=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=k(tn);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(zi(t))return EB;if(Dp(t))return wB;throw $p(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(z(Kr,16))};static \u0275pipe=wc({name:"async",type:n,pure:!1})}return n})();var bB="mediumDate",LA=new Q(""),VA=new Q(""),ea=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??bB,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return PA(t,s,o||this.locale,a)}catch(s){throw $p(n,s.message)}}static \u0275fac=function(r){return new(r||n)(z(Zs,16),z(LA,24),z(VA,24))};static \u0275pipe=wc({name:"date",type:n,pure:!0})}return n})();var kC=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!jA(t))return null;i||=this._locale;try{let o=UA(t);return kA(o,i,r)}catch(o){throw $p(n,o.message)}}static \u0275fac=function(r){return new(r||n)(z(Zs,16))};static \u0275pipe=wc({name:"number",type:n,pure:!0})}return n})();var Vu=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!jA(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=xA(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=UA(t);return NA(c,s,a,r,o)}catch(c){throw $p(n,c.message)}}static \u0275fac=function(r){return new(r||n)(z(Zs,16),z(uC,16))};static \u0275pipe=wc({name:"currency",type:n,pure:!0})}return n})();function jA(n){return!(n==null||n===""||n!==n)}function UA(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new F(2309,!1);return n}var on=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=er({type:n});static \u0275inj=kn({})}return n})();function FC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ju=class{};var BA="browser";var $A=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new LC(k(lt),window)})}return n})(),LC=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ce(V({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=IB(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Ri(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(ce(V({},t),{left:i-s[0],top:o-s[1]}))}};function IB(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Hp=new Q(""),$C=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new F(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ee(Hp),ee(Te))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Uu=class{_doc;constructor(e){this._doc=e}manager},VC="ng-app-id";function zA(n){for(let e of n)e.remove()}function HA(n,e){let t=e.createElement("style");return t.textContent=n,t}function DB(n,e,t,r){let i=n.head?.querySelectorAll(`style[${VC}="${e}"],link[${VC}="${e}"]`);if(i)for(let o of i)o.removeAttribute(VC),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function UC(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var zC=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,DB(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,HA);r?.forEach(i=>this.addUsage(i,this.external,UC))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(zA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])zA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,HA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,UC(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ee(lt),ee(fp),ee(mp,8),ee(Fo))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),jC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},HC=/%COMP%/g;var WA="%COMP%",SB=`_nghost-${WA}`,TB=`_ngcontent-${WA}`,xB=!0,MB=new Q("",{providedIn:"root",factory:()=>xB});function PB(n){return TB.replace(HC,n)}function AB(n){return SB.replace(HC,n)}function GA(n,e){return e.map(t=>t.replace(HC,n))}var zu=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new Bu(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof zp?i.applyToHost(t):i instanceof $u&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case Vi.Emulated:o=new zp(c,u,r,this.appId,d,s,a,f,y);break;case Vi.ShadowDom:return new BC(c,u,t,r,s,a,this.nonce,f,y);default:o=new $u(c,u,r,d,s,a,f,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ee($C),ee(zC),ee(fp),ee(MB),ee(lt),ee(Fo),ee(Te),ee(mp),ee(Ys,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Bu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(jC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new F(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=jC[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=jC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Er.DashCase|Er.Important)?e.style.setProperty(t,r,i&Er.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Er.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=ir().getGlobalEventTarget(this.doc,e),!e))throw new F(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function qA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var BC=class extends Bu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=GA(i.id,d);for(let y of d){let _=document.createElement("style");a&&_.setAttribute("nonce",a),_.textContent=y,this.shadowRoot.appendChild(_)}let f=i.getExternalStyles?.();if(f)for(let y of f){let _=UC(y,o);a&&_.setAttribute("nonce",a),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},$u=class extends Bu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?GA(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},zp=class extends $u{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,u,d),this.contentAttr=PB(d),this.hostAttr=AB(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var qp=class n extends Au{supportsDOMEvents=!0;static makeCurrent(){EC(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=OB();return t==null?null:RB(t)}resetBaseElement(){Hu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return FC(document.cookie,e)}},Hu=null;function OB(){return Hu=Hu||document.head.querySelector("base"),Hu?Hu.getAttribute("href"):null}function RB(n){return new URL(n,document.baseURI).pathname}var NB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),YA=(()=>{class n extends Uu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ee(lt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),KA=["alt","control","meta","shift"],kB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},QA=(()=>{class n extends Uu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ir().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),KA.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=kB[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),KA.forEach(s=>{if(s!==i){let a=FB[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ee(lt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function qC(n,e){let t=V({rootComponent:n},LB(e));return aA(t)}function LB(n){return{appProviders:[...$B,...n?.providers??[]],platformProviders:BB}}function VB(){qp.makeCurrent()}function jB(){return new gr}function UB(){return x0(document),document}var BB=[{provide:Fo,useValue:BA},{provide:pp,useValue:VB,multi:!0},{provide:lt,useFactory:UB}];var $B=[{provide:ru,useValue:"root"},{provide:gr,useFactory:jB},{provide:Hp,useClass:YA,multi:!0,deps:[lt]},{provide:Hp,useClass:QA,multi:!0,deps:[lt]},zu,zC,$C,{provide:ji,useExisting:zu},{provide:ju,useClass:NB},[]];var ZA=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ee(lt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ee="primary",rd=Symbol("RouteTitle"),QC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ra(n){return new QC(n)}function o1(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function HB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qr(n[t],e[t]))return!1;return!0}function Qr(n,e){let t=n?ZC(n):void 0,r=e?ZC(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!s1(n[i],e[i]))return!1;return!0}function ZC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function s1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function a1(n){return n.length>0?n[n.length-1]:null}function qi(n){return O_(n)?n:zi(n)?rt(Promise.resolve(n)):le(n)}var qB={exact:l1,subset:u1},c1={exact:WB,subset:GB,ignored:()=>!0};function JA(n,e,t){return qB[t.paths](n.root,e.root,t.matrixParams)&&c1[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function WB(n,e){return Qr(n,e)}function l1(n,e,t){if(!ta(n.segments,e.segments)||!Kp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!l1(n.children[r],e.children[r],t))return!1;return!0}function GB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>s1(n[t],e[t]))}function u1(n,e,t){return d1(n,e,e.segments,t)}function d1(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ta(i,t)||e.hasChildren()||!Kp(i,t,r))}else if(n.segments.length===t.length){if(!ta(n.segments,t)||!Kp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!u1(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ta(n.segments,i)||!Kp(n.segments,i,r)||!n.children[Ee]?!1:d1(n.children[Ee],e,o,r)}}function Kp(n,e,t){return e.every((r,i)=>c1[t](n[i].parameters,r.parameters))}var Jr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new je([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ra(this.queryParams),this._queryParamMap}toString(){return QB.serialize(this)}},je=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yp(this)}},Bo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ra(this.parameters),this._parameterMap}toString(){return f1(this)}};function KB(n,e){return ta(n,e)&&n.every((t,r)=>Qr(t.parameters,e[r].parameters))}function ta(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function YB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ee&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ee&&(t=t.concat(e(i,r)))}),t}var ia=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new $o,providedIn:"root"})}return n})(),$o=class{parse(e){let t=new XC(e);return new Jr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qu(e.root,!0)}`,r=XB(e.queryParams),i=typeof e.fragment=="string"?`#${ZB(e.fragment)}`:"";return`${t}${r}${i}`}},QB=new $o;function Yp(n){return n.segments.map(e=>f1(e)).join("/")}function qu(n,e){if(!n.hasChildren())return Yp(n);if(e){let t=n.children[Ee]?qu(n.children[Ee],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Ee&&r.push(`${i}:${qu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=YB(n,(r,i)=>i===Ee?[qu(n.children[Ee],!1)]:[`${i}:${qu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ee]!=null?`${Yp(n)}/${t[0]}`:`${Yp(n)}/(${t.join("//")})`}}function h1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wp(n){return h1(n).replace(/%3B/gi,";")}function ZB(n){return encodeURI(n)}function JC(n){return h1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qp(n){return decodeURIComponent(n)}function XA(n){return Qp(n.replace(/\+/g,"%20"))}function f1(n){return`${JC(n.path)}${JB(n.parameters)}`}function JB(n){return Object.entries(n).map(([e,t])=>`;${JC(e)}=${JC(t)}`).join("")}function XB(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Wp(t)}=${Wp(i)}`).join("&"):`${Wp(t)}=${Wp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var e4=/^[^\/()?;#]+/;function WC(n){let e=n.match(e4);return e?e[0]:""}var t4=/^[^\/()?;=#]+/;function n4(n){let e=n.match(t4);return e?e[0]:""}var r4=/^[^=?&#]+/;function i4(n){let e=n.match(r4);return e?e[0]:""}var o4=/^[^&#]+/;function s4(n){let e=n.match(o4);return e?e[0]:""}var XC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ee]=new je(e,t)),r}parseSegment(){let e=WC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new Bo(Qp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=n4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=WC(this.remaining);i&&(r=i,this.capture(r))}e[Qp(t)]=Qp(r)}parseQueryParam(e){let t=i4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=s4(this.remaining);s&&(r=s,this.capture(r))}let i=XA(t),o=XA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=WC(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new F(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ee);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Ee]:new je([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function p1(n){return n.segments.length>0?new je([],{[Ee]:n}):n}function g1(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=g1(i);if(r===Ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new je(n.segments,e);return a4(t)}function a4(n){if(n.numberOfChildren===1&&n.children[Ee]){let e=n.children[Ee];return new je(n.segments.concat(e.segments),e.children)}return n}function zo(n){return n instanceof Jr}function m1(n,e,t=null,r=null){let i=y1(n);return _1(i,e,t,r)}function y1(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new je(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=p1(r);return e??i}function _1(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return GC(i,i,i,t,r);let o=c4(e);if(o.toRoot())return GC(i,i,new je([],{}),t,r);let s=l4(o,i,n),a=s.processChildren?Gu(s.segmentGroup,s.index,o.commands):C1(s.segmentGroup,s.index,o.commands);return GC(i,s.segmentGroup,a,t,r)}function Zp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Yu(n){return typeof n=="object"&&n!=null&&n.outlets}function GC(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=v1(n,e,t);let a=p1(g1(s));return new Jr(a,o,i)}function v1(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=v1(o,e,t)}),new je(n.segments,r)}var Jp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Zp(r[0]))throw new F(4003,!1);let i=r.find(Yu);if(i&&i!==a1(r))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function c4(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Jp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Jp(t,e,r)}var xc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function l4(n,e,t){if(n.isAbsolute)return new xc(e,!0,0);if(!t)return new xc(e,!1,NaN);if(t.parent===null)return new xc(t,!0,0);let r=Zp(n.commands[0])?0:1,i=t.segments.length-1+r;return u4(t,i,n.numberOfDoubleDots)}function u4(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new F(4005,!1);i=r.segments.length}return new xc(r,!1,i-o)}function d4(n){return Yu(n[0])?n[0].outlets:{[Ee]:n}}function C1(n,e,t){if(n??=new je([],{}),n.segments.length===0&&n.hasChildren())return Gu(n,e,t);let r=h4(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new je(n.segments.slice(0,r.pathIndex),{});return o.children[Ee]=new je(n.segments.slice(r.pathIndex),n.children),Gu(o,0,i)}else return r.match&&i.length===0?new je(n.segments,{}):r.match&&!n.hasChildren()?eE(n,e,t):r.match?Gu(n,0,i):eE(n,e,t)}function Gu(n,e,t){if(t.length===0)return new je(n.segments,{});{let r=d4(t),i={};if(Object.keys(r).some(o=>o!==Ee)&&n.children[Ee]&&n.numberOfChildren===1&&n.children[Ee].segments.length===0){let o=Gu(n.children[Ee],e,t);return new je(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=C1(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new je(n.segments,i)}}function h4(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Yu(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!t1(c,u,s))return o;r+=2}else{if(!t1(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function eE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Yu(o)){let c=f4(o.outlets);return new je(r,c)}if(i===0&&Zp(t[0])){let c=n.segments[e];r.push(new Bo(c.path,e1(t[0]))),i++;continue}let s=Yu(o)?o.outlets[Ee]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Zp(a)?(r.push(new Bo(s,e1(a))),i+=2):(r.push(new Bo(s,{})),i++)}return new je(r,{})}function f4(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=eE(new je([],{}),0,r))}),e}function e1(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function t1(n,e,t){return n==t.path&&Qr(e,t.parameters)}var Mc="imperative",Ot=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ot||{}),Un=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ho=class extends Un{type=Ot.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Bn=class extends Un{urlAfterRedirects;type=Ot.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(vn||{}),Ac=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ac||{}),Zr=class extends Un{reason;code;type=Ot.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Xr=class extends Un{reason;code;type=Ot.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Oc=class extends Un{error;target;type=Ot.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qu=class extends Un{urlAfterRedirects;state;type=Ot.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xp=class extends Un{urlAfterRedirects;state;type=Ot.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eg=class extends Un{urlAfterRedirects;state;shouldActivate;type=Ot.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},tg=class extends Un{urlAfterRedirects;state;type=Ot.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ng=class extends Un{urlAfterRedirects;state;type=Ot.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rg=class{route;type=Ot.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ig=class{route;type=Ot.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},og=class{snapshot;type=Ot.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sg=class{snapshot;type=Ot.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ag=class{snapshot;type=Ot.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cg=class{snapshot;type=Ot.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rc=class{routerEvent;position;anchor;type=Ot.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Zu=class{},Nc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function p4(n){return!(n instanceof Zu)&&!(n instanceof Nc)}function g4(n,e){return n.providers&&!n._injector&&(n._injector=Ec(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Tr(n){return n.outlet||Ee}function m4(n,e){let t=n.filter(r=>Tr(r)===e);return t.push(...n.filter(r=>Tr(r)!==e)),t}function Lc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var lg=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Lc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new oa(this.rootInjector)}},oa=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new lg(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ee(vt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ug=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=tE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=tE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=nE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return nE(e,this._root).map(t=>t.value)}};function tE(n,e){if(n===e.value)return e;for(let t of e.children){let r=tE(n,t);if(r)return r}return null}function nE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=nE(n,t);if(r.length)return r.unshift(e),r}return[]}var jn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Tc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ju=class extends ug{snapshot;constructor(e,t){super(e),this.snapshot=t,uE(this,e)}toString(){return this.snapshot.toString()}};function E1(n){let e=y4(n),t=new at([new Bo("",{})]),r=new at({}),i=new at({}),o=new at({}),s=new at(""),a=new sr(t,r,o,s,i,Ee,n,e.root);return a.snapshot=e.root,new Ju(new jn(a,[]),e)}function y4(n){let e={},t={},r={},i="",o=new na([],e,r,i,t,Ee,n,null,{});return new Xu("",new jn(o,[]))}var sr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(pe(u=>u[rd]))??le(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>ra(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>ra(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function dg(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&b1(i)&&(r.resolve[rd]=i.title),r}var na=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[rd]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ra(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ra(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Xu=class extends ug{url;constructor(e,t){super(t),this.url=e,uE(this,t)}toString(){return w1(this._root)}};function uE(n,e){e.value._routerState=n,e.children.forEach(t=>uE(n,t))}function w1(n){let e=n.children.length>0?` { ${n.children.map(w1).join(", ")} } `:"";return`${n.value}${e}`}function KC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Qr(e.params,t.params)||n.paramsSubject.next(t.params),HB(e.url,t.url)||n.urlSubject.next(t.url),Qr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function rE(n,e){let t=Qr(n.params,e.params)&&KB(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||rE(n.parent,e.parent))}function b1(n){return typeof n.title=="string"||n.title===null}var I1=new Q(""),id=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ee;activateEvents=new Ct;deactivateEvents=new Ct;attachEvents=new Ct;detachEvents=new Ct;routerOutletData=oA(void 0);parentContexts=k(oa);location=k(Bi);changeDetector=k(Kr);inputBinder=k(od,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new iE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Wr]})}return n})(),iE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===sr?this.route:e===oa?this.childContexts:e===I1?this.outletData:this.parent.get(e,t)}},od=new Q(""),dE=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Kl([r.queryParams,r.params,r.data]).pipe(Nt(([o,s,a],c)=>(a=V(V(V({},o),s),a),c===0?le(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=cA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),hE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Gt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&nr(0,"router-outlet")},dependencies:[id],encapsulation:2})}return n})();function fE(n){let e=n.children&&n.children.map(fE),t=e?ce(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ee&&(t.component=hE),t}function _4(n,e,t){let r=ed(n,e._root,t?t._root:void 0);return new Ju(r,e)}function ed(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=v4(n,e,t);return new jn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ed(n,a)),s}}let r=C4(e.value),i=e.children.map(o=>ed(n,o));return new jn(r,i)}}function v4(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ed(n,r,i);return ed(n,r)})}function C4(n){return new sr(new at(n.url),new at(n.params),new at(n.queryParams),new at(n.fragment),new at(n.data),n.outlet,n.component,n)}var kc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},D1="ngNavigationCancelingError";function hg(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=zo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=S1(!1,vn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function S1(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[D1]=!0,t.cancellationCode=e,t}function E4(n){return T1(n)&&zo(n.url)}function T1(n){return!!n&&n[D1]}var w4=(n,e,t,r)=>pe(i=>(new oE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),oE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),KC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Tc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Tc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Tc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Tc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new cg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new sg(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(KC(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),KC(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},fg=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Pc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function b4(n,e,t){let r=n._root,i=e?e._root:null;return Wu(r,i,t,[r.value])}function I4(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Vc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Z_(n)?n:e.get(n):r}function Wu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Tc(e);return n.children.forEach(s=>{D4(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ku(a,t.getContext(s),i)),i}function D4(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=S4(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new fg(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Wu(n,e,a?a.children:null,r,i):Wu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Pc(a.outlet.component,s))}else s&&Ku(e,a,i),i.canActivateChecks.push(new fg(r)),o.component?Wu(n,null,a?a.children:null,r,i):Wu(n,null,t,r,i);return i}function S4(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ta(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ta(n.url,e.url)||!Qr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rE(n,e)||!Qr(n.queryParams,e.queryParams);case"paramsChange":default:return!rE(n,e)}}function Ku(n,e,t){let r=Tc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ku(s,e.children.getContext(o),t):Ku(s,null,t):Ku(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Pc(e.outlet.component,i)):t.canDeactivateChecks.push(new Pc(null,i)):t.canDeactivateChecks.push(new Pc(null,i))}function sd(n){return typeof n=="function"}function T4(n){return typeof n=="boolean"}function x4(n){return n&&sd(n.canLoad)}function M4(n){return n&&sd(n.canActivate)}function P4(n){return n&&sd(n.canActivateChild)}function A4(n){return n&&sd(n.canDeactivate)}function O4(n){return n&&sd(n.canMatch)}function x1(n){return n instanceof Si||n?.name==="EmptyError"}var Gp=Symbol("INITIAL_VALUE");function Fc(){return Nt(n=>Kl(n.map(e=>e.pipe(At(1),F_(Gp)))).pipe(pe(e=>{for(let t of e)if(t!==!0){if(t===Gp)return Gp;if(t===!1||R4(t))return t}return!0}),_t(e=>e!==Gp),At(1)))}function R4(n){return zo(n)||n instanceof kc}function N4(n,e){return yt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?le(ce(V({},t),{guardsResult:!0})):k4(s,r,i,n).pipe(yt(a=>a&&T4(a)?F4(r,o,n,e):le(a)),pe(a=>ce(V({},t),{guardsResult:a})))})}function k4(n,e,t,r){return rt(n).pipe(yt(i=>B4(i.component,i.route,t,e,r)),Mi(i=>i!==!0,!0))}function F4(n,e,t,r){return rt(e).pipe(Do(i=>ic(V4(i.route.parent,r),L4(i.route,r),U4(n,i.path,t),j4(n,i.route,t))),Mi(i=>i!==!0,!0))}function L4(n,e){return n!==null&&e&&e(new ag(n)),le(!0)}function V4(n,e){return n!==null&&e&&e(new og(n)),le(!0)}function j4(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return le(!0);let i=r.map(o=>Yl(()=>{let s=Lc(e)??t,a=Vc(o,s),c=M4(a)?a.canActivate(e,n):wt(s,()=>a(e,n));return qi(c).pipe(Mi())}));return le(i).pipe(Fc())}function U4(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>I4(s)).filter(s=>s!==null).map(s=>Yl(()=>{let a=s.guards.map(c=>{let u=Lc(s.node)??t,d=Vc(c,u),f=P4(d)?d.canActivateChild(r,n):wt(u,()=>d(r,n));return qi(f).pipe(Mi())});return le(a).pipe(Fc())}));return le(o).pipe(Fc())}function B4(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return le(!0);let s=o.map(a=>{let c=Lc(e)??i,u=Vc(a,c),d=A4(u)?u.canDeactivate(n,e,t,r):wt(c,()=>u(n,e,t,r));return qi(d).pipe(Mi())});return le(s).pipe(Fc())}function $4(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return le(!0);let o=i.map(s=>{let a=Vc(s,n),c=x4(a)?a.canLoad(e,t):wt(n,()=>a(e,t));return qi(c)});return le(o).pipe(Fc(),M1(r))}function M1(n){return I_(kt(e=>{if(typeof e!="boolean")throw hg(n,e)}),pe(e=>e===!0))}function z4(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return le(!0);let o=i.map(s=>{let a=Vc(s,n),c=O4(a)?a.canMatch(e,t):wt(n,()=>a(e,t));return qi(c)});return le(o).pipe(Fc(),M1(r))}var td=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},nd=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Sc(n){return rc(new td(n))}function H4(n){return rc(new F(4e3,!1))}function q4(n){return rc(S1(!1,vn.GuardRejected))}var sE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return le(r);if(i.numberOfChildren>1||!i.children[Ee])return H4(`${e.redirectTo}`);i=i.children[Ee]}}applyRedirectCommands(e,t,r,i,o){return W4(t,i,o).pipe(pe(s=>{if(s instanceof Jr)throw new nd(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new nd(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Jr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new je(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new F(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function W4(n,e,t){if(typeof n=="string")return le(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:d,title:f}=e;return qi(wt(t,()=>r({params:u,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:f})))}var aE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function G4(n,e,t,r,i){let o=P1(n,e,t);return o.matched?(r=g4(e,r),z4(r,e,t,i).pipe(pe(s=>s===!0?o:V({},aE)))):le(o)}function P1(n,e,t){if(e.path==="**")return K4(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},aE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||o1)(t,n,e);if(!i)return V({},aE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function K4(n){return{matched:!0,parameters:n.length>0?a1(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function n1(n,e,t,r){return t.length>0&&Z4(n,t,r)?{segmentGroup:new je(e,Q4(r,new je(t,n.children))),slicedSegments:[]}:t.length===0&&J4(n,t,r)?{segmentGroup:new je(n.segments,Y4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new je(n.segments,n.children),slicedSegments:t}}function Y4(n,e,t,r){let i={};for(let o of t)if(gg(n,e,o)&&!r[Tr(o)]){let s=new je([],{});i[Tr(o)]=s}return V(V({},r),i)}function Q4(n,e){let t={};t[Ee]=e;for(let r of n)if(r.path===""&&Tr(r)!==Ee){let i=new je([],{});t[Tr(r)]=i}return t}function Z4(n,e,t){return t.some(r=>gg(n,e,r)&&Tr(r)!==Ee)}function J4(n,e,t){return t.some(r=>gg(n,e,r))}function gg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function X4(n,e,t){return e.length===0&&!n.children[t]}var cE=class{};function e6(n,e,t,r,i,o,s="emptyOnly"){return new lE(n,e,t,r,i,s,o).recognize()}var t6=31,lE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new sE(this.urlSerializer,this.urlTree)}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=n1(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(pe(({children:t,rootSnapshot:r})=>{let i=new jn(r,t),o=new Xu("",i),s=m1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new na([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ee,t).pipe(pe(r=>({children:r,rootSnapshot:t})),xi(r=>{if(r instanceof nd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof td?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(pe(s=>s instanceof jn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return rt(o).pipe(Do(s=>{let a=r.children[s],c=m4(t,s);return this.processSegmentGroup(e,c,a,s,i)}),k_((s,a)=>(s.push(...a),s)),So(null),N_(),yt(s=>{if(s===null)return Sc(r);let a=A1(s);return n6(a),le(a)}))}processSegment(e,t,r,i,o,s,a){return rt(t).pipe(Do(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(xi(u=>{if(u instanceof td)return le(null);throw u}))),Mi(c=>!!c),xi(c=>{if(x1(c))return X4(r,i,o)?le(new cE):Sc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Tr(r)!==s&&(s===Ee||!gg(i,o,r))?Sc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Sc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:y}=P1(t,i,o);if(!c)return Sc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>t6&&(this.allowRedirects=!1));let _=new na(o,u,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,r1(i),Tr(i),i.component??i._loadedComponent??null,i,i1(i)),b=dg(_,a,this.paramsInheritanceStrategy);return _.params=Object.freeze(b.params),_.data=Object.freeze(b.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,_,e).pipe(Nt(R=>this.applyRedirects.lineralizeSegments(i,R)),yt(R=>this.processSegment(e,r,t,R.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=G4(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Nt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Nt(({routes:u})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:y,remainingSegments:_}=c,b=new na(y,f,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,r1(r),Tr(r),r.component??r._loadedComponent??null,r,i1(r)),P=dg(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(P.params),b.data=Object.freeze(P.data);let{segmentGroup:R,slicedSegments:j}=n1(t,y,_,u);if(j.length===0&&R.hasChildren())return this.processChildren(d,u,R,b).pipe(pe(Z=>new jn(b,Z)));if(u.length===0&&j.length===0)return le(new jn(b,[]));let Y=Tr(r)===o;return this.processSegment(d,u,R,j,Y?Ee:o,!0,b).pipe(pe(Z=>new jn(b,Z instanceof jn?[Z]:[])))}))):Sc(t)))}getChildConfig(e,t,r){return t.children?le({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?le({routes:t._loadedRoutes,injector:t._loadedInjector}):$4(e,t,r,this.urlSerializer).pipe(yt(i=>i?this.configLoader.loadChildren(e,t).pipe(kt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):q4(t))):le({routes:[],injector:e})}};function n6(n){n.sort((e,t)=>e.value.outlet===Ee?-1:t.value.outlet===Ee?1:e.value.outlet.localeCompare(t.value.outlet))}function r6(n){let e=n.value.routeConfig;return e&&e.path===""}function A1(n){let e=[],t=new Set;for(let r of n){if(!r6(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=A1(r.children);e.push(new jn(r.value,i))}return e.filter(r=>!t.has(r))}function r1(n){return n.data||{}}function i1(n){return n.resolve||{}}function i6(n,e,t,r,i,o){return yt(s=>e6(n,e,t,r,s.extractedUrl,i,o).pipe(pe(({state:a,tree:c})=>ce(V({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function o6(n,e){return yt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return le(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of O1(c))s.add(u);let a=0;return rt(s).pipe(Do(c=>o.has(c)?s6(c,r,n,e):(c.data=dg(c,c.parent,n).resolve,le(void 0))),kt(()=>a++),oc(1),yt(c=>a===s.size?le(t):wn))})}function O1(n){let e=n.children.map(t=>O1(t)).flat();return[n,...e]}function s6(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!b1(i)&&(o[rd]=i.title),Yl(()=>(n.data=dg(n,n.parent,t).resolve,a6(o,n,e,r).pipe(pe(s=>(n._resolvedData=s,n.data=V(V({},n.data),s),null)))))}function a6(n,e,t,r){let i=ZC(n);if(i.length===0)return le({});let o={};return rt(i).pipe(yt(s=>c6(n[s],e,t,r).pipe(Mi(),kt(a=>{if(a instanceof kc)throw hg(new $o,a);o[s]=a}))),oc(1),pe(()=>o),xi(s=>x1(s)?wn:rc(s)))}function c6(n,e,t,r){let i=Lc(e)??r,o=Vc(n,i),s=o.resolve?o.resolve(e,t):wt(i,()=>o(e,t));return qi(s)}function YC(n){return Nt(e=>{let t=n(e);return t?rt(t).pipe(pe(()=>e)):le(e)})}var pE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ee);return r}getResolvedTitleForRoute(t){return t.data[rd]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(R1),providedIn:"root"})}return n})(),R1=(()=>{class n extends pE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ee(ZA))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qo=new Q("",{providedIn:"root",factory:()=>({})}),sa=new Q(""),mg=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(sC);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return le(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=qi(wt(t,()=>r.loadComponent())).pipe(pe(k1),kt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ql(()=>{this.componentLoaders.delete(r)})),o=new Xa(i,()=>new nt).pipe(Ja());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return le({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=N1(r,this.compiler,t,this.onLoadEndListener).pipe(Ql(()=>{this.childrenLoaders.delete(r)})),s=new Xa(o,()=>new nt).pipe(Ja());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function N1(n,e,t,r){return qi(wt(t,()=>n.loadChildren())).pipe(pe(k1),yt(i=>i instanceof bp||Array.isArray(i)?le(i):rt(e.compileModuleAsync(i))),pe(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(sa,[],{optional:!0,self:!0}).flat()),{routes:s.map(fE),injector:o}}))}function l6(n){return n&&typeof n=="object"&&"default"in n}function k1(n){return l6(n)?n.default:n}var yg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(u6),providedIn:"root"})}return n})(),u6=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gE=new Q(""),mE=new Q("");function F1(n,e,t){let r=n.get(mE),i=n.get(lt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),d6(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:c}=r;return c&&wt(n,()=>c({transition:a,from:e,to:t})),s}function d6(n){return new Promise(e=>{Du({read:()=>setTimeout(e)},{injector:n})})}var yE=new Q(""),_g=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new nt;transitionAbortWithErrorSubject=new nt;configLoader=k(mg);environmentInjector=k(vt);destroyRef=k(Xn);urlSerializer=k(ia);rootContexts=k(oa);location=k(jo);inputBindingEnabled=k(od,{optional:!0})!==null;titleStrategy=k(pE);options=k(qo,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(yg);createViewTransition=k(gE,{optional:!0});navigationErrorHandler=k(yE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>le(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new rg(i)),r=i=>this.events.next(new ig(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ce(V({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new at(null),this.transitions.pipe(_t(r=>r!==null),Nt(r=>{let i=!1;return le(r).pipe(Nt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",vn.SupersededByNewNavigation),wn;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ce(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let c="";return this.events.next(new Xr(o.id,this.urlSerializer.serialize(o.rawUrl),c,Ac.IgnoredSameUrlNavigation)),o.resolve(!1),wn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return le(o).pipe(Nt(c=>(this.events.next(new Ho(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?wn:Promise.resolve(c))),i6(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),kt(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=ce(V({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new Qu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:f,extras:y}=o,_=new Ho(c,this.urlSerializer.serialize(u),d,f);this.events.next(_);let b=E1(this.rootComponentType).snapshot;return this.currentTransition=r=ce(V({},o),{targetSnapshot:b,urlAfterRedirects:u,extras:ce(V({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,le(r)}else{let c="";return this.events.next(new Xr(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Ac.IgnoredByUrlHandlingStrategy)),o.resolve(!1),wn}}),kt(o=>{let s=new Xp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),pe(o=>(this.currentTransition=r=ce(V({},o),{guards:b4(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),N4(this.environmentInjector,o=>this.events.next(o)),kt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw hg(this.urlSerializer,o.guardsResult);let s=new eg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),_t(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",vn.GuardRejected),!1)),YC(o=>{if(o.guards.canActivateChecks.length!==0)return le(o).pipe(kt(s=>{let a=new tg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Nt(s=>{let a=!1;return le(s).pipe(o6(this.paramsInheritanceStrategy,this.environmentInjector),kt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",vn.NoDataFromResolver)}}))}),kt(s=>{let a=new ng(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),YC(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let u=Lc(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(kt(d=>{a.component=d}),pe(()=>{})))}for(let u of a.children)c.push(...s(u));return c};return Kl(s(o.targetSnapshot.root)).pipe(So(null),At(1))}),YC(()=>this.afterPreactivation()),Nt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?rt(a).pipe(pe(()=>r)):le(r)}),pe(o=>{let s=_4(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ce(V({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),kt(()=>{this.events.next(new Zu)}),w4(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),At(1),gf(new de(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(_t(()=>!i&&!r.targetRouterState),kt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",vn.Aborted)}))),kt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Bn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),gf(this.transitionAbortWithErrorSubject.pipe(kt(o=>{throw o}))),Ql(()=>{i||this.cancelNavigationTransition(r,"",vn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),xi(o=>{if(this.destroyed)return r.resolve(!1),wn;if(i=!0,T1(o))this.events.next(new Zr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),E4(o)?this.events.next(new Nc(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Oc(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=wt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof kc){let{message:c,cancellationCode:u}=hg(this.urlSerializer,a);this.events.next(new Zr(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new Nc(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return wn}))}))}cancelNavigationTransition(t,r,i){let o=new Zr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function h6(n){return n!==Mc}var L1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(f6),providedIn:"root"})}return n})(),pg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},f6=(()=>{class n extends pg{static \u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),V1=(()=>{class n{urlSerializer=k(ia);options=k(qo,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(jo);urlHandlingStrategy=k(yg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Jr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Jr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=E1(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(p6),providedIn:"root"})}return n})(),p6=(()=>{class n extends V1{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ho?this.updateStateMemento():t instanceof Xr?this.commitTransition(r):t instanceof Qu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Zu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Zr&&t.code!==vn.SupersededByNewNavigation&&t.code!==vn.Redirect?this.restoreHistory(r):t instanceof Oc?this.restoreHistory(r,!0):t instanceof Bn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vg(n,e){n.events.pipe(_t(t=>t instanceof Bn||t instanceof Zr||t instanceof Oc||t instanceof Xr),pe(t=>t instanceof Bn||t instanceof Xr?0:(t instanceof Zr?t.code===vn.Redirect||t.code===vn.SupersededByNewNavigation:!1)?2:1),_t(t=>t!==2),At(1)).subscribe(()=>{e()})}var g6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},m6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},dt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(J0);stateManager=k(V1);options=k(qo,{optional:!0})||{};pendingTasks=k(Hr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(_g);urlSerializer=k(ia);location=k(jo);urlHandlingStrategy=k(yg);injector=k(vt);_events=new nt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(L1);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(sa,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(od,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new He;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Zr&&r.code!==vn.Redirect&&r.code!==vn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Bn)this.navigated=!0;else if(r instanceof Nc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||h6(i.source)},s);this.scheduleNavigation(a,Mc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}p4(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Mc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(tn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(fE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let y=i?i.snapshot:this.routerState.snapshot.root;f=y1(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return _1(f,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=zo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Mc,null,r)}navigate(t,r={skipLocationChange:!1}){return y6(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},g6):r===!1?i=V({},m6):i=r,zo(t))return JA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return JA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,y)=>{a=f,c=y});let d=this.pendingTasks.add();return vg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y6(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new F(4008,!1)}var Wo=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=zr(null);get href(){return Dn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new nt;applicationErrorHandler=k(tn);options=k(qo,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(k(new Tp("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Bn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(zo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:zo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(z(dt),z(sr),bu("tabindex"),z(Vn),z(Wt),z(Ir))};static \u0275dir=qe({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&re("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Lo("href",i.reactiveHref(),A0)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Vo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Vo],replaceUrl:[2,"replaceUrl","replaceUrl",Vo],routerLink:"routerLink"},features:[Wr]})}return n})(),vE=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ct;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Bn&&this.update()})}ngAfterContentInit(){le(this.links.changes,le(null)).pipe(Io()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=rt(t).pipe(Io()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=_6(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(z(dt),z(Wt),z(Vn),z(Kr),z(Wo,8))};static \u0275dir=qe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&nC(o,Wo,5),r&2){let s;rC(s=iC())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Wr]})}return n})();function _6(n){return!!n.paths}var ad=class{};var j1=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(_t(t=>t instanceof Bn),Do(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ec(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return rt(i).pipe(Io())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=le(null);let o=i.pipe(yt(s=>s===null?le(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return rt([o,s]).pipe(Io())}else return o})}static \u0275fac=function(r){return new(r||n)(ee(dt),ee(vt),ee(ad),ee(mg))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),U1=new Q(""),v6=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Mc;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ho?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Xr&&t.code===Ac.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Rc&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>E(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Rc(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){W0()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function CE(n,...e){return Lt([{provide:sa,multi:!0,useValue:n},[],{provide:sr,useFactory:B1,deps:[dt]},{provide:Su,multi:!0,useFactory:$1},e.map(t=>t.\u0275providers)])}function B1(n){return n.routerState.root}function cd(n,e){return{\u0275kind:n,\u0275providers:e}}function $1(){let n=k(Qe);return e=>{let t=n.get(tr);if(e!==t.components[0])return;let r=n.get(dt),i=n.get(z1);n.get(EE)===1&&r.initialNavigation(),n.get(W1,null,{optional:!0})?.setUpPreloading(),n.get(U1,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var z1=new Q("",{factory:()=>new nt}),EE=new Q("",{providedIn:"root",factory:()=>1});function H1(){let n=[{provide:EE,useValue:0},bc(()=>{let e=k(Qe);return e.get(wC,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(dt),o=e.get(z1);vg(i,()=>{r(!0)}),e.get(_g).afterPreactivation=()=>(r(!0),o.closed?le(void 0):o),i.initialNavigation()}))})];return cd(2,n)}function q1(){let n=[bc(()=>{k(dt).setUpLocationChangeListener()}),{provide:EE,useValue:2}];return cd(3,n)}var W1=new Q("");function G1(n){return cd(0,[{provide:W1,useExisting:j1},{provide:ad,useExisting:n}])}function K1(){return cd(8,[dE,{provide:od,useExisting:dE}])}function Y1(n){$i("NgRouterViewTransitions");let e=[{provide:gE,useValue:F1},{provide:mE,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return cd(9,e)}var Q1=[jo,{provide:ia,useClass:$o},dt,oa,{provide:sr,useFactory:B1,deps:[dt]},mg,[]],wE=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[Q1,[],{provide:sa,multi:!0,useValue:t},[],r?.errorHandler?{provide:yE,useValue:r.errorHandler}:[],{provide:qo,useValue:r||{}},r?.useHash?E6():w6(),C6(),r?.preloadingStrategy?G1(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?b6(r):[],r?.bindToComponentInputs?K1().\u0275providers:[],r?.enableViewTransitions?Y1().\u0275providers:[],I6()]}}static forChild(t){return{ngModule:n,providers:[{provide:sa,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=er({type:n});static \u0275inj=kn({})}return n})();function C6(){return{provide:U1,useFactory:()=>{let n=k($A),e=k(Te),t=k(qo),r=k(_g),i=k(ia);return t.scrollOffset&&n.setOffset(t.scrollOffset),new v6(i,r,n,e,t)}}}function E6(){return{provide:Ir,useClass:AC}}function w6(){return{provide:Ir,useClass:Ap}}function b6(n){return[n.initialNavigation==="disabled"?q1().\u0275providers:[],n.initialNavigation==="enabledBlocking"?H1().\u0275providers:[]]}var _E=new Q("");function I6(){return[{provide:_E,useFactory:$1},{provide:Su,multi:!0,useExisting:_E}]}var Ie=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Ie||{}),xr="*";function Z1(n,e=null){return{type:Ie.Sequence,steps:n,options:e}}function bE(n){return{type:Ie.Style,styles:n,offset:null}}var Wi=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Uc=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},ld="!";function J1(n){return new F(3e3,!1)}function D6(){return new F(3100,!1)}function S6(){return new F(3101,!1)}function T6(n){return new F(3001,!1)}function x6(n){return new F(3003,!1)}function M6(n){return new F(3004,!1)}function eO(n,e){return new F(3005,!1)}function tO(){return new F(3006,!1)}function nO(){return new F(3007,!1)}function rO(n,e){return new F(3008,!1)}function iO(n){return new F(3002,!1)}function oO(n,e,t,r,i){return new F(3010,!1)}function sO(){return new F(3011,!1)}function aO(){return new F(3012,!1)}function cO(){return new F(3200,!1)}function lO(){return new F(3202,!1)}function uO(){return new F(3013,!1)}function dO(n){return new F(3014,!1)}function hO(n){return new F(3015,!1)}function fO(n){return new F(3016,!1)}function pO(n,e){return new F(3404,!1)}function P6(n){return new F(3502,!1)}function gO(n){return new F(3503,!1)}function mO(){return new F(3300,!1)}function yO(n){return new F(3504,!1)}function _O(n){return new F(3301,!1)}function vO(n,e){return new F(3302,!1)}function CO(n){return new F(3303,!1)}function EO(n,e){return new F(3400,!1)}function wO(n){return new F(3401,!1)}function bO(n){return new F(3402,!1)}function IO(n,e){return new F(3505,!1)}function Gi(n){switch(n.length){case 0:return new Wi;case 1:return n[0];default:return new Uc(n)}}function TE(n,e,t=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(c=>{let u=c.get("offset"),d=u==s,f=d&&a||new Map;c.forEach((y,_)=>{let b=_,P=y;if(_!=="offset")switch(b=n.normalizePropertyName(b,i),P){case ld:P=t.get(_);break;case xr:P=r.get(_);break;default:P=n.normalizeStyleValue(_,b,P,i);break}f.set(b,P)}),d||o.push(f),a=f,s=u}),i.length)throw P6(i);return o}function Cg(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&IE(t,"start",n)));break;case"done":n.onDone(()=>r(t&&IE(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&IE(t,"destroy",n)));break}}function IE(n,e,t){let r=t.totalTime,i=!!t.disabled,o=Eg(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function Eg(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Tn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function xE(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var A6=typeof document>"u"?null:document.documentElement;function wg(n){let e=n.parentNode||n.host||null;return e===A6?null:e}function O6(n){return n.substring(1,6)=="ebkit"}var aa=null,X1=!1;function DO(n){aa||(aa=R6()||{},X1=aa.style?"WebkitAppearance"in aa.style:!1);let e=!0;return aa.style&&!O6(n)&&(e=n in aa.style,!e&&X1&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in aa.style)),e}function R6(){return typeof document<"u"?document.body:null}function ME(n,e){for(;e;){if(e===n)return!0;e=wg(e)}return!1}function PE(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var N6=1e3,AE="{{",k6="}}",OE="ng-enter",bg="ng-leave",ud="ng-trigger",dd=".ng-trigger",RE="ng-animating",Ig=".ng-animating";function ei(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:DE(parseFloat(e[1]),e[2])}function DE(n,e){switch(e){case"s":return n*N6;default:return n}}function hd(n,e,t){return n.hasOwnProperty("duration")?n:F6(n,e,t)}function F6(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(J1(n)),{duration:0,delay:0,easing:""};i=DE(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=DE(parseFloat(c),a[4]));let u=a[5];u&&(s=u)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(D6()),a=!0),o<0&&(e.push(S6()),a=!0),a&&e.splice(c,0,J1(n))}return{duration:i,delay:o,easing:s}}function SO(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Mr(n,e,t){e.forEach((r,i)=>{let o=Dg(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function Go(n,e){e.forEach((t,r)=>{let i=Dg(r);n.style[i]=""})}function Bc(n){return Array.isArray(n)?n.length==1?n[0]:Z1(n):n}function TO(n,e,t){let r=e.params||{},i=NE(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(T6(o))})}var SE=new RegExp(`${AE}\\s*(.+?)\\s*${k6}`,"g");function NE(n){let e=[];if(typeof n=="string"){let t;for(;t=SE.exec(n);)e.push(t[1]);SE.lastIndex=0}return e}function $c(n,e,t){let r=`${n}`,i=r.replace(SE,(o,s)=>{let a=e[s];return a==null&&(t.push(x6(s)),a=""),a.toString()});return i==r?n:i}var L6=/-+([a-z0-9])/g;function Dg(n){return n.replace(L6,(...e)=>e[1].toUpperCase())}function xO(n,e){return n===0||e===0}function MO(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,Sg(n,a)))}}return e}function xn(n,e,t){switch(e.type){case Ie.Trigger:return n.visitTrigger(e,t);case Ie.State:return n.visitState(e,t);case Ie.Transition:return n.visitTransition(e,t);case Ie.Sequence:return n.visitSequence(e,t);case Ie.Group:return n.visitGroup(e,t);case Ie.Animate:return n.visitAnimate(e,t);case Ie.Keyframes:return n.visitKeyframes(e,t);case Ie.Style:return n.visitStyle(e,t);case Ie.Reference:return n.visitReference(e,t);case Ie.AnimateChild:return n.visitAnimateChild(e,t);case Ie.AnimateRef:return n.visitAnimateRef(e,t);case Ie.Query:return n.visitQuery(e,t);case Ie.Stagger:return n.visitStagger(e,t);default:throw M6(e.type)}}function Sg(n,e){return window.getComputedStyle(n)[e]}var ZE=(()=>{class n{validateStyleProperty(t){return DO(t)}containsElement(t,r){return ME(t,r)}getParentElement(t){return wg(t)}query(t,r,i){return PE(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],c){return new Wi(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),la=class{static NOOP=new ZE},ua=class{};var V6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Ag=class extends ua{normalizePropertyName(e,t){return Dg(e)}normalizeStyleValue(e,t,r,i){let o="",s=r.toString().trim();if(V6.has(t)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(eO(e,r))}return s+o}};var Og="*";function j6(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>U6(r,t,e)):t.push(n),t}function U6(n,e,t){if(n[0]==":"){let c=B6(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(hO(n)),e;let i=r[1],o=r[2],s=r[3];e.push(PO(i,s));let a=i==Og&&s==Og;o[0]=="<"&&!a&&e.push(PO(s,i))}function B6(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(fO(n)),"* => *"}}var Tg=new Set(["true","1"]),xg=new Set(["false","0"]);function PO(n,e){let t=Tg.has(n)||xg.has(n),r=Tg.has(e)||xg.has(e);return(i,o)=>{let s=n==Og||n==i,a=e==Og||e==o;return!s&&t&&typeof i=="boolean"&&(s=i?Tg.has(n):xg.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?Tg.has(e):xg.has(e)),s&&a}}var UO=":self",$6=new RegExp(`s*${UO}s*,?`,"g");function BO(n,e,t,r){return new UE(n).build(e,t,r)}var AO="",UE=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new BE(t);return this._resetContextStyleTimingState(i),xn(this,Bc(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=AO,e.collectedStyles=new Map,e.collectedStyles.set(AO,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(tO()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==Ie.State){let c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(d=>{c.name=d,o.push(this.visitState(c,t))}),c.name=u}else if(a.type==Ie.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(nO())}),{type:Ie.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{NE(c).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(rO(e.name,[...o.values()]))}return{type:Ie.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=xn(this,Bc(e.animation),t),i=j6(e.expr,t.errors);return{type:Ie.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ca(e.options)}}visitSequence(e,t){return{type:Ie.Sequence,steps:e.steps.map(r=>xn(this,r,t)),options:ca(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,o=e.steps.map(s=>{t.currentTime=r;let a=xn(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:Ie.Group,steps:o,options:ca(e.options)}}visitAnimate(e,t){let r=W6(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:bE({});if(o.type==Ie.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};r.easing&&(u.easing=r.easing),s=bE(u)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:Ie.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===xr?r.push(a):t.errors.push(iO(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(AE)>=0){o=!0;break}}}),{type:Ie.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let u=t.collectedStyles.get(t.currentQuerySelector),d=u.get(c),f=!0;d&&(o!=i&&o>=d.startTime&&i<=d.endTime&&(t.errors.push(oO(c,d.startTime,d.endTime,o,i)),f=!1),o=d.startTime),f&&u.set(c,{startTime:o,endTime:i}),t.options&&TO(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:Ie.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(sO()),r;let i=1,o=0,s=[],a=!1,c=!1,u=0,d=e.steps.map(j=>{let Y=this._makeStyleAst(j,t),Z=Y.offset!=null?Y.offset:q6(Y.styles),ie=0;return Z!=null&&(o++,ie=Y.offset=Z),c=c||ie<0||ie>1,a=a||ie<u,u=ie,s.push(ie),Y});c&&t.errors.push(aO()),a&&t.errors.push(cO());let f=e.steps.length,y=0;o>0&&o<f?t.errors.push(lO()):o==0&&(y=i/(f-1));let _=f-1,b=t.currentTime,P=t.currentAnimateTimings,R=P.duration;return d.forEach((j,Y)=>{let Z=y>0?Y==_?1:y*Y:s[Y],ie=Z*R;t.currentTime=b+P.delay+ie,P.duration=ie,this._validateStyleAst(j,t),j.offset=Z,r.styles.push(j)}),r}visitReference(e,t){return{type:Ie.Reference,animation:xn(this,Bc(e.animation),t),options:ca(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Ie.AnimateChild,options:ca(e.options)}}visitAnimateRef(e,t){return{type:Ie.AnimateRef,animation:this.visitReference(e.animation,t),options:ca(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=z6(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Tn(t.collectedStyles,t.currentQuerySelector,new Map);let a=xn(this,Bc(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Ie.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:ca(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(uO());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:hd(e.timings,t.errors,!0);return{type:Ie.Stagger,animation:xn(this,Bc(e.animation),t),timings:r,options:null}}};function z6(n){let e=!!n.split(/\s*,\s*/).find(t=>t==UO);return e&&(n=n.replace($6,"")),n=n.replace(/@\*/g,dd).replace(/@\w+/g,t=>dd+"-"+t.slice(1)).replace(/:animating/g,Ig),[n,e]}function H6(n){return n?V({},n):null}var BE=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function q6(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function W6(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=hd(n,e).duration;return kE(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=kE(0,0,"");return o.dynamic=!0,o.strValue=t,o}let i=hd(t,e);return kE(i.duration,i.delay,i.easing)}function ca(n){return n?(n=V({},n),n.params&&(n.params=H6(n.params))):n={},n}function kE(n,e,t){return{duration:n,delay:e,easing:t}}function JE(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var pd=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},G6=1,K6=":enter",Y6=new RegExp(K6,"g"),Q6=":leave",Z6=new RegExp(Q6,"g");function $O(n,e,t,r,i,o=new Map,s=new Map,a,c,u=[]){return new $E().buildKeyframes(n,e,t,r,i,o,s,a,c,u)}var $E=class{buildKeyframes(e,t,r,i,o,s,a,c,u,d=[]){u=u||new pd;let f=new zE(e,t,u,i,o,d,[]);f.options=c;let y=c.delay?ei(c.delay):0;f.currentTimeline.delayNextStep(y),f.currentTimeline.setStyles([s],null,f.errors,c),xn(this,r,f);let _=f.timelines.filter(b=>b.containsAnimation());if(_.length&&a.size){let b;for(let P=_.length-1;P>=0;P--){let R=_[P];if(R.element===t){b=R;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,f.errors,c)}return _.length?_.map(b=>b.buildKeyframes()):[JE(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:ei($c(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime,s=r.duration!=null?ei(r.duration):null,a=r.delay!=null?ei(r.delay):null;return s!==0&&e.forEach(c=>{let u=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),xn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==Ie.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Rg);let s=ei(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>xn(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?ei(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),xn(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?$c(r,t.params,t.errors):r;return hd(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==Ie.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let u=c.offset||0;a.forwardTime(u*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?ei(i.delay):0;o&&(t.previousNode.type===Ie.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Rg);let s=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,d)=>{t.currentQueryIndex=d;let f=t.createSubContext(e.options,u);o&&f.delayNextStep(o),u===t.element&&(c=f.currentTimeline),xn(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let y=f.currentTimeline.currentTime;s=Math.max(s,y)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let d=t.currentTimeline;c&&d.delayNextStep(c);let f=d.currentTime;xn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}},Rg={},zE=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Rg;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=c||new Ng(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=ei(r.duration)),r.delay!=null&&(i.delay=ei(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=$c(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Rg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new HE(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(Y6,"."+this._enterClassName),e=e.replace(Z6,"."+this._leaveClassName);let c=r!=1,u=this._driver.query(this.element,e,c);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!o&&a.length==0&&s.push(dO(t)),a}},Ng=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=G6,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||xr),this._currentKeyframe.set(t,xr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let o=i&&i.params||{},s=J6(e,this._globalTimelineStyles);for(let[a,c]of s){let u=$c(c,o,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??xr),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let u=new Map([...this._backFill,...a]);u.forEach((d,f)=>{d===ld?e.add(f):d===xr&&t.add(f)}),r||u.set("offset",c/this.duration),i.push(u)});let o=[...e.values()],s=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return JE(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},HE=class extends Ng{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=r+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let u=new Map(e[0]);u.set("offset",OO(a)),o.push(u);let d=e.length-1;for(let f=1;f<=d;f++){let y=new Map(e[f]),_=y.get("offset"),b=t+_*r;y.set("offset",OO(b/s)),o.push(y)}r=s,t=0,i="",e=o}return JE(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function OO(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function J6(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let o of r)t.set(o,xr)}else for(let[o,s]of i)t.set(o,s)}),t}function RO(n,e,t,r,i,o,s,a,c,u,d,f,y){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:d,totalTime:f,errors:y}}var FE={},kg=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return X6(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,c,u,d){let f=[],y=this.ast.options&&this.ast.options.params||FE,_=a&&a.params||FE,b=this.buildStyles(r,_,f),P=c&&c.params||FE,R=this.buildStyles(i,P,f),j=new Set,Y=new Map,Z=new Map,ie=i==="void",Ue={params:zO(P,y),delay:this.ast.options?.delay},me=d?[]:$O(e,t,this.ast.animation,o,s,b,R,Ue,u,f),T=0;return me.forEach(w=>{T=Math.max(w.duration+w.delay,T)}),f.length?RO(t,this._triggerName,r,i,ie,b,R,[],[],Y,Z,T,f):(me.forEach(w=>{let D=w.element,x=Tn(Y,D,new Set);w.preStyleProps.forEach(O=>x.add(O));let M=Tn(Z,D,new Set);w.postStyleProps.forEach(O=>M.add(O)),D!==t&&j.add(D)}),RO(t,this._triggerName,r,i,ie,b,R,me,[...j.values()],Y,Z,T))}};function X6(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}function zO(n,e){let t=V({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var qE=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=zO(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=$c(s,i,t));let c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),r.set(a,s)})}),r}};function e$(n,e,t){return new WE(n,e,t)}var WE=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new qE(i.style,o,r))}),NO(this.states,"true","1"),NO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new kg(e,i,this.states))}),this.fallbackTransition=t$(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function t$(n,e,t){let r=[(s,a)=>!0],i={type:Ie.Sequence,steps:[],options:null},o={type:Ie.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new kg(n,o,e)}function NO(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var n$=new pd,GE=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],o=BO(this._driver,t,r,i);if(r.length)throw gO(r);this._animations.set(e,o)}_buildPlayer(e,t,r){let i=e.element,o=TE(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=$O(this._driver,t,o,OE,bg,new Map,new Map,r,n$,i),s.forEach(d=>{let f=Tn(a,d.element,new Map);d.postStyleProps.forEach(y=>f.set(y,null))})):(i.push(mO()),s=[]),i.length)throw yO(i);a.forEach((d,f)=>{d.forEach((y,_)=>{d.set(_,this._driver.computeStyle(f,_,xr))})});let c=s.map(d=>{let f=a.get(d.element);return this._buildPlayer(d,new Map,f)}),u=Gi(c);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw _O(e);return t}listen(e,t,r,i){let o=Eg(t,"","","");return Cg(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},kO="ng-animate-queued",r$=".ng-animate-queued",LE="ng-animate-disabled",i$=".ng-animate-disabled",o$="ng-star-inserted",s$=".ng-star-inserted",a$=[],HO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},c$={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Pr="__ng_removed",gd=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=u$(i),r){let o=e,{value:s}=o,a=bs(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},fd="void",VE=new gd(fd),KE=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,ar(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw vO(r,t);if(r==null||r.length==0)throw CO(t);if(!d$(r))throw EO(r,t);let o=Tn(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);let a=Tn(this._engine.statesByElement,e,new Map);return a.has(t)||(ar(e,ud),ar(e,ud+"-"+t),a.set(t,VE)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw wO(e);return t}trigger(e,t,r,i=!0){let o=this._getTrigger(t),s=new md(this.id,t,e),a=this._engine.statesByElement.get(e);a||(ar(e,ud),ar(e,ud+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),u=new gd(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=VE),!(u.value===fd)&&c.value===u.value){if(!p$(c.params,u.params)){let P=[],R=o.matchStyles(c.value,c.params,P),j=o.matchStyles(u.value,u.params,P);P.length?this._engine.reportError(P):this._engine.afterFlush(()=>{Go(e,R),Mr(e,j)})}return}let y=Tn(this._engine.playersByElement,e,[]);y.forEach(P=>{P.namespaceId==this.id&&P.triggerName==t&&P.queued&&P.destroy()});let _=o.matchTransition(c.value,u.value,e,u.params),b=!1;if(!_){if(!i)return;_=o.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:_,fromState:c,toState:u,player:s,isFallbackTransition:b}),b||(ar(e,kO),s.onStart(()=>{zc(e,kO)})),s.onDone(()=>{let P=this.players.indexOf(s);P>=0&&this.players.splice(P,1);let R=this._engine.playersByElement.get(e);if(R){let j=R.indexOf(s);j>=0&&R.splice(j,1)}}),this.players.push(s),y.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,dd,!0);r.forEach(i=>{if(i[Pr])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,u)=>{if(s.set(u,c.value),this._triggers.has(u)){let d=this.trigger(e,u,fd,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&Gi(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let c=this._triggers.get(s).fallbackTransition,u=r.get(s)||VE,d=new gd(fd),f=new md(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:u,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let o=e[Pr];(!o||o===HO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ar(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let c=Eg(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Cg(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},YE=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new KE(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let u=r.indexOf(c);r.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}}return t}trigger(e,t,r,i){if(Mg(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Mg(t))return;let o=t[Pr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ar(e,LE)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),zc(e,LE))}removeNode(e,t,r){if(Mg(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Pr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Mg(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,dd,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Ig,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Gi(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Pr];if(t&&t.setForRemoval){if(e[Pr]=HO,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(LE)&&this.markElementAsDisabled(e,!1),this.driver.query(e,i$,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];ar(i,o$)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Gi(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw bO(e)}_flushAnimations(e,t){let r=new pd,i=[],o=new Map,s=[],a=new Map,c=new Map,u=new Map,d=new Set;this.disabledNodes.forEach(ne=>{d.add(ne);let oe=this.driver.query(ne,r$,!0);for(let se=0;se<oe.length;se++)d.add(oe[se])});let f=this.bodyNode,y=Array.from(this.statesByElement.keys()),_=VO(y,this.collectedEnterElements),b=new Map,P=0;_.forEach((ne,oe)=>{let se=OE+P++;b.set(oe,se),ne.forEach(Se=>ar(Se,se))});let R=[],j=new Set,Y=new Set;for(let ne=0;ne<this.collectedLeaveElements.length;ne++){let oe=this.collectedLeaveElements[ne],se=oe[Pr];se&&se.setForRemoval&&(R.push(oe),j.add(oe),se.hasAnimation?this.driver.query(oe,s$,!0).forEach(Se=>j.add(Se)):Y.add(oe))}let Z=new Map,ie=VO(y,Array.from(j));ie.forEach((ne,oe)=>{let se=bg+P++;Z.set(oe,se),ne.forEach(Se=>ar(Se,se))}),e.push(()=>{_.forEach((ne,oe)=>{let se=b.get(oe);ne.forEach(Se=>zc(Se,se))}),ie.forEach((ne,oe)=>{let se=Z.get(oe);ne.forEach(Se=>zc(Se,se))}),R.forEach(ne=>{this.processLeaveNode(ne)})});let Ue=[],me=[];for(let ne=this._namespaceList.length-1;ne>=0;ne--)this._namespaceList[ne].drainQueuedTransitions(t).forEach(se=>{let Se=se.player,mt=se.element;if(Ue.push(Se),this.collectedEnterElements.length){let ft=mt[Pr];if(ft&&ft.setForMove){if(ft.previousTriggersValues&&ft.previousTriggersValues.has(se.triggerName)){let wi=ft.previousTriggersValues.get(se.triggerName),En=this.statesByElement.get(se.element);if(En&&En.has(se.triggerName)){let bi=En.get(se.triggerName);bi.value=wi,En.set(se.triggerName,bi)}}Se.destroy();return}}let Gn=!f||!this.driver.containsElement(f,mt),ht=Z.get(mt),Xe=b.get(mt),et=this._buildInstruction(se,r,Xe,ht,Gn);if(et.errors&&et.errors.length){me.push(et);return}if(Gn){Se.onStart(()=>Go(mt,et.fromStyles)),Se.onDestroy(()=>Mr(mt,et.toStyles)),i.push(Se);return}if(se.isFallbackTransition){Se.onStart(()=>Go(mt,et.fromStyles)),Se.onDestroy(()=>Mr(mt,et.toStyles)),i.push(Se);return}let go=[];et.timelines.forEach(ft=>{ft.stretchStartingKeyframe=!0,this.disabledNodes.has(ft.element)||go.push(ft)}),et.timelines=go,r.append(mt,et.timelines);let By={instruction:et,player:Se,element:mt};s.push(By),et.queriedElements.forEach(ft=>Tn(a,ft,[]).push(Se)),et.preStyleProps.forEach((ft,wi)=>{if(ft.size){let En=c.get(wi);En||c.set(wi,En=new Set),ft.forEach((bi,mo)=>En.add(mo))}}),et.postStyleProps.forEach((ft,wi)=>{let En=u.get(wi);En||u.set(wi,En=new Set),ft.forEach((bi,mo)=>En.add(mo))})});if(me.length){let ne=[];me.forEach(oe=>{ne.push(IO(oe.triggerName,oe.errors))}),Ue.forEach(oe=>oe.destroy()),this.reportError(ne)}let T=new Map,w=new Map;s.forEach(ne=>{let oe=ne.element;r.has(oe)&&(w.set(oe,oe),this._beforeAnimationBuild(ne.player.namespaceId,ne.instruction,T))}),i.forEach(ne=>{let oe=ne.element;this._getPreviousPlayers(oe,!1,ne.namespaceId,ne.triggerName,null).forEach(Se=>{Tn(T,oe,[]).push(Se),Se.destroy()})});let D=R.filter(ne=>jO(ne,c,u)),x=new Map;LO(x,this.driver,Y,u,xr).forEach(ne=>{jO(ne,c,u)&&D.push(ne)});let O=new Map;_.forEach((ne,oe)=>{LO(O,this.driver,new Set(ne),c,ld)}),D.forEach(ne=>{let oe=x.get(ne),se=O.get(ne);x.set(ne,new Map([...oe?.entries()??[],...se?.entries()??[]]))});let S=[],Wn=[],po={};s.forEach(ne=>{let{element:oe,player:se,instruction:Se}=ne;if(r.has(oe)){if(d.has(oe)){se.onDestroy(()=>Mr(oe,Se.toStyles)),se.disabled=!0,se.overrideTotalTime(Se.totalTime),i.push(se);return}let mt=po;if(w.size>1){let ht=oe,Xe=[];for(;ht=ht.parentNode;){let et=w.get(ht);if(et){mt=et;break}Xe.push(ht)}Xe.forEach(et=>w.set(et,mt))}let Gn=this._buildAnimation(se.namespaceId,Se,T,o,O,x);if(se.setRealPlayer(Gn),mt===po)S.push(se);else{let ht=this.playersByElement.get(mt);ht&&ht.length&&(se.parentPlayer=Gi(ht)),i.push(se)}}else Go(oe,Se.fromStyles),se.onDestroy(()=>Mr(oe,Se.toStyles)),Wn.push(se),d.has(oe)&&i.push(se)}),Wn.forEach(ne=>{let oe=o.get(ne.element);if(oe&&oe.length){let se=Gi(oe);ne.setRealPlayer(se)}}),i.forEach(ne=>{ne.parentPlayer?ne.syncPlayerEvents(ne.parentPlayer):ne.destroy()});for(let ne=0;ne<R.length;ne++){let oe=R[ne],se=oe[Pr];if(zc(oe,bg),se&&se.hasAnimation)continue;let Se=[];if(a.size){let Gn=a.get(oe);Gn&&Gn.length&&Se.push(...Gn);let ht=this.driver.query(oe,Ig,!0);for(let Xe=0;Xe<ht.length;Xe++){let et=a.get(ht[Xe]);et&&et.length&&Se.push(...et)}}let mt=Se.filter(Gn=>!Gn.destroyed);mt.length?h$(this,oe,mt):this.processLeaveNode(oe)}return R.length=0,S.forEach(ne=>{this.players.push(ne),ne.onDone(()=>{ne.destroy();let oe=this.players.indexOf(ne);this.players.splice(oe,1)}),ne.play()}),S}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==fd;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||s.push(u)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){let i=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let u=c.element,d=u!==o,f=Tn(r,u,[]);this._getPreviousPlayers(u,d,s,a,t.toState).forEach(_=>{let b=_.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),_.destroy(),f.push(_)})}Go(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){let a=t.triggerName,c=t.element,u=[],d=new Set,f=new Set,y=t.timelines.map(b=>{let P=b.element;d.add(P);let R=P[Pr];if(R&&R.removedBeforeQueried)return new Wi(b.duration,b.delay);let j=P!==c,Y=f$((r.get(P)||a$).map(T=>T.getRealPlayer())).filter(T=>{let w=T;return w.element?w.element===P:!1}),Z=o.get(P),ie=s.get(P),Ue=TE(this._normalizer,b.keyframes,Z,ie),me=this._buildPlayer(b,Ue,Y);if(b.subTimeline&&i&&f.add(P),j){let T=new md(e,a,P);T.setRealPlayer(me),u.push(T)}return me});u.forEach(b=>{Tn(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>l$(this.playersByQueriedElement,b.element,b))}),d.forEach(b=>ar(b,RE));let _=Gi(y);return _.onDestroy(()=>{d.forEach(b=>zc(b,RE)),Mr(c,t.toStyles)}),f.forEach(b=>{Tn(i,b,[]).push(_)}),_}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Wi(e.duration,e.delay)}},md=class{namespaceId;triggerName;element;_player=new Wi;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Cg(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Tn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function l$(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function u$(n){return n??null}function Mg(n){return n&&n.nodeType===1}function d$(n){return n=="start"||n=="done"}function FO(n,e){let t=n.style.display;return n.style.display=e??"none",t}function LO(n,e,t,r,i){let o=[];t.forEach(c=>o.push(FO(c)));let s=[];r.forEach((c,u)=>{let d=new Map;c.forEach(f=>{let y=e.computeStyle(u,f,i);d.set(f,y),(!y||y.length==0)&&(u[Pr]=c$,s.push(u))}),n.set(u,d)});let a=0;return t.forEach(c=>FO(c,o[a++])),s}function VO(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let c=o.get(a);if(c)return c;let u=a.parentNode;return t.has(u)?c=u:i.has(u)?c=r:c=s(u),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==r&&t.get(c).push(a)}),t}function ar(n,e){n.classList?.add(e)}function zc(n,e){n.classList?.remove(e)}function h$(n,e,t){Gi(t).onDone(()=>n.processLeaveNode(e))}function f$(n){let e=[];return qO(n,e),e}function qO(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Uc?qO(r.players,e):e.push(r)}}function p$(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function jO(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}var Hc=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new YE(e.body,t,r),this._timelineEngine=new GE(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let c=[],u=[],d=BO(this._driver,o,c,u);if(c.length)throw pO(i,c);a=e$(i,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[o,s]=xE(r),a=i;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if(r.charAt(0)=="@"){let[s,a]=xE(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function g$(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=jE(e[0]),e.length>1&&(r=jE(e[e.length-1]))):e instanceof Map&&(t=jE(e)),t||r?new m$(n,t,r):null}var m$=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Mr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Mr(this._element,this._initialStyles),this._endStyles&&(Mr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Go(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Go(this._element,this._endStyles),this._endStyles=null),Mr(this._element,this._initialStyles),this._state=3)}}return n})();function jE(n){let e=null;return n.forEach((t,r)=>{y$(r)&&(e=e||new Map,e.set(r,t))}),e}function y$(n){return n==="display"||n==="position"}var Fg=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Sg(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Lg=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return ME(e,t)}getParentElement(e){return wg(e)}query(e,t,r){return PE(e,t,r)}computeStyle(e,t,r){return Sg(e,t)}animate(e,t,r,i,o,s=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};o&&(c.easing=o);let u=new Map,d=s.filter(_=>_ instanceof Fg);xO(r,i)&&d.forEach(_=>{_.currentSnapshot.forEach((b,P)=>u.set(P,b))});let f=SO(t).map(_=>new Map(_));f=MO(e,f,u);let y=g$(e,f);return new Fg(e,f,c,y)}};var Pg="@",WO="@.disabled",Vg=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Pg&&t==WO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},QE=class extends Vg{factory;constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Pg?t.charAt(1)=="."&&t==WO?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==Pg){let o=_$(e),s=t.slice(1),a="";return s.charAt(0)!=Pg&&([s,a]=v$(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{let u=c._data||-1;this.factory.scheduleListenerCallback(u,r,c)})}return this.delegate.listen(e,t,r,i)}};function _$(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function v$(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var jg=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,d=u.get(i);if(!d){let f=()=>u.delete(i);d=new Vg(r,i,this.engine,f),u.set(i,d)}return d}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new QE(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var E$=(()=>{class n extends Hc{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(ee(lt),ee(la),ee(ua))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function w$(){return new Ag}function b$(n,e,t){return new jg(n,e,t)}var GO=[{provide:ua,useFactory:w$},{provide:Hc,useClass:E$},{provide:ji,useFactory:b$,deps:[zu,Hc,Te]}],Nde=[{provide:la,useClass:ZE},{provide:gp,useValue:"NoopAnimations"},...GO],I$=[{provide:la,useFactory:()=>new Lg},{provide:gp,useFactory:()=>"BrowserAnimations"},...GO];function KO(){return $i("NgEagerAnimations"),[...I$]}var YO=()=>{};var JO=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},D$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ug={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4,y=(a&15)<<2|u>>6,_=u&63;c||(_=64,s||(y=64)),r.push(t[d],t[f],t[y],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(JO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):D$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||f==null)throw new ew;let y=o<<2|a>>4;if(r.push(y),u!==64){let _=a<<4&240|u>>2;if(r.push(_),f!==64){let b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ew=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},S$=function(n){let e=JO(n);return Ug.encodeByteArray(e,!0)},_d=function(n){return S$(n).replace(/\./g,"")},Bg=function(n){try{return Ug.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var T$=()=>nw().__FIREBASE_DEFAULTS__,x$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},M$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Bg(n[1]);return e&&JSON.parse(e)},$g=()=>{try{return YO()||T$()||x$()||M$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rw=n=>{var e,t;return(t=(e=$g())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},zg=n=>{let e=rw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},iw=()=>{var n;return(n=$g())===null||n===void 0?void 0:n.config},ow=n=>{var e;return(e=$g())===null||e===void 0?void 0:e[`_${n}`]};var da=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ti(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function qc(n){return E(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function Hg(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_d(JSON.stringify(t)),_d(JSON.stringify(s)),""].join(".")}var yd={};function P$(){let n={prod:[],emulator:[]};for(let e of Object.keys(yd))yd[e]?n.emulator.push(e):n.prod.push(e);return n}function A$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var QO=!1;function Wc(n,e){if(typeof window>"u"||typeof document>"u"||!ti(window.location.host)||yd[n]===e||yd[n]||QO)return;yd[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",o=P$().prod.length>0;function s(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,_){y.setAttribute("width","24"),y.setAttribute("id",_),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function u(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{QO=!0,s()},y}function d(y,_){y.setAttribute("id",_),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function f(){let y=A$(r),_=t("text"),b=document.getElementById(_)||document.createElement("span"),P=t("learnmore"),R=document.getElementById(P)||document.createElement("a"),j=t("preprendIcon"),Y=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let Z=y.element;a(Z),d(R,P);let ie=u();c(Y,j),Z.append(Y,b,R,ie),document.body.appendChild(Z)}o?(b.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function O$(){var n;let e=(n=$g())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rR(){let n=Vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function iR(){return!O$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vd(){try{return typeof indexedDB=="object"}catch{return!1}}function oR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var R$="FirebaseError",Cn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=R$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ar.prototype.create)}},Ar=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?N$(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Cn(i,a,r)}};function N$(n,e){return n.replace(k$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var k$=/\{\$([^}]+)}/g;function sR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ni(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(ZO(o)&&ZO(s)){if(!ni(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function ZO(n){return n!==null&&typeof n=="object"}function Cd(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gc(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Kc(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function aR(n,e){let t=new tw(n,e);return t.subscribe.bind(t)}var tw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");F$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=XE),i.error===void 0&&(i.error=XE),i.complete===void 0&&(i.complete=XE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function F$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function XE(){}var Vde=4*60*60*1e3;function it(n){return n&&n._delegate?n._delegate:n}var Yt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ha="[DEFAULT]";var sw=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new da;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V$(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function L$(n){return n===ha?void 0:n}function V$(n){return n.instantiationMode==="EAGER"}var qg=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new sw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var j$=[],xe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(xe||{}),U$={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},B$=xe.INFO,$$={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},z$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=$$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ri=class{constructor(e){this.name=e,this._logLevel=B$,this._logHandler=z$,this._userLogHandler=null,j$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}};var H$=(n,e)=>e.some(t=>n instanceof t),cR,lR;function q$(){return cR||(cR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W$(){return lR||(lR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var uR=new WeakMap,cw=new WeakMap,dR=new WeakMap,aw=new WeakMap,uw=new WeakMap;function G$(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(ii(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&uR.set(t,n)}).catch(()=>{}),uw.set(e,n),e}function K$(n){if(cw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});cw.set(n,e)}var lw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ii(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hR(n){lw=n(lw)}function Y$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Wg(this),e,...t);return dR.set(r,e.sort?e.sort():[e]),ii(r)}:W$().includes(n)?function(...e){return n.apply(Wg(this),e),ii(uR.get(this))}:function(...e){return ii(n.apply(Wg(this),e))}}function Q$(n){return typeof n=="function"?Y$(n):(n instanceof IDBTransaction&&K$(n),H$(n,q$())?new Proxy(n,lw):n)}function ii(n){if(n instanceof IDBRequest)return G$(n);if(aw.has(n))return aw.get(n);let e=Q$(n);return e!==n&&(aw.set(n,e),uw.set(e,n)),e}var Wg=n=>uw.get(n);function pR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=ii(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ii(s.result),c.oldVersion,c.newVersion,ii(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var Z$=["get","getKey","getAll","getAllKeys","count"],J$=["put","add","delete","clear"],dw=new Map;function fR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dw.get(e))return dw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=J$.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Z$.includes(t)))return;let o=function(s,...a){return E(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return dw.set(e,o),o}hR(n=>ce(V({},n),{get:(e,t,r)=>fR(e,t)||n.get(e,t,r),has:(e,t)=>!!fR(e,t)||n.has(e,t)}));var fw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(X$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function X$(n){let e=n.getComponent();return e?.type==="VERSION"}var pw="@firebase/app",gR="0.13.2";var Ki=new ri("@firebase/app"),e8="@firebase/app-compat",t8="@firebase/analytics-compat",n8="@firebase/analytics",r8="@firebase/app-check-compat",i8="@firebase/app-check",o8="@firebase/auth",s8="@firebase/auth-compat",a8="@firebase/database",c8="@firebase/data-connect",l8="@firebase/database-compat",u8="@firebase/functions",d8="@firebase/functions-compat",h8="@firebase/installations",f8="@firebase/installations-compat",p8="@firebase/messaging",g8="@firebase/messaging-compat",m8="@firebase/performance",y8="@firebase/performance-compat",_8="@firebase/remote-config",v8="@firebase/remote-config-compat",C8="@firebase/storage",E8="@firebase/storage-compat",w8="@firebase/firestore",b8="@firebase/ai",I8="@firebase/firestore-compat",D8="firebase",S8="11.10.0";var gw="[DEFAULT]",T8={[pw]:"fire-core",[e8]:"fire-core-compat",[n8]:"fire-analytics",[t8]:"fire-analytics-compat",[i8]:"fire-app-check",[r8]:"fire-app-check-compat",[o8]:"fire-auth",[s8]:"fire-auth-compat",[a8]:"fire-rtdb",[c8]:"fire-data-connect",[l8]:"fire-rtdb-compat",[u8]:"fire-fn",[d8]:"fire-fn-compat",[h8]:"fire-iid",[f8]:"fire-iid-compat",[p8]:"fire-fcm",[g8]:"fire-fcm-compat",[m8]:"fire-perf",[y8]:"fire-perf-compat",[_8]:"fire-rc",[v8]:"fire-rc-compat",[C8]:"fire-gcs",[E8]:"fire-gcs-compat",[w8]:"fire-fst",[I8]:"fire-fst-compat",[b8]:"fire-vertex","fire-js":"fire-js",[D8]:"fire-js-all"};var Ed=new Map,x8=new Map,mw=new Map;function mR(n,e){try{n.container.addComponent(e)}catch(t){Ki.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $n(n){let e=n.name;if(mw.has(e))return Ki.debug(`There were multiple attempts to register component ${e}.`),!1;mw.set(e,n);for(let t of Ed.values())mR(t,n);for(let t of x8.values())mR(t,n);return!0}function Yo(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function sn(n){return n==null?!1:n.settings!==void 0}var M8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ko=new Ar("app","Firebase",M8);var yw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ko.create("app-deleted",{appName:this._name})}};var oi=S8;function Cw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:gw,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ko.create("bad-app-name",{appName:String(i)});if(t||(t=iw()),!t)throw Ko.create("no-options");let o=Ed.get(i);if(o){if(ni(t,o.options)&&ni(r,o.config))return o;throw Ko.create("duplicate-app",{appName:i})}let s=new qg(i);for(let c of mw.values())s.addComponent(c);let a=new yw(t,r,s);return Ed.set(i,a),a}function Yi(n=gw){let e=Ed.get(n);if(!e&&n===gw&&iw())return Cw();if(!e)throw Ko.create("no-app",{appName:n});return e}function Gg(){return Array.from(Ed.values())}function Ye(n,e,t){var r;let i=(r=T8[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ki.warn(a.join(" "));return}$n(new Yt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var P8="firebase-heartbeat-database",A8=1,wd="firebase-heartbeat-store",hw=null;function CR(){return hw||(hw=pR(P8,A8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ko.create("idb-open",{originalErrorMessage:n.message})})),hw}function O8(n){return E(this,null,function*(){try{let t=(yield CR()).transaction(wd),r=yield t.objectStore(wd).get(ER(n));return yield t.done,r}catch(e){if(e instanceof Cn)Ki.warn(e.message);else{let t=Ko.create("idb-get",{originalErrorMessage:e?.message});Ki.warn(t.message)}}})}function yR(n,e){return E(this,null,function*(){try{let r=(yield CR()).transaction(wd,"readwrite");yield r.objectStore(wd).put(e,ER(n)),yield r.done}catch(t){if(t instanceof Cn)Ki.warn(t.message);else{let r=Ko.create("idb-set",{originalErrorMessage:t?.message});Ki.warn(r.message)}}})}function ER(n){return`${n.name}!${n.options.appId}`}var R8=1024,N8=30,_w=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new vw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=_R();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>N8){let s=F8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ki.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=_R(),{heartbeatsToSend:r,unsentEntries:i}=k8(this._heartbeatsCache.heartbeats),o=_d(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ki.warn(t),""}})}};function _R(){return new Date().toISOString().substring(0,10)}function k8(n,e=R8){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),vR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),vR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var vw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return vd()?oR().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield O8(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function vR(n){return _d(JSON.stringify({version:2,heartbeats:n})).length}function F8(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function L8(n){$n(new Yt("platform-logger",e=>new fw(e),"PRIVATE")),$n(new Yt("heartbeat",e=>new _w(e),"PRIVATE")),Ye(pw,gR,n),Ye(pw,gR,"esm2017"),Ye("fire-js","")}L8("");var V8="firebase",j8="11.10.0";Ye(V8,j8,"app");function wR(n){n===void 0&&(n=k(Qe));let e=n.get(fc);return t=>new de(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var si=new Js("ANGULARFIRE2_VERSION");function pa(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Qo=(n,e)=>{let t=e?[e]:Gg(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Yc=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Yc||{}),bR=Pu()&&typeof Zone<"u"?Yc.WARN:Yc.SILENT;var Kg=class{zone;delegate;constructor(e,t=P_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},ai=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=k(Te);this.outsideAngular=t.runOutsideAngular(()=>new Kg(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Kg(typeof Zone>"u"?void 0:Zone.current,M_))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IR=!1;function U8(n,e){!IR&&(bR>Yc.SILENT||Pu())&&(IR=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),bR>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function B8(n){let e=k(Te,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function fa(n){let e=k(Te,{optional:!0});return e?e.run(()=>n()):n()}var $8=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),wt(t,()=>fa(()=>n.apply(void 0,r)))),Mn=(n,e,t)=>(t||=e?Yc.WARN:Yc.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k(ai),s=k(fc),a=k(vt)}catch{return U8(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=fa(()=>s.add())),i[u]=$8(i[u],r,a));let c=B8(()=>n.apply(this,i));return e?c instanceof de?c.pipe(bo(o.outsideAngular),wo(o.insideAngular),wR(a)):c instanceof Promise?fa(()=>{let u=s.add();return new Promise((d,f)=>{c.then(y=>wt(a,()=>fa(()=>d(y))),y=>wt(a,()=>fa(()=>f(y)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:fa(()=>c):c instanceof de?c.pipe(bo(o.outsideAngular),wo(o.insideAngular)):fa(()=>c)});var Or=class{constructor(e){return e}},Qi=class{constructor(){return Gg()}};function z8(n){return n&&n.length===1?n[0]:new Or(Yi())}var Ew=new Q("angularfire2._apps"),H8={provide:Or,useFactory:z8,deps:[[new bt,Ew]]},q8={provide:Qi,deps:[[new bt,Ew]]};function W8(n){return(e,t)=>{let r=t.get(Fo);Ye("angularfire",si.full,"core"),Ye("angularfire",si.full,"app"),Ye("angular",sA.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Or(i)}}function DR(n,...e){return Lt([H8,q8,{provide:Ew,useFactory:W8(n),multi:!0,deps:[Te,Qe,ai,...e]}])}var SR=Mn(Cw,!0);var G8=new Map,K8={activated:!1,tokenObservers:[]},Y8={initialized:!1,enabled:!1};function Rr(n){return G8.get(n)||Object.assign({},K8)}function PR(){return Y8}var Q8="https://content-firebaseappcheck.googleapis.com/v1";var Z8="exchangeDebugToken",TR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Bhe=24*60*60*1e3;var Iw=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new da,this.pending.promise.catch(t=>{}),yield J8(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new da,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function J8(n){return new Promise(e=>{setTimeout(e,n)})}var X8={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Zo=new Ar("appCheck","AppCheck",X8);function AR(n){if(!Rr(n).activated)throw Zo.create("use-before-activation",{appName:n.name})}function OR(r,i){return E(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let _=yield s.getHeartbeatsHeader();_&&(o["X-Firebase-Client"]=_)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(_){throw Zo.create("fetch-network-error",{originalErrorMessage:_?.message})}if(c.status!==200)throw Zo.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(_){throw Zo.create("fetch-parse-error",{originalErrorMessage:_?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Zo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,y=Date.now();return{token:u.token,expireTimeMillis:y+f,issuedAtTimeMillis:y}})}function RR(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Q8}/projects/${t}/apps/${r}:${Z8}?key=${i}`,body:{debug_token:e}}}var ez="firebase-app-check-database",tz=1,Dw="firebase-app-check-store";var Yg=null;function nz(){return Yg||(Yg=new Promise((n,e)=>{try{let t=indexedDB.open(ez,tz);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Zo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Dw,{keyPath:"compositeKey"})}}}catch(t){e(Zo.create("storage-open",{originalErrorMessage:t?.message}))}}),Yg)}function rz(n,e){return iz(oz(n),e)}function iz(n,e){return E(this,null,function*(){let r=(yield nz()).transaction(Dw,"readwrite"),o=r.objectStore(Dw).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Zo.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function oz(n){return`${n.options.appId}-${n.name}`}var bd=new ri("@firebase/app-check");function ww(n,e){return vd()?rz(n,e).catch(t=>{bd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function NR(){return PR().enabled}function kR(){return E(this,null,function*(){let n=PR();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var sz={error:"UNKNOWN_ERROR"};function az(n){return Ug.encodeString(JSON.stringify(n),!1)}function Sw(n,e=!1,t=!1){return E(this,null,function*(){let r=n.app;AR(r);let i=Rr(r),o=i.token,s;if(o&&!Id(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(Id(u)?o=u:yield ww(r,void 0))}if(!e&&o&&Id(o))return{token:o.token};let a=!1;if(NR())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=OR(RR(r,yield kR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield ww(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?bd.warn(u.message):t&&bd.error(u),bw(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Rr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?bd.warn(u.message):t&&bd.error(u),s=u}let c;return o?s?Id(o)?c={token:o.token,internalError:s}:c=bw(s):(c={token:o.token},i.token=o,yield ww(r,o)):c=bw(s),a&&dz(r,c),c})}function cz(n){return E(this,null,function*(){let e=n.app;AR(e);let{provider:t}=Rr(e);if(NR()){let r=yield kR(),{token:i}=yield OR(RR(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function lz(n,e,t,r){let{app:i}=n,o=Rr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Id(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),xR(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>xR(n))}function FR(n,e){let t=Rr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function xR(n){let{app:e}=n,t=Rr(e),r=t.tokenRefresher;r||(r=uz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function uz(n){let{app:e}=n;return new Iw(()=>E(null,null,function*(){let t=Rr(e),r;if(t.token?r=yield Sw(n,!0):r=yield Sw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Rr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},TR.RETRIAL_MIN_WAIT,TR.RETRIAL_MAX_WAIT)}function dz(n,e){let t=Rr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Id(n){return n.expireTimeMillis-Date.now()>0}function bw(n){return{token:az(sz),error:n}}var Tw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Rr(this.app);for(let t of e)FR(this.app,t.next);return Promise.resolve()}};function hz(n,e){return new Tw(n,e)}function fz(n){return{getToken:e=>Sw(n,e),getLimitedUseToken:()=>cz(n),addTokenListener:e=>lz(n,"INTERNAL",e),removeTokenListener:e=>FR(n.app,e)}}var pz="@firebase/app-check",gz="0.10.1";var mz="app-check",MR="app-check-internal";function yz(){$n(new Yt(mz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return hz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(MR).initialize()})),$n(new Yt(MR,n=>{let e=n.getProvider("app-check").getImmediate();return fz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ye(pz,gz)}yz();var _z="app-check";var Jo=class{constructor(){return Qo(_z)}};var vz=["localhost","0.0.0.0","127.0.0.1"],efe=typeof window<"u"&&vz.includes(window.location.hostname);function JR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var XR=JR,eN=new Ar("auth","Firebase",JR());var tm=new ri("@firebase/auth");function Cz(n,...e){tm.logLevel<=xe.WARN&&tm.warn(`Auth (${oi}): ${n}`,...e)}function Zg(n,...e){tm.logLevel<=xe.ERROR&&tm.error(`Auth (${oi}): ${n}`,...e)}function li(n,...e){throw Jw(n,...e)}function ga(n,...e){return Jw(n,...e)}function tN(n,e,t){let r=Object.assign(Object.assign({},XR()),{[e]:t});return new Ar("auth","Firebase",r).create(e,{appName:n.name})}function Xi(n){return tN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return eN.create(n,...e)}function he(n,e,...t){if(!n)throw Jw(e,...t)}function Zi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Zg(e),new Error(e)}function ts(n,e){n||Zi(e)}function Aw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Ez(){return LR()==="http:"||LR()==="https:"}function LR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function wz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ez()||tR()||"connection"in navigator)?navigator.onLine:!0}function bz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ma=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ts(t>e,"Short delay should be less than long delay!"),this.isMobile=XO()||nR()}get(){return wz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Xw(n,e){ts(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var nm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Iz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Dz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Sz=new ma(3e4,6e4);function ns(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function eo(o,s,a,c){return E(this,arguments,function*(n,e,t,r,i={}){return nN(n,i,()=>E(null,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let f=Cd(Object.assign({key:n.config.apiKey},d)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:y},u);return eR()||(_.referrerPolicy="no-referrer"),n.emulatorConfig&&ti(n.emulatorConfig.host)&&(_.credentials="include"),nm.fetch()(yield rN(n,n.config.apiHost,t,f),_)}))})}function nN(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Iz),e);try{let i=new Ow(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Qg(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qg(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Qg(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Qg(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw tN(n,d,u);li(n,d)}}catch(i){if(i instanceof Cn)throw i;li(n,"network-request-failed",{message:String(i)})}})}function Od(o,s,a,c){return E(this,arguments,function*(n,e,t,r,i={}){let u=yield eo(n,e,t,r,i);return"mfaPendingCredential"in u&&li(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function rN(n,e,t,r){return E(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?Xw(n.config,i):`${n.config.apiScheme}://${i}`;return Dz.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function Tz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ow=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ga(this.auth,"network-request-failed")),Sz.get())})}};function Qg(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ga(n,e,r);return i.customData._tokenResponse=t,i}function VR(n){return n!==void 0&&n.enterprise!==void 0}var Rw=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Tz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function xz(n,e){return E(this,null,function*(){return eo(n,"GET","/v2/recaptchaConfig",ns(n,e))})}function Mz(n,e){return E(this,null,function*(){return eo(n,"POST","/v1/accounts:delete",e)})}function rm(n,e){return E(this,null,function*(){return eo(n,"POST","/v1/accounts:lookup",e)})}function Sd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function eb(n,e=!1){return E(this,null,function*(){let t=it(n),r=yield t.getIdToken(e),i=tb(r);he(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Sd(xw(i.auth_time)),issuedAtTime:Sd(xw(i.iat)),expirationTime:Sd(xw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function xw(n){return Number(n)*1e3}function tb(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Zg("JWT malformed, contained fewer than 3 sections"),null;try{let i=Bg(t);return i?JSON.parse(i):(Zg("Failed to decode base64 JWT payload"),null)}catch(i){return Zg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jR(n){let e=tb(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Qc(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Cn&&Pz(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Pz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Nw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xd=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sd(this.lastLoginAt),this.creationTime=Sd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function im(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Qc(n,rm(t,{idToken:r}));he(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?iN(o.providerUserInfo):[],a=Az(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,d=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new xd(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function nb(n){return E(this,null,function*(){let e=it(n);yield im(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Az(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iN(n){return n.map(e=>{var{providerId:t}=e,r=A_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Oz(n,e){return E(this,null,function*(){let t=yield nN(n,{},()=>E(null,null,function*(){let r=Cd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield rN(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&ti(n.emulatorConfig.host)&&(c.credentials="include"),nm.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Rz(n,e){return E(this,null,function*(){return eo(n,"POST","/v2/accounts:revokeToken",ns(n,e))})}var Td=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");let t=jR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Oz(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(he(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(he(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Zi("not implemented")}};function Xo(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var es=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=A_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xd(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield Qc(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return eb(this,e)}reload(){return nb(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield im(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(sn(this.auth.app))return Promise.reject(Xi(this.auth));let e=yield this.getIdToken();return yield Qc(this,Mz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,_=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,b=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,j=(u=t.createdAt)!==null&&u!==void 0?u:void 0,Y=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:Z,emailVerified:ie,isAnonymous:Ue,providerData:me,stsTokenManager:T}=t;he(Z&&T,e,"internal-error");let w=Td.fromJSON(this.name,T);he(typeof Z=="string",e,"internal-error"),Xo(f,e.name),Xo(y,e.name),he(typeof ie=="boolean",e,"internal-error"),he(typeof Ue=="boolean",e,"internal-error"),Xo(_,e.name),Xo(b,e.name),Xo(P,e.name),Xo(R,e.name),Xo(j,e.name),Xo(Y,e.name);let D=new n({uid:Z,auth:e,email:y,emailVerified:ie,displayName:f,isAnonymous:Ue,photoURL:b,phoneNumber:_,tenantId:P,stsTokenManager:w,createdAt:j,lastLoginAt:Y});return me&&Array.isArray(me)&&(D.providerData=me.map(x=>Object.assign({},x))),R&&(D._redirectEventId=R),D}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new Td;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield im(o),o})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];he(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?iN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Td;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new xd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var UR=new Map;function Ji(n){ts(n instanceof Function,"Expected a class definition");let e=UR.get(n);return e?(ts(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UR.set(n,e),e)}var Nz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),kw=Nz;function Jg(n,e,t){return`firebase:${n}:${e}:${t}`}var om=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Jg(this.userKey,i.apiKey,o),this.fullPersistenceKey=Jg("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield rm(this.auth,{idToken:e}).catch(()=>{});return t?es._fromGetAccountInfoResponse(this.auth,t,e):null}return es._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(Ji(kw),e,r);let i=(yield Promise.all(t.map(u=>E(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Ji(kw),s=Jg(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=yield u._get(s);if(d){let f;if(typeof d=="string"){let y=yield rm(e,{idToken:d}).catch(()=>{});if(!y)break;f=yield es._fromGetAccountInfoResponse(e,y,d)}else f=es._fromJSON(e,d);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>E(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function BR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uN(e))return"Blackberry";if(dN(e))return"Webos";if(sN(e))return"Safari";if((e.includes("chrome/")||aN(e))&&!e.includes("edge/"))return"Chrome";if(lN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function oN(n=Vt()){return/firefox\//i.test(n)}function sN(n=Vt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aN(n=Vt()){return/crios\//i.test(n)}function cN(n=Vt()){return/iemobile/i.test(n)}function lN(n=Vt()){return/android/i.test(n)}function uN(n=Vt()){return/blackberry/i.test(n)}function dN(n=Vt()){return/webos/i.test(n)}function rb(n=Vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kz(n=Vt()){var e;return rb(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Fz(){return rR()&&document.documentMode===10}function hN(n=Vt()){return rb(n)||lN(n)||dN(n)||uN(n)||/windows phone/i.test(n)||cN(n)}function fN(n,e=[]){let t;switch(n){case"Browser":t=BR(Vt());break;case"Worker":t=`${BR(Vt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${oi}/${r}`}var Fw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Lz(t){return E(this,arguments,function*(n,e={}){return eo(n,"GET","/v2/passwordPolicy",ns(n,e))})}var Vz=6,Lw=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Vz,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Vw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sm(this),this.idTokenSubscription=new sm(this),this.beforeStateQueue=new Fw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ji(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield om.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield rm(this,{idToken:e}),r=yield es._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(sn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield im(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=bz()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(sn(this.app))return Promise.reject(Xi(this));let t=e?it(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return sn(this.app)?Promise.reject(Xi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return sn(this.app)?Promise.reject(Xi(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(Ji(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield Lz(this),t=new Lw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ar("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Rz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ji(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=yield om.create(this,[Ji(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Cz(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function _a(n){return it(n)}var sm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=aR(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var fm={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jz(n){fm=n}function pN(n){return fm.loadJS(n)}function Uz(){return fm.recaptchaEnterpriseScript}function Bz(){return fm.gapiScript}function gN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var jw=class{constructor(){this.enterprise=new Uw}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Uw=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var $z="recaptcha-enterprise",mN="NO_RECAPTCHA",Bw=class{constructor(e){this.type=$z,this.auth=_a(e)}verify(e="verify",t=!1){return E(this,null,function*(){function r(o){return E(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>E(null,null,function*(){xz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new Rw(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;VR(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(mN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jw().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&VR(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Uz();c.length!==0&&(c+=a),pN(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function Dd(n,e,t,r=!1,i=!1){return E(this,null,function*(){let o=new Bw(n),s;if(i)s=mN;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function $w(n,e,t,r,i){return E(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Dd(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>E(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Dd(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Dd(n,e,t);return r(n,a).catch(c=>E(null,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let d=yield Dd(n,e,t,!1,!0);return r(n,d)}return Promise.reject(c)}))}else{let a=yield Dd(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function ib(n,e){let t=Yo(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(ni(o,e??{}))return i;li(i,"already-initialized")}return t.initialize({options:e})}function zz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ji);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ob(n,e,t){let r=_a(n);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=yN(e),{host:s,port:a}=Hz(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(ni(u,r.config.emulator)&&ni(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ti(s)?(qc(`${o}//${s}${c}`),Wc("Auth",!0)):i||qz()}function yN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Hz(n){let e=yN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:$R(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:$R(s)}}}function $R(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function qz(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Md=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,t){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}};function Wz(n,e){return E(this,null,function*(){return eo(n,"POST","/v1/accounts:signUp",e)})}function Gz(n,e){return E(this,null,function*(){return Od(n,"POST","/v1/accounts:signInWithPassword",ns(n,e))})}function Kz(n,e){return E(this,null,function*(){return Od(n,"POST","/v1/accounts:signInWithEmailLink",ns(n,e))})}function Yz(n,e){return E(this,null,function*(){return Od(n,"POST","/v1/accounts:signInWithEmailLink",ns(n,e))})}var Pd=class n extends Md{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return E(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $w(e,t,"signInWithPassword",Gz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Kz(e,{email:this._email,oobCode:this._password});default:li(e,"internal-error")}})}_linkToIdToken(e,t){return E(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $w(e,r,"signUpPassword",Wz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Yz(e,{idToken:t,email:this._email,oobCode:this._password});default:li(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Mw(n,e){return E(this,null,function*(){return Od(n,"POST","/v1/accounts:signInWithIdp",ns(n,e))})}function Qz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zz(n){let e=Gc(Kc(n)).link,t=e?Gc(Kc(e)).deep_link_id:null,r=Gc(Kc(n)).deep_link_id;return(r?Gc(Kc(r)).link:null)||r||t||e||n}var am=class n{constructor(e){var t,r,i,o,s,a;let c=Gc(Kc(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=Qz((i=c.mode)!==null&&i!==void 0?i:null);he(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Zz(e);try{return new n(t)}catch{return null}}};var _N=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Pd._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=am.parseLink(r);return he(i,"argument-error"),Pd._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),cm=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var zw=class extends cm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Jz(n,e){return E(this,null,function*(){return Od(n,"POST","/v1/accounts:signUp",ns(n,e))})}var Zc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let o=yield es._fromIdTokenResponse(e,r,i),s=zR(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=zR(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function zR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Hw=class n extends Cn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function vN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Hw._fromErrorAndOperation(n,o,e,r):o})}function Xz(n,e,t=!1){return E(this,null,function*(){let r=yield Qc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Zc._forOperation(n,"link",r)})}function eH(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(sn(r.app))return Promise.reject(Xi(r));let i="reauthenticate";try{let o=yield Qc(n,vN(r,i,e,n),t);he(o.idToken,r,"internal-error");let s=tb(o.idToken);he(s,r,"internal-error");let{sub:a}=s;return he(n.uid===a,r,"user-mismatch"),Zc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&li(r,"user-mismatch"),o}})}function CN(n,e,t=!1){return E(this,null,function*(){if(sn(n.app))return Promise.reject(Xi(n));let r="signIn",i=yield vN(n,r,e),o=yield Zc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function sb(n,e){return E(this,null,function*(){return CN(_a(n),e)})}function EN(n){return E(this,null,function*(){let e=_a(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function ab(n,e,t){return E(this,null,function*(){if(sn(n.app))return Promise.reject(Xi(n));let r=_a(n),s=yield $w(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jz,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&EN(n),c}),a=yield Zc._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function cb(n,e,t){return sn(n.app)?Promise.reject(Xi(n)):sb(it(n),_N.credential(e,t)).catch(r=>E(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&EN(n),r}))}function tH(n,e){return E(this,null,function*(){return eo(n,"POST","/v1/accounts:update",e)})}function lb(r,i){return E(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=it(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield Qc(o,tH(o.auth,a));o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null;let u=o.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=o.displayName,u.photoURL=o.photoURL),yield o._updateTokensIfNecessary(c)})}function ub(n,e,t,r){return it(n).onIdTokenChanged(e,t,r)}function db(n,e,t){return it(n).beforeAuthStateChanged(e,t)}function hb(n,e,t,r){return it(n).onAuthStateChanged(e,t,r)}function fb(n){return it(n).signOut()}var lm="__sak";var um=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lm,"1"),this.storage.removeItem(lm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var nH=1e3,rH=10,iH=(()=>{class n extends um{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Fz()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,rH):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},nH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield Co(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield Co(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield Co(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),wN=iH;var oH=(()=>{class n extends um{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),pb=oH;function sH(n){return Promise.all(n.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var aH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>E(this,null,function*(){return d(r.origin,s)})),u=yield sH(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function bN(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var qw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=bN("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let y=f;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ci(){return window}function cH(n){ci().location.href=n}function IN(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}function lH(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function uH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function dH(){return IN()?self:null}var DN="firebaseLocalStorageDb",hH=1,dm="firebaseLocalStorage",SN="fbase_key",ya=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function pm(n,e){return n.transaction([dm],e?"readwrite":"readonly").objectStore(dm)}function fH(){let n=indexedDB.deleteDatabase(DN);return new ya(n).toPromise()}function Ww(){let n=indexedDB.open(DN,hH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(dm,{keyPath:SN})}catch(i){t(i)}}),n.addEventListener("success",()=>E(null,null,function*(){let r=n.result;r.objectStoreNames.contains(dm)?e(r):(r.close(),yield fH(),e(yield Ww()))}))})}function HR(n,e,t){return E(this,null,function*(){let r=pm(n,!0).put({[SN]:e,value:t});return new ya(r).toPromise()})}function pH(n,e){return E(this,null,function*(){let t=pm(n,!1).get(e),r=yield new ya(t).toPromise();return r===void 0?null:r.value})}function qR(n,e){let t=pm(n,!0).delete(e);return new ya(t).toPromise()}var gH=800,mH=3,yH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield Ww(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>mH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return IN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=aH._getInstance(dH()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield lH(),!this.activeServiceWorker)return;this.sender=new qw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||uH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Ww();return yield HR(t,lm,"1"),yield qR(t,lm),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>HR(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>pH(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>qR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(o=>{let s=pm(o,!1).getAll();return new ya(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),gH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),TN=yH;var cfe=gN("rcb"),lfe=new ma(3e4,6e4);function _H(n,e){return e?Ji(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ad=class extends Md{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function vH(n){return CN(n.auth,new Ad(n),n.bypassAuthState)}function CH(n){let{auth:e,user:t}=n;return he(t,e,"internal-error"),eH(t,new Ad(n),n.bypassAuthState)}function EH(n){return E(this,null,function*(){let{auth:e,user:t}=n;return he(t,e,"internal-error"),Xz(t,new Ad(n),n.bypassAuthState)})}var Gw=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vH;case"linkViaPopup":case"linkViaRedirect":return EH;case"reauthViaPopup":case"reauthViaRedirect":return CH;default:li(this.auth,"internal-error")}}resolve(e){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ufe=new ma(2e3,1e4);var wH="pendingRedirect",Xg=new Map,Kw=class n extends Gw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=Xg.get(this.auth._key());if(!e){try{let r=(yield bH(this.resolver,this.auth))?yield Co(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xg.set(this.auth._key(),e)}return this.bypassAuthState||Xg.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return Co(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Co(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function bH(n,e){return E(this,null,function*(){let t=SH(e),r=DH(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function IH(n,e){Xg.set(n._key(),e)}function DH(n){return Ji(n._redirectPersistence)}function SH(n){return Jg(wH,n.config.apiKey,n.name)}function TH(n,e,t=!1){return E(this,null,function*(){if(sn(n.app))return Promise.reject(Xi(n));let r=_a(n),i=_H(r,e),s=yield new Kw(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var xH=10*60*1e3,Yw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!xN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ga(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xH&&this.cachedEventUids.clear(),this.cachedEventUids.has(WR(e))}saveEventToCache(e){this.cachedEventUids.add(WR(e)),this.lastProcessedEventTime=Date.now()}};function WR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function xN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function MH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xN(n);default:return!1}}function PH(t){return E(this,arguments,function*(n,e={}){return eo(n,"GET","/v1/projects",e)})}var AH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OH=/^https?/;function RH(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield PH(n);for(let t of e)try{if(NH(t))return}catch{}li(n,"unauthorized-domain")})}function NH(n){let e=Aw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!OH.test(t))return!1;if(AH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var kH=new ma(3e4,6e4);function GR(){let n=ci().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function FH(n){return new Promise((e,t)=>{var r,i,o;function s(){GR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GR(),t(ga(n,"network-request-failed"))},timeout:kH.get()})}if(!((i=(r=ci().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=ci().gapi)===null||o===void 0)&&o.load)s();else{let a=gN("iframefcb");return ci()[a]=()=>{gapi.load?s():t(ga(n,"network-request-failed"))},pN(`${Bz()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw em=null,e})}var em=null;function LH(n){return em=em||FH(n),em}var VH=new ma(5e3,15e3),jH="__/auth/iframe",UH="emulator/auth/iframe",BH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$H=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zH(n){let e=n.config;he(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Xw(e,UH):`https://${n.config.authDomain}/${jH}`,r={apiKey:e.apiKey,appName:n.name,v:oi},i=$H.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Cd(r).slice(1)}`}function HH(n){return E(this,null,function*(){let e=yield LH(n),t=ci().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:zH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BH,dontclear:!0},r=>new Promise((i,o)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ga(n,"network-request-failed"),a=ci().setTimeout(()=>{o(s)},VH.get());function c(){ci().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var qH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WH=500,GH=600,KH="_blank",YH="http://localhost",hm=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function QH(n,e,t,r=WH,i=GH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},qH),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Vt().toLowerCase();t&&(a=aN(u)?KH:t),oN(u)&&(e=e||YH,c.scrollbars="yes");let d=Object.entries(c).reduce((y,[_,b])=>`${y}${_}=${b},`,"");if(kz(u)&&a!=="_self")return ZH(e||"",a),new hm(null);let f=window.open(e||"",a,d);he(f,n,"popup-blocked");try{f.focus()}catch{}return new hm(f)}function ZH(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var JH="__/auth/handler",XH="emulator/auth/handler",e9=encodeURIComponent("fac");function KR(n,e,t,r,i,o){return E(this,null,function*(){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:oi,eventId:i};if(e instanceof cm){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",sR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof zw){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),u=c?`#${e9}=${encodeURIComponent(c)}`:"";return`${t9(n)}?${Cd(a).slice(1)}${u}`})}function t9({config:n}){return n.emulator?Xw(n,XH):`https://${n.authDomain}/${JH}`}var Pw="webStorageSupport",Qw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pb,this._completeRedirectFn=TH,this._overrideRedirectResult=IH}_openPopup(e,t,r,i){return E(this,null,function*(){var o;ts((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield KR(e,t,r,Aw(),i);return QH(e,s,bN())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let o=yield KR(e,t,r,Aw(),i);return cH(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ts(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield HH(e),r=new Yw(e);return t.register("authEvent",i=>(he(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pw,{type:Pw},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Pw];s!==void 0&&t(!!s),li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=RH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hN()||sN()||rb()}},MN=Qw;var YR="@firebase/auth",QR="1.10.8";var Zw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function n9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function r9(n){$n(new Yt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;he(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fN(n)},u=new Vw(r,i,o,c);return zz(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),$n(new Yt("auth-internal",e=>{let t=_a(e.getProvider("auth").getImmediate());return(r=>new Zw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ye(YR,QR,n9(n)),Ye(YR,QR,"esm2017")}var i9=5*60,o9=ow("authIdTokenMaxAge")||i9,ZR=null,s9=n=>e=>E(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>o9)return;let i=t?.token;ZR!==i&&(ZR=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function gb(n=Yi()){let e=Yo(n,"auth");if(e.isInitialized())return e.getImmediate();let t=ib(n,{popupRedirectResolver:MN,persistence:[TN,wN,pb]}),r=ow("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=s9(o.toString());db(t,s,()=>s(t.currentUser)),ub(t,a=>s(a))}}let i=rw("auth");return i&&ob(t,`http://${i}`),t}function a9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}jz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ga("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",a9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});r9("Browser");var PN="auth",va=class{constructor(e){return e}},Ca=class{constructor(){return Qo(PN)}};var mb=new Q("angularfire2.auth-instances");function K9(n,e){let t=pa(PN,n,e);return t&&new va(t)}function Y9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new va(r)}}var Q9={provide:Ca,deps:[[new bt,mb]]},Z9={provide:va,useFactory:K9,deps:[[new bt,mb],Or]};function AN(n,...e){return Ye("angularfire",si.full,"auth"),Lt([Z9,Q9,{provide:mb,useFactory:Y9(n),multi:!0,deps:[Te,Qe,ai,Qi,[new bt,Jo],...e]}])}var ON=Mn(ab,!0,2);var RN=Mn(gb,!0);var NN=Mn(hb,!0);var kN=Mn(cb,!0,2);var FN=Mn(fb,!0,2);var LN=Mn(lb,!0,2);var VN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jN={};var to,yb;(function(){var n;function e(T,w){function D(){}D.prototype=w.prototype,T.D=w.prototype,T.prototype=new D,T.prototype.constructor=T,T.C=function(x,M,O){for(var S=Array(arguments.length-2),Wn=2;Wn<arguments.length;Wn++)S[Wn-2]=arguments[Wn];return w.prototype[M].apply(x,S)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,w,D){D||(D=0);var x=Array(16);if(typeof w=="string")for(var M=0;16>M;++M)x[M]=w.charCodeAt(D++)|w.charCodeAt(D++)<<8|w.charCodeAt(D++)<<16|w.charCodeAt(D++)<<24;else for(M=0;16>M;++M)x[M]=w[D++]|w[D++]<<8|w[D++]<<16|w[D++]<<24;w=T.g[0],D=T.g[1],M=T.g[2];var O=T.g[3],S=w+(O^D&(M^O))+x[0]+3614090360&4294967295;w=D+(S<<7&4294967295|S>>>25),S=O+(M^w&(D^M))+x[1]+3905402710&4294967295,O=w+(S<<12&4294967295|S>>>20),S=M+(D^O&(w^D))+x[2]+606105819&4294967295,M=O+(S<<17&4294967295|S>>>15),S=D+(w^M&(O^w))+x[3]+3250441966&4294967295,D=M+(S<<22&4294967295|S>>>10),S=w+(O^D&(M^O))+x[4]+4118548399&4294967295,w=D+(S<<7&4294967295|S>>>25),S=O+(M^w&(D^M))+x[5]+1200080426&4294967295,O=w+(S<<12&4294967295|S>>>20),S=M+(D^O&(w^D))+x[6]+2821735955&4294967295,M=O+(S<<17&4294967295|S>>>15),S=D+(w^M&(O^w))+x[7]+4249261313&4294967295,D=M+(S<<22&4294967295|S>>>10),S=w+(O^D&(M^O))+x[8]+1770035416&4294967295,w=D+(S<<7&4294967295|S>>>25),S=O+(M^w&(D^M))+x[9]+2336552879&4294967295,O=w+(S<<12&4294967295|S>>>20),S=M+(D^O&(w^D))+x[10]+4294925233&4294967295,M=O+(S<<17&4294967295|S>>>15),S=D+(w^M&(O^w))+x[11]+2304563134&4294967295,D=M+(S<<22&4294967295|S>>>10),S=w+(O^D&(M^O))+x[12]+1804603682&4294967295,w=D+(S<<7&4294967295|S>>>25),S=O+(M^w&(D^M))+x[13]+4254626195&4294967295,O=w+(S<<12&4294967295|S>>>20),S=M+(D^O&(w^D))+x[14]+2792965006&4294967295,M=O+(S<<17&4294967295|S>>>15),S=D+(w^M&(O^w))+x[15]+1236535329&4294967295,D=M+(S<<22&4294967295|S>>>10),S=w+(M^O&(D^M))+x[1]+4129170786&4294967295,w=D+(S<<5&4294967295|S>>>27),S=O+(D^M&(w^D))+x[6]+3225465664&4294967295,O=w+(S<<9&4294967295|S>>>23),S=M+(w^D&(O^w))+x[11]+643717713&4294967295,M=O+(S<<14&4294967295|S>>>18),S=D+(O^w&(M^O))+x[0]+3921069994&4294967295,D=M+(S<<20&4294967295|S>>>12),S=w+(M^O&(D^M))+x[5]+3593408605&4294967295,w=D+(S<<5&4294967295|S>>>27),S=O+(D^M&(w^D))+x[10]+38016083&4294967295,O=w+(S<<9&4294967295|S>>>23),S=M+(w^D&(O^w))+x[15]+3634488961&4294967295,M=O+(S<<14&4294967295|S>>>18),S=D+(O^w&(M^O))+x[4]+3889429448&4294967295,D=M+(S<<20&4294967295|S>>>12),S=w+(M^O&(D^M))+x[9]+568446438&4294967295,w=D+(S<<5&4294967295|S>>>27),S=O+(D^M&(w^D))+x[14]+3275163606&4294967295,O=w+(S<<9&4294967295|S>>>23),S=M+(w^D&(O^w))+x[3]+4107603335&4294967295,M=O+(S<<14&4294967295|S>>>18),S=D+(O^w&(M^O))+x[8]+1163531501&4294967295,D=M+(S<<20&4294967295|S>>>12),S=w+(M^O&(D^M))+x[13]+2850285829&4294967295,w=D+(S<<5&4294967295|S>>>27),S=O+(D^M&(w^D))+x[2]+4243563512&4294967295,O=w+(S<<9&4294967295|S>>>23),S=M+(w^D&(O^w))+x[7]+1735328473&4294967295,M=O+(S<<14&4294967295|S>>>18),S=D+(O^w&(M^O))+x[12]+2368359562&4294967295,D=M+(S<<20&4294967295|S>>>12),S=w+(D^M^O)+x[5]+4294588738&4294967295,w=D+(S<<4&4294967295|S>>>28),S=O+(w^D^M)+x[8]+2272392833&4294967295,O=w+(S<<11&4294967295|S>>>21),S=M+(O^w^D)+x[11]+1839030562&4294967295,M=O+(S<<16&4294967295|S>>>16),S=D+(M^O^w)+x[14]+4259657740&4294967295,D=M+(S<<23&4294967295|S>>>9),S=w+(D^M^O)+x[1]+2763975236&4294967295,w=D+(S<<4&4294967295|S>>>28),S=O+(w^D^M)+x[4]+1272893353&4294967295,O=w+(S<<11&4294967295|S>>>21),S=M+(O^w^D)+x[7]+4139469664&4294967295,M=O+(S<<16&4294967295|S>>>16),S=D+(M^O^w)+x[10]+3200236656&4294967295,D=M+(S<<23&4294967295|S>>>9),S=w+(D^M^O)+x[13]+681279174&4294967295,w=D+(S<<4&4294967295|S>>>28),S=O+(w^D^M)+x[0]+3936430074&4294967295,O=w+(S<<11&4294967295|S>>>21),S=M+(O^w^D)+x[3]+3572445317&4294967295,M=O+(S<<16&4294967295|S>>>16),S=D+(M^O^w)+x[6]+76029189&4294967295,D=M+(S<<23&4294967295|S>>>9),S=w+(D^M^O)+x[9]+3654602809&4294967295,w=D+(S<<4&4294967295|S>>>28),S=O+(w^D^M)+x[12]+3873151461&4294967295,O=w+(S<<11&4294967295|S>>>21),S=M+(O^w^D)+x[15]+530742520&4294967295,M=O+(S<<16&4294967295|S>>>16),S=D+(M^O^w)+x[2]+3299628645&4294967295,D=M+(S<<23&4294967295|S>>>9),S=w+(M^(D|~O))+x[0]+4096336452&4294967295,w=D+(S<<6&4294967295|S>>>26),S=O+(D^(w|~M))+x[7]+1126891415&4294967295,O=w+(S<<10&4294967295|S>>>22),S=M+(w^(O|~D))+x[14]+2878612391&4294967295,M=O+(S<<15&4294967295|S>>>17),S=D+(O^(M|~w))+x[5]+4237533241&4294967295,D=M+(S<<21&4294967295|S>>>11),S=w+(M^(D|~O))+x[12]+1700485571&4294967295,w=D+(S<<6&4294967295|S>>>26),S=O+(D^(w|~M))+x[3]+2399980690&4294967295,O=w+(S<<10&4294967295|S>>>22),S=M+(w^(O|~D))+x[10]+4293915773&4294967295,M=O+(S<<15&4294967295|S>>>17),S=D+(O^(M|~w))+x[1]+2240044497&4294967295,D=M+(S<<21&4294967295|S>>>11),S=w+(M^(D|~O))+x[8]+1873313359&4294967295,w=D+(S<<6&4294967295|S>>>26),S=O+(D^(w|~M))+x[15]+4264355552&4294967295,O=w+(S<<10&4294967295|S>>>22),S=M+(w^(O|~D))+x[6]+2734768916&4294967295,M=O+(S<<15&4294967295|S>>>17),S=D+(O^(M|~w))+x[13]+1309151649&4294967295,D=M+(S<<21&4294967295|S>>>11),S=w+(M^(D|~O))+x[4]+4149444226&4294967295,w=D+(S<<6&4294967295|S>>>26),S=O+(D^(w|~M))+x[11]+3174756917&4294967295,O=w+(S<<10&4294967295|S>>>22),S=M+(w^(O|~D))+x[2]+718787259&4294967295,M=O+(S<<15&4294967295|S>>>17),S=D+(O^(M|~w))+x[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(M+(S<<21&4294967295|S>>>11))&4294967295,T.g[2]=T.g[2]+M&4294967295,T.g[3]=T.g[3]+O&4294967295}r.prototype.u=function(T,w){w===void 0&&(w=T.length);for(var D=w-this.blockSize,x=this.B,M=this.h,O=0;O<w;){if(M==0)for(;O<=D;)i(this,T,O),O+=this.blockSize;if(typeof T=="string"){for(;O<w;)if(x[M++]=T.charCodeAt(O++),M==this.blockSize){i(this,x),M=0;break}}else for(;O<w;)if(x[M++]=T[O++],M==this.blockSize){i(this,x),M=0;break}}this.h=M,this.o+=w},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;var D=8*this.o;for(w=T.length-8;w<T.length;++w)T[w]=D&255,D/=256;for(this.u(T),T=Array(16),w=D=0;4>w;++w)for(var x=0;32>x;x+=8)T[D++]=this.g[w]>>>x&255;return T};function o(T,w){var D=a;return Object.prototype.hasOwnProperty.call(D,T)?D[T]:D[T]=w(T)}function s(T,w){this.h=w;for(var D=[],x=!0,M=T.length-1;0<=M;M--){var O=T[M]|0;x&&O==w||(D[M]=O,x=!1)}this.g=D}var a={};function c(T){return-128<=T&&128>T?o(T,function(w){return new s([w|0],0>w?-1:0)}):new s([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return R(u(-T));for(var w=[],D=1,x=0;T>=D;x++)w[x]=T/D|0,D*=4294967296;return new s(w,0)}function d(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return R(d(T.substring(1),w));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=u(Math.pow(w,8)),x=f,M=0;M<T.length;M+=8){var O=Math.min(8,T.length-M),S=parseInt(T.substring(M,M+O),w);8>O?(O=u(Math.pow(w,O)),x=x.j(O).add(u(S))):(x=x.j(D),x=x.add(u(S)))}return x}var f=c(0),y=c(1),_=c(16777216);n=s.prototype,n.m=function(){if(P(this))return-R(this).m();for(var T=0,w=1,D=0;D<this.g.length;D++){var x=this.i(D);T+=(0<=x?x:4294967296+x)*w,w*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(P(this))return"-"+R(this).toString(T);for(var w=u(Math.pow(T,6)),D=this,x="";;){var M=ie(D,w).g;D=j(D,M.j(w));var O=((0<D.g.length?D.g[0]:D.h)>>>0).toString(T);if(D=M,b(D))return O+x;for(;6>O.length;)O="0"+O;x=O+x}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(var w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function P(T){return T.h==-1}n.l=function(T){return T=j(this,T),P(T)?-1:b(T)?0:1};function R(T){for(var w=T.g.length,D=[],x=0;x<w;x++)D[x]=~T.g[x];return new s(D,~T.h).add(y)}n.abs=function(){return P(this)?R(this):this},n.add=function(T){for(var w=Math.max(this.g.length,T.g.length),D=[],x=0,M=0;M<=w;M++){var O=x+(this.i(M)&65535)+(T.i(M)&65535),S=(O>>>16)+(this.i(M)>>>16)+(T.i(M)>>>16);x=S>>>16,O&=65535,S&=65535,D[M]=S<<16|O}return new s(D,D[D.length-1]&-2147483648?-1:0)};function j(T,w){return T.add(R(w))}n.j=function(T){if(b(this)||b(T))return f;if(P(this))return P(T)?R(this).j(R(T)):R(R(this).j(T));if(P(T))return R(this.j(R(T)));if(0>this.l(_)&&0>T.l(_))return u(this.m()*T.m());for(var w=this.g.length+T.g.length,D=[],x=0;x<2*w;x++)D[x]=0;for(x=0;x<this.g.length;x++)for(var M=0;M<T.g.length;M++){var O=this.i(x)>>>16,S=this.i(x)&65535,Wn=T.i(M)>>>16,po=T.i(M)&65535;D[2*x+2*M]+=S*po,Y(D,2*x+2*M),D[2*x+2*M+1]+=O*po,Y(D,2*x+2*M+1),D[2*x+2*M+1]+=S*Wn,Y(D,2*x+2*M+1),D[2*x+2*M+2]+=O*Wn,Y(D,2*x+2*M+2)}for(x=0;x<w;x++)D[x]=D[2*x+1]<<16|D[2*x];for(x=w;x<2*w;x++)D[x]=0;return new s(D,0)};function Y(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function Z(T,w){this.g=T,this.h=w}function ie(T,w){if(b(w))throw Error("division by zero");if(b(T))return new Z(f,f);if(P(T))return w=ie(R(T),w),new Z(R(w.g),R(w.h));if(P(w))return w=ie(T,R(w)),new Z(R(w.g),w.h);if(30<T.g.length){if(P(T)||P(w))throw Error("slowDivide_ only works with positive integers.");for(var D=y,x=w;0>=x.l(T);)D=Ue(D),x=Ue(x);var M=me(D,1),O=me(x,1);for(x=me(x,2),D=me(D,2);!b(x);){var S=O.add(x);0>=S.l(T)&&(M=M.add(D),O=S),x=me(x,1),D=me(D,1)}return w=j(T,M.j(w)),new Z(M,w)}for(M=f;0<=T.l(w);){for(D=Math.max(1,Math.floor(T.m()/w.m())),x=Math.ceil(Math.log(D)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),O=u(D),S=O.j(w);P(S)||0<S.l(T);)D-=x,O=u(D),S=O.j(w);b(O)&&(O=y),M=M.add(O),T=j(T,S)}return new Z(M,T)}n.A=function(T){return ie(this,T).h},n.and=function(T){for(var w=Math.max(this.g.length,T.g.length),D=[],x=0;x<w;x++)D[x]=this.i(x)&T.i(x);return new s(D,this.h&T.h)},n.or=function(T){for(var w=Math.max(this.g.length,T.g.length),D=[],x=0;x<w;x++)D[x]=this.i(x)|T.i(x);return new s(D,this.h|T.h)},n.xor=function(T){for(var w=Math.max(this.g.length,T.g.length),D=[],x=0;x<w;x++)D[x]=this.i(x)^T.i(x);return new s(D,this.h^T.h)};function Ue(T){for(var w=T.g.length+1,D=[],x=0;x<w;x++)D[x]=T.i(x)<<1|T.i(x-1)>>>31;return new s(D,T.h)}function me(T,w){var D=w>>5;w%=32;for(var x=T.g.length-D,M=[],O=0;O<x;O++)M[O]=0<w?T.i(O+D)>>>w|T.i(O+D+1)<<32-w:T.i(O+D);return new s(M,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yb=jN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,to=jN.Integer=s}).apply(typeof VN<"u"?VN:typeof self<"u"?self:typeof window<"u"?window:{});var gm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},no={};var _b,X9,Jc,vb,Rd,mm,Cb,Eb,wb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof gm=="object"&&gm];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var C=0;C<l.length-1;C++){var A=l[C];if(!(A in p))break e;p=p[A]}l=l[l.length-1],C=p[l],h=h(C),h!=C&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,C=!1,A={next:function(){if(!C&&p<l.length){var N=p++;return{value:h(N,l[N]),done:!1}}return C=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,C),l.apply(h,A)}}return function(){return l.apply(h,arguments)}}function y(l,h,p){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,y.apply(null,arguments)}function _(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var C=p.slice();return C.push.apply(C,arguments),l.apply(this,C)}}function b(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(C,A,N){for(var q=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)q[Ge-2]=arguments[Ge];return h.prototype[A].apply(C,q)}}function P(l){let h=l.length;if(0<h){let p=Array(h);for(let C=0;C<h;C++)p[C]=l[C];return p}return[]}function R(l,h){for(let p=1;p<arguments.length;p++){let C=arguments[p];if(c(C)){let A=l.length||0,N=C.length||0;l.length=A+N;for(let q=0;q<N;q++)l[A+q]=C[q]}else l.push(C)}}class j{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function Y(l){return/^[\s\xa0]*$/.test(l)}function Z(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function ie(l){return ie[" "](l),l}ie[" "]=function(){};var Ue=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function me(l,h,p){for(let C in l)h.call(p,l[C],C,l)}function T(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function w(l){let h={};for(let p in l)h[p]=l[p];return h}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,h){let p,C;for(let A=1;A<arguments.length;A++){C=arguments[A];for(p in C)l[p]=C[p];for(let N=0;N<D.length;N++)p=D[N],Object.prototype.hasOwnProperty.call(C,p)&&(l[p]=C[p])}}function M(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function O(l){a.setTimeout(()=>{throw l},0)}function S(){var l=Se;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Wn{constructor(){this.h=this.g=null}add(h,p){let C=po.get();C.set(h,p),this.h?this.h.next=C:this.g=C,this.h=C}}var po=new j(()=>new ne,l=>l.reset());class ne{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,se=!1,Se=new Wn,mt=()=>{let l=a.Promise.resolve(void 0);oe=()=>{l.then(Gn)}};var Gn=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(p){O(p)}var h=po;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}se=!1};function ht(){this.s=this.s,this.C=this.C}ht.prototype.s=!1,ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Xe(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Xe.prototype.h=function(){this.defaultPrevented=!0};var et=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function go(l,h){if(Xe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,C=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(Ue){e:{try{ie(h.nodeName);var A=!0;break e}catch{}A=!1}A||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:By[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&go.aa.h.call(this)}}b(go,Xe);var By={2:"touch",3:"pen",4:"mouse"};go.prototype.h=function(){go.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),wi=0;function En(l,h,p,C,A){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!C,this.ha=A,this.key=++wi,this.da=this.fa=!1}function bi(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function mo(l){this.src=l,this.g={},this.h=0}mo.prototype.add=function(l,h,p,C,A){var N=l.toString();l=this.g[N],l||(l=this.g[N]=[],this.h++);var q=zy(l,h,C,A);return-1<q?(h=l[q],p||(h.fa=!1)):(h=new En(h,this.src,N,!!C,A),h.fa=p,l.push(h)),h};function $y(l,h){var p=h.type;if(p in l.g){var C=l.g[p],A=Array.prototype.indexOf.call(C,h,void 0),N;(N=0<=A)&&Array.prototype.splice.call(C,A,1),N&&(bi(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function zy(l,h,p,C){for(var A=0;A<l.length;++A){var N=l[A];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==C)return A}return-1}var Hy="closure_lm_"+(1e6*Math.random()|0),qy={};function rS(l,h,p,C,A){if(C&&C.once)return oS(l,h,p,C,A);if(Array.isArray(h)){for(var N=0;N<h.length;N++)rS(l,h[N],p,C,A);return null}return p=Yy(p),l&&l[ft]?l.K(h,p,u(C)?!!C.capture:!!C,A):iS(l,h,p,!1,C,A)}function iS(l,h,p,C,A,N){if(!h)throw Error("Invalid event type");var q=u(A)?!!A.capture:!!A,Ge=Gy(l);if(Ge||(l[Hy]=Ge=new mo(l)),p=Ge.add(h,p,C,q,N),p.proxy)return p;if(C=e2(),p.proxy=C,C.src=l,C.listener=p,l.addEventListener)et||(A=q),A===void 0&&(A=!1),l.addEventListener(h.toString(),C,A);else if(l.attachEvent)l.attachEvent(aS(h.toString()),C);else if(l.addListener&&l.removeListener)l.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return p}function e2(){function l(p){return h.call(l.src,l.listener,p)}let h=t2;return l}function oS(l,h,p,C,A){if(Array.isArray(h)){for(var N=0;N<h.length;N++)oS(l,h[N],p,C,A);return null}return p=Yy(p),l&&l[ft]?l.L(h,p,u(C)?!!C.capture:!!C,A):iS(l,h,p,!0,C,A)}function sS(l,h,p,C,A){if(Array.isArray(h))for(var N=0;N<h.length;N++)sS(l,h[N],p,C,A);else C=u(C)?!!C.capture:!!C,p=Yy(p),l&&l[ft]?(l=l.i,h=String(h).toString(),h in l.g&&(N=l.g[h],p=zy(N,p,C,A),-1<p&&(bi(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete l.g[h],l.h--)))):l&&(l=Gy(l))&&(h=l.g[h.toString()],l=-1,h&&(l=zy(h,p,C,A)),(p=-1<l?h[l]:null)&&Wy(p))}function Wy(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[ft])$y(h.i,l);else{var p=l.type,C=l.proxy;h.removeEventListener?h.removeEventListener(p,C,l.capture):h.detachEvent?h.detachEvent(aS(p),C):h.addListener&&h.removeListener&&h.removeListener(C),(p=Gy(h))?($y(p,l),p.h==0&&(p.src=null,h[Hy]=null)):bi(l)}}}function aS(l){return l in qy?qy[l]:qy[l]="on"+l}function t2(l,h){if(l.da)l=!0;else{h=new go(h,this);var p=l.listener,C=l.ha||l.src;l.fa&&Wy(l),l=p.call(C,h)}return l}function Gy(l){return l=l[Hy],l instanceof mo?l:null}var Ky="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yy(l){return typeof l=="function"?l:(l[Ky]||(l[Ky]=function(h){return l.handleEvent(h)}),l[Ky])}function Qt(){ht.call(this),this.i=new mo(this),this.M=this,this.F=null}b(Qt,ht),Qt.prototype[ft]=!0,Qt.prototype.removeEventListener=function(l,h,p,C){sS(this,l,h,p,C)};function ln(l,h){var p,C=l.F;if(C)for(p=[];C;C=C.F)p.push(C);if(l=l.M,C=h.type||h,typeof h=="string")h=new Xe(h,l);else if(h instanceof Xe)h.target=h.target||l;else{var A=h;h=new Xe(C,l),x(h,A)}if(A=!0,p)for(var N=p.length-1;0<=N;N--){var q=h.g=p[N];A=gh(q,C,!0,h)&&A}if(q=h.g=l,A=gh(q,C,!0,h)&&A,A=gh(q,C,!1,h)&&A,p)for(N=0;N<p.length;N++)q=h.g=p[N],A=gh(q,C,!1,h)&&A}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],C=0;C<p.length;C++)bi(p[C]);delete l.g[h],l.h--}}this.F=null},Qt.prototype.K=function(l,h,p,C){return this.i.add(String(l),h,!1,p,C)},Qt.prototype.L=function(l,h,p,C){return this.i.add(String(l),h,!0,p,C)};function gh(l,h,p,C){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var A=!0,N=0;N<h.length;++N){var q=h[N];if(q&&!q.da&&q.capture==p){var Ge=q.listener,Bt=q.ha||q.src;q.fa&&$y(l.i,q),A=Ge.call(Bt,C)!==!1&&A}}return A&&!C.defaultPrevented}function cS(l,h,p){if(typeof l=="function")p&&(l=y(l,p));else if(l&&typeof l.handleEvent=="function")l=y(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function lS(l){l.g=cS(()=>{l.g=null,l.i&&(l.i=!1,lS(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class n2 extends ht{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:lS(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pl(l){ht.call(this),this.h=l,this.g={}}b(Pl,ht);var uS=[];function dS(l){me(l.g,function(h,p){this.g.hasOwnProperty(p)&&Wy(h)},l),l.g={}}Pl.prototype.N=function(){Pl.aa.N.call(this),dS(this)},Pl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qy=a.JSON.stringify,r2=a.JSON.parse,i2=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Zy(){}Zy.prototype.h=null;function hS(l){return l.h||(l.h=l.i())}function fS(){}var Al={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jy(){Xe.call(this,"d")}b(Jy,Xe);function Xy(){Xe.call(this,"c")}b(Xy,Xe);var vs={},pS=null;function mh(){return pS=pS||new Qt}vs.La="serverreachability";function gS(l){Xe.call(this,vs.La,l)}b(gS,Xe);function Ol(l){let h=mh();ln(h,new gS(h))}vs.STAT_EVENT="statevent";function mS(l,h){Xe.call(this,vs.STAT_EVENT,l),this.stat=h}b(mS,Xe);function un(l){let h=mh();ln(h,new mS(h,l))}vs.Ma="timingevent";function yS(l,h){Xe.call(this,vs.Ma,l),this.size=h}b(yS,Xe);function Rl(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Nl(){this.g=!0}Nl.prototype.xa=function(){this.g=!1};function o2(l,h,p,C,A,N){l.info(function(){if(l.g)if(N)for(var q="",Ge=N.split("&"),Bt=0;Bt<Ge.length;Bt++){var Le=Ge[Bt].split("=");if(1<Le.length){var Zt=Le[0];Le=Le[1];var Jt=Zt.split("_");q=2<=Jt.length&&Jt[1]=="type"?q+(Zt+"="+Le+"&"):q+(Zt+"=redacted&")}}else q=null;else q=N;return"XMLHTTP REQ ("+C+") [attempt "+A+"]: "+h+`
`+p+`
`+q})}function s2(l,h,p,C,A,N,q){l.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+A+"]: "+h+`
`+p+`
`+N+" "+q})}function ja(l,h,p,C){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+c2(l,p)+(C?" "+C:"")})}function a2(l,h){l.info(function(){return"TIMEOUT: "+h})}Nl.prototype.info=function(){};function c2(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var C=p[l];if(!(2>C.length)){var A=C[1];if(Array.isArray(A)&&!(1>A.length)){var N=A[0];if(N!="noop"&&N!="stop"&&N!="close")for(var q=1;q<A.length;q++)A[q]=""}}}}return Qy(p)}catch{return h}}var yh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_S={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},e_;function _h(){}b(_h,Zy),_h.prototype.g=function(){return new XMLHttpRequest},_h.prototype.i=function(){return{}},e_=new _h;function yo(l,h,p,C){this.j=l,this.i=h,this.l=p,this.R=C||1,this.U=new Pl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vS}function vS(){this.i=null,this.g="",this.h=!1}var CS={},t_={};function n_(l,h,p){l.L=1,l.v=wh(Ii(h)),l.m=p,l.P=!0,ES(l,null)}function ES(l,h){l.F=Date.now(),vh(l),l.A=Ii(l.v);var p=l.A,C=l.R;Array.isArray(C)||(C=[String(C)]),kS(p.i,"t",C),l.C=0,p=l.j.J,l.h=new vS,l.g=XS(l.j,p?h:null,!l.m),0<l.O&&(l.M=new n2(y(l.Y,l,l.g),l.O)),h=l.U,p=l.g,C=l.ca;var A="readystatechange";Array.isArray(A)||(A&&(uS[0]=A.toString()),A=uS);for(var N=0;N<A.length;N++){var q=rS(p,A[N],C||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Ol(),o2(l.i,l.u,l.A,l.l,l.R,l.m)}yo.prototype.ca=function(l){l=l.target;let h=this.M;h&&Di(l)==3?h.j():this.Y(l)},yo.prototype.Y=function(l){try{if(l==this.g)e:{let Jt=Di(this.g);var h=this.g.Ba();let $a=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||$S(this.g)))){this.J||Jt!=4||h==7||(h==8||0>=$a?Ol(3):Ol(2)),r_(this);var p=this.g.Z();this.X=p;t:if(wS(this)){var C=$S(this.g);l="";var A=C.length,N=Di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cs(this),kl(this);var q="";break t}this.h.i=new a.TextDecoder}for(h=0;h<A;h++)this.h.h=!0,l+=this.h.i.decode(C[h],{stream:!(N&&h==A-1)});C.length=0,this.h.g+=l,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,s2(this.i,this.u,this.A,this.l,this.R,Jt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Bt=this.g;if((Ge=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Ge)){var Le=Ge;break t}}Le=null}if(p=Le)ja(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,i_(this,p);else{this.o=!1,this.s=3,un(12),Cs(this),kl(this);break e}}if(this.P){p=!0;let fr;for(;!this.J&&this.C<q.length;)if(fr=l2(this,q),fr==t_){Jt==4&&(this.s=4,un(14),p=!1),ja(this.i,this.l,null,"[Incomplete Response]");break}else if(fr==CS){this.s=4,un(15),ja(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else ja(this.i,this.l,fr,null),i_(this,fr);if(wS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||q.length!=0||this.h.h||(this.s=1,un(16),p=!1),this.o=this.o&&p,!p)ja(this.i,this.l,q,"[Invalid Chunked Response]"),Cs(this),kl(this);else if(0<q.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),u_(Zt),Zt.M=!0,un(11))}}else ja(this.i,this.l,q,null),i_(this,q);Jt==4&&Cs(this),this.o&&!this.J&&(Jt==4?YS(this.j,this):(this.o=!1,vh(this)))}else S2(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,un(12)):(this.s=0,un(13)),Cs(this),kl(this)}}}catch{}finally{}};function wS(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function l2(l,h){var p=l.C,C=h.indexOf(`
`,p);return C==-1?t_:(p=Number(h.substring(p,C)),isNaN(p)?CS:(C+=1,C+p>h.length?t_:(h=h.slice(C,C+p),l.C=C+p,h)))}yo.prototype.cancel=function(){this.J=!0,Cs(this)};function vh(l){l.S=Date.now()+l.I,bS(l,l.I)}function bS(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Rl(y(l.ba,l),h)}function r_(l){l.B&&(a.clearTimeout(l.B),l.B=null)}yo.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(a2(this.i,this.A),this.L!=2&&(Ol(),un(17)),Cs(this),this.s=2,kl(this)):bS(this,this.S-l)};function kl(l){l.j.G==0||l.J||YS(l.j,l)}function Cs(l){r_(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,dS(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function i_(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||o_(p.h,l))){if(!l.K&&o_(p.h,l)&&p.G==3){try{var C=p.Da.g.parse(h)}catch{C=null}if(Array.isArray(C)&&C.length==3){var A=C;if(A[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Th(p),Dh(p);else break e;l_(p),un(18)}}else p.za=A[1],0<p.za-p.T&&37500>A[2]&&p.F&&p.v==0&&!p.C&&(p.C=Rl(y(p.Za,p),6e3));if(1>=SS(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ws(p,11)}else if((l.K||p.g==l)&&Th(p),!Y(h))for(A=p.Da.g.parse(h),h=0;h<A.length;h++){let Le=A[h];if(p.T=Le[0],Le=Le[1],p.G==2)if(Le[0]=="c"){p.K=Le[1],p.ia=Le[2];let Zt=Le[3];Zt!=null&&(p.la=Zt,p.j.info("VER="+p.la));let Jt=Le[4];Jt!=null&&(p.Aa=Jt,p.j.info("SVER="+p.Aa));let $a=Le[5];$a!=null&&typeof $a=="number"&&0<$a&&(C=1.5*$a,p.L=C,p.j.info("backChannelRequestTimeoutMs_="+C)),C=p;let fr=l.g;if(fr){let Mh=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mh){var N=C.h;N.g||Mh.indexOf("spdy")==-1&&Mh.indexOf("quic")==-1&&Mh.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(s_(N,N.h),N.h=null))}if(C.D){let d_=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;d_&&(C.ya=d_,tt(C.I,C.D,d_))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),C=p;var q=l;if(C.qa=JS(C,C.J?C.ia:null,C.W),q.K){TS(C.h,q);var Ge=q,Bt=C.L;Bt&&(Ge.I=Bt),Ge.B&&(r_(Ge),vh(Ge)),C.g=q}else GS(C);0<p.i.length&&Sh(p)}else Le[0]!="stop"&&Le[0]!="close"||ws(p,7);else p.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?ws(p,7):c_(p):Le[0]!="noop"&&p.l&&p.l.ta(Le),p.v=0)}}Ol(4)}catch{}}var u2=class{constructor(l,h){this.g=l,this.map=h}};function IS(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function DS(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function SS(l){return l.h?1:l.g?l.g.size:0}function o_(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function s_(l,h){l.g?l.g.add(h):l.h=h}function TS(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}IS.prototype.cancel=function(){if(this.i=xS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function xS(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return P(l.i)}function d2(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,C=0;C<p;C++)h.push(l[C]);return h}h=[],p=0;for(C in l)h[p++]=l[C];return h}function h2(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let C in l)h[p++]=C;return h}}}function MS(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=h2(l),C=d2(l),A=C.length,N=0;N<A;N++)h.call(void 0,C[N],p&&p[N],l)}var PS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function f2(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var C=l[p].indexOf("="),A=null;if(0<=C){var N=l[p].substring(0,C);A=l[p].substring(C+1)}else N=l[p];h(N,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Es(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Es){this.h=l.h,Ch(this,l.j),this.o=l.o,this.g=l.g,Eh(this,l.s),this.l=l.l;var h=l.i,p=new Vl;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),AS(this,p),this.m=l.m}else l&&(h=String(l).match(PS))?(this.h=!1,Ch(this,h[1]||"",!0),this.o=Fl(h[2]||""),this.g=Fl(h[3]||"",!0),Eh(this,h[4]),this.l=Fl(h[5]||"",!0),AS(this,h[6]||"",!0),this.m=Fl(h[7]||"")):(this.h=!1,this.i=new Vl(null,this.h))}Es.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Ll(h,OS,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ll(h,OS,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Ll(p,p.charAt(0)=="/"?m2:g2,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Ll(p,_2)),l.join("")};function Ii(l){return new Es(l)}function Ch(l,h,p){l.j=p?Fl(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Eh(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function AS(l,h,p){h instanceof Vl?(l.i=h,v2(l.i,l.h)):(p||(h=Ll(h,y2)),l.i=new Vl(h,l.h))}function tt(l,h,p){l.i.set(h,p)}function wh(l){return tt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Fl(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ll(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,p2),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function p2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var OS=/[#\/\?@]/g,g2=/[#\?:]/g,m2=/[#\?]/g,y2=/[#\?@]/g,_2=/#/g;function Vl(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function _o(l){l.g||(l.g=new Map,l.h=0,l.i&&f2(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Vl.prototype,n.add=function(l,h){_o(this),this.i=null,l=Ua(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function RS(l,h){_o(l),h=Ua(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function NS(l,h){return _o(l),h=Ua(l,h),l.g.has(h)}n.forEach=function(l,h){_o(this),this.g.forEach(function(p,C){p.forEach(function(A){l.call(h,A,C,this)},this)},this)},n.na=function(){_o(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let C=0;C<h.length;C++){let A=l[C];for(let N=0;N<A.length;N++)p.push(h[C])}return p},n.V=function(l){_o(this);let h=[];if(typeof l=="string")NS(this,l)&&(h=h.concat(this.g.get(Ua(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return _o(this),this.i=null,l=Ua(this,l),NS(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function kS(l,h,p){RS(l,h),0<p.length&&(l.i=null,l.g.set(Ua(l,h),P(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var C=h[p];let N=encodeURIComponent(String(C)),q=this.V(C);for(C=0;C<q.length;C++){var A=N;q[C]!==""&&(A+="="+encodeURIComponent(String(q[C]))),l.push(A)}}return this.i=l.join("&")};function Ua(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function v2(l,h){h&&!l.j&&(_o(l),l.i=null,l.g.forEach(function(p,C){var A=C.toLowerCase();C!=A&&(RS(this,C),kS(this,A,p))},l)),l.j=h}function C2(l,h){let p=new Nl;if(a.Image){let C=new Image;C.onload=_(vo,p,"TestLoadImage: loaded",!0,h,C),C.onerror=_(vo,p,"TestLoadImage: error",!1,h,C),C.onabort=_(vo,p,"TestLoadImage: abort",!1,h,C),C.ontimeout=_(vo,p,"TestLoadImage: timeout",!1,h,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=l}else h(!1)}function E2(l,h){let p=new Nl,C=new AbortController,A=setTimeout(()=>{C.abort(),vo(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:C.signal}).then(N=>{clearTimeout(A),N.ok?vo(p,"TestPingServer: ok",!0,h):vo(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),vo(p,"TestPingServer: error",!1,h)})}function vo(l,h,p,C,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),C(p)}catch{}}function w2(){this.g=new i2}function b2(l,h,p){let C=p||"";try{MS(l,function(A,N){let q=A;u(A)&&(q=Qy(A)),h.push(C+N+"="+encodeURIComponent(q))})}catch(A){throw h.push(C+"type="+encodeURIComponent("_badmap")),A}}function jl(l){this.l=l.Ub||null,this.j=l.eb||!1}b(jl,Zy),jl.prototype.g=function(){return new bh(this.l,this.j)},jl.prototype.i=function(l){return function(){return l}}({});function bh(l,h){Qt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(bh,Qt),n=bh.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Bl(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ul(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Bl(this)),this.g&&(this.readyState=3,Bl(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;FS(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function FS(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ul(this):Bl(this),this.readyState==3&&FS(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Ul(this))},n.Qa=function(l){this.g&&(this.response=l,Ul(this))},n.ga=function(){this.g&&Ul(this)};function Ul(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Bl(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Bl(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(bh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function LS(l){let h="";return me(l,function(p,C){h+=C,h+=":",h+=p,h+=`\r
`}),h}function a_(l,h,p){e:{for(C in p){var C=!1;break e}C=!0}C||(p=LS(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):tt(l,h,p))}function pt(l){Qt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(pt,Qt);var I2=/^https?$/i,D2=["POST","PUT"];n=pt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():e_.g(),this.v=this.o?hS(this.o):hS(e_),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(N){VS(this,N);return}if(l=p||"",p=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var A in C)p.set(A,C[A]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(let N of C.keys())p.set(N,C.get(N));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),A=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(D2,h,void 0))||C||A||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,q]of p)this.g.setRequestHeader(N,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{BS(this),this.u=!0,this.g.send(l),this.u=!1}catch(N){VS(this,N)}};function VS(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,jS(l),Ih(l)}function jS(l){l.A||(l.A=!0,ln(l,"complete"),ln(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ln(this,"complete"),ln(this,"abort"),Ih(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ih(this,!0)),pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?US(this):this.bb())},n.bb=function(){US(this)};function US(l){if(l.h&&typeof s<"u"&&(!l.v[1]||Di(l)!=4||l.Z()!=2)){if(l.u&&Di(l)==4)cS(l.Ea,0,l);else if(ln(l,"readystatechange"),Di(l)==4){l.h=!1;try{let q=l.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var C;if(C=q===0){var A=String(l.D).match(PS)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),C=!I2.test(A?A.toLowerCase():"")}p=C}if(p)ln(l,"complete"),ln(l,"success");else{l.m=6;try{var N=2<Di(l)?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.Z()+"]",jS(l)}}finally{Ih(l)}}}}function Ih(l,h){if(l.g){BS(l);let p=l.g,C=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||ln(l,"ready");try{p.onreadystatechange=C}catch{}}}function BS(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Di(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),r2(h)}};function $S(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function S2(l){let h={};l=(l.g&&2<=Di(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<l.length;C++){if(Y(l[C]))continue;var p=M(l[C]);let A=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[A]||[];h[A]=N,N.push(p)}T(h,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $l(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function zS(l){this.Aa=0,this.i=[],this.j=new Nl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$l("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$l("baseRetryDelayMs",5e3,l),this.cb=$l("retryDelaySeedMs",1e4,l),this.Wa=$l("forwardChannelMaxRetries",2,l),this.wa=$l("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new IS(l&&l.concurrentRequestLimit),this.Da=new w2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=zS.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,C){un(0),this.W=l,this.H=h||{},p&&C!==void 0&&(this.H.OSID=p,this.H.OAID=C),this.F=this.X,this.I=JS(this,null,this.W),Sh(this)};function c_(l){if(HS(l),l.G==3){var h=l.U++,p=Ii(l.I);if(tt(p,"SID",l.K),tt(p,"RID",h),tt(p,"TYPE","terminate"),zl(l,p),h=new yo(l,l.j,h),h.L=2,h.v=wh(Ii(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=XS(h.j,null),h.g.ea(h.v)),h.F=Date.now(),vh(h)}ZS(l)}function Dh(l){l.g&&(u_(l),l.g.cancel(),l.g=null)}function HS(l){Dh(l),l.u&&(a.clearTimeout(l.u),l.u=null),Th(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Sh(l){if(!DS(l.h)&&!l.s){l.s=!0;var h=l.Ga;oe||mt(),se||(oe(),se=!0),Se.add(h,l),l.B=0}}function T2(l,h){return SS(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Rl(y(l.Ga,l,h),QS(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let A=new yo(this,this.j,l),N=this.o;if(this.S&&(N?(N=w(N),x(N,this.S)):N=this.S),this.m!==null||this.O||(A.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var C=this.i[p];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(h+=C,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=WS(this,A,h),p=Ii(this.I),tt(p,"RID",l),tt(p,"CVER",22),this.D&&tt(p,"X-HTTP-Session-Id",this.D),zl(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(LS(N)))+"&"+h:this.m&&a_(p,this.m,N)),s_(this.h,A),this.Ua&&tt(p,"TYPE","init"),this.P?(tt(p,"$req",h),tt(p,"SID","null"),A.T=!0,n_(A,p,null)):n_(A,p,h),this.G=2}}else this.G==3&&(l?qS(this,l):this.i.length==0||DS(this.h)||qS(this))};function qS(l,h){var p;h?p=h.l:p=l.U++;let C=Ii(l.I);tt(C,"SID",l.K),tt(C,"RID",p),tt(C,"AID",l.T),zl(l,C),l.m&&l.o&&a_(C,l.m,l.o),p=new yo(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=WS(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),s_(l.h,p),n_(p,C,h)}function zl(l,h){l.H&&me(l.H,function(p,C){tt(h,C,p)}),l.l&&MS({},function(p,C){tt(h,C,p)})}function WS(l,h,p){p=Math.min(l.i.length,p);var C=l.l?y(l.l.Na,l.l,l):null;e:{var A=l.i;let N=-1;for(;;){let q=["count="+p];N==-1?0<p?(N=A[0].g,q.push("ofs="+N)):N=0:q.push("ofs="+N);let Ge=!0;for(let Bt=0;Bt<p;Bt++){let Le=A[Bt].g,Zt=A[Bt].map;if(Le-=N,0>Le)N=Math.max(0,A[Bt].g-100),Ge=!1;else try{b2(Zt,q,"req"+Le+"_")}catch{C&&C(Zt)}}if(Ge){C=q.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,C}function GS(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;oe||mt(),se||(oe(),se=!0),Se.add(h,l),l.v=0}}function l_(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Rl(y(l.Fa,l),QS(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,KS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Rl(y(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,un(10),Dh(this),KS(this))};function u_(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function KS(l){l.g=new yo(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Ii(l.qa);tt(h,"RID","rpc"),tt(h,"SID",l.K),tt(h,"AID",l.T),tt(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&tt(h,"TO",l.ja),tt(h,"TYPE","xmlhttp"),zl(l,h),l.m&&l.o&&a_(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=wh(Ii(h)),p.m=null,p.P=!0,ES(p,l)}n.Za=function(){this.C!=null&&(this.C=null,Dh(this),l_(this),un(19))};function Th(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function YS(l,h){var p=null;if(l.g==h){Th(l),u_(l),l.g=null;var C=2}else if(o_(l.h,h))p=h.D,TS(l.h,h),C=1;else return;if(l.G!=0){if(h.o)if(C==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var A=l.B;C=mh(),ln(C,new yS(C,p)),Sh(l)}else GS(l);else if(A=h.s,A==3||A==0&&0<h.X||!(C==1&&T2(l,h)||C==2&&l_(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),A){case 1:ws(l,5);break;case 4:ws(l,10);break;case 3:ws(l,6);break;default:ws(l,2)}}}function QS(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function ws(l,h){if(l.j.info("Error code "+h),h==2){var p=y(l.fb,l),C=l.Xa;let A=!C;C=new Es(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ch(C,"https"),wh(C),A?C2(C.toString(),p):E2(C.toString(),p)}else un(2);l.G=0,l.l&&l.l.sa(h),ZS(l),HS(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function ZS(l){if(l.G=0,l.ka=[],l.l){let h=xS(l.h);(h.length!=0||l.i.length!=0)&&(R(l.ka,h),R(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function JS(l,h,p){var C=p instanceof Es?Ii(p):new Es(p);if(C.g!="")h&&(C.g=h+"."+C.g),Eh(C,C.s);else{var A=a.location;C=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;var N=new Es(null);C&&Ch(N,C),h&&(N.g=h),A&&Eh(N,A),p&&(N.l=p),C=N}return p=l.D,h=l.ya,p&&h&&tt(C,p,h),tt(C,"VER",l.la),zl(l,C),C}function XS(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new pt(new jl({eb:p})):new pt(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eT(){}n=eT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xh(){}xh.prototype.g=function(l,h){return new On(l,h)};function On(l,h){Qt.call(this),this.g=new zS(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!Y(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!Y(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ba(this)}b(On,Qt),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){c_(this.g)},On.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Qy(l),l=p);h.i.push(new u2(h.Ya++,l)),h.G==3&&Sh(h)},On.prototype.N=function(){this.g.l=null,delete this.j,c_(this.g),delete this.g,On.aa.N.call(this)};function tT(l){Jy.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}b(tT,Jy);function nT(){Xy.call(this),this.status=1}b(nT,Xy);function Ba(l){this.g=l}b(Ba,eT),Ba.prototype.ua=function(){ln(this.g,"a")},Ba.prototype.ta=function(l){ln(this.g,new tT(l))},Ba.prototype.sa=function(l){ln(this.g,new nT)},Ba.prototype.ra=function(){ln(this.g,"b")},xh.prototype.createWebChannel=xh.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,wb=no.createWebChannelTransport=function(){return new xh},Eb=no.getStatEventTarget=function(){return mh()},Cb=no.Event=vs,mm=no.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yh.NO_ERROR=0,yh.TIMEOUT=8,yh.HTTP_ERROR=6,Rd=no.ErrorCode=yh,_S.COMPLETE="complete",vb=no.EventType=_S,fS.EventType=Al,Al.OPEN="a",Al.CLOSE="b",Al.ERROR="c",Al.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,Jc=no.WebChannel=fS,X9=no.FetchXmlHttpFactory=jl,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,_b=no.XhrIo=pt}).apply(typeof gm<"u"?gm:typeof self<"u"?self:typeof window<"u"?window:{});var UN="@firebase/firestore",BN="4.8.0";var jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");var _l="11.10.0";var Sa=new ri("@firebase/firestore");function Xc(){return Sa.logLevel}function X(n,...e){if(Sa.logLevel<=xe.DEBUG){let t=e.map(uD);Sa.debug(`Firestore (${_l}): ${n}`,...t)}}function ro(n,...e){if(Sa.logLevel<=xe.ERROR){let t=e.map(uD);Sa.error(`Firestore (${_l}): ${n}`,...t)}}function as(n,...e){if(Sa.logLevel<=xe.WARN){let t=e.map(uD);Sa.warn(`Firestore (${_l}): ${n}`,...t)}}function uD(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ue(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Rk(n,r,t)}function Rk(n,e,t){let r=`FIRESTORE (${_l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ro(r),new Error(r)}function $e(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Rk(e,i,r)}function ye(n,e){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends Cn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Nr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var bm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Tb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jt.UNAUTHENTICATED))}shutdown(){}},xb=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Mb=class{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Nr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>E(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Nr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new bm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new jt(e)}},Pb=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Ab=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Pb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Im=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ob=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);let r=o=>{o.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,X("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Im(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Im(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function eq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Nk(){return new TextEncoder}var jd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=eq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function De(n,e){return n<e?-1:n>e?1:0}function Rb(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return De(r,i);{let o=Nk(),s=tq(o.encode($N(n,t)),o.encode($N(e,t)));return s!==0?s:De(r,i)}}t+=r>65535?2:1}return De(n.length,e.length)}function $N(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function tq(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return De(n[t],e[t]);return De(n.length,e.length)}function sl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var zN="__name__",Dm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ue(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ue(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return De(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Rb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return to.fromString(e.substring(4,e.length-2))}},st=class n extends Dm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},nq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hn=class n extends Dm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return nq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zN}static keyField(){return new n([zN])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new K(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new K(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ae=class n{constructor(e){this.path=e}static fromPath(e){return new n(st.fromString(e))}static fromName(e){return new n(st.fromString(e).popFirst(5))}static empty(){return new n(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new st(e.slice()))}};function kk(n,e,t){if(!t)throw new K(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rq(n,e,t,r){if(e===!0&&r===!0)throw new K(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function HN(n){if(!ae.isDocumentKey(n))throw new K(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qN(n){if(ae.isDocumentKey(n))throw new K(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fk(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ry(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ue(12329,{type:typeof n})}function Pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new K(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ry(n);throw new K(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function xt(n,e){let t={typeString:n};return e&&(t.value=e),t}function eh(n,e){if(!Fk(n))throw new K(L.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new K(L.INVALID_ARGUMENT,t);return!0}var WN=-62135596800,GN=1e6,Mt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*GN);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new K(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new K(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<WN)throw new K(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GN}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(eh(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-WN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:xt("string",Mt._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};var Ce=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Mt(0,0))}static max(){return new n(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ud=-1,Nb=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Nb.UNKNOWN_ID=-1;function iq(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new Mt(t+1,0):new Mt(t,r));return new Ta(i,ae.empty(),e)}function oq(n){return new Ta(n.readTime,n.key,Ud)}var Ta=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ce.min(),ae.empty(),Ud)}static max(){return new n(Ce.max(),ae.empty(),Ud)}};function sq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}var aq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function vl(n){return E(this,null,function*(){if(n.code!==L.FAILED_PRECONDITION||n.message!==aq)throw n;X("LocalStore","Unexpectedly lost primary lease")})}var U=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function cq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cl(n){return n.name==="IndexedDbTransactionError"}var dD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),hD=-1;function iy(n){return n==null}function Bd(n){return n===0&&1/n==-1/0}function lq(n){return typeof n=="number"&&Number.isInteger(n)&&!Bd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Lk="";function uq(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KN(e)),e=dq(n.get(t),e);return KN(e)}function dq(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Lk:t+="";break;default:t+=o}}return t}function KN(n){return n+Lk+""}var hq="remoteDocuments",Vk="owner";var jk="mutationQueues";var Uk="mutations";var Bk="documentMutations",fq="remoteDocumentsV14";var $k="remoteDocumentGlobal";var zk="targets";var Hk="targetDocuments";var qk="targetGlobal",Wk="collectionParents";var Gk="clientMetadata";var Kk="bundles";var Yk="namedQueries";var pq="indexConfiguration";var gq="indexState";var mq="indexEntries";var Qk="documentOverlays";var yq="globals";var _q=[jk,Uk,Bk,hq,zk,Vk,qk,Hk,Gk,$k,Wk,Kk,Yk],lpe=[..._q,Qk],vq=[jk,Uk,Bk,fq,zk,Vk,qk,Hk,Gk,$k,Wk,Kk,Yk,Qk],Cq=vq,Eq=[...Cq,pq,gq,mq];var upe=[...Eq,yq];function YN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Zk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var gt=class n{constructor(e,t){this.comparator=e,this.root=t||ui.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rl(this.root,e,this.comparator,!0)}},rl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ui=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}};ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1;ui.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new ui(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ut=class n{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sm(this.data.getIterator())}getIteratorFrom(e){return new Sm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Sm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var lr=class n{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ut(Hn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Tm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var cn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Tm("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};cn.EMPTY_BYTE_STRING=new cn("");var wq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(n){if($e(!!n,39018),typeof n=="string"){let e=0,t=wq.exec(n);if($e(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oo(n){return typeof n=="string"?cn.fromBase64String(n):cn.fromUint8Array(n)}var Jk="server_timestamp",Xk="__type__",eF="__previous_value__",tF="__local_write_time__";function fD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Xk])===null||t===void 0?void 0:t.stringValue)===Jk}function oy(n){let e=n.mapValue.fields[eF];return fD(e)?oy(e):e}function $d(n){let e=io(n.mapValue.fields[tF].timestampValue);return new Mt(e.seconds,e.nanos)}var Fb=class{constructor(e,t,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}},xm="(default)",Mm=class n{constructor(e,t){this.projectId=e,this.database=t||xm}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===xm}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var pD="__type__",nF="__max__",ym={mapValue:{fields:{__type__:{stringValue:nF}}}},gD="__vector__",al="value";function cs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fD(n)?4:iF(n)?9007199254740991:rF(n)?10:11:ue(28295,{value:n})}function pi(n,e){if(n===e)return!0;let t=cs(n);if(t!==cs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $d(n).isEqual($d(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=io(i.timestampValue),a=io(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return oo(i.bytesValue).isEqual(oo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ot(i.geoPointValue.latitude)===ot(o.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ot(i.integerValue)===ot(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ot(i.doubleValue),a=ot(o.doubleValue);return s===a?Bd(s)===Bd(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return sl(n.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(YN(s)!==YN(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!pi(s[c],a[c])))return!1;return!0}(n,e);default:return ue(52216,{left:n})}}function zd(n,e){return(n.values||[]).find(t=>pi(t,e))!==void 0}function cl(n,e){if(n===e)return 0;let t=cs(n),r=cs(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ot(o.integerValue||o.doubleValue),c=ot(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return QN(n.timestampValue,e.timestampValue);case 4:return QN($d(n),$d(e));case 5:return Rb(n.stringValue,e.stringValue);case 6:return function(o,s){let a=oo(o),c=oo(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=De(a[u],c[u]);if(d!==0)return d}return De(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=De(ot(o.latitude),ot(s.latitude));return a!==0?a:De(ot(o.longitude),ot(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ZN(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;let f=o.fields||{},y=s.fields||{},_=(a=f[al])===null||a===void 0?void 0:a.arrayValue,b=(c=y[al])===null||c===void 0?void 0:c.arrayValue,P=De(((u=_?.values)===null||u===void 0?void 0:u.length)||0,((d=b?.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:ZN(_,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===ym.mapValue&&s===ym.mapValue)return 0;if(o===ym.mapValue)return 1;if(s===ym.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let y=Rb(c[f],d[f]);if(y!==0)return y;let _=cl(a[c[f]],u[d[f]]);if(_!==0)return _}return De(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ue(23264,{le:t})}}function QN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);let t=io(n),r=io(e),i=De(t.seconds,r.seconds);return i!==0?i:De(t.nanos,r.nanos)}function ZN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=cl(t[i],r[i]);if(o)return o}return De(t.length,r.length)}function ll(n){return Lb(n)}function Lb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=io(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return oo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ae.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Lb(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Lb(t.fields[s])}`;return i+"}"}(n.mapValue):ue(61005,{value:n})}function Cm(n){switch(cs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=oy(n);return e?16+Cm(e):16;case 5:return 2*n.stringValue.length;case 6:return oo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Cm(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return fs(r.fields,(o,s)=>{i+=o.length+Cm(s)}),i}(n.mapValue);default:throw ue(13486,{value:n})}}function JN(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vb(n){return!!n&&"integerValue"in n}function mD(n){return!!n&&"arrayValue"in n}function XN(n){return!!n&&"nullValue"in n}function ek(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Em(n){return!!n&&"mapValue"in n}function rF(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[pD])===null||t===void 0?void 0:t.stringValue)===gD}function kd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return fs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kd(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nF}var hpe={mapValue:{fields:{[pD]:{stringValue:gD},[al]:{arrayValue:{}}}}};var zn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Em(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kd(t)}setAll(e){let t=Hn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=kd(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Em(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Em(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(kd(this.value))}};function oF(n){let e=[];return fs(n.fields,(t,r)=>{let i=new Hn([t]);if(Em(r)){let o=oF(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new lr(e)}var kr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ce.min(),Ce.min(),Ce.min(),zn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ce.min(),Ce.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ce.min(),Ce.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ul=class{constructor(e,t){this.position=e,this.inclusive=t}};function tk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ae.comparator(ae.fromName(s.referenceValue),t.key):r=cl(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function nk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pi(n.position[t],e.position[t]))return!1;return!0}var xa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function bq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Pm=class{},Tt=class n extends Pm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ub(e,t,r):t==="array-contains"?new zb(e,r):t==="in"?new Hb(e,r):t==="not-in"?new qb(e,r):t==="array-contains-any"?new Wb(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Bb(e,r):new $b(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cl(t,this.value)):t!==null&&cs(this.value)===cs(t)&&this.matchesComparison(cl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fr=class n extends Pm{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return sF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function sF(n){return n.op==="and"}function aF(n){return Iq(n)&&sF(n)}function Iq(n){for(let e of n.filters)if(e instanceof Fr)return!1;return!0}function jb(n){if(n instanceof Tt)return n.field.canonicalString()+n.op.toString()+ll(n.value);if(aF(n))return n.filters.map(e=>jb(e)).join(",");{let e=n.filters.map(t=>jb(t)).join(",");return`${n.op}(${e})`}}function cF(n,e){return n instanceof Tt?function(r,i){return i instanceof Tt&&r.op===i.op&&r.field.isEqual(i.field)&&pi(r.value,i.value)}(n,e):n instanceof Fr?function(r,i){return i instanceof Fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&cF(s,i.filters[a]),!0):!1}(n,e):void ue(19439)}function lF(n){return n instanceof Tt?function(t){return`${t.field.canonicalString()} ${t.op} ${ll(t.value)}`}(n):n instanceof Fr?function(t){return t.op.toString()+" {"+t.getFilters().map(lF).join(" ,")+"}"}(n):"Filter"}var Ub=class extends Tt{constructor(e,t,r){super(e,t,r),this.key=ae.fromName(r.referenceValue)}matches(e){let t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}},Bb=class extends Tt{constructor(e,t){super(e,"in",t),this.keys=uF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},$b=class extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=uF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function uF(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ae.fromName(r.referenceValue))}var zb=class extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return mD(t)&&zd(t.arrayValue,this.value)}},Hb=class extends Tt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&zd(this.value.arrayValue,t)}},qb=class extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(zd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!zd(this.value.arrayValue,t)}},Wb=class extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!mD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zd(this.value.arrayValue,r))}};var Gb=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function rk(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Gb(n,e,t,r,i,o,s)}function yD(n){let e=ye(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),iy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ll(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ll(r)).join(",")),e.Pe=t}return e.Pe}function _D(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nk(n.startAt,e.startAt)&&nk(n.endAt,e.endAt)}function Kb(n){return ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ls=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Dq(n,e,t,r,i,o,s,a){return new ls(n,e,t,r,i,o,s,a)}function sy(n){return new ls(n)}function ik(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dF(n){return n.collectionGroup!==null}function Fd(n){let e=ye(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ut(Hn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new xa(o,r))}),t.has(Hn.keyField().canonicalString())||e.Te.push(new xa(Hn.keyField(),r))}return e.Te}function di(n){let e=ye(n);return e.Ie||(e.Ie=Sq(e,Fd(n))),e.Ie}function Sq(n,e){if(n.limitType==="F")return rk(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new xa(i.field,o)});let t=n.endAt?new ul(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ul(n.startAt.position,n.startAt.inclusive):null;return rk(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Yb(n,e){let t=n.filters.concat([e]);return new ls(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Qb(n,e,t){return new ls(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ay(n,e){return _D(di(n),di(e))&&n.limitType===e.limitType}function hF(n){return`${yD(di(n))}|lt:${n.limitType}`}function el(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>lF(i)).join(", ")}]`),iy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ll(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ll(i)).join(",")),`Target(${r})`}(di(n))}; limitType=${n.limitType})`}function cy(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Fd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=tk(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Fd(r),i)||r.endAt&&!function(s,a,c){let u=tk(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Fd(r),i))}(n,e)}function Tq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fF(n){return(e,t)=>{let r=!1;for(let i of Fd(n)){let o=xq(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function xq(n,e,t){let r=n.field.isKeyField()?ae.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?cl(c,u):ue(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:n.dir})}}var so=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Zk(this.inner)}size(){return this.innerSize}};var Mq=new gt(ae.comparator);function ao(){return Mq}var pF=new gt(ae.comparator);function Nd(...n){let e=pF;for(let t of n)e=e.insert(t.key,t);return e}function gF(n){let e=pF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ea(){return Ld()}function mF(){return Ld()}function Ld(){return new so(n=>n.toString(),(n,e)=>n.isEqual(e))}var Pq=new gt(ae.comparator),Aq=new Ut(ae.comparator);function Re(...n){let e=Aq;for(let t of n)e=e.add(t);return e}var Oq=new Ut(De);function Rq(){return Oq}function vD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function yF(n){return{integerValue:""+n}}function Nq(n,e){return lq(e)?yF(e):vD(n,e)}var dl=class{constructor(){this._=void 0}};function kq(n,e,t){return n instanceof hl?function(i,o){let s={fields:{[Xk]:{stringValue:Jk},[tF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&fD(o)&&(o=oy(o)),o&&(s.fields[eF]=o),{mapValue:s}}(t,e):n instanceof Ma?vF(n,e):n instanceof Pa?CF(n,e):function(i,o){let s=_F(i,o),a=ok(s)+ok(i.Ee);return Vb(s)&&Vb(i.Ee)?yF(a):vD(i.serializer,a)}(n,e)}function Fq(n,e,t){return n instanceof Ma?vF(n,e):n instanceof Pa?CF(n,e):t}function _F(n,e){return n instanceof fl?function(r){return Vb(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var hl=class extends dl{},Ma=class extends dl{constructor(e){super(),this.elements=e}};function vF(n,e){let t=EF(e);for(let r of n.elements)t.some(i=>pi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Pa=class extends dl{constructor(e){super(),this.elements=e}};function CF(n,e){let t=EF(e);for(let r of n.elements)t=t.filter(i=>!pi(i,r));return{arrayValue:{values:t}}}var fl=class extends dl{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function ok(n){return ot(n.integerValue||n.doubleValue)}function EF(n){return mD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Lq(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ma&&i instanceof Ma||r instanceof Pa&&i instanceof Pa?sl(r.elements,i.elements,pi):r instanceof fl&&i instanceof fl?pi(r.Ee,i.Ee):r instanceof hl&&i instanceof hl}(n.transform,e.transform)}var Zb=class{constructor(e,t){this.version=e,this.transformResults=t}},hi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function wm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var pl=class{};function wF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hd(n.key,hi.none()):new Aa(n.key,n.data,hi.none());{let t=n.data,r=zn.empty(),i=new Ut(Hn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new gi(n.key,r,new lr(i.toArray()),hi.none())}}function Vq(n,e,t){n instanceof Aa?function(i,o,s){let a=i.value.clone(),c=ak(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof gi?function(i,o,s){if(!wm(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=ak(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(bF(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Vd(n,e,t,r){return n instanceof Aa?function(o,s,a,c){if(!wm(o.precondition,s))return a;let u=o.value.clone(),d=ck(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof gi?function(o,s,a,c){if(!wm(o.precondition,s))return a;let u=ck(o.fieldTransforms,c,s),d=s.data;return d.setAll(bF(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return wm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function jq(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=_F(r.transform,i||null);o!=null&&(t===null&&(t=zn.empty()),t.set(r.field,o))}return t||null}function sk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&sl(r,i,(o,s)=>Lq(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Aa=class extends pl{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},gi=class extends pl{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function bF(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function ak(n,e,t){let r=new Map;$e(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Fq(s,a,t[i]))}return r}function ck(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,kq(o,s,e))}return r}var Hd=class extends pl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Jb=class extends pl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Xb=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Vq(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Vd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=mF();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=wF(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Re())}isEqual(e){return this.batchId===e.batchId&&sl(this.mutations,e.mutations,(t,r)=>sk(t,r))&&sl(this.baseMutations,e.baseMutations,(t,r)=>sk(t,r))}},eI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){$e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Pq}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var tI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var nI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Dt,Fe;function Uq(n){switch(n){case L.OK:return ue(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return ue(15467,{code:n})}}function IF(n){if(n===void 0)return ro("GRPC error has no .code"),L.UNKNOWN;switch(n){case Dt.OK:return L.OK;case Dt.CANCELLED:return L.CANCELLED;case Dt.UNKNOWN:return L.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return L.INTERNAL;case Dt.UNAVAILABLE:return L.UNAVAILABLE;case Dt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Dt.NOT_FOUND:return L.NOT_FOUND;case Dt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Dt.ABORTED:return L.ABORTED;case Dt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Dt.DATA_LOSS:return L.DATA_LOSS;default:return ue(39323,{code:n})}}(Fe=Dt||(Dt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";var lk=null;var Bq=new to([4294967295,4294967295],0);function uk(n){let e=Nk().encode(n),t=new yb;return t.update(e),new Uint8Array(t.digest())}function dk(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new to([t,r],0),new to([i,o],0)]}var rI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wa(`Invalid padding: ${t}`);if(r<0)throw new wa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wa(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wa(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=to.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(to.fromNumber(r)));return i.compare(Bq)===1&&(i=new to([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=uk(e),[r,i]=dk(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=uk(e),[r,i]=dk(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},wa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Am=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,qd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ce.min(),i,new gt(De),ao(),Re())}},qd=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Re(),Re(),Re())}};var il=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Om=class{constructor(e,t){this.targetId=e,this.De=t}},Rm=class{constructor(e,t,r=cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Nm=class{constructor(){this.ve=0,this.Ce=hk(),this.Fe=cn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Re(),t=Re(),r=Re();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ue(38017,{changeType:o})}}),new qd(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=hk()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},iI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ao(),this.je=_m(),this.Je=_m(),this.He=new gt(De)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(Kb(o))if(r===0){let s=new ae(o.path);this.Xe(t,s,kr.newNoDocument(s,Ce.min()))}else $e(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}lk?.ct(function(d,f,y,_,b){var P,R,j,Y,Z,ie;let Ue={localCacheCount:d,existenceFilterCount:f.count,databaseId:y.database,projectId:y.projectId},me=f.unchangedNames;return me&&(Ue.bloomFilter={applied:b===0,hashCount:(P=me?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(Y=(j=(R=me?.bits)===null||R===void 0?void 0:R.bitmap)===null||j===void 0?void 0:j.length)!==null&&Y!==void 0?Y:0,padding:(ie=(Z=me?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&ie!==void 0?ie:0,mightContain:T=>{var w;return(w=_?.mightContain(T))!==null&&w!==void 0&&w}}),Ue}(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=oo(r).toUint8Array()}catch(c){if(c instanceof Tm)return as("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new rI(s,i,o)}catch(c){return as(c instanceof wa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&Kb(a.target)){let c=new ae(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,kr.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Re();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Am(e,t,this.He,this.ze,r);return this.ze=ao(),this.je=_m(),this.Je=_m(),this.He=new gt(De),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Nm,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ut(De),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ut(De),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Nm),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function _m(){return new gt(ae.comparator)}function hk(){return new gt(ae.comparator)}var $q={asc:"ASCENDING",desc:"DESCENDING"},zq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hq={and:"AND",or:"OR"},oI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function sI(n,e){return n.useProto3Json||iy(e)?e:{value:e}}function km(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qq(n,e){return km(n,e.toTimestamp())}function fi(n){return $e(!!n,49232),Ce.fromTimestamp(function(t){let r=io(t);return new Mt(r.seconds,r.nanos)}(n))}function CD(n,e){return aI(n,e).canonicalString()}function aI(n,e){let t=function(i){return new st(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function SF(n){let e=st.fromString(n);return $e(AF(e),10190,{key:e.toString()}),e}function cI(n,e){return CD(n.databaseId,e.path)}function bb(n,e){let t=SF(e);if(t.get(1)!==n.databaseId.projectId)throw new K(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new K(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ae(xF(t))}function TF(n,e){return CD(n.databaseId,e)}function Wq(n){let e=SF(n);return e.length===4?st.emptyPath():xF(e)}function lI(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xF(n){return $e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fk(n,e,t){return{name:cI(n,e),fields:t.value.mapValue.fields}}function Gq(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?($e(d===void 0||typeof d=="string",58123),cn.fromBase64String(d||"")):($e(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),cn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?L.UNKNOWN:IF(u.code);return new K(d,u.message||"")}(s);t=new Rm(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=bb(n,r.document.name),o=fi(r.document.updateTime),s=r.document.createTime?fi(r.document.createTime):Ce.min(),a=new zn({mapValue:{fields:r.document.fields}}),c=kr.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new il(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=bb(n,r.document),o=r.readTime?fi(r.readTime):Ce.min(),s=kr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new il([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=bb(n,r.document),o=r.removedTargetIds||[];t=new il([],o,i,null)}else{if(!("filter"in e))return ue(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new nI(i,o),a=r.targetId;t=new Om(a,s)}}return t}function Kq(n,e){let t;if(e instanceof Aa)t={update:fk(n,e.key,e.value)};else if(e instanceof Hd)t={delete:cI(n,e.key)};else if(e instanceof gi)t={update:fk(n,e.key,e.data),updateMask:r7(e.fieldMask)};else{if(!(e instanceof Jb))return ue(16599,{Rt:e.type});t={verify:cI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof hl)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ma)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fl)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw ue(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:qq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ue(27497)}(n,e.precondition)),t}function Yq(n,e){return n&&n.length>0?($e(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?fi(i.updateTime):fi(o);return s.isEqual(Ce.min())&&(s=fi(o)),new Zb(s,i.transformResults||[])}(t,e))):[]}function Qq(n,e){return{documents:[TF(n,e.path)]}}function Zq(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=TF(n,i);let o=function(u){if(u.length!==0)return PF(Fr.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(y){return{field:tl(y.field),direction:e7(y.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=sI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:t,parent:i}}function Jq(n){let e=Wq(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){$e(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let y=MF(f);return y instanceof Fr&&aF(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(y=>function(b){return new xa(nl(b.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(f){let y;return y=typeof f=="object"?f.value:f,iy(y)?null:y}(t.limit));let c=null;t.startAt&&(c=function(f){let y=!!f.before,_=f.values||[];return new ul(_,y)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let y=!f.before,_=f.values||[];return new ul(_,y)}(t.endAt)),Dq(e,i,s,o,a,"F",c,u)}function Xq(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MF(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=nl(t.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=nl(t.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=nl(t.unaryFilter.field);return Tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=nl(t.unaryFilter.field);return Tt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(n):n.fieldFilter!==void 0?function(t){return Tt.create(nl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Fr.create(t.compositeFilter.filters.map(r=>MF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(t.compositeFilter.op))}(n):ue(30097,{filter:n})}function e7(n){return $q[n]}function t7(n){return zq[n]}function n7(n){return Hq[n]}function tl(n){return{fieldPath:n.canonicalString()}}function nl(n){return Hn.fromServerFormat(n.fieldPath)}function PF(n){return n instanceof Tt?function(t){if(t.op==="=="){if(ek(t.value))return{unaryFilter:{field:tl(t.field),op:"IS_NAN"}};if(XN(t.value))return{unaryFilter:{field:tl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ek(t.value))return{unaryFilter:{field:tl(t.field),op:"IS_NOT_NAN"}};if(XN(t.value))return{unaryFilter:{field:tl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tl(t.field),op:t7(t.op),value:t.value}}}(n):n instanceof Fr?function(t){let r=t.getFilters().map(i=>PF(i));return r.length===1?r[0]:{compositeFilter:{op:n7(t.op),filters:r}}}(n):ue(54877,{filter:n})}function r7(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function AF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Wd=class n{constructor(e,t,r,i,o=Ce.min(),s=Ce.min(),a=cn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var uI=class{constructor(e){this.gt=e}};function i7(n){let e=Jq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Qb(e,e.limit,"L"):e}var Fm=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(ot(e.integerValue));else if("doubleValue"in e){let r=ot(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Bd(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=io(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(oo(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?iF(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):rF(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ue(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=al,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(ot(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ae.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Fm.Ut=new Fm;var dI=class{constructor(){this.Dn=new hI}addToCollectionParentIndex(e,t){return this.Dn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Ta.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Ta.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}},hI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ut(st.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ut(st.comparator)).toArray()}};var fpe=new Uint8Array(0);var pk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OF=41943040,cr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(OF,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);var Gd=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var gk="LruGarbageCollector",o7=1048576;function mk([n,e],[t,r]){let i=De(n,t);return i===0?De(e,r):i}var fI=class{constructor(e){this.Tr=e,this.buffer=new Ut(mk),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();mk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},pI=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){X(gk,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Cl(t)?X(gk,"Ignoring IndexedDB error during garbage collection: ",t):yield vl(t)}yield this.Rr(3e5)}))}},gI=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return U.resolve(dD.ue);let r=new fI(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(pk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pk):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Xc()<=xe.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function s7(n,e){return new gI(n,e)}var mI=class{constructor(){this.changes=new so(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var yI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var _I=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Vd(r.mutation,i,lr.empty(),Mt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Re()){let i=Ea();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Nd();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ea();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Re()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ao(),s=Ld(),a=function(){return Ld()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof gi)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),Vd(d.mutation,u,d.mutation.getFieldMask(),Mt.now())):s.set(u.key,lr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new yI(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Ld(),i=new gt((s,a)=>s-a),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||lr.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||Re()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=mF();d.forEach(y=>{if(!o.has(y)){let _=wF(t.get(y),r.get(y));_!==null&&f.set(y,_),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return U.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ae.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):U.resolve(Ea()),a=Ud,c=o;return s.next(u=>U.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(y=>{c=c.insert(d,y)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Re())).next(d=>({batchId:a,changes:gF(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(r=>{let i=Nd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Nd();return this.indexManager.getCollectionParents(e,o).next(a=>U.forEach(a,c=>{let u=function(f,y){return new ls(y,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,y)=>{s=s.insert(f,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,kr.newInvalidDocument(d)))});let a=Nd();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&Vd(d.mutation,u,lr.empty(),Mt.now()),cy(t,u)&&(a=a.insert(c,u))}),a})}};var vI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return U.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:fi(i.createTime)}}(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:i7(i.bundledQuery),readTime:fi(i.readTime)}}(t)),U.resolve()}};var CI=class{constructor(){this.overlays=new gt(ae.comparator),this.kr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ea();return U.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),U.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){let i=Ea(),o=t.length+1,s=new ae(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new gt((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Ea(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Ea(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return U.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new tI(t,r));let o=this.kr.get(t);o===void 0&&(o=Re(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var EI=class{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}};var Kd=class{constructor(){this.qr=new Ut(St.Qr),this.$r=new Ut(St.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new St(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new St(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new ae(new st([])),r=new St(t,e),i=new St(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new ae(new st([])),r=new St(t,e),i=new St(t,e+1),o=Re();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new St(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},St=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ae.comparator(e.key,t.key)||De(e.Hr,t.Hr)}static Ur(e,t){return De(e.Hr,t.Hr)||ae.comparator(e.key,t.key)}};var wI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ut(St.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Xb(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new St(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,t){return U.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?hD:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new St(t,0),i=new St(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(De);return t.forEach(i=>{let o=new St(i,0),s=new St(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ae.isDocumentKey(o)||(o=o.child(""));let s=new St(new ae(o),0),a=new Ut(De);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),U.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){$e(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(t.mutations,i=>{let o=new St(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new St(t,0),i=this.Yr.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var bI=class{constructor(e){this.ni=e,this.docs=function(){return new gt(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():kr.newInvalidDocument(t))}getEntries(e,t){let r=ao();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():kr.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ao(),s=t.path,a=new ae(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||sq(oq(d),r)<=0||(i.has(d.key)||cy(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ue(9500)}ri(e,t){return U.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new II(this)}getSize(e){return U.resolve(this.size)}},II=class extends mI{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),U.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var DI=class{constructor(e){this.persistence=e,this.ii=new so(t=>yD(t),_D),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.si=0,this.oi=new Kd,this.targetCount=0,this._i=Gd.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),U.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Gd(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.hr(t),U.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(o).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),U.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.oi.containsKey(t))}};var Lm=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new dD(0),this.ci=!1,this.ci=!0,this.li=new EI,this.referenceDelegate=e(this),this.hi=new DI(this),this.indexManager=new dI,this.remoteDocumentCache=function(i){return new bI(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new uI(t),this.Ti=new vI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new wI(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){X("MemoryPersistence","Starting transaction:",e);let i=new SI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},SI=class extends kb{constructor(e){super(),this.currentSequenceNumber=e}},TI=class n{constructor(e){this.persistence=e,this.Ai=new Kd,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ue(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{let i=ae.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Ce.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return U.or([()=>U.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Vm=class n{constructor(e,t){this.persistence=e,this.gi=new so(r=>uq(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=s7(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return U.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?U.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),U.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cm(e.data.value)),t}Sr(e,t,r){return U.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var xI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Re(),i=Re();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var MI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var PI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return iR()?8:cq(Vt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new MI;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Xc()<=xe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",el(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Xc()<=xe.DEBUG&&X("QueryEngine","Query:",el(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Xc()<=xe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",el(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(t))):U.resolve())}ps(e,t){if(ik(t))return U.resolve(null);let r=di(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Qb(t,null,"F"),r=di(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Re(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,s,c.readTime)?this.ps(e,Qb(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return ik(t)||i.isEqual(Ce.min())?U.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?U.resolve(null):(Xc()<=xe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),el(t)),this.vs(e,s,t,iq(i,Ud)).next(a=>a))})}bs(e,t){let r=new Ut(fF(e));return t.forEach((i,o)=>{cy(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Xc()<=xe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",el(t)),this.gs.getDocumentsMatchingQuery(e,t,Ta.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ED="LocalStore",a7=3e8,AI=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new gt(De),this.Ms=new so(o=>yD(o),_D),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _I(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function c7(n,e,t,r){return new AI(n,e,t,r)}function RF(n,e){return E(this,null,function*(){let t=ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Re();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function l7(n,e){let t=ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,y=f.keys(),_=U.resolve();return y.forEach(b=>{_=_.next(()=>d.getEntry(c,b)).next(P=>{let R=u.docVersions.get(b);$e(R!==null,48541),P.version.compareTo(R)<0&&(f.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),d.addEntry(P)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Re();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function NF(n){let e=ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function u7(n,e){let t=ye(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,f)=>{let y=i.get(f);if(!y)return;a.push(t.hi.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.hi.addMatchingKeys(o,d.addedDocuments,f)));let _=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(cn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(f,_),function(P,R,j){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=a7?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(y,_,d)&&a.push(t.hi.updateTargetData(o,_))});let c=ao(),u=Re();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(d7(o,s,e.documentUpdates).next(d=>{c=d.Ls,u=d.ks})),!r.isEqual(Ce.min())){let d=t.hi.getLastRemoteSnapshotVersion(o).next(f=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return U.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Fs=i,o))}function d7(n,e,t){let r=Re(),i=Re();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ao();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ce.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):X(ED,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function h7(n,e){let t=ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function f7(n,e){let t=ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,U.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Wd(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function OI(n,e,t){return E(this,null,function*(){let r=ye(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Cl(s))throw s;X(ED,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function yk(n,e,t){let r=ye(n),i=Ce.min(),o=Re();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let f=ye(c),y=f.Ms.get(d);return y!==void 0?U.resolve(f.Fs.get(y)):f.hi.getTargetData(u,d)}(r,s,di(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Ce.min(),t?o:Re())).next(a=>(p7(r,Tq(e),a),{documents:a,qs:o})))}function p7(n,e,t){let r=n.xs.get(e)||Ce.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var jm=class{constructor(){this.activeTargetIds=Rq()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var RI=class{constructor(){this.Fo=new jm,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new jm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var NI=class{xo(e){}shutdown(){}};var _k="ConnectivityMonitor",Um=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){X(_k,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){X(_k,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var vm=null;function kI(){return vm===null?vm=function(){return 268435456+Math.round(2147483648*Math.random())}():vm++,"0x"+vm.toString(16)}var Ib="RestConnection",g7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},FI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===xm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=kI(),a=this.Go(e,t.toUriEncodedString());X(Ib,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),d=ti(u);return this.jo(e,a,c,r,d).then(f=>(X(Ib,`Received RPC '${e}' ${s}: `,f),f),f=>{throw as(Ib,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_l}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=g7[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var LI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var an="WebChannelConnection",VI=class extends FI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=kI();return new Promise((a,c)=>{let u=new _b;u.setWithCredentials(!0),u.listenOnce(vb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rd.NO_ERROR:let f=u.getResponseJson();X(an,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Rd.TIMEOUT:X(an,`RPC '${e}' ${s} timed out`),c(new K(L.DEADLINE_EXCEEDED,"Request time out"));break;case Rd.HTTP_ERROR:let y=u.getStatus();if(X(an,`RPC '${e}' ${s} failed with status:`,y,"response text:",u.getResponseText()),y>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);let b=_?.error;if(b&&b.status&&b.message){let P=function(j){let Y=j.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(Y)>=0?Y:L.UNKNOWN}(b.status);c(new K(P,b.message))}else c(new K(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new K(L.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{X(an,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);X(an,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}P_(e,t,r){let i=kI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=wb(),a=Eb(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");X(an,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c);this.T_(f);let y=!1,_=!1,b=new LI({Ho:R=>{_?X(an,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(X(an,`Opening RPC '${e}' stream ${i} transport.`),f.open(),y=!0),X(an,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},Yo:()=>f.close()}),P=(R,j,Y)=>{R.listen(j,Z=>{try{Y(Z)}catch(ie){setTimeout(()=>{throw ie},0)}})};return P(f,Jc.EventType.OPEN,()=>{_||(X(an,`RPC '${e}' stream ${i} transport opened.`),b.s_())}),P(f,Jc.EventType.CLOSE,()=>{_||(_=!0,X(an,`RPC '${e}' stream ${i} transport closed`),b.__(),this.I_(f))}),P(f,Jc.EventType.ERROR,R=>{_||(_=!0,as(an,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),b.__(new K(L.UNAVAILABLE,"The operation could not be completed")))}),P(f,Jc.EventType.MESSAGE,R=>{var j;if(!_){let Y=R.data[0];$e(!!Y,16349);let Z=Y,ie=Z?.error||((j=Z[0])===null||j===void 0?void 0:j.error);if(ie){X(an,`RPC '${e}' stream ${i} received error:`,ie);let Ue=ie.status,me=function(D){let x=Dt[D];if(x!==void 0)return IF(x)}(Ue),T=ie.message;me===void 0&&(me=L.INTERNAL,T="Unknown error status: "+Ue+" with message "+ie.message),_=!0,b.__(new K(me,T)),f.close()}else X(an,`RPC '${e}' stream ${i} received:`,Y),b.a_(Y)}}),P(a,Cb.STAT_EVENT,R=>{R.stat===mm.PROXY?X(an,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===mm.NOPROXY&&X(an,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function Db(){return typeof document<"u"?document:null}function ly(n){return new oI(n,!0)}var Bm=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var vk="PersistentStream",$m=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Bm(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return E(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return E(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return E(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(ro(t.toString()),ro("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new K(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>E(this,null,function*(){this.state=0,this.start()}))}G_(e){return X(vk,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(X(vk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},jI=class extends $m{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Gq(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ce.min():s.readTime?fi(s.readTime):Ce.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=lI(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Kb(c)?{documents:Qq(o,c)}:{query:Zq(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=DF(o,s.resumeToken);let u=sI(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ce.min())>0){a.readTime=km(o,s.snapshotVersion.toTimestamp());let u=sI(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=Xq(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=lI(this.serializer),t.removeTarget=e,this.k_(t)}},UI=class extends $m{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=Yq(e.writeResults,e.commitTime),r=fi(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=lI(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Kq(this.serializer,r))};this.k_(t)}};var BI=class{},$I=class extends BI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new K(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,aI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(L.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,aI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(L.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},zI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ro(t),this._a=!1):X("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Oa="RemoteStore",HI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>E(this,null,function*(){Ra(this)&&(X(Oa,"Restarting streams for network reachability change."),yield function(c){return E(this,null,function*(){let u=ye(c);u.Ia.add(4),yield th(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield uy(u)})}(this))}))}),this.Aa=new zI(r,i)}};function uy(n){return E(this,null,function*(){if(Ra(n))for(let e of n.da)yield e(!0)})}function th(n){return E(this,null,function*(){for(let e of n.da)yield e(!1)})}function kF(n,e){let t=ye(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),DD(t)?ID(t):El(t).x_()&&bD(t,e))}function wD(n,e){let t=ye(n),r=El(t);t.Ta.delete(e),r.x_()&&FF(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ra(t)&&t.Aa.set("Unknown"))}function bD(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}El(n).H_(e)}function FF(n,e){n.Ra.$e(e),El(n).Y_(e)}function ID(n){n.Ra=new iI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),El(n).start(),n.Aa.aa()}function DD(n){return Ra(n)&&!El(n).M_()&&n.Ta.size>0}function Ra(n){return ye(n).Ia.size===0}function LF(n){n.Ra=void 0}function m7(n){return E(this,null,function*(){n.Aa.set("Online")})}function y7(n){return E(this,null,function*(){n.Ta.forEach((e,t)=>{bD(n,e)})})}function _7(n,e){return E(this,null,function*(){LF(n),DD(n)?(n.Aa.la(e),ID(n)):n.Aa.set("Unknown")})}function v7(n,e,t){return E(this,null,function*(){if(n.Aa.set("Online"),e instanceof Rm&&e.state===2&&e.cause)try{yield function(i,o){return E(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){X(Oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield zm(n,r)}else if(e instanceof il?n.Ra.Ye(e):e instanceof Om?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ce.min()))try{let r=yield NF(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(cn.EMPTY_BYTE_STRING,d.snapshotVersion)),FF(o,c);let f=new Wd(d.target,c,u,d.sequenceNumber);bD(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){X(Oa,"Failed to raise snapshot:",r),yield zm(n,r)}})}function zm(n,e,t){return E(this,null,function*(){if(!Cl(e))throw e;n.Ia.add(1),yield th(n),n.Aa.set("Offline"),t||(t=()=>NF(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){X(Oa,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield uy(n)}))})}function VF(n,e){return e().catch(t=>zm(n,t,e))}function dy(n){return E(this,null,function*(){let e=ye(n),t=us(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:hD;for(;C7(e);)try{let i=yield h7(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,E7(e,i)}catch(i){yield zm(e,i)}jF(e)&&UF(e)})}function C7(n){return Ra(n)&&n.Pa.length<10}function E7(n,e){n.Pa.push(e);let t=us(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function jF(n){return Ra(n)&&!us(n).M_()&&n.Pa.length>0}function UF(n){us(n).start()}function w7(n){return E(this,null,function*(){us(n).na()})}function b7(n){return E(this,null,function*(){let e=us(n);for(let t of n.Pa)e.X_(t.mutations)})}function I7(n,e,t){return E(this,null,function*(){let r=n.Pa.shift(),i=eI.from(r,e,t);yield VF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dy(n)})}function D7(n,e){return E(this,null,function*(){e&&us(n).Z_&&(yield function(r,i){return E(this,null,function*(){if(function(s){return Uq(s)&&s!==L.ABORTED}(i.code)){let o=r.Pa.shift();us(r).N_(),yield VF(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield dy(r)}})}(n,e)),jF(n)&&UF(n)})}function Ck(n,e){return E(this,null,function*(){let t=ye(n);t.asyncQueue.verifyOperationInProgress(),X(Oa,"RemoteStore received new credentials");let r=Ra(t);t.Ia.add(3),yield th(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield uy(t)})}function S7(n,e){return E(this,null,function*(){let t=ye(n);e?(t.Ia.delete(2),yield uy(t)):e||(t.Ia.add(2),yield th(t),t.Aa.set("Unknown"))})}function El(n){return n.Va||(n.Va=function(t,r,i){let o=ye(t);return o.ia(),new jI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:m7.bind(null,n),e_:y7.bind(null,n),n_:_7.bind(null,n),J_:v7.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.Va.N_(),DD(n)?ID(n):n.Aa.set("Unknown")):(yield n.Va.stop(),LF(n))}))),n.Va}function us(n){return n.ma||(n.ma=function(t,r,i){let o=ye(t);return o.ia(),new UI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:w7.bind(null,n),n_:D7.bind(null,n),ea:b7.bind(null,n),ta:I7.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.ma.N_(),yield dy(n)):(yield n.ma.stop(),n.Pa.length>0&&(X(Oa,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var qI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function SD(n,e){if(ro("AsyncQueue",`${e}: ${n}`),Cl(n))return new K(L.UNAVAILABLE,`${e}: ${n}`);throw n}var Hm=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ae.comparator(t.key,r.key):(t,r)=>ae.comparator(t.key,r.key),this.keyedMap=Nd(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var qm=class{constructor(){this.fa=new gt(ae.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ue(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},gl=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Hm.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ay(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var WI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},GI=class{constructor(){this.queries=Ek(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ye(t),o=i.queries;i.queries=Ek(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new K(L.ABORTED,"Firestore shutting down"))}};function Ek(){return new so(n=>hF(n),ay)}function TD(n,e){return E(this,null,function*(){let t=ye(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new WI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=SD(s,`Initialization of query '${el(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&MD(t)})}function xD(n,e){return E(this,null,function*(){let t=ye(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function T7(n,e){let t=ye(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&MD(t)}function x7(n,e,t){let r=ye(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function MD(n){n.Da.forEach(e=>{e.next()})}var KI,wk;(wk=KI||(KI={})).Fa="default",wk.Cache="cache";var Yd=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new gl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==KI.Cache}};var Wm=class{constructor(e){this.key=e}},Gm=class{constructor(e){this.key=e}},YI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Re(),this.mutatedKeys=Re(),this.Xa=fF(e),this.eu=new Hm(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new qm,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let y=i.get(d),_=cy(this.query,f)?f:null,b=!!y&&this.mutatedKeys.has(y.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),R=!1;y&&_?y.data.isEqual(_.data)?b!==P&&(r.track({type:3,doc:_}),R=!0):this.iu(y,_)||(r.track({type:2,doc:_}),R=!0,(c&&this.Xa(_,c)>0||u&&this.Xa(_,u)<0)&&(a=!0)):!y&&_?(r.track({type:0,doc:_}),R=!0):y&&!_&&(r.track({type:1,doc:y}),R=!0,(c||u)&&(a=!0)),R&&(_?(s=s.add(_),o=P?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((d,f)=>function(_,b){let P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{At:R})}};return P(_)-P(b)}(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new gl(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new qm,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Re(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Gm(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Wm(r))}),t}uu(e){this.Ha=e.qs,this.Za=Re();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return gl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},PD="SyncEngine",QI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ZI=class{constructor(e){this.key=e,this.lu=!1}},JI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new so(a=>hF(a),ay),this.Tu=new Map,this.Iu=new Set,this.du=new gt(ae.comparator),this.Eu=new Map,this.Au=new Kd,this.Ru={},this.Vu=new Map,this.mu=Gd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function M7(n,e,t=!0){return E(this,null,function*(){let r=WF(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield BF(r,e,t,!0),i})}function P7(n,e){return E(this,null,function*(){let t=WF(n);yield BF(t,e,!0,!1)})}function BF(n,e,t,r){return E(this,null,function*(){let i=yield f7(n.localStore,di(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield A7(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&kF(n.remoteStore,i),a})}function A7(n,e,t,r,i){return E(this,null,function*(){n.gu=(f,y,_)=>function(P,R,j,Y){return E(this,null,function*(){let Z=R.view.nu(j);Z.Ds&&(Z=yield yk(P.localStore,R.query,!1).then(({documents:T})=>R.view.nu(T,Z)));let ie=Y&&Y.targetChanges.get(R.targetId),Ue=Y&&Y.targetMismatches.get(R.targetId)!=null,me=R.view.applyChanges(Z,P.isPrimaryClient,ie,Ue);return Ik(P,R.targetId,me._u),me.snapshot})}(n,f,y,_);let o=yield yk(n.localStore,e,!0),s=new YI(e,o.qs),a=s.nu(o.documents),c=qd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);Ik(n,t,u._u);let d=new QI(e,t,s);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot})}function O7(n,e,t){return E(this,null,function*(){let r=ye(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ay(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield OI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&wD(r.remoteStore,i.targetId),XI(r,i.targetId)}).catch(vl))):(XI(r,i.targetId),yield OI(r.localStore,i.targetId,!0))})}function R7(n,e){return E(this,null,function*(){let t=ye(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),wD(t.remoteStore,r.targetId))})}function N7(n,e,t){return E(this,null,function*(){let r=B7(n);try{let i=yield function(s,a){let c=ye(s),u=Mt.now(),d=a.reduce((_,b)=>_.add(b.key),Re()),f,y;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let b=ao(),P=Re();return c.Os.getEntries(_,d).next(R=>{b=R,b.forEach((j,Y)=>{Y.isValidDocument()||(P=P.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,b)).next(R=>{f=R;let j=[];for(let Y of a){let Z=jq(Y,f.get(Y.key).overlayedDocument);Z!=null&&j.push(new gi(Y.key,Z,oF(Z.value.mapValue),hi.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,j,a)}).next(R=>{y=R;let j=R.applyToLocalDocumentSet(f,P);return c.documentOverlayCache.saveOverlays(_,R.batchId,j)})}).then(()=>({batchId:y.batchId,changes:gF(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new gt(De)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,t),yield nh(r,i.changes),yield dy(r.remoteStore)}catch(i){let o=SD(i,"Failed to persist write");t.reject(o)}})}function $F(n,e){return E(this,null,function*(){let t=ye(n);try{let r=yield u7(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?$e(s.lu,14607):i.removedDocuments.size>0&&($e(s.lu,42227),s.lu=!1))}),yield nh(t,r,e)}catch(r){yield vl(r)}})}function bk(n,e,t){let r=ye(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ye(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let y of f.wa)y.va(a)&&(u=!0)}),u&&MD(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function k7(n,e,t){return E(this,null,function*(){let r=ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new gt(ae.comparator);s=s.insert(o,kr.newNoDocument(o,Ce.min()));let a=Re().add(o),c=new Am(Ce.min(),new Map,new gt(De),s,a);yield $F(r,c),r.du=r.du.remove(o),r.Eu.delete(e),AD(r)}else yield OI(r.localStore,e,!1).then(()=>XI(r,e,t)).catch(vl)})}function F7(n,e){return E(this,null,function*(){let t=ye(n),r=e.batch.batchId;try{let i=yield l7(t.localStore,e);HF(t,r,null),zF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nh(t,i)}catch(i){yield vl(i)}})}function L7(n,e,t){return E(this,null,function*(){let r=ye(n);try{let i=yield function(s,a){let c=ye(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>($e(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);HF(r,e,t),zF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nh(r,i)}catch(i){yield vl(i)}})}function zF(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function HF(n,e,t){let r=ye(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function XI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||qF(n,r)})}function qF(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(wD(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),AD(n))}function Ik(n,e,t){for(let r of t)r instanceof Wm?(n.Au.addReference(r.key,e),V7(n,r)):r instanceof Gm?(X(PD,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||qF(n,r.key)):ue(19791,{yu:r})}function V7(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(X(PD,"New document in limbo: "+t),n.Iu.add(r),AD(n))}function AD(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new ae(st.fromString(e)),r=n.mu.next();n.Eu.set(r,new ZI(t)),n.du=n.du.insert(t,r),kF(n.remoteStore,new Wd(di(sy(t.path)),r,"TargetPurposeLimboResolution",dD.ue))}}function nh(n,e,t){return E(this,null,function*(){let r=ye(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=xI.Es(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(c,u){return E(this,null,function*(){let d=ye(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(u,y=>U.forEach(y.Is,_=>d.persistence.referenceDelegate.addReference(f,y.targetId,_)).next(()=>U.forEach(y.ds,_=>d.persistence.referenceDelegate.removeReference(f,y.targetId,_)))))}catch(f){if(!Cl(f))throw f;X(ED,"Failed to update sequence numbers: "+f)}for(let f of u){let y=f.targetId;if(!f.fromCache){let _=d.Fs.get(y),b=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(b);d.Fs=d.Fs.insert(y,P)}}})}(r.localStore,o))})}function j7(n,e){return E(this,null,function*(){let t=ye(n);if(!t.currentUser.isEqual(e)){X(PD,"User change. New user:",e.toKey());let r=yield RF(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new K(L.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nh(t,r.Bs)}})}function U7(n,e){let t=ye(n),r=t.Eu.get(e);if(r&&r.lu)return Re().add(r.key);{let i=Re(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function WF(n){let e=ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$F.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k7.bind(null,e),e.hu.J_=T7.bind(null,e.eventManager),e.hu.pu=x7.bind(null,e.eventManager),e}function B7(n){let e=ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L7.bind(null,e),e}var GF=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=ly(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return c7(this.persistence,new PI,t.initialUser,this.serializer)}Du(t){return new Lm(TI.Vi,this.serializer)}bu(t){return new RI}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),eD=class extends GF{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){$e(this.persistence.referenceDelegate instanceof Vm,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new pI(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?cr.withCacheSize(this.cacheSizeBytes):cr.DEFAULT;return new Lm(r=>Vm.Vi(r,t),this.serializer)}};var $7=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=j7.bind(null,this.syncEngine),yield S7(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new GI}()}createDatastore(t){let r=ly(t.databaseInfo.databaseId),i=function(s){return new VI(s)}(t.databaseInfo);return function(s,a,c,u){return new $I(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new HI(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>bk(this.syncEngine,r,0),function(){return Um.C()?new Um:new NI}())}createSyncEngine(t,r){return function(o,s,a,c,u,d,f){let y=new JI(o,s,a,c,u,d);return f&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield function(o){return E(this,null,function*(){let s=ye(o);X(Oa,"RemoteStore shutting down."),s.Ia.add(5),yield th(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Qd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ro("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ds="FirestoreClient",tD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=jt.UNAUTHENTICATED,this.clientId=jd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>E(this,null,function*(){X(ds,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(X(ds,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=SD(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Sb(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),X(ds,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield RF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{as("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{X("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{as("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function Dk(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield z7(n);X(ds,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Ck(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Ck(e.remoteStore,i)),n._onlineComponents=e})}function z7(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){X(ds,"Using user provided OfflineComponentProvider");try{yield Sb(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;as("Error using user provided cache. Falling back to memory cache: "+t),yield Sb(n,new GF)}}else X(ds,"Using default OfflineComponentProvider"),yield Sb(n,new eD(void 0));return n._offlineComponents})}function KF(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(X(ds,"Using user provided OnlineComponentProvider"),yield Dk(n,n._uninitializedComponentsProvider._online)):(X(ds,"Using default OnlineComponentProvider"),yield Dk(n,new $7))),n._onlineComponents})}function H7(n){return KF(n).then(e=>e.syncEngine)}function Km(n){return E(this,null,function*(){let e=yield KF(n),t=e.eventManager;return t.onListen=M7.bind(null,e.syncEngine),t.onUnlisten=O7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=P7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=R7.bind(null,e.syncEngine),t})}function q7(n,e,t={}){let r=new Nr;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(o,s,a,c,u){let d=new Qd({next:y=>{d.Ou(),s.enqueueAndForget(()=>xD(o,f));let _=y.docs.has(a);!_&&y.fromCache?u.reject(new K(L.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&c&&c.source==="server"?u.reject(new K(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),f=new Yd(sy(a.path),d,{includeMetadataChanges:!0,ka:!0});return TD(o,f)}(yield Km(n),n.asyncQueue,e,t,r)})),r.promise}function W7(n,e,t={}){let r=new Nr;return n.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(o,s,a,c,u){let d=new Qd({next:y=>{d.Ou(),s.enqueueAndForget(()=>xD(o,f)),y.fromCache&&c.source==="server"?u.reject(new K(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),f=new Yd(a,d,{includeMetadataChanges:!0,ka:!0});return TD(o,f)}(yield Km(n),n.asyncQueue,e,t,r)})),r.promise}function YF(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Sk=new Map;var QF="firestore.googleapis.com",Tk=!0,Ym=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QF,this.ssl=Tk}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Tk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o7)throw new K(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ml=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ym({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ym(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Tb;switch(r.type){case"firstParty":return new Ab(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Sk.get(t);r&&(X("ComponentProvider","Removing Datastore"),Sk.delete(t),r.terminate())}(this),Promise.resolve()}};function ZF(n,e,t,r={}){var i;n=Pn(n,ml);let o=ti(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(qc(`https://${c}`),Wc("Firestore",!0)),s.host!==QF&&s.host!==c&&as("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!ni(u,a)&&(n._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=jt.MOCK_USER;else{d=Hg(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new K(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new jt(y)}n._authCredentials=new xb(new bm(d,f))}}var hs=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Rt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(eh(t,n._jsonSchema))return new n(e,r||null,new ae(st.fromString(t.referencePath)))}};Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:xt("string",Rt._jsonSchemaVersion),referencePath:xt("string")};var rs=class n extends hs{constructor(e,t,r){super(e,t,sy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new ae(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function mi(n,e,...t){if(n=it(n),kk("collection","path",e),n instanceof ml){let r=st.fromString(e,...t);return qN(r),new rs(n,null,r)}{if(!(n instanceof Rt||n instanceof rs))throw new K(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(st.fromString(e,...t));return qN(r),new rs(n.firestore,null,r)}}function co(n,e,...t){if(n=it(n),arguments.length===1&&(e=jd.newId()),kk("doc","path",e),n instanceof ml){let r=st.fromString(e,...t);return HN(r),new Rt(n,null,new ae(r))}{if(!(n instanceof Rt||n instanceof rs))throw new K(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(st.fromString(e,...t));return HN(r),new Rt(n.firestore,n instanceof rs?n.converter:null,new ae(r))}}var xk="AsyncQueue",Qm=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bm(this,"async_queue_retry"),this.oc=()=>{let r=Db();r&&X(xk,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=Db();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Db();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Nr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return E(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Cl(e))throw e;X(xk,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ro("INTERNAL UNHANDLED ERROR: ",Mk(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=qI.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ue(47125,{hc:Mk(this.tc)})}verifyOperationInProgress(){}Pc(){return E(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Mk(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Pk(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Lr=class extends ml{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Qm,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qm(e),this._firestoreClient=void 0,yield e}})}};function JF(n,e){let t=typeof n=="object"?n:Yi(),r=typeof n=="string"?n:e||xm,i=Yo(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=zg("firestore");o&&ZF(i,...o)}return i}function hy(n){if(n._terminated)throw new K(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||G7(n),n._firestoreClient}function G7(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,d){return new Fb(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,YF(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new tD(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var is=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(cn.fromBase64String(e))}catch(t){throw new K(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(eh(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};is._jsonSchemaVersion="firestore/bytes/1.0",is._jsonSchema={type:xt("string",is._jsonSchemaVersion),bytes:xt("string")};var yl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new K(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zd=class{constructor(e){this._methodName=e}};var os=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new K(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(eh(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};os._jsonSchemaVersion="firestore/geoPoint/1.0",os._jsonSchema={type:xt("string",os._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};var ss=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(eh(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new K(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ss._jsonSchemaVersion="firestore/vectorValue/1.0",ss._jsonSchema={type:xt("string",ss._jsonSchemaVersion),vectorValues:xt("object")};var K7=/^__.*__$/,nD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Aa(e,this.data,t,this.fieldTransforms)}},Zm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function XF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ec:n})}}var rD=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Xm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(XF(this.Ec)&&K7.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},iD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ly(e)}Dc(e,t,r,i=!1){return new rD({Ec:e,methodName:t,bc:r,path:Hn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function fy(n){let e=n._freezeSettings(),t=ly(n._databaseId);return new iD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eL(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);OD("Data must be an object, but it was:",s,r);let a=tL(r,s),c,u;if(o.merge)c=new lr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let y=oD(e,f,t);if(!s.contains(y))throw new K(L.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);rL(d,y)||d.push(y)}c=new lr(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new nD(new zn(a),c,u)}var Jm=class n extends Zd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Y7(n,e,t,r){let i=n.Dc(1,e,t);OD("Data must be an object, but it was:",i,r);let o=[],s=zn.empty();fs(r,(c,u)=>{let d=RD(e,c,t);u=it(u);let f=i.gc(d);if(u instanceof Jm)o.push(d);else{let y=rh(u,f);y!=null&&(o.push(d),s.set(d,y))}});let a=new lr(o);return new Zm(s,a,i.fieldTransforms)}function Q7(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[oD(e,r,t)],c=[i];if(o.length%2!=0)throw new K(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)a.push(oD(e,o[y])),c.push(o[y+1]);let u=[],d=zn.empty();for(let y=a.length-1;y>=0;--y)if(!rL(u,a[y])){let _=a[y],b=c[y];b=it(b);let P=s.gc(_);if(b instanceof Jm)u.push(_);else{let R=rh(b,P);R!=null&&(u.push(_),d.set(_,R))}}let f=new lr(u);return new Zm(d,f,s.fieldTransforms)}function Z7(n,e,t,r=!1){return rh(t,n.Dc(r?4:3,e))}function rh(n,e){if(nL(n=it(n)))return OD("Unsupported field value:",e,n),tL(n,e);if(n instanceof Zd)return function(r,i){if(!XF(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=rh(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Nq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Mt.fromDate(r);return{timestampValue:km(i.serializer,o)}}if(r instanceof Mt){let o=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:km(i.serializer,o)}}if(r instanceof os)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof is)return{bytesValue:DF(i.serializer,r._byteString)};if(r instanceof Rt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:CD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ss)return function(s,a){return{mapValue:{fields:{[pD]:{stringValue:gD},[al]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return vD(a.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${ry(r)}`)}(n,e)}function tL(n,e){let t={};return Zk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(n,(r,i)=>{let o=rh(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function nL(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof os||n instanceof is||n instanceof Rt||n instanceof Zd||n instanceof ss)}function OD(n,e,t){if(!nL(t)||!Fk(t)){let r=ry(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function oD(n,e,t){if((e=it(e))instanceof yl)return e._internalPath;if(typeof e=="string")return RD(n,e);throw Xm("Field path arguments must be of type string or ",n,!1,void 0,t)}var J7=new RegExp("[~\\*/\\[\\]]");function RD(n,e,t){if(e.search(J7)>=0)throw Xm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yl(...e.split("."))._internalPath}catch{throw Xm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new K(L.INVALID_ARGUMENT,a+n+c)}function rL(n,e){return n.some(t=>t.isEqual(e))}var ey=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new sD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(py("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},sD=class extends ey{data(){return super.data()}};function py(n,e){return typeof e=="string"?RD(n,e):e instanceof yl?e._internalPath:e._delegate._internalPath}function iL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new K(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Jd=class{},ty=class extends Jd{};function Na(n,e,...t){let r=[];e instanceof Jd&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof aD).length,a=o.filter(c=>c instanceof ny).length;if(s>1||s>0&&a>0)throw new K(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var ny=class n extends ty{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return oL(e._query,t),new hs(e.firestore,e.converter,Yb(e._query,t))}_parse(e){let t=fy(e.firestore);return function(o,s,a,c,u,d,f){let y;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Ok(f,d);let b=[];for(let P of f)b.push(Ak(c,o,P));y={arrayValue:{values:b}}}else y=Ak(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ok(f,d),y=Z7(a,s,f,d==="in"||d==="not-in");return Tt.create(u,d,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function ka(n,e,t){let r=e,i=py("where",n);return ny._create(i,r,t)}var aD=class n extends Jd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Fr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)oL(s,c),s=Yb(s,c)}(e._query,t),new hs(e.firestore,e.converter,Yb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var cD=class n extends ty{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new K(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xa(o,s)}(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new ls(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function ih(n,e="asc"){let t=e,r=py("orderBy",n);return cD._create(r,t)}function Ak(n,e,t){if(typeof(t=it(t))=="string"){if(t==="")throw new K(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dF(e)&&t.indexOf("/")!==-1)throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(st.fromString(t));if(!ae.isDocumentKey(r))throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return JN(n,new ae(r))}if(t instanceof Rt)return JN(n,t._key);throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ry(t)}.`)}function Ok(n,e){if(!Array.isArray(n)||n.length===0)throw new K(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oL(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new K(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var lD=class{convertValue(e,t="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return fs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[al].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ot(s.doubleValue));return new ss(o)}convertGeoPoint(e){return new os(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=oy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($d(e));default:return null}}convertTimestamp(e){let t=io(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=st.fromString(e);$e(AF(r),9688,{name:e});let i=new Mm(r.get(1),r.get(3)),o=new ae(r.popFirst(5));return i.isEqual(t)||ro(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function sL(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ba=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ia=class n extends ey{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(py("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ia._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ia._jsonSchema={type:xt("string",Ia._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};var ol=class extends Ia{data(e={}){return super.data(e)}},Da=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ba(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ol(this._firestore,this._userDataWriter,r.key,r,new ba(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ol(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ba(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ol(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ba(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:X7(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function X7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:n})}}function Fa(n){n=Pn(n,Rt);let e=Pn(n.firestore,Lr);return q7(hy(e),n._key).then(t=>aL(e,n,t))}Da._jsonSchemaVersion="firestore/querySnapshot/1.0",Da._jsonSchema={type:xt("string",Da._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};var Xd=class extends lD{constructor(e){super(),this.firestore=e}convertBytes(e){return new is(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}};function wl(n){n=Pn(n,hs);let e=Pn(n.firestore,Lr),t=hy(e),r=new Xd(e);return iL(n._query),W7(t,n._query).then(i=>new Da(e,r,n,i))}function gy(n,e,t){n=Pn(n,Rt);let r=Pn(n.firestore,Lr),i=sL(n.converter,e,t);return Cy(r,[eL(fy(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,hi.none())])}function my(n,e,t,...r){n=Pn(n,Rt);let i=Pn(n.firestore,Lr),o=fy(i),s;return s=typeof(e=it(e))=="string"||e instanceof yl?Q7(o,"updateDoc",n._key,e,t,r):Y7(o,"updateDoc",n._key,e),Cy(i,[s.toMutation(n._key,hi.exists(!0))])}function yy(n){return Cy(Pn(n.firestore,Lr),[new Hd(n._key,hi.none())])}function _y(n,e){let t=Pn(n.firestore,Lr),r=co(n),i=sL(n.converter,e);return Cy(t,[eL(fy(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,hi.exists(!1))]).then(()=>r)}function vy(n,...e){var t,r,i;n=it(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Pk(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Pk(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof Rt)u=Pn(n.firestore,Lr),d=sy(n._key.path),c={next:f=>{e[s]&&e[s](aL(u,n,f))},error:e[s+1],complete:e[s+2]};else{let f=Pn(n,hs);u=Pn(f.firestore,Lr),d=f._query;let y=new Xd(u);c={next:_=>{e[s]&&e[s](new Da(u,y,f,_))},error:e[s+1],complete:e[s+2]},iL(n._query)}return function(y,_,b,P){let R=new Qd(P),j=new Yd(_,R,b);return y.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return TD(yield Km(y),j)})),()=>{R.Ou(),y.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return xD(yield Km(y),j)}))}}(hy(u),d,a,c)}function Cy(n,e){return function(r,i){let o=new Nr;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return N7(yield H7(r),i,o)})),o.promise}(hy(n),e)}function aL(n,e,t){let r=t.docs.get(e._key),i=new Xd(n);return new Ia(n,i,e._key,r,new ba(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){_l=i})(oi),$n(new Yt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Lr(new Mb(r.getProvider("auth-internal")),new Ob(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mm(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ye(UN,BN,e),Ye(UN,BN,"esm2017")})();var La=class{constructor(e){return e}},cL="firestore",ND=class{constructor(){return Qo(cL)}};var kD=new Q("angularfire2.firestore-instances");function eW(n,e){let t=pa(cL,n,e);return t&&new La(t)}function tW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new La(r)}}var nW={provide:ND,deps:[[new bt,kD]]},rW={provide:La,useFactory:eW,deps:[[new bt,kD],Or]};function lL(n,...e){return Ye("angularfire",si.full,"fst"),Lt([rW,nW,{provide:kD,useFactory:tW(n),multi:!0,deps:[Te,Qe,ai,Qi,[new bt,Ca],[new bt,Jo],...e]}])}var uL=Mn(JF,!0);var mL="firebasestorage.googleapis.com",iW="storageBucket",oW=2*60*1e3,sW=10*60*1e3;var yi=class n extends Cn{constructor(e,t,r=0){super(FD(e),`Firebase Storage: ${t} (${FD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return FD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},uo=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(uo||{});function FD(n){return"storage/"+n}function aW(){let n="An unknown error occurred, please check the error payload for server response.";return new yi(uo.UNKNOWN,n)}function cW(){return new yi(uo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lW(){return new yi(uo.CANCELED,"User canceled the upload/download.")}function uW(n){return new yi(uo.INVALID_URL,"Invalid URL '"+n+"'.")}function dW(n){return new yi(uo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function dL(n){return new yi(uo.INVALID_ARGUMENT,n)}function yL(){return new yi(uo.APP_DELETED,"The Firebase app was deleted.")}function hW(n){return new yi(uo.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var lo=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw dW(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(ie){ie.path_=decodeURIComponent(ie.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${d}/b/${i}/o${y}`,"i"),b={bucket:1,path:3},P=t===mL?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",j=new RegExp(`^https?://${P}/${i}/${R}`,"i"),Z=[{regex:a,indices:c,postModify:o},{regex:_,indices:b,postModify:u},{regex:j,indices:{bucket:1,path:2},postModify:u}];for(let ie=0;ie<Z.length;ie++){let Ue=Z[ie],me=Ue.regex.exec(e);if(me){let T=me[Ue.indices.bucket],w=me[Ue.indices.path];w||(w=""),r=new n(T,w),Ue.postModify(r);break}}if(r==null)throw uW(e);return r}},LD=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function fW(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function d(...R){u||(u=!0,e.apply(null,R))}function f(R){i=setTimeout(()=>{i=null,n(_,c())},R)}function y(){o&&clearTimeout(o)}function _(R,...j){if(u){y();return}if(R){y(),d.call(null,R,...j);return}if(c()||s){y(),d.call(null,R,...j);return}r<64&&(r*=2);let Z;a===1?(a=2,Z=0):Z=(r+Math.random())*1e3,f(Z)}let b=!1;function P(R){b||(b=!0,y(),!u&&(i!==null?(R||(a=2),clearTimeout(i),f(0)):R||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,P(!0)},t),P}function pW(n){n(!1)}function gW(n){return n!==void 0}function hL(n,e,t,r){if(r<e)throw dL(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dL(`Invalid value for '${n}'. Expected ${t} or less.`)}function mW(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var VD=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(VD||{});function yW(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var jD=class{constructor(e,t,r,i,o,s,a,c,u,d,f,y=!0,_=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=y,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,P)=>{this.resolve_=b,this.reject_=P,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new bl(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===VD.NO_ERROR,c=o.getStatus();if(!a||yW(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===VD.ABORT;r(!1,new bl(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new bl(u,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());gW(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=aW();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?yL():lW();s(c)}else{let c=cW();s(c)}};this.canceled_?t(!1,new bl(!1,null,!0)):this.backoffId_=fW(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&pW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},bl=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function _W(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function vW(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function CW(n,e){e&&(n["X-Firebase-GMPID"]=e)}function EW(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function wW(n,e,t,r,i,o,s=!0,a=!1){let c=mW(n.urlParams),u=n.url+c,d=Object.assign({},n.headers);return CW(d,e),_W(d,t),vW(d,o),EW(d,r),new jD(u,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s,a)}function bW(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function IW(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var Ege=256*1024;var UD=class n{constructor(e,t){this._service=e,t instanceof lo?this._location=t:this._location=lo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new lo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IW(this._location.path)}get storage(){return this._service}get parent(){let e=bW(this._location.path);if(e===null)return null;let t=new lo(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw hW(e)}};function fL(n,e){let t=e?.[iW];return t==null?null:lo.makeFromBucketSpec(t,n)}function DW(n,e,t,r={}){n.host=`${e}:${t}`;let i=ti(e);i&&(qc(`https://${n.host}/b`),Wc("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:Hg(o,n.app.options.projectId))}var BD=class{constructor(e,t,r,i,o,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=mL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oW,this._maxUploadRetryTime=sW,this._requests=new Set,i!=null?this._bucket=lo.makeFromBucketSpec(i,this._host):this._bucket=fL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lo.makeFromBucketSpec(this._url,e):this._bucket=fL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return E(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return E(this,null,function*(){if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new UD(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new LD(yL());{let s=wW(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return E(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},pL="@firebase/storage",gL="0.13.14";var _L="storage";function vL(n=Yi(),e){n=it(n);let r=Yo(n,_L).getImmediate({identifier:e}),i=zg("storage");return i&&CL(r,...i),r}function CL(n,e,t,r={}){DW(n,e,t,r)}function SW(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new BD(t,r,i,e,oi)}function TW(){$n(new Yt(_L,SW,"PUBLIC").setMultipleInstances(!0)),Ye(pL,gL,""),Ye(pL,gL,"esm2017")}TW();var oh=class{constructor(e){return e}},EL="storage",$D=class{constructor(){return Qo(EL)}};var zD=new Q("angularfire2.storage-instances");function xW(n,e){let t=pa(EL,n,e);return t&&new oh(t)}function MW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new oh(r)}}var PW={provide:$D,deps:[[new bt,zD]]},AW={provide:oh,useFactory:xW,deps:[[new bt,zD],Or]};function wL(n,...e){return Ye("angularfire",si.full,"gcs"),Lt([AW,PW,{provide:zD,useFactory:MW(n),multi:!0,deps:[Te,Qe,ai,Qi,[new bt,Ca],[new bt,Jo],...e]}])}var bL=Mn(vL,!0);var RL=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(z(Vn),z(Wt))};static \u0275dir=qe({type:n})}return n})(),GD=(()=>{class n extends RL{static \u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})();static \u0275dir=qe({type:n,features:[In]})}return n})(),xy=new Q("");var OW={provide:xy,useExisting:Nn(()=>_i),multi:!0};function RW(){let n=ir()?ir().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var NW=new Q(""),_i=(()=>{class n extends RL{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!RW())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(z(Vn),z(Wt),z(NW,8))};static \u0275dir=qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&re("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Gr([OW]),In]})}return n})();function kW(n){return n==null||KD(n)===0}function KD(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var hh=new Q(""),NL=new Q("");function FW(n){return kW(n.value)?{required:!0}:null}function LW(n){return e=>{let t=e.value?.length??KD(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function VW(n){return e=>{let t=e.value?.length??KD(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function IL(n){return null}function kL(n){return n!=null}function FL(n){return zi(n)?rt(n):n}function LL(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function VL(n,e){return e.map(t=>t(n))}function jW(n){return!n.validate}function jL(n){return n.map(e=>jW(e)?e:t=>e.validate(t))}function UW(n){if(!n)return null;let e=n.filter(kL);return e.length==0?null:function(t){return LL(VL(t,e))}}function YD(n){return n!=null?UW(jL(n)):null}function BW(n){if(!n)return null;let e=n.filter(kL);return e.length==0?null:function(t){let r=VL(t,e).map(FL);return R_(r).pipe(pe(LL))}}function QD(n){return n!=null?BW(jL(n)):null}function DL(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $W(n){return n._rawValidators}function zW(n){return n._rawAsyncValidators}function HD(n){return n?Array.isArray(n)?n:[n]:[]}function wy(n,e){return Array.isArray(n)?n.includes(e):n===e}function SL(n,e){let t=HD(e);return HD(n).forEach(i=>{wy(t,i)||t.push(i)}),t}function TL(n,e){return HD(e).filter(t=>!wy(n,t))}var by=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=QD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Sl=class extends by{name;get formDirective(){return null}get path(){return null}},dh=class extends by{_parent=null;name=null;valueAccessor=null},Iy=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},HW={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ume=ce(V({},HW),{"[class.ng-submitted]":"isSubmitted"}),ur=(()=>{class n extends Iy{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(z(dh,2))};static \u0275dir=qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&gn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[In]})}return n})(),gs=(()=>{class n extends Iy{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(z(Sl,10))};static \u0275dir=qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&gn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[In]})}return n})();var sh="VALID",Ey="INVALID",Il="PENDING",ah="DISABLED",ps=class{},Dy=class extends ps{value;source;constructor(e,t){super(),this.value=e,this.source=t}},lh=class extends ps{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},uh=class extends ps{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Dl=class extends ps{status;source;constructor(e,t){super(),this.status=e,this.source=t}},qD=class extends ps{source;constructor(e){super(),this.source=e}},WD=class extends ps{source;constructor(e){super(),this.source=e}};function UL(n){return(My(n)?n.validators:n)||null}function qW(n){return Array.isArray(n)?YD(n):n||null}function BL(n,e){return(My(e)?e.asyncValidators:n)||null}function WW(n){return Array.isArray(n)?QD(n):n||null}function My(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function GW(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new F(1e3,"");if(!r[t])throw new F(1001,"")}function KW(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new F(1002,"")})}var Sy=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Dn(this.statusReactive)}set status(e){Dn(()=>this.statusReactive.set(e))}_status=Dc(()=>this.statusReactive());statusReactive=zr(void 0);get valid(){return this.status===sh}get invalid(){return this.status===Ey}get pending(){return this.status==Il}get disabled(){return this.status===ah}get enabled(){return this.status!==ah}errors;get pristine(){return Dn(this.pristineReactive)}set pristine(e){Dn(()=>this.pristineReactive.set(e))}_pristine=Dc(()=>this.pristineReactive());pristineReactive=zr(!0);get dirty(){return!this.pristine}get touched(){return Dn(this.touchedReactive)}set touched(e){Dn(()=>this.touchedReactive.set(e))}_touched=Dc(()=>this.touchedReactive());touchedReactive=zr(!1);get untouched(){return!this.touched}_events=new nt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(TL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(TL(e,this._rawAsyncValidators))}hasValidator(e){return wy(this._rawValidators,e)}hasAsyncValidator(e){return wy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new uh(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new uh(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new lh(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new lh(!0,r))}markAsPending(e={}){this.status=Il;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ah,this.errors=null,this._forEachChild(i=>{i.disable(ce(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dy(this.value,r)),this._events.next(new Dl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=sh,this._forEachChild(r=>{r.enable(ce(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sh||this.status===Il)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dy(this.value,t)),this._events.next(new Dl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ah:sh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Il,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=FL(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Dl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ct,this.statusChanges=new Ct}_calculateStatus(){return this._allControlsDisabled()?ah:this.errors?Ey:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Il)?Il:this._anyControlsHaveStatus(Ey)?Ey:sh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new lh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new uh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){My(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=qW(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=WW(this._rawAsyncValidators)}},Ty=class extends Sy{constructor(e,t,r){super(UL(t),BL(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){KW(this,!0,e),Object.keys(e).forEach(r=>{GW(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ZD=new Q("",{providedIn:"root",factory:()=>JD}),JD="always";function YW(n,e){return[...e.path,n]}function $L(n,e,t=JD){zL(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),ZW(n,e),XW(n,e),JW(n,e),QW(n,e)}function xL(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function QW(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function zL(n,e){let t=$W(n);e.validator!==null?n.setValidators(DL(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=zW(n);e.asyncValidator!==null?n.setAsyncValidators(DL(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();xL(e._rawValidators,i),xL(e._rawAsyncValidators,i)}function ZW(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&HL(n,e)})}function JW(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&HL(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function HL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function XW(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function eG(n,e){n==null,zL(n,e)}function tG(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function nG(n){return Object.getPrototypeOf(n.constructor)===GD}function rG(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function iG(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===_i?t=o:nG(o)?r=o:i=o}),i||r||t||null}var oG={provide:Sl,useExisting:Nn(()=>ho)},ch=Promise.resolve(),ho=(()=>{class n extends Sl{callSetDisabledState;get submitted(){return Dn(this.submittedReactive)}_submitted=Dc(()=>this.submittedReactive());submittedReactive=zr(!1);_directives=new Set;form;ngSubmit=new Ct;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Ty({},YD(t),QD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ch.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),$L(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ch.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ch.then(()=>{let r=this._findContainer(t.path),i=new Ty({});eG(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ch.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ch.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),rG(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new qD(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new WD(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(z(hh,10),z(NL,10),z(ZD,8))};static \u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&re("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Gr([oG]),In]})}return n})();function ML(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function PL(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var sG=class extends Sy{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(UL(t),BL(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),My(t)&&(t.nonNullable||t.initialValueIsDefault)&&(PL(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ML(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ML(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){PL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var aG={provide:dh,useExisting:Nn(()=>qn)},AL=Promise.resolve(),qn=(()=>{class n extends dh{_changeDetectorRef;callSetDisabledState;control=new sG;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ct;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=iG(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),tG(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){$L(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){AL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Vo(r);AL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?YW(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(z(Sl,9),z(hh,10),z(NL,10),z(xy,10),z(Kr,8),z(ZD,8))};static \u0275dir=qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Gr([aG]),In,Wr]})}return n})();var ms=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var cG={provide:xy,useExisting:Nn(()=>vi),multi:!0};function qL(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function lG(n){return n.split(":")[0]}var vi=(()=>{class n extends GD{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=k(tr).injector;appRefDestroyRef=this.appRefInjector.get(Xn);destroyRef=k(Xn);cdr=k(Kr);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefDestroyRef.destroyed||(this._queuedWrite=!0,Du({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=qL(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=lG(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})();static \u0275dir=qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&re("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Gr([cG]),In]})}return n})(),ys=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(qL(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(z(Wt),z(Vn),z(vi,9))};static \u0275dir=qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),uG={provide:xy,useExisting:Nn(()=>WL),multi:!0};function OL(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function dG(n){return n.split(":")[0]}var WL=(()=>{class n extends GD{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=dG(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})();static \u0275dir=qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&re("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Gr([uG]),In]})}return n})(),_s=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(OL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(OL(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(z(Wt),z(Vn),z(WL,9))};static \u0275dir=qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function GL(n){return typeof n=="number"?n:parseInt(n,10)}var XD=(()=>{class n{_validator=IL;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):IL,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=qe({type:n,features:[Wr]})}return n})();var hG={provide:hh,useExisting:Nn(()=>fo),multi:!0};var fo=(()=>{class n extends XD{required;inputName="required";normalizeInput=Vo;createValidator=t=>FW;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})();static \u0275dir=qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Lo("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Gr([hG]),In]})}return n})();var fG={provide:hh,useExisting:Nn(()=>eS),multi:!0},eS=(()=>{class n extends XD{minlength;inputName="minlength";normalizeInput=t=>GL(t);createValidator=t=>LW(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})();static \u0275dir=qe({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Lo("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[Gr([fG]),In]})}return n})(),pG={provide:hh,useExisting:Nn(()=>tS),multi:!0},tS=(()=>{class n extends XD{maxlength;inputName="maxlength";normalizeInput=t=>GL(t);createValidator=t=>VW(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=wr(n)))(i||n)}})();static \u0275dir=qe({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Lo("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Gr([pG]),In]})}return n})();var gG=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=er({type:n});static \u0275inj=kn({})}return n})();var dr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ZD,useValue:t.callSetDisabledState??JD}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=er({type:n});static \u0275inj=kn({imports:[gG]})}return n})();var hr=class n{constructor(e){this.auth=e;NN(this.auth,t=>{console.log("Auth state changed:",t?`User: ${t.email}`:"No user"),this.currentUserSubject.next(t)})}currentUserSubject=new at(void 0);currentUser$=this.currentUserSubject.asObservable();getCurrentUser(){let e=this.currentUserSubject.value;return e===void 0?null:e}getCurrentUserId(){let e=this.getCurrentUser();return e?e.uid:null}isAuthenticated(){return this.getCurrentUser()!==null}register(e,t,r){return E(this,null,function*(){try{let i=yield ON(this.auth,e,t);return r&&i.user&&(yield LN(i.user,{displayName:r})),console.log("User registered successfully:",i.user.email),i.user}catch(i){throw console.error("Registration error:",i),i}})}signIn(e,t){return E(this,null,function*(){try{let r=yield kN(this.auth,e,t);return console.log("User signed in successfully:",r.user.email),r.user}catch(r){throw console.error("Sign in error:",r),r}})}signOut(){return E(this,null,function*(){try{yield FN(this.auth),console.log("User signed out successfully")}catch(e){throw console.error("Sign out error:",e),e}})}getUserProfile(){let e=this.getCurrentUser();return e?{uid:e.uid,email:e.email||"",displayName:e.displayName||void 0,photoURL:e.photoURL||void 0,createdAt:new Date(e.metadata.creationTime||Date.now())}:null}static \u0275fac=function(t){return new(t||n)(ee(va))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var An=class n{constructor(e){this.authService=e;this.authService.currentUser$.subscribe(t=>{t?this.loadData():(this.expensesSubject.next([]),this.categoriesSubject.next([]),this.userSettingsSubject.next({}))})}firestore=k(La);expensesSubject=new at([]);categoriesSubject=new at([]);userSettingsSubject=new at({});expenses$=this.expensesSubject.asObservable();categories$=this.categoriesSubject.asObservable();userSettings$=this.userSettingsSubject.asObservable();loadData(){return E(this,null,function*(){yield Promise.all([this.loadExpenses(),this.loadCategories(),this.loadUserSettings()])})}loadExpenses(){return E(this,null,function*(){try{let e=this.authService.getCurrentUserId();if(!e)return this.expensesSubject.next([]),[];let t=mi(this.firestore,"expenses"),r=Na(t,ka("userId","==",e),ih("date","desc")),i=yield wl(r),o=[];return i.forEach(s=>{o.push(V({id:s.id},s.data()))}),this.expensesSubject.next(o),o}catch(e){return console.error("Error loading expenses:",e),[]}})}addExpense(e){return E(this,null,function*(){try{let t=this.authService.getCurrentUserId();if(!t)throw new Error("User not authenticated");let r=mi(this.firestore,"expenses"),i=ce(V({},e),{userId:t}),o=yield _y(r,i);return yield this.loadExpenses(),o.id}catch(t){throw console.error("Error adding expense:",t),t}})}updateExpense(e){return E(this,null,function*(){try{console.log(`Attempting to update expense with ID: ${e.id}`);let i=co(this.firestore,"expenses",e.id);if((yield Fa(i)).exists()){let r=e,{id:s}=r,a=bs(r,["id"]);yield my(i,a),console.log(`Expense ${e.id} updated successfully`)}else{console.warn(`Document with ID ${e.id} does not exist in Firebase. This might be a local-only expense.`);let t=e,{id:s}=t,a=bs(t,["id"]);yield gy(i,a),console.log(`Created new expense with ID: ${e.id}`)}yield this.loadExpenses()}catch(i){throw console.error("Error updating expense:",i),i}})}deleteExpense(e){return E(this,null,function*(){try{console.log(`Attempting to delete expense with ID: ${e}`);let t=co(this.firestore,"expenses",e);if(!(yield Fa(t)).exists()){console.warn(`Document with ID ${e} does not exist in Firebase. This might be a local-only expense.`);return}yield yy(t),console.log(`Expense ${e} deleted successfully`),yield this.loadExpenses()}catch(t){if(console.error("Error deleting expense:",t),t instanceof Error&&t.message&&t.message.includes("does not exist")){console.warn("Document not found - likely a local-only expense");return}throw t}})}migrateLocalExpenses(e){return E(this,null,function*(){try{console.log("Starting migration of local expenses to Firebase...");for(let r of e){if(r.id&&r.id.length>20){console.log(`Expense ${r.id} already migrated, skipping...`);continue}let t=r,{id:i}=t,o=bs(t,["id"]),s=yield this.addExpense(o);console.log(`Migrated expense from local ID ${i} to Firebase ID ${s}`)}console.log("Migration completed successfully")}catch(r){throw console.error("Error during migration:",r),r}})}isFirebaseId(e){return!!(e&&e.length>20)}loadCategories(){return E(this,null,function*(){try{let e=this.authService.getCurrentUserId();if(!e)return console.log("No user authenticated, returning empty categories"),this.categoriesSubject.next([]),[];let t=mi(this.firestore,"categories"),r=Na(t,ka("userId","==",e)),i=yield wl(r),o=[];return i.forEach(s=>{o.push(V({id:s.id},s.data()))}),this.categoriesSubject.next(o),o}catch(e){return console.error("Error loading categories:",e),[]}})}addCategory(e){return E(this,null,function*(){try{let t=this.authService.getCurrentUserId();if(!t)throw new Error("User not authenticated");let r=mi(this.firestore,"categories"),i=ce(V({},e),{userId:t}),o=yield _y(r,i);return yield this.loadCategories(),o.id}catch(t){throw console.error("Error adding category:",t),t}})}updateCategory(e){return E(this,null,function*(){try{console.log(`Attempting to update category with ID: ${e.id}`);let r=co(this.firestore,"categories",e.id);if((yield Fa(r)).exists()){let t=e,{id:o}=t,s=bs(t,["id"]);yield my(r,s),console.log(`Category ${e.id} updated successfully`)}else{console.warn(`Category with ID ${e.id} does not exist in Firebase. This might be a local-only category.`),console.log("Skipping update for local-only category");return}yield this.loadCategories()}catch(r){throw console.error("Error updating category:",r),r}})}deleteCategory(e){return E(this,null,function*(){try{console.log(`Attempting to delete category with ID: ${e} (length: ${e.length})`);let t=co(this.firestore,"categories",e),r=yield Fa(t);if(console.log(`Document exists: ${r.exists()}`),!r.exists()){console.warn(`Category with ID ${e} does not exist in Firebase. This might be a local-only category.`);return}console.log("Document found, proceeding with deletion..."),yield yy(t),console.log(`Category ${e} deleted successfully`),yield this.loadCategories()}catch(t){if(console.error("Error deleting category:",t),t instanceof Error&&t.message.includes("does not exist")){console.warn("Category not found - likely a local-only category");return}throw t}})}loadUserSettings(){return E(this,null,function*(){try{let e=co(this.firestore,"userSettings","default"),t=yield Fa(e);if(t.exists()){let r=t.data();return this.userSettingsSubject.next(r),r}else{let r={budgetLimit:0,emergencyFund:0,vacationFund:0,theme:"light",currency:"\u20B9"};return yield this.saveUserSettings(r),r}}catch(e){return console.error("Error loading user settings:",e),{budgetLimit:0,emergencyFund:0,vacationFund:0,theme:"light",currency:"\u20B9"}}})}saveUserSettings(e){return E(this,null,function*(){try{let t=co(this.firestore,"userSettings","default");yield gy(t,e,{merge:!0}),this.userSettingsSubject.next(e)}catch(t){throw console.error("Error saving user settings:",t),t}})}subscribeToExpenses(){let e=mi(this.firestore,"expenses"),t=Na(e,ih("date","desc"));return new de(r=>vy(t,o=>{let s=[];o.forEach(a=>{s.push(V({id:a.id},a.data()))}),r.next(s)}))}subscribeToCategories(){let e=mi(this.firestore,"categories");return new de(t=>vy(e,i=>{let o=[];i.forEach(s=>{o.push(V({id:s.id},s.data()))}),t.next(o)}))}getExpensesByCategory(e){return E(this,null,function*(){try{let t=mi(this.firestore,"expenses"),r=Na(t,ka("categoryId","==",e)),i=yield wl(r),o=[];return i.forEach(s=>{o.push(V({id:s.id},s.data()))}),o}catch(t){return console.error("Error getting expenses by category:",t),[]}})}getExpensesByDateRange(e,t){return E(this,null,function*(){try{let r=mi(this.firestore,"expenses"),i=Na(r,ka("date",">=",e),ka("date","<=",t),ih("date","desc")),o=yield wl(i),s=[];return o.forEach(a=>{s.push(V({id:a.id},a.data()))}),s}catch(r){return console.error("Error getting expenses by date range:",r),[]}})}static \u0275fac=function(t){return new(t||n)(ee(hr))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ci=class n{constructor(e){this.firebaseService=e;this.loadExpenses()}expenses=[];loadExpenses(){return E(this,null,function*(){try{console.log("Loading expenses from Firebase..."),this.expenses=yield this.firebaseService.loadExpenses(),console.log(`Loaded ${this.expenses.length} expenses from Firebase`)}catch(e){console.error("Error loading expenses:",e),this.expenses=[]}})}getAll(){return E(this,null,function*(){return yield this.loadExpenses(),[...this.expenses]})}add(e){return E(this,null,function*(){try{console.log("Adding expense to Firebase...");let t=yield this.firebaseService.addExpense(e);return console.log(`Expense added with ID: ${t}`),yield this.loadExpenses(),t}catch(t){throw console.error("Error adding expense:",t),t}})}update(e){return E(this,null,function*(){try{if(console.log(`Updating expense with ID: ${e.id}`),e.id.length<20){console.warn(`Attempting to update local expense with ID: ${e.id}. This expense may not exist in Firebase.`);try{yield this.firebaseService.updateExpense(e)}catch(t){if(t instanceof Error&&t.message.includes("does not exist")){console.warn("Local expense not found in Firebase - this is expected for old local data"),this.expenses=this.expenses.filter(r=>r.id!==e.id);return}throw t}}else yield this.firebaseService.updateExpense(e);console.log("Expense updated successfully"),yield this.loadExpenses()}catch(t){throw console.error("Error updating expense:",t),t}})}delete(e){return E(this,null,function*(){try{if(console.log(`Deleting expense with ID: ${e}`),e.length<20){console.warn(`Attempting to delete local expense with ID: ${e}. This expense may not exist in Firebase.`);try{yield this.firebaseService.deleteExpense(e)}catch(t){if(t instanceof Error&&t.message.includes("does not exist")){console.warn("Local expense not found in Firebase - this is expected for old local data"),this.expenses=this.expenses.filter(r=>r.id!==e);return}throw t}}else yield this.firebaseService.deleteExpense(e);console.log("Expense deleted successfully"),yield this.loadExpenses()}catch(t){throw console.error("Error deleting expense:",t),t}})}deleteByCategoryId(e){return E(this,null,function*(){try{let r=(yield this.firebaseService.loadExpenses()).filter(i=>i.categoryId===e);for(let i of r)yield this.firebaseService.deleteExpense(i.id);yield this.loadExpenses()}catch(t){throw console.error("Error deleting expenses by category:",t),t}})}getById(e){return E(this,null,function*(){return(yield this.firebaseService.loadExpenses()).find(r=>r.id===e)})}getByCategoryId(e){return E(this,null,function*(){return this.firebaseService.getExpensesByCategory(e)})}getByDateRange(e,t){return E(this,null,function*(){return this.firebaseService.getExpensesByDateRange(e,t)})}static \u0275fac=function(t){return new(t||n)(ee(An))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ei=class n{constructor(e){this.firebaseService=e;this.loadCategories(),this.initializeDefaultCategories()}categories=[];loadCategories(){return E(this,null,function*(){try{console.log("Loading categories from Firebase..."),this.categories=yield this.firebaseService.loadCategories(),console.log(`Loaded ${this.categories.length} categories from Firebase`)}catch(e){console.error("Error loading categories:",e),this.categories=[]}})}initializeDefaultCategories(){return E(this,null,function*(){if((yield this.firebaseService.loadCategories()).length===0){let t=this.getDefaultCategories();for(let r of t)yield this.firebaseService.addCategory(r);yield this.loadCategories()}})}forceInitializeDefaultCategories(){return E(this,null,function*(){console.log("Force initializing default categories...");let e=this.getDefaultCategories();for(let t of e)yield this.firebaseService.addCategory(t);yield this.loadCategories(),console.log("Default categories initialized successfully")})}getDefaultCategories(){return[{name:"Food & Dining",color:"#A62C2C",icon:"\u{1F37D}\uFE0F"},{name:"Transportation",color:"#E83F25",icon:"\u{1F697}"},{name:"Shopping",color:"#EA7300",icon:"\u{1F6CD}\uFE0F"},{name:"Entertainment",color:"#D3CA79",icon:"\u{1F3AC}"},{name:"Bills & Utilities",color:"#FF6B6B",icon:"\u{1F4A1}"},{name:"Healthcare",color:"#4ECDC4",icon:"\u{1F3E5}"},{name:"Education",color:"#45B7D1",icon:"\u{1F4DA}"},{name:"Rent/Mortgage",color:"#96CEB4",icon:"\u{1F3E0}"},{name:"Insurance",color:"#FF8E53",icon:"\u{1F6E1}\uFE0F"},{name:"Savings",color:"#2ECC71",icon:"\u{1F4B0}"}]}getAll(){return E(this,null,function*(){yield this.loadCategories();let e=this.removeDuplicateCategories(this.categories);return e.length!==this.categories.length&&(console.log(`Found ${this.categories.length-e.length} duplicate categories. Cleaning up...`),yield this.cleanupDuplicateCategories(e)),[...e]})}removeDuplicateCategories(e){let t=new Set,r=[];for(let i of e){let o=i.name.toLowerCase().trim();t.has(o)?console.log(`Duplicate category found: "${i.name}" (ID: ${i.id})`):(t.add(o),r.push(i))}return r}cleanupDuplicateCategories(e){return E(this,null,function*(){try{let t=yield this.firebaseService.loadCategories(),r=new Set,i=[];for(let o of t){let s=o.name.toLowerCase().trim();r.has(s)?(i.push(o.id),console.log(`Marking duplicate for deletion: "${o.name}" (ID: ${o.id})`)):r.add(s)}for(let o of i)try{yield this.firebaseService.deleteCategory(o),console.log(`Deleted duplicate category with ID: ${o}`)}catch(s){console.error(`Error deleting duplicate category ${o}:`,s)}yield this.loadCategories()}catch(t){console.error("Error cleaning up duplicate categories:",t)}})}add(e){return E(this,null,function*(){try{let t=yield this.firebaseService.addCategory(e);return yield this.loadCategories(),t}catch(t){throw console.error("Error adding category:",t),t}})}update(e){return E(this,null,function*(){try{if(console.log(`Updating category with ID: ${e.id} (length: ${e.id.length})`),e.id.length<20){console.warn(`Attempting to update local category with ID: ${e.id}. This category may not exist in Firebase.`);try{yield this.firebaseService.updateCategory(e)}catch(t){if(t instanceof Error&&t.message.includes("does not exist")){console.warn("Local category not found in Firebase - this is expected for old local data"),this.categories=this.categories.filter(r=>r.id!==e.id);return}throw t}}else console.log("Updating Firebase category..."),yield this.firebaseService.updateCategory(e);console.log("Category updated successfully"),yield this.loadCategories()}catch(t){throw console.error("Error updating category:",t),t}})}delete(e){return E(this,null,function*(){try{if(console.log(`Deleting category with ID: ${e} (length: ${e.length})`),e.length<20){console.warn(`Attempting to delete local category with ID: ${e}. This category may not exist in Firebase.`);try{let r=(yield this.firebaseService.loadExpenses()).filter(i=>i.categoryId===e);console.log(`Found ${r.length} expenses to delete for category ${e}`);for(let i of r)yield this.firebaseService.deleteExpense(i.id);yield this.firebaseService.deleteCategory(e)}catch(t){if(t instanceof Error&&t.message.includes("does not exist")){console.warn("Local category not found in Firebase - this is expected for old local data"),this.categories=this.categories.filter(r=>r.id!==e);return}throw t}}else{console.log("Deleting Firebase category...");let r=(yield this.firebaseService.loadExpenses()).filter(i=>i.categoryId===e);console.log(`Found ${r.length} expenses to delete for category ${e}`);for(let i of r)yield this.firebaseService.deleteExpense(i.id);yield this.firebaseService.deleteCategory(e)}console.log("Category deleted successfully"),yield this.loadCategories()}catch(t){throw console.error("Error deleting category:",t),t}})}getById(e){return E(this,null,function*(){return(yield this.firebaseService.loadCategories()).find(r=>r.id===e)})}triggerDuplicateCleanup(){return E(this,null,function*(){console.log("Manual duplicate cleanup triggered...");let e=yield this.getAll();console.log(`Categories after cleanup: ${e.length}`)})}static \u0275fac=function(t){return new(t||n)(ee(An))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function mG(n,e){if(n&1&&(g(0,"option",54),v(1),m()),n&2){let t=e.$implicit;B("value",t.value),I(),ve(" ",t.label," ")}}function yG(n,e){if(n&1&&(g(0,"option",54),v(1),m()),n&2){let t=e.$implicit;B("value",t),I(),ve(" ",t," ")}}function _G(n,e){if(n&1){let t=Ve();g(0,"div",48)(1,"div",49)(2,"label",50),v(3,"Month"),m(),g(4,"select",51),Oe("ngModelChange",function(i){W(t);let o=$(2);return Ne(o.selectedMonth,i)||(o.selectedMonth=i),G(i)}),te(5,mG,2,2,"option",52),m()(),g(6,"div",49)(7,"label",50),v(8,"Year"),m(),g(9,"select",53),Oe("ngModelChange",function(i){W(t);let o=$(2);return Ne(o.selectedYear,i)||(o.selectedYear=i),G(i)}),te(10,yG,2,2,"option",52),m()()()}if(n&2){let t=$(2);I(4),Ae("ngModel",t.selectedMonth),I(),B("ngForOf",t.availableMonths),I(4),Ae("ngModel",t.selectedYear),I(),B("ngForOf",t.availableYears)}}function vG(n,e){if(n&1&&(g(0,"div",43)(1,"span",44)(2,"span",45),v(3),m(),g(4,"span",46),v(5),m(),te(6,_G,11,4,"div",47),m()()),n&2){let t=$();I(),B("ngClass","period-"+t.selectedPeriod),I(2),ve(" ",t.selectedPeriod==="monthly"?"\u{1F4C5}":t.selectedPeriod==="yearly"?"\u{1F4C6}":t.selectedPeriod==="last30"?"\u{1F4CA}":t.selectedPeriod==="last7"?"\u{1F4C8}":"\u{1F4CB}"," "),I(2),ve(" ",t.selectedPeriod==="monthly"?t.getSelectedMonthName()+" "+t.getSelectedYear():t.selectedPeriod==="yearly"?t.getCurrentYear():t.selectedPeriod==="last30"?"Last 30 Days":t.selectedPeriod==="last7"?"Last 7 Days":t.selectedPeriod==="custom"?"Custom Range":""," "),I(),B("ngIf",t.selectedPeriod==="monthly")}}function CG(n,e){if(n&1){let t=Ve();g(0,"button",55),re("click",function(){let i=W(t).$implicit,o=$();return o.selectedPeriod=i.value,G(o.onFilterChange())}),g(1,"span",56),v(2),m(),g(3,"span",57),v(4),m()()}if(n&2){let t=e.$implicit,r=$();gn("active",r.selectedPeriod===t.value),I(2),J(t.label),I(2),J(t.description)}}function EG(n,e){if(n&1){let t=Ve();g(0,"div",58)(1,"div",59)(2,"div",60)(3,"span",61),v(4,"\u{1F4C5}"),m()(),g(5,"button",62),re("click",function(){W(t);let i=$();return G(i.openDatePicker())}),g(6,"span",63),v(7,"\u{1F50D}"),m(),g(8,"span",64),v(9,"Filter"),m()()()()}}function wG(n,e){if(n&1&&(g(0,"div",65)(1,"div",22)(2,"span",66),v(3),m(),g(4,"span",67),v(5),m()(),g(6,"div",68)(7,"div",69),v(8),m(),g(9,"div",70)(10,"span",71),v(11),m(),g(12,"span",72),v(13),m()()()()),n&2){let t=e.$implicit;I(3),J(t.icon),I(2),J(t.title),I(3),J(t.value),I(),Ic("trend-"+t.trend),I(2),ve(" ",t.trend==="up"?"\u{1F4C8}":t.trend==="down"?"\u{1F4C9}":"\u27A1\uFE0F"," "),I(2),J(t.change)}}function bG(n,e){if(n&1&&(g(0,"div",85),nr(1,"div",86),g(2,"div",87)(3,"h4"),v(4),m(),g(5,"p"),v(6),m()()()),n&2){let t=e.$implicit;I(),Ic("priority-"+t.priority),I(3),J(t.title),I(2),J(t.description)}}function IG(n,e){if(n&1&&(g(0,"div",88)(1,"h4"),v(2,"Most Expensive Category"),m(),g(3,"p"),v(4),m()()),n&2){let t=$(2);I(4),mn("",t.getSpendingAnalytics().mostExpensiveCategory.name," - ",t.getSpendingAnalytics().mostExpensiveCategory.percentage.toFixed(1),"%")}}function DG(n,e){if(n&1&&(g(0,"div",88)(1,"h4"),v(2,"Least Expensive Category"),m(),g(3,"p"),v(4),m()()),n&2){let t=$(2);I(4),mn("",t.getSpendingAnalytics().leastExpensiveCategory.name," - ",t.getSpendingAnalytics().leastExpensiveCategory.percentage.toFixed(1),"%")}}function SG(n,e){if(n&1&&(g(0,"div",73)(1,"div",74)(2,"h2"),v(3,"\u{1F9E0} Smart Insights"),m(),g(4,"p"),v(5,"AI-powered recommendations based on your spending patterns"),m()(),g(6,"div",75)(7,"div",76)(8,"div",22)(9,"span",66),v(10,"\u{1F4A1}"),m(),g(11,"h3"),v(12,"Smart Recommendations"),m()(),g(13,"div",68),te(14,bG,7,4,"div",77),m()(),g(15,"div",78)(16,"div",22)(17,"span",66),v(18,"\u{1F4CA}"),m(),g(19,"h3"),v(20,"Spending Analytics"),m()(),g(21,"div",68)(22,"div",79)(23,"div",80)(24,"span",81),v(25,"Total Expenses"),m(),g(26,"span",82),v(27),m()(),g(28,"div",80)(29,"span",81),v(30,"Average Per Expense"),m(),g(31,"span",82),v(32),m()(),g(33,"div",80)(34,"span",81),v(35,"Highest Expense"),m(),g(36,"span",82),v(37),m()(),g(38,"div",80)(39,"span",81),v(40,"Recent Trend"),m(),g(41,"span",82),v(42),m()()()()(),g(43,"div",83)(44,"div",22)(45,"span",66),v(46,"\u{1F3F7}\uFE0F"),m(),g(47,"h3"),v(48,"Category Insights"),m()(),g(49,"div",68),te(50,IG,5,2,"div",84)(51,DG,5,2,"div",84),m()()()()),n&2){let t=$();I(14),B("ngForOf",t.getSmartRecommendations()),I(13),J(t.getSpendingAnalytics().totalExpenses),I(5),ve("\u20B9",t.getSpendingAnalytics().averagePerExpense.toFixed(0)),I(5),ve("\u20B9",t.getSpendingAnalytics().highestExpense.toFixed(0)),I(4),Ic("trend-"+t.getSpendingAnalytics().recentTrend.trend),I(),ve(" ",t.getSpendingAnalytics().recentTrend.trend," "),I(8),B("ngIf",t.getSpendingAnalytics().mostExpensiveCategory),I(),B("ngIf",t.getSpendingAnalytics().leastExpensiveCategory)}}function TG(n,e){if(n&1&&(g(0,"div",106),v(1),m()),n&2){let t=$().$implicit,r=$(2);I(),ve(" ",r.getCategoryPercentage((t==null?null:t.id)||""),"% of total ")}}function xG(n,e){if(n&1){let t=Ve();g(0,"div",91)(1,"div",92)(2,"div",93),v(3),m(),g(4,"div",94)(5,"div",95),v(6),m(),g(7,"div",96),v(8),m(),te(9,TG,2,1,"div",97),g(10,"div",98)(11,"span",99),v(12),m(),g(13,"span",99),v(14),m()()()(),g(15,"div",100)(16,"div",101),v(17),Ke(18,"number"),m(),g(19,"div",102)(20,"button",103),re("click",function(){let i=W(t).$implicit,o=$(2);return G(o.viewCategoryDetails((i==null?null:i.id)||""))}),jf(),g(21,"svg",104),nr(22,"path",105),m()()()()()}if(n&2){let t=e.$implicit,r=$(2);gn("empty-category",r.categoryTotals[(t==null?null:t.id)||""]===0),I(2),rr("background-color",(t==null?null:t.color)||"#999"),I(),ve(" ",(t==null?null:t.icon)||"\u{1F4CC}"," "),I(3),J((t==null?null:t.name)||"Unknown"),I(2),ve(" ",r.getExpensesByCategory((t==null?null:t.id)||"").length," expenses "),I(),B("ngIf",r.getCategoryPercentage((t==null?null:t.id)||"")>0),I(3),ve("Avg: \u20B9",(r.categoryTotals[(t==null?null:t.id)||""]/r.getExpensesByCategory((t==null?null:t.id)||"").length).toFixed(0)),I(2),ve("Max: \u20B9",r.getMaxExpenseForCategory((t==null?null:t.id)||"")),I(3),ve("\u20B9",nn(18,11,r.categoryTotals[(t==null?null:t.id)||""]||0))}}function MG(n,e){if(n&1&&(g(0,"div",89),te(1,xG,23,13,"div",90),m()),n&2){let t=$();I(),B("ngForOf",t.getCategoriesSortedByExpense())}}function PG(n,e){n&1&&(g(0,"div",107)(1,"div",108),v(2,"\u{1F3F7}\uFE0F"),m(),g(3,"h6"),v(4,"No Categories Found"),m(),g(5,"p"),v(6,"Add some categories to start tracking your expenses!"),m(),g(7,"div",109)(8,"a",110),v(9,"Add Categories"),m()()())}function AG(n,e){if(n&1&&(g(0,"span",128),v(1),m()),n&2){let t=$().$implicit;Ic("priority-"+t.priority),I(),ve(" ",t.priority," ")}}function OG(n,e){n&1&&(g(0,"span",99),v(1,"Large Expense"),m())}function RG(n,e){if(n&1){let t=Ve();g(0,"div",113)(1,"div",114)(2,"div",115),v(3),m(),g(4,"div",116)(5,"div",117),v(6),m(),g(7,"div",118)(8,"span",119),v(9),Ke(10,"date"),m(),g(11,"span",120),v(12),m(),te(13,AG,2,3,"span",121),m(),g(14,"div",122)(15,"span",99),v(16),m(),te(17,OG,2,0,"span",123),m()()(),g(18,"div",124)(19,"div",101),v(20),Ke(21,"number"),m(),g(22,"div",125)(23,"button",126),re("click",function(){let i=W(t).$implicit,o=$(2);return G(o.editExpense(i))}),v(24," \u270F\uFE0F "),m(),g(25,"button",127),re("click",function(){let i=W(t).$implicit,o=$(2);return G(o.deleteExpense(i))}),v(26," \u{1F5D1}\uFE0F "),m()()()()}if(n&2){let t=e.$implicit,r=$(2);I(2),rr("background-color",r.getCategoryColor(t.categoryId)),I(),ve(" ",r.getCategoryIcon(t.categoryId)," "),I(3),J(t.description||"No description"),I(3),J(yn(10,10,t.date,"MMM dd")),I(3),J(r.getCategoryName(t.categoryId)),I(),B("ngIf",t.priority),I(3),ve("Day: ",r.getDayOfWeek(t.date)),I(),B("ngIf",t.amount>1e3),I(3),ve("\u20B9",nn(21,13,t.amount))}}function NG(n,e){if(n&1&&(g(0,"div",111),te(1,RG,27,15,"div",112),m()),n&2){let t=$();I(),B("ngForOf",t.getRecentExpensesSorted())}}function kG(n,e){n&1&&(g(0,"div",107)(1,"div",108),v(2,"\u{1F4DD}"),m(),g(3,"h6"),v(4,"No Expenses Found"),m(),g(5,"p"),v(6,"Add some expenses to see them here!"),m(),g(7,"div",109)(8,"a",129),v(9,"Add Expenses"),m()()())}function FG(n,e){if(n&1&&(g(0,"div",132)(1,"div",133)(2,"div",134),v(3),m(),g(4,"div",135),v(5),Ke(6,"number"),m(),g(7,"div",136),v(8),m()()()),n&2){let t=e.$implicit,r=$(2);rr("height",t.amount/r.getMaxSpendingAmount()*100,"%"),I(3),J(t.day),I(2),ve("\u20B9",nn(6,5,t.amount)),I(3),ve("",t.count," expenses")}}function LG(n,e){if(n&1&&(g(0,"div",130),te(1,FG,9,7,"div",131),m()),n&2){let t=$();I(),B("ngForOf",t.getSpendingByDay())}}function VG(n,e){n&1&&(g(0,"div",137)(1,"div",108),v(2,"\u{1F4CA}"),m(),g(3,"h6"),v(4,"No Spending Data"),m(),g(5,"p"),v(6,"No expenses found for the selected period"),m()())}function jG(n,e){if(n&1&&(g(0,"div",140)(1,"div",141),v(2),m(),g(3,"div",114)(4,"div",142),v(5),m(),g(6,"div",120),v(7),m()(),g(8,"div",124),v(9),Ke(10,"number"),m()()),n&2){let t=e.$implicit,r=e.index,i=$(2);I(2),J(r+1),I(3),J(t.description||"No description"),I(2),J(i.getCategoryName(t.categoryId)),I(2),ve("\u20B9",nn(10,4,t.amount))}}function UG(n,e){if(n&1&&(g(0,"div",138),te(1,jG,11,6,"div",139),m()),n&2){let t=$();I(),B("ngForOf",t.getTopExpenses(5))}}function BG(n,e){n&1&&(g(0,"div",137)(1,"div",108),v(2,"\u{1F3C6}"),m(),g(3,"h6"),v(4,"No Top Expenses"),m(),g(5,"p"),v(6,"Add some expenses to see your top spending patterns"),m()())}function $G(n,e){if(n&1&&(g(0,"a",146)(1,"span",10),v(2),m(),g(3,"div",147)(4,"h4"),v(5),m(),g(6,"p"),v(7),m()()()),n&2){let t=$().$implicit;B("routerLink",t.route),I(2),J(t.icon),I(3),J(t.title),I(2),J(t.action)}}function zG(n,e){if(n&1){let t=Ve();g(0,"button",148),re("click",function(){W(t);let i=$().$implicit;return G(i.method())}),g(1,"span",10),v(2),m(),g(3,"div",147)(4,"h4"),v(5),m(),g(6,"p"),v(7),m()()()}if(n&2){let t=$().$implicit;I(2),J(t.icon),I(3),J(t.title),I(2),J(t.action)}}function HG(n,e){if(n&1&&(g(0,"div",143),te(1,$G,8,4,"a",144)(2,zG,8,3,"button",145),m()),n&2){let t=e.$implicit;I(),B("ngIf",t.route),I(),B("ngIf",t.method)}}var Oy=class n{constructor(e,t,r,i){this.expenseService=e;this.categoryService=t;this.firebaseService=r;this.router=i}expenses=[];categories=[];totalSpent=0;averageSpent=0;expenseCount=0;monthlyComparison={};selectedPeriod="all";selectedMonth="";selectedYear="";customStartDate="";customEndDate="";categoryBreakdown=[];recentExpenses=[];currentMonthTotal=0;weeklyTotal=0;showInsights=!1;subscription=new He;ngOnInit(){let e=new Date;this.selectedMonth=e.getMonth().toString(),this.selectedYear=e.getFullYear().toString();let t=e.getFullYear();for(let r=2020;r<=t+1;r++)this.availableYears.push(r.toString());this.subscription.add(this.firebaseService.expenses$.subscribe(r=>{this.expenses=r,this.calculateTotals(),this.calculateCategoryBreakdown(),this.getRecentExpenses(),this.calculateWeeklyData(),console.log(`Received ${r.length} expenses from Firebase`)})),this.subscription.add(this.firebaseService.categories$.subscribe(r=>{this.categories=r,console.log(`Received ${r.length} categories from Firebase`)})),this.loadData()}ngOnDestroy(){this.subscription.unsubscribe()}loadData(){return E(this,null,function*(){try{console.log("Loading dashboard data..."),this.expenses=yield this.expenseService.getAll(),this.categories=yield this.categoryService.getAll(),this.calculateTotals(),this.calculateCategoryBreakdown(),this.getRecentExpenses(),this.calculateWeeklyData(),console.log("Dashboard data loaded successfully")}catch(e){console.error("Error loading dashboard data:",e)}finally{}})}calculateTotals(){this.totalSpent=this.expenses.reduce((e,t)=>e+t.amount,0),this.expenseCount=this.expenses.length,this.averageSpent=this.expenseCount>0?this.totalSpent/this.expenseCount:0}calculateCategoryBreakdown(){let e={};this.expenses.forEach(t=>{let r=t.categoryId;e[r]?e[r]+=t.amount:e[r]=t.amount}),this.categoryBreakdown=Object.entries(e).map(([t,r])=>{let i=this.categories.find(o=>o.id===t);return{categoryId:t,categoryName:i?.name||"Unknown",categoryColor:i?.color||"#666",categoryIcon:i?.icon||"\u{1F4CC}",amount:r,percentage:r/this.totalSpent*100}}).sort((t,r)=>r.amount-t.amount)}getRecentExpenses(){this.recentExpenses=[...this.expenses].sort((e,t)=>{let r=new Date(e.date+"T00:00:00");return new Date(t.date+"T00:00:00").getTime()-r.getTime()}).slice(0,5)}calculateWeeklyData(){let e=new Date,t=new Date(e);t.setDate(e.getDate()-e.getDay()),t.setHours(0,0,0,0),this.weeklyTotal=this.expenses.filter(r=>new Date(r.date)>=t).reduce((r,i)=>r+i.amount,0)}getCategoryName(e){return this.categories.find(r=>r.id===e)?.name||"Unknown"}getCategoryColor(e){return this.categories.find(r=>r.id===e)?.color||"#666"}getCategoryIcon(e){return this.categories.find(r=>r.id===e)?.icon||"\u{1F4CC}"}getFilteredExpenses(){let e=[...this.expenses];if(this.selectedPeriod!=="all"){let t=new Date;switch(this.selectedPeriod){case"monthly":let r=parseInt(this.selectedMonth),i=parseInt(this.selectedYear);e=e.filter(a=>{let c=new Date(a.date);return c.getMonth()===r&&c.getFullYear()===i});break;case"yearly":e=e.filter(a=>new Date(a.date).getFullYear()===t.getFullYear());break;case"last30":let o=new Date;o.setDate(t.getDate()-30),e=e.filter(a=>new Date(a.date)>=o);break;case"last7":let s=new Date;s.setDate(t.getDate()-7),e=e.filter(a=>new Date(a.date)>=s);break;case"custom":this.customStartDate&&this.customEndDate&&(e=e.filter(a=>{let c=new Date(a.date),u=new Date(this.customStartDate),d=new Date(this.customEndDate);return c>=u&&c<=d}));break}}return e}getFilteredTotal(){return this.getFilteredExpenses().reduce((e,t)=>e+t.amount,0)}getFilterLabel(){switch(this.selectedPeriod){case"monthly":return"This Month";case"yearly":return"This Year";case"last30":return"Last 30 Days";case"last7":return"Last 7 Days";case"custom":return"Custom Period";default:return"All Time"}}onFilterChange(){}openDatePicker(){alert("Date picker functionality would open here. You can implement a modal with date selection or use a third-party date picker library.");let e=new Date,t=new Date(e.getTime()-30*24*60*60*1e3);this.customStartDate=t.toISOString().split("T")[0],this.customEndDate=e.toISOString().split("T")[0],this.onFilterChange()}getExpensesByCategory(e){return this.getFilteredExpenses().filter(t=>t.categoryId===e)}get categoryTotals(){let e={},t=this.getFilteredExpenses();return this.categories.forEach(r=>{e[r.id]=t.filter(i=>i.categoryId===r.id).reduce((i,o)=>i+o.amount,0)}),e}get monthlyTotal(){return this.currentMonthTotal}getRecentExpensesSorted(){let e=[...this.expenses].sort((t,r)=>{let i=new Date(t.date+"T00:00:00");return new Date(r.date+"T00:00:00").getTime()-i.getTime()}).slice(0,5);return e.length>0&&console.log("Recent expenses sorted by date (latest first):",e.map(t=>({date:t.date,description:t.description,amount:t.amount}))),e}getFilteredExpensesSorted(){return this.getFilteredExpenses().sort((e,t)=>t.amount-e.amount)}getCategoriesSortedByExpense(){return[...this.categories].filter(e=>(this.categoryTotals[e.id]||0)>0).sort((e,t)=>{let r=this.categoryTotals[e.id]||0;return(this.categoryTotals[t.id]||0)-r})}getBudgetProgress(){return null}getDailyAverage(){let e=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),t=new Date().getDate();return this.currentMonthTotal/t}getPotentialSavings(){return 0}getSavingsTip(){return null}getCategoryPercentage(e){let t=this.getFilteredTotal();if(t===0)return 0;let r=this.categoryTotals[e]||0;return parseFloat((r/t*100).toFixed(2))}getCategoryTrend(e){return null}getTopSpendingCategory(){let e=this.getFilteredExpenses();if(e.length===0)return null;let t={};e.forEach(i=>{let o=i.categoryId;t[o]?t[o]+=i.amount:t[o]=i.amount});let r=Object.entries(t).map(([i,o])=>{let s=this.categories.find(a=>a.id===i);return{categoryId:i,categoryName:s?.name||"Unknown",amount:o}}).sort((i,o)=>o.amount-i.amount);return r.length===0?null:{name:r[0].categoryName,amount:r[0].amount}}getSpendingPattern(){let e=this.getFilteredTotal()/Math.max(this.getFilteredExpenses().length,1);return e>1e3?"High Value":e>500?"Medium Value":"Low Value"}getPatternDescription(){switch(this.getSpendingPattern()){case"High Value":return"Large individual expenses";case"Medium Value":return"Moderate spending pattern";case"Low Value":return"Small frequent expenses";default:return"Balanced spending"}}getQuickWin(){let e=this.getTopSpendingCategory();return e&&e.amount>this.monthlyTotal*.4?{title:`Reduce ${e.name} spending`,description:`This category represents ${(e.amount/this.getFilteredTotal()*100).toFixed(1)}% of your expenses`}:null}getAchievement(){return this.currentMonthTotal<this.monthlyTotal*.5?{title:"Budget Master!",description:"You're under 50% of your monthly budget"}:null}getMonthlyTrends(){let e=[],t=["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe"];for(let r=5;r>=0;r--){let i=new Date;i.setMonth(i.getMonth()-r);let s=this.expenses.filter(u=>{let d=new Date(u.date);return d.getMonth()===i.getMonth()&&d.getFullYear()===i.getFullYear()}).reduce((u,d)=>u+d.amount,0),a=Math.max(...this.getMonthlyAmounts()),c=a>0?s/a*100:0;e.push({name:i.toLocaleDateString("en-US",{month:"short"}),amount:s,percentage:c,color:t[r]})}return e}getMonthlyAmounts(){let e=[];for(let t=5;t>=0;t--){let r=new Date;r.setMonth(r.getMonth()-t);let i=this.expenses.filter(o=>{let s=new Date(o.date);return s.getMonth()===r.getMonth()&&s.getFullYear()===r.getFullYear()});e.push(i.reduce((o,s)=>o+s.amount,0))}return e}toggleInsights(){this.showInsights=!this.showInsights,this.showInsights&&setTimeout(()=>{let e=document.getElementById("insights-section");if(e){let i=e.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:i,behavior:"smooth"})}},150)}viewAllExpenses(){this.router.navigate(["/expenses"])}editExpense(e){try{let t=window.prompt("Description:",e.description)||e.description,r=window.prompt("Amount (\u20B9):",e.amount.toString())||e.amount.toString(),i=window.prompt("Date (YYYY-MM-DD):",e.date)||e.date,o=parseFloat(r);if(isNaN(o)||o<=0){alert("Invalid Amount! Please enter a valid number greater than 0.");return}if(!/^\d{4}-\d{2}-\d{2}$/.test(i)){alert("Invalid Date! Please enter date in YYYY-MM-DD format (e.g., 2024-01-15).");return}let a=ce(V({},e),{description:t,amount:o,date:i});this.expenseService.update(a).then(()=>{console.log("Expense updated successfully")}).catch(c=>{console.error("Error updating expense:",c),alert("Error updating expense. Please try again.")})}catch(t){console.error("Error editing expense:",t),alert("Error editing expense. Please try again.")}}deleteExpense(e){window.confirm(`Are you sure you want to delete this expense?

Description: ${e.description}
Amount: \u20B9${e.amount}
Date: ${e.date}`)&&this.expenseService.delete(e.id).then(()=>{console.log("Expense deleted successfully"),alert("Expense deleted successfully!")}).catch(r=>{console.error("Error deleting expense:",r),alert("Error deleting expense. Please try again.")})}getSmartInsights(){let e=[],t=this.getFilteredTotal()/Math.max(this.getFilteredExpenses().length,1);t>1e3&&e.push({title:"High-Value Spending Pattern",description:`Your average expense is \u20B9${t.toFixed(0)}, indicating large purchases. Consider breaking down big expenses.`});let r=this.getTopSpendingCategory();r&&r.amount/this.getFilteredTotal()>.5&&e.push({title:"Category Concentration Alert",description:`${r.name} represents ${(r.amount/this.getFilteredTotal()*100).toFixed(1)}% of your spending. Consider diversifying.`});let i=this.weeklyTotal;i>this.currentMonthTotal/4&&e.push({title:"High Weekly Spending",description:`This week's spending (\u20B9${i.toFixed(0)}) is above average. Monitor your daily expenses.`});let o=this.getPotentialSavings();return o>0&&e.push({title:"Savings Opportunity",description:`You could save \u20B9${o.toFixed(0)} by optimizing your spending patterns.`}),e}getQuickActions(){return[{title:"Add Expense",action:"Quick Entry",icon:"\u2795",route:"/expenses"},{title:"View Reports",action:"Monthly Analysis",icon:"\u{1F4CA}",route:"/monthly-reports"},{title:"Manage Categories",action:"Organize",icon:"\u{1F3F7}\uFE0F",route:"/categories"},{title:"Export Data",action:"Download",icon:"\u{1F4E5}",method:()=>this.exportData()}]}getSpendingAnalytics(){let e=this.getFilteredExpenses(),t=this.getFilteredTotal();return{totalExpenses:e.length,totalAmount:t,averagePerExpense:e.length>0?t/e.length:0,highestExpense:Math.max(...e.map(r=>r.amount)),lowestExpense:Math.min(...e.map(r=>r.amount)),mostExpensiveCategory:this.getMostExpensiveCategory(),leastExpensiveCategory:this.getLeastExpensiveCategory(),spendingByDay:this.getSpendingByDay(),spendingByWeek:this.getSpendingByWeek(),spendingByMonth:this.getSpendingByMonth(),topExpenses:this.getTopExpenses(5),recentTrend:this.getRecentSpendingTrend()}}getMostExpensiveCategory(){let e=this.categoryTotals,t=this.getFilteredTotal();if(t===0)return null;let r=Object.entries(e).reduce((o,[s,a])=>a>o.amount?{id:s,amount:a}:o,{id:"",amount:0});return{name:this.categories.find(o=>o.id===r.id)?.name||"Unknown",amount:r.amount,percentage:r.amount/t*100}}getLeastExpensiveCategory(){let e=this.categoryTotals,t=this.getFilteredTotal();if(t===0)return null;let r=Object.entries(e).reduce((o,[s,a])=>a<o.amount?{id:s,amount:a}:o,{id:"",amount:1/0});return{name:this.categories.find(o=>o.id===r.id)?.name||"Unknown",amount:r.amount,percentage:r.amount/t*100}}getSpendingByDay(){let e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t={};return e.forEach(r=>{t[r]={amount:0,count:0}}),this.getFilteredExpenses().forEach(r=>{let i=new Date(r.date).toLocaleDateString("en-US",{weekday:"long"});t[i].amount+=r.amount,t[i].count+=1}),e.map(r=>({day:r,amount:t[r].amount,count:t[r].count}))}getSpendingByWeek(){let e={};return this.getFilteredExpenses().forEach(t=>{let r=new Date(t.date),i=new Date(r);i.setDate(r.getDate()-r.getDay());let o=i.toISOString().split("T")[0];e[o]||(e[o]={amount:0,count:0}),e[o].amount+=t.amount,e[o].count+=1}),Object.entries(e).map(([t,r])=>({week:new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}),amount:r.amount,count:r.count})).sort((t,r)=>new Date(t.week).getTime()-new Date(r.week).getTime())}getSpendingByMonth(){let e={};return this.getFilteredExpenses().forEach(t=>{let r=new Date(t.date),i=`${r.getFullYear()}-${r.getMonth()}`;e[i]||(e[i]={amount:0,count:0}),e[i].amount+=t.amount,e[i].count+=1}),Object.entries(e).map(([t,r])=>({month:new Date(t+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"}),amount:r.amount,count:r.count})).sort((t,r)=>new Date(t.month).getTime()-new Date(r.month).getTime())}getTopExpenses(e){return[...this.getFilteredExpenses()].sort((t,r)=>r.amount-t.amount).slice(0,e)}getRecentSpendingTrend(){let e=this.getRecentExpensesSorted().slice(0,10);if(e.length<5)return{trend:"stable",percentage:0};let t=Math.floor(e.length/2),r=e.slice(0,t),i=e.slice(t),o=r.reduce((c,u)=>c+u.amount,0),s=i.reduce((c,u)=>c+u.amount,0);if(o===0)return{trend:"stable",percentage:0};let a=(s-o)/o*100;return a>10?{trend:"increasing",percentage:a}:a<-10?{trend:"decreasing",percentage:a}:{trend:"stable",percentage:a}}exportData(){let e={expenses:this.expenses,categories:this.categories,analytics:this.getSpendingAnalytics(),exportDate:new Date().toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=`expense-tracker-data-${new Date().toISOString().split("T")[0]}.json`,i.click(),window.URL.revokeObjectURL(r)}getSmartRecommendations(){let e=[],t=this.getTopSpendingCategory();return t&&t.amount/this.getFilteredTotal()>.6&&e.push({title:"Category Diversification",description:`Consider reducing spending in ${t.name} category.`,priority:"medium"}),this.expenses.filter(i=>i.amount>1e3).length>3&&e.push({title:"Large Expenses Review",description:"You have several large expenses. Consider if all are necessary.",priority:"medium"}),e}getSmartFilters(){return[{label:"All Time",value:"all",description:"Complete expense history"},{label:"This Month",value:"monthly",description:"Current month expenses"},{label:"This Year",value:"yearly",description:"Current year expenses"},{label:"Last 30 Days",value:"last30",description:"Recent month activity"},{label:"Last 7 Days",value:"last7",description:"This week's expenses"},{label:"Custom Range",value:"custom",description:"Select specific dates"}]}getQuickSummaryCards(){return[{title:"Total Spent",value:`\u20B9${this.getFilteredTotal().toLocaleString()}`,change:"Current period",trend:"stable",icon:"\u{1F4B0}"},{title:"Expense Count",value:this.getFilteredExpenses().length.toString(),change:`${this.getFilteredExpenses().length} this period`,trend:"stable",icon:"\u{1F4CA}"},{title:"Average Per Expense",value:`\u20B9${(this.getFilteredTotal()/Math.max(this.getFilteredExpenses().length,1)).toFixed(0)}`,change:"Per transaction",trend:"stable",icon:"\u{1F4C8}"},{title:"Top Category",value:this.getTopSpendingCategory()?.name||"No Data",change:this.getTopSpendingCategory()&&this.getFilteredTotal()>0?`${(this.getTopSpendingCategory().amount/this.getFilteredTotal()*100).toFixed(1)}%`:"No expenses",trend:"stable",icon:"\u{1F3F7}\uFE0F"}]}viewCategoryDetails(e){this.router.navigate(["/expenses"],{queryParams:{category:e,filter:"category"}})}getMaxSpendingAmount(){let e=this.getSpendingByDay();return e.length===0?0:Math.max(...e.map(t=>t.amount))}getDayOfWeek(e){return new Date(e).toLocaleDateString("en-US",{weekday:"short"})}getMaxExpenseForCategory(e){let t=this.getExpensesByCategory(e);return t.length===0?0:Math.max(...t.map(r=>r.amount))}getCurrentMonthName(){return new Date().toLocaleDateString("en-US",{month:"long"})}getCurrentYear(){return new Date().getFullYear().toString()}getSelectedMonthName(){let e=parseInt(this.selectedMonth);return["January","February","March","April","May","June","July","August","September","October","November","December"][e]||"January"}getSelectedYear(){return this.selectedYear||new Date().getFullYear().toString()}availableMonths=[{value:"0",label:"January"},{value:"1",label:"February"},{value:"2",label:"March"},{value:"3",label:"April"},{value:"4",label:"May"},{value:"5",label:"June"},{value:"6",label:"July"},{value:"7",label:"August"},{value:"8",label:"September"},{value:"9",label:"October"},{value:"10",label:"November"},{value:"11",label:"December"}];availableYears=[];static \u0275fac=function(t){return new(t||n)(z(Ci),z(Ei),z(An),z(dt))};static \u0275cmp=Gt({type:n,selectors:[["app-dashboard"]],decls:86,vars:20,consts:[[1,"dashboard-container"],[1,"smart-header"],[1,"header-content"],[1,"header-left"],[1,"dashboard-title"],[1,"dashboard-subtitle"],["class","period-indicator",4,"ngIf"],[1,"quick-actions"],[1,"action-buttons"],["routerLink","/expenses",1,"action-btn","primary"],[1,"action-icon"],[1,"action-text"],[1,"action-btn","secondary",3,"click"],[1,"smart-filters"],[1,"filter-tabs"],["class","filter-tab",3,"active","click",4,"ngFor","ngForOf"],["class","custom-date-range",4,"ngIf"],[1,"summary-grid"],["class","summary-card",4,"ngFor","ngForOf"],["id","insights-section","class","insights-section",4,"ngIf"],[1,"content-grid"],[1,"content-card","category-section"],[1,"card-header"],[1,"header-icon"],[1,"header-title"],[1,"header-right"],[1,"filter-period"],[1,"total-amount"],[1,"card-body"],["class","category-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"content-card","recent-section"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],["class","expenses-list",4,"ngIf"],[1,"content-card","patterns-section"],[1,"pattern-section"],["class","pattern-chart",4,"ngIf"],["class","empty-state compact",4,"ngIf"],["class","top-expenses",4,"ngIf"],[1,"quick-actions-panel"],[1,"panel-header"],[1,"actions-grid"],["class","action-item",4,"ngFor","ngForOf"],[1,"period-indicator"],[1,"period-badge",3,"ngClass"],[1,"period-icon"],[1,"period-text"],["class","month-selector",4,"ngIf"],[1,"month-selector"],[1,"selector-group"],[1,"selector-label"],[1,"month-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"year-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"filter-tab",3,"click"],[1,"filter-label"],[1,"filter-description"],[1,"custom-date-range"],[1,"calendar-filter"],[1,"calendar-icon"],[1,"icon"],[1,"filter-btn",3,"click"],[1,"btn-icon"],[1,"btn-text"],[1,"summary-card"],[1,"card-icon"],[1,"card-title"],[1,"card-content"],[1,"card-value"],[1,"card-change"],[1,"change-icon"],[1,"change-text"],["id","insights-section",1,"insights-section"],[1,"section-header"],[1,"insights-grid"],[1,"insight-card","recommendations"],["class","recommendation-item",4,"ngFor","ngForOf"],[1,"insight-card","analytics"],[1,"analytics-grid"],[1,"analytics-item"],[1,"analytics-label"],[1,"analytics-value"],[1,"insight-card","categories"],["class","category-insight",4,"ngIf"],[1,"recommendation-item"],[1,"rec-priority"],[1,"rec-content"],[1,"category-insight"],[1,"category-list"],["class","category-item",3,"empty-category",4,"ngFor","ngForOf"],[1,"category-item"],[1,"category-info"],[1,"category-icon"],[1,"category-details"],[1,"category-name"],[1,"category-count"],["class","category-percentage",4,"ngIf"],[1,"category-insights"],[1,"insight-item"],[1,"category-amount"],[1,"amount-value"],[1,"category-actions"],["title","View Details",1,"action-btn","small","eye-icon-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z","fill","currentColor"],[1,"category-percentage"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-action"],["routerLink","/categories",1,"btn"],[1,"expenses-list"],["class","expense-item",4,"ngFor","ngForOf"],[1,"expense-item"],[1,"expense-info"],[1,"expense-icon"],[1,"expense-details"],[1,"expense-description"],[1,"expense-meta"],[1,"expense-date"],[1,"expense-category"],["class","expense-priority",3,"class",4,"ngIf"],[1,"expense-insights"],["class","insight-item",4,"ngIf"],[1,"expense-amount"],[1,"amount-actions"],["title","Edit",1,"btn-icon",3,"click"],["title","Delete",1,"btn-icon",3,"click"],[1,"expense-priority"],["routerLink","/expenses",1,"btn"],[1,"pattern-chart"],["class","chart-bar",3,"height",4,"ngFor","ngForOf"],[1,"chart-bar"],[1,"bar-tooltip"],[1,"tooltip-day"],[1,"tooltip-amount"],[1,"tooltip-count"],[1,"empty-state","compact"],[1,"top-expenses"],["class","top-expense",4,"ngFor","ngForOf"],[1,"top-expense"],[1,"rank"],[1,"expense-name"],[1,"action-item"],["class","action-card",3,"routerLink",4,"ngIf"],["class","action-card",3,"click",4,"ngIf"],[1,"action-card",3,"routerLink"],[1,"action-content"],[1,"action-card",3,"click"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),v(5,"\u{1F4CA} Smart Dashboard"),m(),g(6,"p",5),v(7,"Complete financial overview at a glance"),m(),te(8,vG,7,4,"div",6),m(),g(9,"div",7)(10,"div",8)(11,"button",9)(12,"span",10),v(13,"\u2795"),m(),g(14,"span",11),v(15,"Add Expense"),m()(),g(16,"button",12),re("click",function(){return r.exportData()}),g(17,"span",10),v(18,"\u{1F4E5}"),m(),g(19,"span",11),v(20,"Export Data"),m()(),g(21,"button",12),re("click",function(){return r.toggleInsights()}),g(22,"span",10),v(23),m(),g(24,"span",11),v(25),m()()()()()(),g(26,"div",13)(27,"div",14),te(28,CG,5,4,"button",15),m(),te(29,EG,10,0,"div",16),m(),g(30,"div",17),te(31,wG,14,7,"div",18),m(),te(32,SG,52,9,"div",19),g(33,"div",20)(34,"div",21)(35,"div",22)(36,"div",3)(37,"span",23),v(38,"\u{1F3F7}\uFE0F"),m(),g(39,"h5",24),v(40,"Category-wise Spending"),m()(),g(41,"div",25)(42,"span",26),v(43),m(),g(44,"span",27),v(45),Ke(46,"number"),m()()(),g(47,"div",28),te(48,MG,2,1,"div",29)(49,PG,10,0,"div",30),m()(),g(50,"div",31)(51,"div",22)(52,"div",3)(53,"span",23),v(54,"\u{1F4DD}"),m(),g(55,"h5",24),v(56,"Recent Expenses"),m()(),g(57,"div",25)(58,"button",32),re("click",function(){return r.viewAllExpenses()}),v(59," View All "),m()()(),g(60,"div",28),te(61,NG,2,1,"div",33)(62,kG,10,0,"div",30),m()(),g(63,"div",34)(64,"div",22)(65,"span",23),v(66,"\u{1F4C8}"),m(),g(67,"h5",24),v(68,"Spending Patterns"),m()(),g(69,"div",28)(70,"div",35)(71,"h6"),v(72,"Spending by Day of Week"),m(),te(73,LG,2,1,"div",36)(74,VG,7,0,"div",37),m(),g(75,"div",35)(76,"h6"),v(77,"Top 5 Expenses"),m(),te(78,UG,2,1,"div",38)(79,BG,7,0,"div",37),m()()()(),g(80,"div",39)(81,"div",40)(82,"h3"),v(83,"\u26A1 Quick Actions"),m()(),g(84,"div",41),te(85,HG,3,2,"div",42),m()()()),t&2&&(I(8),B("ngIf",r.selectedPeriod!=="all"),I(15),J(r.showInsights?"\u{1F4CA}":"\u{1F50D}"),I(2),J(r.showInsights?"Hide Insights":"Show Insights"),I(3),B("ngForOf",r.getSmartFilters()),I(),B("ngIf",r.selectedPeriod==="custom"),I(2),B("ngForOf",r.getQuickSummaryCards()),I(),B("ngIf",r.showInsights),I(11),J(r.getFilterLabel()),I(2),ve("\u20B9",nn(46,18,r.getFilteredTotal())),I(3),B("ngIf",r.getCategoriesSortedByExpense().length>0),I(),B("ngIf",r.getCategoriesSortedByExpense().length===0),I(12),B("ngIf",r.getRecentExpensesSorted().length>0),I(),B("ngIf",r.getRecentExpensesSorted().length===0),I(11),B("ngIf",r.getSpendingByDay().length>0&&r.getMaxSpendingAmount()>0),I(),B("ngIf",r.getSpendingByDay().length===0||r.getMaxSpendingAmount()===0),I(4),B("ngIf",r.getTopExpenses(5).length>0),I(),B("ngIf",r.getTopExpenses(5).length===0),I(6),B("ngForOf",r.getQuickActions()))},dependencies:[on,RC,Yr,_n,dr,ys,_s,vi,ur,qn,wE,Wo,kC,ea],styles:[`html[_ngcontent-%COMP%]{scroll-behavior:smooth}.dashboard-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f3e8ff,#e9d5ff,#ddd6fe);min-height:100vh;padding:1.5rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;color:#1e293b}.smart-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a855f7,#7c3aed,#6d28d9);border-radius:20px;padding:2.5rem;margin-bottom:2rem;box-shadow:0 10px 40px #a855f726}.smart-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:2rem}@media (max-width: 768px){.smart-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;gap:1.5rem}}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{flex:1}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .dashboard-title[_ngcontent-%COMP%]{color:#fff;font-size:2.25rem;font-weight:700;margin:0 0 .75rem;letter-spacing:-.025em}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .dashboard-subtitle[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1.125rem;margin:0 0 1.5rem;font-weight:400}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]{margin-top:1.5rem;text-align:center}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]{background:#ffffff26;border:1px solid rgba(255,255,255,.2);border-radius:50px;padding:.75rem 1.5rem;font-size:.875rem;font-weight:500;color:#fff;display:inline-flex;align-items:center;gap:.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .2s ease}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .period-icon[_ngcontent-%COMP%]{font-size:1rem}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .period-text[_ngcontent-%COMP%]{font-weight:500}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge.period-monthly[_ngcontent-%COMP%]{background:#22c55e33;border-color:#22c55e4d}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge.period-yearly[_ngcontent-%COMP%]{background:#3b82f633;border-color:#3b82f64d}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge.period-last30[_ngcontent-%COMP%]{background:#f59e0b33;border-color:#f59e0b4d}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge.period-last7[_ngcontent-%COMP%]{background:#10b98133;border-color:#10b9814d}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge.period-custom[_ngcontent-%COMP%]{background:#ef444433;border-color:#ef44444d}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]{margin-left:.5rem;display:flex;gap:.5rem;align-items:flex-end;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);max-width:280px;flex-wrap:wrap}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .selector-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#ffffffe6;text-transform:uppercase;letter-spacing:.5px;margin:0}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .month-select[_ngcontent-%COMP%], .smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .year-select[_ngcontent-%COMP%]{background:#fffffff2;border:1px solid rgba(255,255,255,.3);border-radius:6px;padding:.375rem 1.5rem .375rem .5rem;font-size:.8rem;font-weight:600;color:#1e293b;cursor:pointer;transition:all .2s ease;min-width:80px;appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");background-position:right .3rem center;background-repeat:no-repeat;background-size:1em}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .month-select[_ngcontent-%COMP%]:hover, .smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .year-select[_ngcontent-%COMP%]:hover{border-color:#ffffff80;background-color:#fff;transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .month-select[_ngcontent-%COMP%]:focus, .smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .year-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#fffc;background-color:#fff;box-shadow:0 0 0 3px #fff3}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .month-select[_ngcontent-%COMP%]{min-width:70px;max-width:90px}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .year-select[_ngcontent-%COMP%]{min-width:60px;max-width:75px}.smart-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}@media (max-width: 768px){.smart-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{justify-content:center}}.smart-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);color:#fff;padding:.75rem 1.25rem;border-radius:12px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.5rem;text-decoration:none;font-size:.875rem;flex:1;min-width:140px;justify-content:center}.smart-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-1px)}.smart-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-btn.primary[_ngcontent-%COMP%]{background:#fff3;border-color:#ffffff4d}.smart-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{font-size:1.125rem}.smart-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .action-text[_ngcontent-%COMP%]{font-size:.875rem}.smart-filters[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;margin-bottom:2rem;box-shadow:0 4px 20px #0000000d;border:1px solid #e2e8f0}.smart-filters[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:1rem}.smart-filters[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;color:#64748b;padding:.625rem 1.25rem;border-radius:10px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;flex-direction:column;align-items:center;gap:.25rem;font-size:.875rem}.smart-filters[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.smart-filters[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-color:#3b82f6;color:#fff;box-shadow:0 4px 15px #3b82f633}.smart-filters[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600}.smart-filters[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab[_ngcontent-%COMP%]   .filter-description[_ngcontent-%COMP%]{font-size:.75rem;opacity:.8}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]{border-top:1px solid #e2e8f0;padding-top:1.5rem;margin-top:1rem}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;justify-content:center}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:56px;height:56px;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-radius:14px;box-shadow:0 4px 15px #3b82f633;transition:all .2s ease}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.25rem;color:#fff}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);border:none;color:#fff;padding:.75rem 1.5rem;border-radius:12px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.5rem;box-shadow:0 4px 15px #3b82f633;font-size:.875rem}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 6px 20px #3b82f64d}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:1rem}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:.875rem}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin-bottom:2rem}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 4px 20px #0000000d;border:1px solid #e2e8f0;transition:all .2s ease;position:relative}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 30px #0000001a}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:1.75rem;color:#3b82f6}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#64748b;margin:0}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin-bottom:.5rem;letter-spacing:-.025em}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-change[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;font-weight:500}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-change.trend-up[_ngcontent-%COMP%]{color:#dc2626}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-change.trend-down[_ngcontent-%COMP%]{color:#16a34a}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-change.trend-stable[_ngcontent-%COMP%]{color:#64748b}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-change[_ngcontent-%COMP%]   .change-icon[_ngcontent-%COMP%]{font-size:1rem}.insights-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;margin-bottom:2rem;box-shadow:0 4px 20px #0000000d;border:1px solid #e2e8f0}.insights-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.insights-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#1e293b;font-weight:600;font-size:1.5rem}.insights-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;margin:0}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]{background:#f8fafc;border-radius:12px;padding:1.5rem;border:1px solid #e2e8f0}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:1.25rem;color:#3b82f6}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#1e293b}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .recommendation-item[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:.75rem 0;border-bottom:1px solid #e2e8f0}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .recommendation-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .recommendation-item[_ngcontent-%COMP%]   .rec-priority[_ngcontent-%COMP%]{width:3px;border-radius:2px}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .recommendation-item[_ngcontent-%COMP%]   .rec-priority.priority-high[_ngcontent-%COMP%]{background:#dc2626}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .recommendation-item[_ngcontent-%COMP%]   .rec-priority.priority-medium[_ngcontent-%COMP%]{background:#f59e0b}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .recommendation-item[_ngcontent-%COMP%]   .rec-priority.priority-low[_ngcontent-%COMP%]{background:#16a34a}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .recommendation-item[_ngcontent-%COMP%]   .rec-content[_ngcontent-%COMP%]{flex:1}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .recommendation-item[_ngcontent-%COMP%]   .rec-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:.875rem;font-weight:600;color:#1e293b}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .recommendation-item[_ngcontent-%COMP%]   .rec-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.75rem;color:#64748b}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .analytics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .analytics-grid[_ngcontent-%COMP%]   .analytics-item[_ngcontent-%COMP%]{text-align:center;padding:.75rem;background:#fff;border-radius:8px;border:1px solid #e2e8f0}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .analytics-grid[_ngcontent-%COMP%]   .analytics-item[_ngcontent-%COMP%]   .analytics-label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#64748b;margin-bottom:.25rem}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .analytics-grid[_ngcontent-%COMP%]   .analytics-item[_ngcontent-%COMP%]   .analytics-value[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:#1e293b}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .category-insight[_ngcontent-%COMP%]{padding:.75rem 0;border-bottom:1px solid #e2e8f0}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .category-insight[_ngcontent-%COMP%]:last-child{border-bottom:none}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .category-insight[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:.875rem;font-weight:600;color:#1e293b}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]   .insight-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .category-insight[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.75rem;color:#64748b}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem}@media (max-width: 1024px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.content-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 20px #0000000d;border:1px solid #e2e8f0;overflow:hidden;transition:all .2s ease}.content-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 30px #0000001a}.content-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#ffffffe6;border:1px solid rgba(255,255,255,.8);color:#3b82f6;font-size:.875rem;font-weight:500;padding:.5rem 1rem;border-radius:8px;transition:all .2s ease;text-decoration:none;display:inline-block;cursor:pointer}.content-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:#fff;border-color:#fff;transform:translateY(-1px);text-decoration:none;color:#3b82f6}.content-card[_ngcontent-%COMP%]   .btn.btn-sm[_ngcontent-%COMP%]{font-size:.75rem;padding:.375rem .75rem}.content-card[_ngcontent-%COMP%]   .btn.btn-outline-primary[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.8);color:#fff}.content-card[_ngcontent-%COMP%]   .btn.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#ffffffe6;color:#3b82f6;border-color:#fff}.content-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;padding:1.5rem;display:flex;align-items:center;justify-content:space-between}.content-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.content-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{font-size:1.25rem;opacity:.9}.content-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600}.content-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.content-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-period[_ngcontent-%COMP%]{font-size:.875rem;opacity:.8}.content-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;background:#ffffff26;padding:.5rem 1rem;border-radius:8px}.content-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{background:#f8fafc;border-radius:12px;padding:1.25rem;display:flex;align-items:center;justify-content:space-between;transition:all .2s ease;border:1px solid #e2e8f0}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:hover{background:#f1f5f9;transform:translate(2px)}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.25rem;color:#fff;box-shadow:0 2px 8px #0000001a}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-details[_ngcontent-%COMP%]{flex:1}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-details[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1e293b;margin-bottom:.25rem}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-details[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin-bottom:.25rem}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-details[_ngcontent-%COMP%]   .category-percentage[_ngcontent-%COMP%]{font-size:.75rem;color:#3b82f6;font-weight:500;margin-bottom:.5rem}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-details[_ngcontent-%COMP%]   .category-insights[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-details[_ngcontent-%COMP%]   .category-insights[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;background:#0000000d;padding:.25rem .5rem;border-radius:4px}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]{text-align:right}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:#1e293b;margin-bottom:.5rem}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1rem;cursor:pointer;padding:.25rem;border-radius:4px;transition:all .2s ease;color:#64748b}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:scale(1.1);color:#1e293b}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]   .action-btn.small[_ngcontent-%COMP%]{font-size:.875rem}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]   .eye-icon-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:var(--gradient-primary);color:#fff;border:none;border-radius:8px;padding:.5rem;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:var(--shadow-sm);min-width:32px;min-height:32px}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]   .eye-icon-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.05);box-shadow:var(--shadow-md),0 0 15px #6366f14d;background:var(--gradient-secondary)}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]   .eye-icon-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(.95)}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]   .eye-icon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:all .3s ease}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]   .category-actions[_ngcontent-%COMP%]   .eye-icon-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item.empty-category[_ngcontent-%COMP%]{background:#f8fafc;border:1px dashed #cbd5e1}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item.empty-category[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-details[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{color:#64748b}.category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item.empty-category[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-details[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%], .category-section[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item.empty-category[_ngcontent-%COMP%]   .category-amount[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{color:#94a3b8}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]{background:#f8fafc;border-radius:12px;padding:1.25rem;display:flex;align-items:center;justify-content:space-between;transition:all .2s ease;border:1px solid #e2e8f0}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]:hover{background:#f1f5f9;transform:translate(2px)}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.25rem;color:#fff;box-shadow:0 2px 8px #0000001a}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-details[_ngcontent-%COMP%]{flex:1}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-details[_ngcontent-%COMP%]   .expense-description[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1e293b;margin-bottom:.25rem}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-details[_ngcontent-%COMP%]   .expense-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-details[_ngcontent-%COMP%]   .expense-meta[_ngcontent-%COMP%]   .expense-date[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-details[_ngcontent-%COMP%]   .expense-meta[_ngcontent-%COMP%]   .expense-category[_ngcontent-%COMP%]{font-size:.875rem;color:#3b82f6;background:#3b82f61a;padding:.25rem .5rem;border-radius:4px}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-details[_ngcontent-%COMP%]   .expense-meta[_ngcontent-%COMP%]   .expense-priority[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem;border-radius:4px;font-weight:500}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-details[_ngcontent-%COMP%]   .expense-meta[_ngcontent-%COMP%]   .expense-priority.priority-high[_ngcontent-%COMP%]{background:#dc26261a;color:#dc2626}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-details[_ngcontent-%COMP%]   .expense-meta[_ngcontent-%COMP%]   .expense-priority.priority-medium[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-details[_ngcontent-%COMP%]   .expense-meta[_ngcontent-%COMP%]   .expense-priority.priority-low[_ngcontent-%COMP%]{background:#16a34a1a;color:#16a34a}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-details[_ngcontent-%COMP%]   .expense-insights[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:.5rem}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-details[_ngcontent-%COMP%]   .expense-insights[_ngcontent-%COMP%]   .insight-item[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;background:#0000000d;padding:.25rem .5rem;border-radius:4px}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-amount[_ngcontent-%COMP%]{text-align:right}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-amount[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:#1e293b;margin-bottom:.5rem}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-amount[_ngcontent-%COMP%]   .amount-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-amount[_ngcontent-%COMP%]   .amount-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;font-size:1rem;cursor:pointer;padding:.25rem;border-radius:4px;transition:all .2s ease;color:#64748b}.recent-section[_ngcontent-%COMP%]   .expenses-list[_ngcontent-%COMP%]   .expense-item[_ngcontent-%COMP%]   .expense-amount[_ngcontent-%COMP%]   .amount-actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:scale(1.1);color:#1e293b}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem 1.5rem;background:#f8fafc;border-radius:12px;border:1px dashed #cbd5e1;margin:1rem 0}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.75rem;opacity:.6;color:#64748b}.empty-state[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem;font-size:.9rem;font-weight:600}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0;font-size:.8rem}.empty-state[_ngcontent-%COMP%]   .empty-action[_ngcontent-%COMP%]{margin-top:1rem}.empty-state[_ngcontent-%COMP%]   .empty-action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;transition:all .2s ease;text-decoration:none;display:inline-block;cursor:pointer;font-size:.875rem}.empty-state[_ngcontent-%COMP%]   .empty-action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 15px #3b82f64d;text-decoration:none;color:#fff}.empty-state.compact[_ngcontent-%COMP%]{padding:1.5rem 1rem;margin:.5rem 0}.empty-state.compact[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem}.empty-state.compact[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.85rem;margin-bottom:.25rem}.empty-state.compact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]{margin-bottom:2rem}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1e293b;margin-bottom:1rem}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .pattern-chart[_ngcontent-%COMP%]{display:flex;align-items:end;justify-content:space-between;height:180px;gap:.5rem;margin-bottom:1rem}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .pattern-chart[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-radius:4px 4px 0 0;position:relative;transition:all .2s ease;min-height:20px}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .pattern-chart[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .pattern-chart[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]:hover   .bar-tooltip[_ngcontent-%COMP%]{opacity:1;visibility:visible}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .pattern-chart[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]   .bar-tooltip[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:50%;transform:translate(-50%);background:#1e293b;color:#fff;padding:.5rem;border-radius:6px;font-size:.75rem;white-space:nowrap;opacity:0;visibility:hidden;transition:all .2s ease;z-index:10}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .pattern-chart[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]   .bar-tooltip[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;transform:translate(-50%);border:4px solid transparent;border-top-color:#1e293b}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .pattern-chart[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]   .bar-tooltip[_ngcontent-%COMP%]   .tooltip-day[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.25rem}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .pattern-chart[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]   .bar-tooltip[_ngcontent-%COMP%]   .tooltip-amount[_ngcontent-%COMP%]{opacity:.9}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .pattern-chart[_ngcontent-%COMP%]   .chart-bar[_ngcontent-%COMP%]   .bar-tooltip[_ngcontent-%COMP%]   .tooltip-count[_ngcontent-%COMP%]{opacity:.8;font-size:.7rem}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .top-expenses[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .top-expenses[_ngcontent-%COMP%]   .top-expense[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem;background:#f8fafc;border-radius:8px;border:1px solid #e2e8f0}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .top-expenses[_ngcontent-%COMP%]   .top-expense[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{width:24px;height:24px;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:600}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .top-expenses[_ngcontent-%COMP%]   .top-expense[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]{flex:1}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .top-expenses[_ngcontent-%COMP%]   .top-expense[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1e293b;margin-bottom:.25rem}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .top-expenses[_ngcontent-%COMP%]   .top-expense[_ngcontent-%COMP%]   .expense-info[_ngcontent-%COMP%]   .expense-category[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}.patterns-section[_ngcontent-%COMP%]   .pattern-section[_ngcontent-%COMP%]   .top-expenses[_ngcontent-%COMP%]   .top-expense[_ngcontent-%COMP%]   .expense-amount[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#1e293b}.quick-actions-panel[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 4px 20px #0000000d;border:1px solid #e2e8f0;margin-top:2rem}.quick-actions-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.quick-actions-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#1e293b}.quick-actions-panel[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}@media (max-width: 768px){.quick-actions-panel[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.quick-actions-panel[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:1.5rem;display:flex;align-items:center;gap:1rem;transition:all .2s ease;cursor:pointer;text-decoration:none;color:inherit;height:100%;width:100%}.quick-actions-panel[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover{background:#f1f5f9;transform:translateY(-1px);box-shadow:0 4px 15px #0000001a;text-decoration:none;color:inherit}.quick-actions-panel[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0;color:#3b82f6}.quick-actions-panel[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-content[_ngcontent-%COMP%]{flex:1;text-align:left}.quick-actions-panel[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1rem;font-weight:600;color:#1e293b;text-align:left}.quick-actions-panel[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#64748b;text-align:left}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:1rem}.smart-header[_ngcontent-%COMP%]{padding:1.5rem}.smart-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.smart-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .dashboard-title[_ngcontent-%COMP%]{font-size:1.75rem}.smart-header[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]{margin-left:.25rem;gap:.375rem;padding:.375rem;max-width:240px}.smart-header[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]{gap:.25rem}.smart-header[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .selector-label[_ngcontent-%COMP%]{font-size:.65rem}.smart-header[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .month-select[_ngcontent-%COMP%], .smart-header[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .year-select[_ngcontent-%COMP%]{padding:.25rem 1.25rem .25rem .375rem;font-size:.75rem;min-width:60px}.smart-header[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .month-select[_ngcontent-%COMP%]{min-width:60px;max-width:75px}.smart-header[_ngcontent-%COMP%]   .period-indicator[_ngcontent-%COMP%]   .period-badge[_ngcontent-%COMP%]   .month-selector[_ngcontent-%COMP%]   .selector-group[_ngcontent-%COMP%]   .year-select[_ngcontent-%COMP%]{min-width:50px;max-width:65px}.smart-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{justify-content:center}.smart-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.75rem;flex:1;min-width:120px}.smart-filters[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]{flex-direction:column}.smart-filters[_ngcontent-%COMP%]   .filter-tabs[_ngcontent-%COMP%]   .filter-tab[_ngcontent-%COMP%]{text-align:center}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]{width:48px;height:48px}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]   .calendar-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.125rem}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]{padding:.625rem 1.25rem}.smart-filters[_ngcontent-%COMP%]   .custom-date-range[_ngcontent-%COMP%]   .calendar-filter[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:.75rem}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.summary-grid[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%], .insights-section[_ngcontent-%COMP%]{padding:1.5rem}.insights-section[_ngcontent-%COMP%]   .insights-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.quick-actions-panel[_ngcontent-%COMP%]{padding:1.5rem}.quick-actions-panel[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}`]})};var qG=n=>({background:n});function WG(n,e){if(n&1&&(g(0,"option",59),v(1),m()),n&2){let t=e.$implicit;B("value",t.id),I(),mn(" ",t.icon," ",t.name," ")}}function GG(n,e){if(n&1){let t=Ve();g(0,"button",60),re("click",function(){W(t);let i=$();return G(i.clearCategory())}),v(1," \u2715 "),m()}}function KG(n,e){if(n&1){let t=Ve();g(0,"button",61),re("click",function(){W(t);let i=$();return G(i.cancelEdit())}),g(1,"span",34),v(2,"\u274C"),m(),g(3,"span",35),v(4,"Cancel"),m()()}}function YG(n,e){if(n&1){let t=Ve();g(0,"div",62)(1,"span",63),v(2),g(3,"button",64),re("click",function(){W(t);let i=$();return G(i.clearCategoryFilter())}),v(4," \u2715 "),m()()()}if(n&2){let t=$();I(2),mn(" ",t.getCategoryIcon(t.filterCategory)," ",t.getCategoryName(t.filterCategory)," ")}}function QG(n,e){if(n&1&&(g(0,"option",59),v(1),m()),n&2){let t=e.$implicit;B("value",t.id),I(),mn("",t.icon," ",t.name)}}function ZG(n,e){if(n&1){let t=Ve();g(0,"div",67)(1,"div",68)(2,"div",69),v(3),Ke(4,"currency"),m(),g(5,"div",70)(6,"span",71),v(7),m()()(),g(8,"div",72)(9,"div",73),v(10),Ke(11,"date"),m(),g(12,"div",74),v(13),m()(),g(14,"div",75)(15,"button",76),re("click",function(){let i=W(t).$implicit,o=$(2);return G(o.editExpense(i))}),g(16,"span",77),v(17,"\u270F\uFE0F"),m()(),g(18,"button",78),re("click",function(){let i=W(t).$implicit,o=$(2);return G(o.deleteExpense(i))}),g(19,"span",77),v(20,"\u{1F5D1}\uFE0F"),m()()()()}if(n&2){let t=e.$implicit,r=e.index,i=$(2);rr("animation-delay",r*.1+"s"),I(3),J(yn(4,8,t.amount,"INR")),I(3),B("ngStyle",xu(13,qG,i.getCategoryColor(t.categoryId))),I(),mn(" ",i.getCategoryIcon(t.categoryId)," ",i.getCategoryName(t.categoryId)," "),I(3),J(nn(11,11,t.date)),I(3),J(t.description||"No description")}}function JG(n,e){if(n&1&&(g(0,"div",65),te(1,ZG,21,15,"div",66),m()),n&2){let t=$();I(),B("ngForOf",t.getFilteredExpenses())}}function XG(n,e){n&1&&(g(0,"div",79)(1,"div",80),v(2,"\u{1F4CB}"),m(),g(3,"h6"),v(4,"No expenses found"),m(),g(5,"p"),v(6,"Add your first expense using the form above!"),m()())}var Ry=class n{constructor(e,t,r,i,o){this.expenseService=e;this.categoryService=t;this.firebaseService=r;this.router=i;this.route=o}expenses=[];categories=[];newExpense={id:"",description:"",amount:0,date:new Date().toISOString().split("T")[0],categoryId:"",paymentMethod:"",tags:[],priority:"medium",notes:"",location:"",receiptNumber:""};amountInput="";filterAmount="";filterCategory="";filterDate="";filterDateFrom="";filterDateTo="";sortBy="date";sortOrder="desc";isEditMode=!1;editingExpenseId="";subscription=new He;ngOnInit(){this.route.queryParams.subscribe(e=>{let t=e.edit,r=e.mode,i=e.category,o=e.filter;t&&r==="edit"&&(this.isEditMode=!0,this.editingExpenseId=t,console.log("Edit mode activated for expense:",t)),i&&o==="category"&&(this.filterCategory=i,console.log("Category filter applied:",i))}),this.subscription.add(this.firebaseService.expenses$.subscribe(e=>{this.expenses=e,console.log(`Received ${e.length} expenses from Firebase`),this.isEditMode&&this.editingExpenseId&&this.loadExpenseForEditing()})),this.subscription.add(this.firebaseService.categories$.subscribe(e=>{this.categories=e,console.log(`Received ${e.length} categories from Firebase`)})),this.loadData()}ngOnDestroy(){this.subscription.unsubscribe()}loadData(){return E(this,null,function*(){try{console.log("Loading data from Firebase...");let e=yield this.expenseService.getAll(),t=yield this.categoryService.getAll();this.expenses=e,this.categories=t,console.log(`Loaded ${this.expenses.length} expenses and ${this.categories.length} categories`)}catch(e){console.error("Error loading data:",e)}finally{}})}loadExpenseForEditing(){let e=this.expenses.find(t=>t.id===this.editingExpenseId);e?(this.newExpense=V({},e),this.amountInput=e.amount.toString(),console.log("Loaded expense for editing:",e)):(console.error("Expense not found for editing:",this.editingExpenseId),this.isEditMode=!1,this.editingExpenseId="")}addExpense(){return E(this,null,function*(){this.validateExpense()&&(this.isEditMode?yield this.saveExpenseChanges():yield this.createNewExpense())})}createNewExpense(){return E(this,null,function*(){try{let e=parseFloat(this.amountInput);if(isNaN(e)||e<=0){alert("Please enter a valid amount greater than 0.");return}let t={description:this.newExpense.description,amount:e,date:this.newExpense.date,categoryId:this.newExpense.categoryId,paymentMethod:this.newExpense.paymentMethod||"Cash",tags:this.newExpense.tags||[],priority:this.newExpense.priority||"medium",notes:this.newExpense.notes||"",location:this.newExpense.location||"",receiptNumber:this.newExpense.receiptNumber||""},r=yield this.expenseService.add(t);console.log(`Expense added with Firebase ID: ${r}`),this.resetForm(),this.checkAchievements()}catch(e){console.error("Error adding expense:",e)}})}saveExpenseChanges(){return E(this,null,function*(){try{let e=parseFloat(this.amountInput);if(isNaN(e)||e<=0){alert("Please enter a valid amount greater than 0.");return}let t=ce(V({},this.newExpense),{amount:e});yield this.expenseService.update(t),console.log("Expense updated successfully"),this.isEditMode=!1,this.editingExpenseId="",this.resetForm(),this.router.navigate(["/expenses"])}catch(e){console.error("Error updating expense:",e)}})}cancelEdit(){this.isEditMode=!1,this.editingExpenseId="",this.resetForm(),this.router.navigate(["/expenses"])}editExpense(e){return E(this,null,function*(){try{let t=this.getCategoryName(e.categoryId),r=window.prompt("Description:",e.description)||e.description,i=window.prompt("Amount (\u20B9):",e.amount.toString())||e.amount.toString(),o=window.prompt("Date (YYYY-MM-DD):",e.date)||e.date,s=this.createCategorySelectionDialog(e.categoryId);if(s===null)return;let a=parseFloat(i);if(isNaN(a)||a<=0){alert("Invalid Amount! Please enter a valid number greater than 0.");return}if(!/^\d{4}-\d{2}-\d{2}$/.test(o)){alert("Invalid Date! Please enter date in YYYY-MM-DD format (e.g., 2024-01-15).");return}let u=this.categories.find(y=>y.id===s);if(!u){alert(`Error: Category with ID "${s}" does not exist. Please select a valid category from the list.`);return}let d=ce(V({},e),{description:r,amount:a,date:o,categoryId:s});yield this.expenseService.update(d);let f=`Expense updated successfully!

Description: ${r}
Amount: \u20B9${a}
Date: ${o}
Category: ${u.icon} ${u.name}`;alert(f)}catch(t){console.error("Error editing expense:",t),alert("Error updating expense. Please try again.")}finally{}})}createCategorySelectionDialog(e){if(this.categories.length===0)return alert("No categories available. Please create some categories first before editing expenses."),null;let t=this.categories.find(d=>d.id===e),i=`Current category: ${t?`${t.icon} ${t.name}`:"Unknown (Category not found)"}

`;i+=`Available categories:
`,t?i+=`0. Keep current category
`:i+=`\u26A0\uFE0F Current category not found - please select a new category

`,this.categories.forEach((d,f)=>{i+=`${f+1}. ${d.icon} ${d.name}
`});let o=t?`0-${this.categories.length}`:`1-${this.categories.length}`;i+=`
Enter the number of your choice (${o}):`;let s=window.prompt(i,"0");if(s===null)return null;let a=parseInt(s),c=t?this.categories.length:this.categories.length,u=t?0:1;if(isNaN(a)||a<u||a>c){let d=t?`0-${this.categories.length}`:`1-${this.categories.length}`;return alert(`Invalid choice. Please enter a number between ${d}`),this.createCategorySelectionDialog(e)}return a===0&&t?e:this.categories[a-1].id}deleteExpense(e){return E(this,null,function*(){if(window.confirm(`Are you sure you want to delete "${e.description}" (\u20B9${e.amount})?`))try{yield this.expenseService.delete(e.id)}catch(r){console.error("Error deleting expense:",r)}finally{}})}validateExpense(){if(!this.newExpense.description?.trim())return alert("Please enter a description."),!1;let e=parseFloat(this.amountInput);return isNaN(e)||e<=0?(alert("Please enter a valid amount greater than 0."),!1):this.newExpense.categoryId?this.newExpense.date?!0:(alert("Please select a date."),!1):(alert("Please select a category."),!1)}isFormValid(){let e=parseFloat(this.amountInput);return!!(this.newExpense.description?.trim()&&this.amountInput&&!isNaN(e)&&e>0&&this.newExpense.categoryId&&this.newExpense.date)}resetForm(){this.newExpense={id:"",description:"",amount:0,date:new Date().toISOString().split("T")[0],categoryId:"",paymentMethod:"",tags:[],priority:"medium",notes:"",location:"",receiptNumber:""},this.amountInput=""}getFilteredExpenses(){let e=[...this.expenses];if(this.filterAmount){let t=parseFloat(this.filterAmount);isNaN(t)||(e=e.filter(r=>r.amount>=t))}return this.filterCategory&&(e=e.filter(t=>t.categoryId===this.filterCategory)),this.filterDateFrom||this.filterDateTo?e=e.filter(t=>{let r=new Date(t.date),i=this.filterDateFrom?new Date(this.filterDateFrom):null,o=this.filterDateTo?new Date(this.filterDateTo):null;return i&&o?r>=i&&r<=o:i?r>=i:o?r<=o:!0}):this.filterDate&&(e=e.filter(t=>t.date===this.filterDate)),e.sort((t,r)=>{let i,o;switch(this.sortBy){case"date":i=new Date(t.date).getTime(),o=new Date(r.date).getTime();break;case"amount":i=t.amount,o=r.amount;break;case"description":i=(t.description||"").toLowerCase(),o=(r.description||"").toLowerCase();break;default:i=new Date(t.date).getTime(),o=new Date(r.date).getTime()}return this.sortOrder==="asc"?i>o?1:-1:i<o?1:-1}),e}getCategoryName(e){return this.categories.find(r=>r.id===e)?.name||"Unknown"}getCategoryColor(e){return this.categories.find(r=>r.id===e)?.color||"#999"}getCategoryIcon(e){return this.categories.find(r=>r.id===e)?.icon||"\u{1F4CC}"}clearFilters(){this.filterAmount="",this.filterCategory="",this.filterDate="",this.filterDateFrom="",this.filterDateTo=""}clearCategoryFilter(){this.filterCategory="",this.router.navigate([],{queryParams:{},queryParamsHandling:"merge"})}clearCategory(){this.newExpense.categoryId=""}onAmountInput(e){let t=e.target,r=t.value;r=r.replace(/[^0-9.]/g,"");let i=r.split(".");i.length>2&&(r=i[0]+"."+i.slice(1).join("")),i.length===2&&i[1].length>2&&(r=i[0]+"."+i[1].substring(0,2)),t.value=r,this.amountInput=r}onAmountKeypress(e){let t=e.key,i=e.target.value;if(!([8,9,27,13,46].indexOf(e.keyCode)!==-1||e.keyCode===65&&e.ctrlKey===!0||e.keyCode===67&&e.ctrlKey===!0||e.keyCode===86&&e.ctrlKey===!0||e.keyCode===88&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39)){if(t>="0"&&t<="9"||t==="."){if(t==="."&&i.includes(".")){e.preventDefault();return}return}e.preventDefault()}}onFilterAmountInput(e){let t=e.target,r=t.value;r=r.replace(/[^0-9.]/g,"");let i=r.split(".");i.length>2&&(r=i[0]+"."+i.slice(1).join("")),i.length===2&&i[1].length>2&&(r=i[0]+"."+i[1].substring(0,2)),t.value=r,this.filterAmount=r}onFilterAmountKeypress(e){let t=e.key,i=e.target.value;if(!([8,9,27,13,46].indexOf(e.keyCode)!==-1||e.keyCode===65&&e.ctrlKey===!0||e.keyCode===67&&e.ctrlKey===!0||e.keyCode===86&&e.ctrlKey===!0||e.keyCode===88&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39)){if(t>="0"&&t<="9"||t==="."){if(t==="."&&i.includes(".")){e.preventDefault();return}return}e.preventDefault()}}getTotalAmount(){return this.getFilteredExpenses().reduce((e,t)=>e+t.amount,0)}getAverageAmount(){let e=this.getFilteredExpenses();return e.length>0?e.reduce((t,r)=>t+r.amount,0)/e.length:0}getExpenseCount(){return this.getFilteredExpenses().length}checkAchievements(){let e=this.expenses.length;e===10?alert("Congratulations! You've logged your 10th expense. Keep up the great tracking!"):e===50?alert("Amazing! You've logged 50 expenses. You're becoming a tracking expert!"):e===100&&alert("Incredible! You've logged 100 expenses. You're a financial tracking master!");let t={};this.expenses.forEach(r=>{t[r.categoryId]=(t[r.categoryId]||0)+1}),Object.entries(t).forEach(([r,i])=>{if(i===10){let o=this.getCategoryName(r);alert(`${o} mastery achieved! You've logged 10 expenses in this category.`)}}),this.checkDailyStreak()}checkDailyStreak(){let e=new Date().toISOString().split("T")[0],t=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],r=this.expenses.some(o=>o.date===e),i=this.expenses.some(o=>o.date===t);if(r&&i){let o=1,s=new Date(Date.now()-24*60*60*1e3);for(;;){let a=s.toISOString().split("T")[0];if(this.expenses.some(u=>u.date===a))o++,s.setDate(s.getDate()-1);else break}o>=7&&alert(`Daily streak of ${o} days achieved! Keep it up!`)}}generateId(){return Math.random().toString(36).substr(2,9)}getMonthlyExpenses(){let e={};return this.expenses.forEach(t=>{let r=new Date(t.date),i=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;e[i]||(e[i]=[]),e[i].push(t)}),e}getCurrentMonthExpenses(){let e=new Date,t=e.getMonth(),r=e.getFullYear();return this.expenses.filter(i=>{let o=new Date(i.date);return o.getMonth()===t&&o.getFullYear()===r})}getCurrentMonthTotal(){return this.getCurrentMonthExpenses().reduce((e,t)=>e+t.amount,0)}getPreviousMonthExpenses(){let e=new Date,t=e.getMonth()===0?11:e.getMonth()-1,r=e.getMonth()===0?e.getFullYear()-1:e.getFullYear();return this.expenses.filter(i=>{let o=new Date(i.date);return o.getMonth()===t&&o.getFullYear()===r})}getPreviousMonthTotal(){return this.getPreviousMonthExpenses().reduce((e,t)=>e+t.amount,0)}getMonthlyComparison(){let e=this.getCurrentMonthTotal(),t=this.getPreviousMonthTotal();if(t===0)return{change:0,percentage:0,hasPreviousData:!1};let r=e-t,i=r/t*100;return{change:r,percentage:i,hasPreviousData:!0}}getMonthlyReport(){let e=this.getMonthlyExpenses(),t=[];return Object.entries(e).forEach(([r,i])=>{let o=i.reduce((c,u)=>c+u.amount,0),s=o/i.length,a=this.getCategoryBreakdown(i);t.push({month:r,total:o,average:s,count:i.length,categoryBreakdown:a})}),t.sort((r,i)=>i.month.localeCompare(r.month))}getCategoryBreakdown(e){let t={};return e.forEach(r=>{t[r.categoryId]=(t[r.categoryId]||0)+r.amount}),Object.entries(t).map(([r,i])=>({categoryId:r,categoryName:this.getCategoryName(r),amount:i,percentage:i/e.reduce((o,s)=>o+s.amount,0)*100}))}validateCategoryExists(e){return this.categories.some(t=>t.id===e)}getCategoryById(e){return this.categories.find(r=>r.id===e)||null}getExpensesWithUnknownCategories(){return this.expenses.filter(e=>!this.categories.find(t=>t.id===e.categoryId))}getUnknownCategoryCount(){return this.getExpensesWithUnknownCategories().length}static \u0275fac=function(t){return new(t||n)(z(Ci),z(Ei),z(An),z(dt),z(sr))};static \u0275cmp=Gt({type:n,selectors:[["app-expenses"]],decls:112,vars:28,consts:[["expenseForm","ngForm"],["noExpenses",""],[1,"container-fluid","px-4","py-3"],[1,"page-header","mb-4"],[1,"d-flex","align-items-center"],[1,"header-icon","me-3"],[1,"fs-1"],[1,"page-title","mb-1"],[1,"mb-0"],[1,"add-expense-card","mb-4"],[1,"card-header-modern"],[1,"header-icon-small","me-2"],[1,"card-body-modern"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","expenseAmount",1,"form-label-modern"],[1,"input-group-modern"],[1,"input-group-text-modern"],["type","text","id","expenseAmount","placeholder","0.00","name","amount","required","",1,"form-control-modern",3,"ngModelChange","input","keypress","ngModel"],["for","expenseDate",1,"form-label-modern"],["type","date","id","expenseDate","name","date","required","",1,"form-control-modern",3,"ngModelChange","ngModel"],["for","expenseCategory",1,"form-label-modern"],[1,"category-select-container"],["id","expenseCategory","name","categoryId","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","",3,"selected"],[3,"value",4,"ngFor","ngForOf"],["type","button","class","clear-category-btn","title","Clear selection",3,"click",4,"ngIf"],["for","expenseDescription",1,"form-label-modern"],["type","text","id","expenseDescription","placeholder","e.g., Lunch at restaurant, Uber ride, Movie ticket, Groceries, etc.","name","description",1,"form-control-modern",3,"ngModelChange","ngModel"],[1,"form-group","button-group"],[1,"form-label-modern"],[1,"d-flex","gap-2"],["type","submit",1,"btn-add-expense",3,"disabled"],[1,"btn-icon"],[1,"btn-text"],["type","button","class","btn-cancel",3,"click",4,"ngIf"],[1,"filters-card","mb-4"],[1,"d-flex","align-items-center","justify-content-between"],["class","active-filter-indicator",4,"ngIf"],[1,"filters-row"],[1,"filter-group"],["for","filterCategory",1,"form-label-modern"],["id","filterCategory",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["for","filterDateFrom",1,"form-label-modern"],["type","date","id","filterDateFrom",1,"form-control-modern",3,"ngModelChange","ngModel"],["for","filterDateTo",1,"form-label-modern"],["type","date","id","filterDateTo",1,"form-control-modern",3,"ngModelChange","ngModel"],["for","filterAmount",1,"form-label-modern"],["type","text","id","filterAmount","placeholder","0",1,"form-control-modern",3,"ngModelChange","input","keypress","ngModel"],[1,"filter-group","button-group"],["type","button",1,"btn-clear-filters",3,"click"],[1,"expenses-list-card"],[1,"d-flex","justify-content-between","align-items-center"],[1,"expenses-summary"],[1,"total-amount"],[1,"expenses-count"],["class","expenses-list",4,"ngIf","ngIfElse"],[3,"value"],["type","button","title","Clear selection",1,"clear-category-btn",3,"click"],["type","button",1,"btn-cancel",3,"click"],[1,"active-filter-indicator"],[1,"filter-badge"],["title","Clear category filter",1,"clear-filter-btn",3,"click"],[1,"expenses-list"],["class","expense-item",3,"animation-delay",4,"ngFor","ngForOf"],[1,"expense-item"],[1,"expense-main"],[1,"expense-amount"],[1,"expense-category"],[1,"category-badge",3,"ngStyle"],[1,"expense-details"],[1,"expense-date"],[1,"expense-description"],[1,"expense-actions"],["title","Edit",1,"btn-action","edit-btn",3,"click"],[1,"action-icon"],["title","Delete",1,"btn-action","delete-btn",3,"click"],[1,"no-expenses"],[1,"no-expenses-icon"]],template:function(t,r){if(t&1){let i=Ve();g(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"span",6),v(5,"\u{1F4B8}"),m()(),g(6,"div")(7,"h1",7),v(8),m(),g(9,"p",8),v(10),m()()()(),g(11,"div",9)(12,"div",10)(13,"div",4)(14,"span",11),v(15),m(),g(16,"h5",8),v(17),m()()(),g(18,"div",12)(19,"form",13,0),re("ngSubmit",function(){return W(i),G(r.addExpense())}),g(21,"div",14)(22,"div",15)(23,"label",16),v(24,"Amount"),m(),g(25,"div",17)(26,"span",18),v(27,"\u20B9"),m(),g(28,"input",19),Oe("ngModelChange",function(s){return W(i),Ne(r.amountInput,s)||(r.amountInput=s),G(s)}),re("input",function(s){return W(i),G(r.onAmountInput(s))})("keypress",function(s){return W(i),G(r.onAmountKeypress(s))}),m()()(),g(29,"div",15)(30,"label",20),v(31,"Date"),m(),g(32,"input",21),Oe("ngModelChange",function(s){return W(i),Ne(r.newExpense.date,s)||(r.newExpense.date=s),G(s)}),m()(),g(33,"div",15)(34,"label",22),v(35,"Category"),m(),g(36,"div",23)(37,"select",24),Oe("ngModelChange",function(s){return W(i),Ne(r.newExpense.categoryId,s)||(r.newExpense.categoryId=s),G(s)}),g(38,"option",25),v(39,"\u{1F3F7}\uFE0F Select a category"),m(),te(40,WG,2,3,"option",26),m(),te(41,GG,2,0,"button",27),m()(),g(42,"div",15)(43,"label",28),v(44,"Description"),m(),g(45,"input",29),Oe("ngModelChange",function(s){return W(i),Ne(r.newExpense.description,s)||(r.newExpense.description=s),G(s)}),m()(),g(46,"div",30)(47,"label",31),v(48,"\xA0"),m(),g(49,"div",32)(50,"button",33)(51,"span",34),v(52),m(),g(53,"span",35),v(54),m()(),te(55,KG,5,0,"button",36),m()()()()()(),g(56,"div",37)(57,"div",10)(58,"div",38)(59,"div",4)(60,"span",11),v(61,"\u{1F50D}"),m(),g(62,"h5",8),v(63,"Filters"),m()(),te(64,YG,5,2,"div",39),m()(),g(65,"div",12)(66,"div",40)(67,"div",41)(68,"label",42),v(69,"Category"),m(),g(70,"select",43),Oe("ngModelChange",function(s){return W(i),Ne(r.filterCategory,s)||(r.filterCategory=s),G(s)}),g(71,"option",44),v(72,"\u{1F3F7}\uFE0F All Categories"),m(),te(73,QG,2,3,"option",26),m()(),g(74,"div",41)(75,"label",45),v(76,"From Date"),m(),g(77,"input",46),Oe("ngModelChange",function(s){return W(i),Ne(r.filterDateFrom,s)||(r.filterDateFrom=s),G(s)}),m()(),g(78,"div",41)(79,"label",47),v(80,"To Date"),m(),g(81,"input",48),Oe("ngModelChange",function(s){return W(i),Ne(r.filterDateTo,s)||(r.filterDateTo=s),G(s)}),m()(),g(82,"div",41)(83,"label",49),v(84,"Min Amount"),m(),g(85,"input",50),Oe("ngModelChange",function(s){return W(i),Ne(r.filterAmount,s)||(r.filterAmount=s),G(s)}),re("input",function(s){return W(i),G(r.onFilterAmountInput(s))})("keypress",function(s){return W(i),G(r.onFilterAmountKeypress(s))}),m()(),g(86,"div",51)(87,"label",31),v(88,"\xA0"),m(),g(89,"button",52),re("click",function(){return W(i),G(r.clearFilters())}),g(90,"span",34),v(91,"\u{1F504}"),m(),g(92,"span",35),v(93,"Clear Filters"),m()()()()()(),g(94,"div",53)(95,"div",10)(96,"div",54)(97,"div",4)(98,"span",11),v(99,"\u{1F4CB}"),m(),g(100,"h5",8),v(101,"All Expenses"),m()(),g(102,"div",55)(103,"div",56),v(104),Ke(105,"currency"),m(),g(106,"div",57),v(107),m()()()(),g(108,"div",12),te(109,JG,2,1,"div",58)(110,XG,7,0,"ng-template",null,1,oC),m()()()}if(t&2){let i=Qs(111);I(8),ve(" ",r.filterCategory&&r.getCategoryName(r.filterCategory)?r.getCategoryName(r.filterCategory)+" Expenses":"Expenses"," "),I(2),ve(" ",r.filterCategory&&r.getCategoryName(r.filterCategory)?"Viewing expenses for "+r.getCategoryName(r.filterCategory):"Track and manage your daily expenses"," "),I(5),J(r.isEditMode?"\u270F\uFE0F":"\u2795"),I(2),J(r.isEditMode?"Edit Expense":"Add New Expense"),I(11),Ae("ngModel",r.amountInput),I(4),Ae("ngModel",r.newExpense.date),I(5),Ae("ngModel",r.newExpense.categoryId),I(),B("selected",!r.newExpense.categoryId),I(2),B("ngForOf",r.categories),I(),B("ngIf",r.newExpense.categoryId),I(4),Ae("ngModel",r.newExpense.description),I(5),B("disabled",!r.isFormValid()),I(2),J(r.isEditMode?"\u{1F4BE}":"\u2795"),I(2),J(r.isEditMode?"Save Changes":"Add Expense"),I(),B("ngIf",r.isEditMode),I(9),B("ngIf",r.filterCategory&&r.getCategoryName(r.filterCategory)),I(6),Ae("ngModel",r.filterCategory),I(3),B("ngForOf",r.categories),I(4),Ae("ngModel",r.filterDateFrom),I(4),Ae("ngModel",r.filterDateTo),I(4),Ae("ngModel",r.filterAmount),I(19),J(yn(105,25,r.getTotalAmount(),"INR")),I(3),ve("",r.getFilteredExpenses().length," expenses"),I(2),B("ngIf",r.getFilteredExpenses().length>0)("ngIfElse",i)}},dependencies:[on,Yr,_n,Lu,dr,ms,ys,_s,_i,vi,ur,gs,fo,qn,ho,Vu,ea],styles:[`.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b6b9b,#b76bb7);color:#fff;padding:2rem;border-radius:15px;margin-bottom:2rem;box-shadow:0 8px 25px #9b6b9b26}.header-icon[_ngcontent-%COMP%]{background:#fff3;border-radius:50%;width:60px;height:60px;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.page-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.1)}.page-header[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-weight:500}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;align-items:start;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-label-modern[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:.5rem;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.form-control-modern[_ngcontent-%COMP%]{height:50px;border:2px solid #e9ecef;border-radius:12px;padding:.75rem 1rem;font-size:1rem;transition:all .3s ease;background:#fff}.form-control-modern[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 .2rem #667eea40;outline:none}.input-group-modern[_ngcontent-%COMP%]{display:flex;align-items:center;height:50px;border:2px solid #e9ecef;border-radius:12px;overflow:hidden;transition:all .3s ease}.input-group-modern[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);box-shadow:0 0 0 .2rem #667eea40}.input-group-text-modern[_ngcontent-%COMP%]{background:#f8f9fa;border:none;padding:.75rem 1rem;font-weight:600;color:#666;border-right:2px solid #e9ecef}.input-group-modern[_ngcontent-%COMP%]   .form-control-modern[_ngcontent-%COMP%]{border:none;border-radius:0;flex-grow:1}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}.btn-add-expense[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);color:#fff;border:none;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600;display:inline-flex;align-items:center;gap:.5rem;transition:all .3s ease;cursor:pointer;box-shadow:0 5px 20px #ff6b354d;height:50px;white-space:nowrap}.btn-add-expense[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #ff6b3566}.btn-add-expense[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.add-expense-card[_ngcontent-%COMP%], .filters-card[_ngcontent-%COMP%], .expenses-list-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fff8f0);border-radius:20px;box-shadow:0 10px 30px #0000001a;border:1px solid #ffe4b3;overflow:hidden;transition:transform .3s ease,box-shadow .3s ease;margin-bottom:2rem}.add-expense-card[_ngcontent-%COMP%]:hover, .filters-card[_ngcontent-%COMP%]:hover, .expenses-list-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 40px #00000026}.card-header-modern[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fa709a,#fee140);color:#fff;padding:1.5rem 2rem;border:none;position:relative}.card-header-modern[_ngcontent-%COMP%]   .active-filter-indicator[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]{background:#fff3;border:1px solid rgba(255,255,255,.3);border-radius:20px;padding:.5rem 1rem;font-size:.9rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.card-header-modern[_ngcontent-%COMP%]   .active-filter-indicator[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]   .clear-filter-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:.8rem;cursor:pointer;padding:.2rem;border-radius:50%;transition:all .2s ease}.card-header-modern[_ngcontent-%COMP%]   .active-filter-indicator[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]   .clear-filter-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.card-header-modern[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.1) 50%,transparent 70%);animation:_ngcontent-%COMP%_shimmer 2s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.header-icon-small[_ngcontent-%COMP%]{font-size:1.2rem;background:#fff3;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.card-body-modern[_ngcontent-%COMP%]{padding:2rem;background:linear-gradient(135deg,#fff,#fff8f0)}.filters-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;align-items:end}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.btn-clear-filters[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd23f,#3ec300);color:#fff;border:none;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600;display:inline-flex;align-items:center;gap:.5rem;transition:all .3s ease;cursor:pointer;box-shadow:0 5px 20px #ffd23f4d;height:50px;white-space:nowrap}.btn-clear-filters[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #ffd23f66}.expenses-summary[_ngcontent-%COMP%]{text-align:right}.total-amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:.25rem}.expenses-count[_ngcontent-%COMP%]{font-size:.9rem;color:#fffc}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.expense-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.5rem;background:linear-gradient(135deg,#fff,#fff8f0);border-radius:15px;border:1px solid #ffe4b3;transition:all .4s cubic-bezier(.4,0,.2,1);animation:slideInUp .6s ease-out;box-shadow:0 4px 15px #00000014;position:relative;overflow:hidden;min-height:80px;gap:1rem}.expense-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(180deg,var(--primary),var(--secondary));transform:scaleY(0);transition:transform .3s ease}.expense-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 8px 25px #0000001f}.expense-item[_ngcontent-%COMP%]:hover:before{transform:scaleY(1)}.expense-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.expense-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.expense-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.expense-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.expense-item[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.expense-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;flex-shrink:0;min-width:120px;max-width:150px}.expense-amount[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#333}.expense-category[_ngcontent-%COMP%]{display:flex;align-items:center}.category-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;color:#fff;font-size:.9rem;font-weight:600;display:inline-flex;align-items:center;gap:.5rem}.expense-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;flex-grow:1;margin-left:2rem;justify-content:center;min-height:60px;text-align:center;width:300px;max-width:300px}.expense-date[_ngcontent-%COMP%]{font-size:.9rem;color:#666;font-weight:500;line-height:1.2;text-align:center}.expense-description[_ngcontent-%COMP%]{font-size:.9rem;color:#999;max-width:100%;overflow:visible;text-overflow:unset;white-space:normal;line-height:1.3;margin-top:.25rem;text-align:center;width:100%;word-wrap:break-word;word-break:break-word}.expense-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-left:1.5rem;flex-shrink:0;align-items:center;min-width:100px}.btn-action[_ngcontent-%COMP%]{width:40px;height:40px;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .3s ease;cursor:pointer}.edit-btn[_ngcontent-%COMP%]{background:#667eea1a;color:var(--primary)}.edit-btn[_ngcontent-%COMP%]:hover{background:var(--primary);color:#fff;transform:scale(1.1)}.delete-btn[_ngcontent-%COMP%]{background:#f5576c1a;color:#f5576c}.delete-btn[_ngcontent-%COMP%]:hover{background:#f5576c;color:#fff;transform:scale(1.1)}.action-icon[_ngcontent-%COMP%]{font-size:1rem}.no-expenses[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;color:#666}.no-expenses-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.no-expenses[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-bottom:.5rem;color:#333}.no-expenses[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#999;margin:0}.category-select-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.clear-category-btn[_ngcontent-%COMP%]{position:absolute;right:55px;top:50%;transform:translateY(-50%);z-index:10;width:14px;height:14px;padding:0;display:flex;align-items:center;justify-content:center;font-size:8px;background:#dc3545;border-radius:50%;border:1px solid white;color:#fff;transition:all .2s ease;box-shadow:0 1px 2px #00000026;cursor:pointer;min-width:14px;min-height:14px}.clear-category-btn[_ngcontent-%COMP%]:hover{background:#c82333;transform:translateY(-50%) scale(1.1);box-shadow:0 3px 6px #0000004d}.form-select[_ngcontent-%COMP%]{height:50px;border:2px solid #e9ecef;border-radius:12px;padding:.75rem 1rem;font-size:1rem;transition:all .3s ease;background:#fff;padding-right:65px;max-height:200px;overflow-y:auto;width:100%;appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");background-position:right 12px center;background-repeat:no-repeat;background-size:16px 12px}.form-select[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 .2rem #667eea40;outline:none}@media (max-width: 768px){.form-row[_ngcontent-%COMP%], .filters-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.button-group[_ngcontent-%COMP%]{align-items:stretch}.btn-add-expense[_ngcontent-%COMP%], .btn-clear-filters[_ngcontent-%COMP%]{width:100%;justify-content:center}.card-body-modern[_ngcontent-%COMP%]{padding:1.5rem}.expense-item[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:1rem;padding:1rem;min-height:auto}.expense-main[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;align-items:center;min-width:auto;max-width:none}.expense-details[_ngcontent-%COMP%]{margin-left:0;width:100%;margin-top:.5rem;min-height:auto;max-width:none}.expense-actions[_ngcontent-%COMP%]{margin-left:0;width:100%;justify-content:center;margin-top:.5rem;min-width:auto}.form-select[_ngcontent-%COMP%]{padding-right:80px;max-height:150px}.clear-category-btn[_ngcontent-%COMP%]{width:24px;height:24px;font-size:12px;right:45px}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1.5rem}.page-title[_ngcontent-%COMP%]{font-size:2rem}.header-icon[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.2rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{width:100%}.form-control-modern[_ngcontent-%COMP%]{height:55px;font-size:16px;padding:.75rem 1rem}.input-group-modern[_ngcontent-%COMP%]{height:55px}.input-group-text-modern[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.9rem}.filter-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem}.filter-group[_ngcontent-%COMP%]{width:100%}.filter-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:55px;font-size:16px}.btn-clear-filters[_ngcontent-%COMP%]{width:100%;height:55px;font-size:1rem}.expense-item[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem}.expense-main[_ngcontent-%COMP%]{width:100%;gap:.75rem}.expense-details[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;text-align:center}.expense-amount[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700}.expense-category[_ngcontent-%COMP%]{font-size:.9rem}.expense-date[_ngcontent-%COMP%]{font-size:.85rem}.expense-description[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.4;text-align:center;width:100%;max-width:none;overflow:visible;text-overflow:unset;white-space:normal;word-wrap:break-word;word-break:break-word}.expense-actions[_ngcontent-%COMP%]{flex-direction:row;gap:.75rem;justify-content:center;width:100%}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{flex:1;height:45px;font-size:.9rem;padding:.5rem 1rem}.edit-text[_ngcontent-%COMP%], .delete-text[_ngcontent-%COMP%]{display:inline}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%], .btn-add-expense[_ngcontent-%COMP%], .btn-clear-filters[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.form-label-modern[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:.5rem}.expense-item[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease}.expense-item[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-add-expense[_ngcontent-%COMP%]:active{transform:scale(.95)}.expense-list[_ngcontent-%COMP%]{gap:1rem;padding:1rem}.expense-card[_ngcontent-%COMP%]{border-radius:12px}.form-select[_ngcontent-%COMP%]{height:55px;font-size:16px;padding:.75rem 1rem}.clear-category-btn[_ngcontent-%COMP%]{height:32px;width:32px;font-size:1.2rem}}@media (max-width: 480px){.page-header[_ngcontent-%COMP%]{padding:1rem}.page-title[_ngcontent-%COMP%]{font-size:1.8rem}.form-row[_ngcontent-%COMP%]{gap:.75rem}.expense-item[_ngcontent-%COMP%]{padding:.75rem}.expense-main[_ngcontent-%COMP%]{gap:.5rem}.expense-amount[_ngcontent-%COMP%]{font-size:1.2rem}.expense-description[_ngcontent-%COMP%]{font-size:.9rem}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{font-size:.8rem;padding:.5rem .75rem}.edit-text[_ngcontent-%COMP%], .delete-text[_ngcontent-%COMP%]{display:none}.edit-icon[_ngcontent-%COMP%], .delete-icon[_ngcontent-%COMP%]{font-size:1.1rem}.filter-controls[_ngcontent-%COMP%], .expense-list[_ngcontent-%COMP%]{padding:.75rem}}@media (max-width: 768px) and (orientation: landscape){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.expense-item[_ngcontent-%COMP%]{flex-direction:row}.expense-main[_ngcontent-%COMP%]{flex-direction:row;width:auto}.expense-details[_ngcontent-%COMP%]{flex-direction:row;text-align:left}.expense-actions[_ngcontent-%COMP%]{width:auto}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}select.form-select[_ngcontent-%COMP%]{direction:ltr!important;writing-mode:horizontal-tb!important;transform:translateZ(0)!important}select.form-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{direction:ltr!important;writing-mode:horizontal-tb!important}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:9998;display:flex;align-items:center;justify-content:center;padding:20px}.modal-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:15px;box-shadow:0 20px 60px #0000004d;max-width:500px;width:100%;max-height:90vh;overflow:hidden;position:relative;z-index:9999;animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-content[_ngcontent-%COMP%]{border:none;border-radius:15px;overflow:hidden}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem 1rem;border:none;border-top-left-radius:15px;border-top-right-radius:15px;display:flex;align-items:center;justify-content:space-between}.modal-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0}.btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .2s}.btn-close[_ngcontent-%COMP%]:hover{background:#fff3}.modal-body[_ngcontent-%COMP%]{padding:2rem;max-height:60vh;overflow-y:auto}.modal-footer[_ngcontent-%COMP%]{padding:1rem 2rem 2rem;border-top:1px solid #e0e0e0;background:#f8f9fa;display:flex;gap:1rem;justify-content:flex-end}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.9rem}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268;transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #667eea66}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:.5rem;display:block}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center}.input-group-text[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-right:none;padding:.75rem 1rem;border-radius:12px 0 0 12px;color:#666;font-weight:600}.form-control[_ngcontent-%COMP%]{border:2px solid #e9ecef;border-radius:0 12px 12px 0;padding:.75rem 1rem;font-size:1rem;transition:all .3s ease;background:#fff;flex:1}.form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26;outline:none}.mb-3[_ngcontent-%COMP%]{margin-bottom:1.5rem}@media (max-width: 576px){.modal[_ngcontent-%COMP%]{padding:10px}.modal-dialog[_ngcontent-%COMP%]{max-width:100%}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem 1.5rem;flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}`]})};var eK=n=>({background:n});function tK(n,e){if(n&1&&(g(0,"div",44)(1,"div",45),v(2),m(),g(3,"div",46)(4,"div",47),v(5),m(),g(6,"div",48),v(7),m()()()),n&2){let t=e.$implicit;I(2),J(t.icon),I(3),J(t.value),I(2),J(t.title)}}function nK(n,e){if(n&1&&(g(0,"div",41)(1,"div",42)(2,"h3"),v(3,"\u{1F4CA} Category Analytics"),m()(),g(4,"div",43)(5,"div",44)(6,"div",45),v(7,"\u{1F4C2}"),m(),g(8,"div",46)(9,"div",47),v(10),m(),g(11,"div",48),v(12,"Total Categories"),m()()(),g(13,"div",44)(14,"div",45),v(15,"\u2705"),m(),g(16,"div",46)(17,"div",47),v(18),m(),g(19,"div",48),v(20,"Used Categories"),m()()(),g(21,"div",44)(22,"div",45),v(23,"\u274C"),m(),g(24,"div",46)(25,"div",47),v(26),m(),g(27,"div",48),v(28,"Unused Categories"),m()()(),te(29,tK,8,3,"div",49),m()()),n&2){let t=$();I(10),J(t.totalCategories),I(8),J(t.usedCategories),I(8),J(t.unusedCategories),I(3),B("ngForOf",t.getAnalyticsInsights())}}function rK(n,e){n&1&&(g(0,"div",50)(1,"span",51),v(2,"\u26A0\uFE0F"),m(),v(3," Category name already exists! "),m())}function iK(n,e){if(n&1){let t=Ve();g(0,"div",52)(1,"div",53)(2,"h3"),v(3,"\u{1F50D} Search & Filter"),m(),g(4,"button",54),re("click",function(){W(t);let i=$();return G(i.clearSearch())}),v(5,"Clear All"),m()(),g(6,"div",55)(7,"div",56)(8,"label",57),v(9,"Search"),m(),g(10,"input",58),Oe("ngModelChange",function(i){W(t);let o=$();return Ne(o.searchTerm,i)||(o.searchTerm=i),G(i)}),m()(),g(11,"div",59)(12,"label",60),v(13,"Usage"),m(),g(14,"select",61),Oe("ngModelChange",function(i){W(t);let o=$();return Ne(o.filterByUsage,i)||(o.filterByUsage=i),G(i)}),g(15,"option",62),v(16,"All Categories"),m(),g(17,"option",63),v(18,"Used Only"),m(),g(19,"option",64),v(20,"Unused Only"),m()()(),g(21,"div",59)(22,"label",65),v(23,"Sort By"),m(),g(24,"select",66),Oe("ngModelChange",function(i){W(t);let o=$();return Ne(o.sortBy,i)||(o.sortBy=i),G(i)}),g(25,"option",67),v(26,"Name"),m(),g(27,"option",68),v(28,"Usage"),m(),g(29,"option",69),v(30,"Color"),m()()(),g(31,"div",59)(32,"label",70),v(33,"Order"),m(),g(34,"select",71),Oe("ngModelChange",function(i){W(t);let o=$();return Ne(o.sortOrder,i)||(o.sortOrder=i),G(i)}),g(35,"option",72),v(36,"Ascending"),m(),g(37,"option",73),v(38,"Descending"),m()()()()()}if(n&2){let t=$();I(10),Ae("ngModel",t.searchTerm),I(4),Ae("ngModel",t.filterByUsage),I(10),Ae("ngModel",t.sortBy),I(10),Ae("ngModel",t.sortOrder)}}function oK(n,e){if(n&1){let t=Ve();g(0,"div",74)(1,"p",75),v(2,"No categories found. Would you like to initialize default categories?"),m(),g(3,"button",76),re("click",function(){W(t);let i=$();return G(i.initializeDefaultCategories())}),g(4,"span",77),v(5,"\u{1F4C2}"),m(),v(6," Initialize Default Categories "),m()()}}function sK(n,e){if(n&1){let t=Ve();g(0,"div",80)(1,"div",81)(2,"div",82),nr(3,"div",83),g(4,"div",84),v(5),m(),g(6,"div",85),v(7),m(),g(8,"div",86),v(9),m()(),g(10,"div",87)(11,"button",88),re("click",function(){let i=W(t).$implicit,o=$(2);return G(o.updateCategory(i))}),g(12,"span",89),v(13,"\u270F\uFE0F"),m(),g(14,"span",90),v(15,"Edit"),m()(),g(16,"button",91),re("click",function(){let i=W(t).$implicit,o=$(2);return G(o.confirmDelete(i))}),g(17,"span",92),v(18,"\u{1F5D1}\uFE0F"),m(),g(19,"span",93),v(20,"Delete"),m()()()()()}if(n&2){let t=e.$implicit,r=$(2);I(3),B("ngStyle",xu(4,eK,t.color)),I(2),J(t.icon),I(2),J(t.name),I(2),ve(" ",r.getCategoryUsage(t.id)," expenses ")}}function aK(n,e){if(n&1&&(g(0,"div",78),te(1,sK,21,6,"div",79),m()),n&2){let t=$();I(),B("ngForOf",t.getFilteredCategories())}}function cK(n,e){n&1&&(g(0,"div",94)(1,"div",95),v(2,"\u{1F50D}"),m(),g(3,"h6",96),v(4,"No Categories Found"),m(),g(5,"p",97),v(6,"Try adjusting your search or filters."),m()())}function lK(n,e){n&1&&(g(0,"div",94)(1,"div",95),v(2,"\u{1F4C2}"),m(),g(3,"h6",96),v(4,"No Categories Yet"),m(),g(5,"p",97),v(6,"Start by adding your first expense category above."),m()())}var Ny=class n{constructor(e,t,r){this.categoryService=e;this.expenseService=t;this.firebaseService=r}categories=[];expenses=[];newCategory={id:"",name:"",color:"#ff6b9d",icon:"\u{1F4CC}"};searchTerm="";filterByUsage="all";sortBy="name";sortOrder="asc";showAdvancedOptions=!1;isDuplicateCategory=!1;isEditMode=!1;editingCategoryId="";totalCategories=0;usedCategories=0;unusedCategories=0;mostUsedCategory=null;leastUsedCategory=null;subscription=new He;ngOnInit(){this.subscription.add(this.firebaseService.categories$.subscribe(e=>{this.categories=e,this.calculateAnalytics(),console.log(`Received ${e.length} categories from Firebase`)})),this.subscription.add(this.firebaseService.expenses$.subscribe(e=>{this.expenses=e,this.calculateAnalytics(),console.log(`Received ${e.length} expenses from Firebase`)})),this.loadData()}ngOnDestroy(){this.subscription.unsubscribe()}loadData(){return E(this,null,function*(){try{this.categories=yield this.categoryService.getAll(),this.expenses=yield this.expenseService.getAll(),this.calculateAnalytics()}catch(e){console.error("Error loading data:",e)}})}calculateAnalytics(){this.totalCategories=this.categories.length;let e=this.getCategoryUsageStats();if(this.usedCategories=Object.keys(e).length,this.unusedCategories=this.totalCategories-this.usedCategories,Object.keys(e).length>0){let t=Object.entries(e).sort((r,i)=>i[1]-r[1]);this.mostUsedCategory=this.categories.find(r=>r.id===t[0][0])||null,this.leastUsedCategory=this.categories.find(r=>r.id===t[t.length-1][0])||null}}getCategoryUsageStats(){let e={};return this.expenses.forEach(t=>{t.categoryId&&(e[t.categoryId]=(e[t.categoryId]||0)+1)}),e}initializeDefaultCategories(){return E(this,null,function*(){try{yield this.categoryService.forceInitializeDefaultCategories(),yield this.loadData(),alert("Default categories initialized successfully!")}catch(e){console.error("Error initializing default categories:",e),alert("Error initializing default categories. Please try again.")}})}addCategory(){return E(this,null,function*(){if(this.validateCategory())try{let e={name:this.newCategory.name.trim(),color:this.newCategory.color,icon:this.newCategory.icon},t=yield this.categoryService.add(e);console.log(`Category added with Firebase ID: ${t}`),this.resetForm(),alert("Category added successfully!")}catch(e){console.error("Error adding category:",e),alert("Error adding category. Please try again.")}})}updateCategory(e){return E(this,null,function*(){try{let t=window.prompt("Enter new category name:",e.name);if(!t||t.trim()==="")return;let r=window.prompt("Enter new color (hex code):",e.color||"#ff6b9d");if(!r)return;let i=window.prompt("Enter new icon (emoji):",e.icon||"\u{1F4CC}");if(!i)return;let o=ce(V({},e),{name:t.trim(),color:r,icon:i});yield this.categoryService.update(o),console.log("Category updated successfully"),alert("Category updated successfully!")}catch(t){console.error("Error updating category:",t),alert("Error updating category. Please try again.")}})}deleteCategory(e){return E(this,null,function*(){if(window.confirm(`Are you sure you want to delete "${e.name}"?

This will also remove all expenses in this category.`))try{yield this.categoryService.delete(e.id),console.log("Category deleted successfully"),alert("Category deleted successfully!")}catch(r){console.error("Error deleting category:",r),alert("Error deleting category. Please try again.")}})}confirmDelete(e){this.deleteCategory(e)}validateCategory(){return this.newCategory.name?.trim()?this.categories.some(t=>t.name.toLowerCase().trim()===this.newCategory.name.toLowerCase().trim()&&t.id!==this.editingCategoryId)?(this.isDuplicateCategory=!0,alert("Category name already exists!"),!1):(this.isDuplicateCategory=!1,!0):(alert("Please enter a category name."),!1)}clearValidationErrors(){this.isDuplicateCategory=!1}resetForm(){this.newCategory={id:"",name:"",color:"#ff6b9d",icon:"\u{1F4CC}"},this.isEditMode=!1,this.editingCategoryId="",this.clearValidationErrors()}getFilteredCategories(){let e=[...this.categories];if(this.searchTerm&&(e=e.filter(t=>t.name.toLowerCase().includes(this.searchTerm.toLowerCase())||(t.icon||"").includes(this.searchTerm))),this.filterByUsage!=="all"){let t=this.getCategoryUsageStats();this.filterByUsage==="used"?e=e.filter(r=>t[r.id]>0):this.filterByUsage==="unused"&&(e=e.filter(r=>!t[r.id]||t[r.id]===0))}return e.sort((t,r)=>{let i,o;switch(this.sortBy){case"name":i=t.name.toLowerCase(),o=r.name.toLowerCase();break;case"usage":let s=this.getCategoryUsageStats();i=s[t.id]||0,o=s[r.id]||0;break;case"color":i=t.color||"",o=r.color||"";break;default:i=t.name.toLowerCase(),o=r.name.toLowerCase()}return this.sortOrder==="asc"?i<o?-1:i>o?1:0:i>o?-1:i<o?1:0}),e}getCategoryUsage(e){return this.getCategoryUsageStats()[e]||0}clearSearch(){this.searchTerm=""}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}getColorPresets(){return["#ff6b9d","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd","#00d2d3","#ff9f43","#ff6348","#2ed573","#1e90ff","#ffa502","#ff3838"]}getIconPresets(){return["\u{1F4CC}","\u{1F354}","\u{1F697}","\u{1F3E0}","\u{1F48A}","\u{1F3AC}","\u{1F6D2}","\u2708\uFE0F","\u{1F393}","\u{1F4BB}","\u{1F4F1}","\u{1F3AE}","\u{1F3CB}\uFE0F","\u{1F3A8}","\u{1F4DA}","\u{1F3B5}","\u{1F3AA}","\u{1F3E5}","\u{1F487}","\u{1F484}"]}selectColor(e){this.newCategory.color=e}selectIcon(e){this.newCategory.icon=e}setRandomColor(){let e=this.getColorPresets();this.newCategory.color=e[Math.floor(Math.random()*e.length)]}setRandomIcon(){let e=this.getIconPresets();this.newCategory.icon=e[Math.floor(Math.random()*e.length)]}getCategoryCount(){return this.categories.length}getTotalCategories(){return this.categories.length}getMostUsedCategory(){return this.mostUsedCategory}getLeastUsedCategory(){return this.leastUsedCategory}cleanupDuplicates(){return E(this,null,function*(){if(window.confirm("This will remove duplicate categories. Continue?"))try{let t=this.categories.filter((r,i,o)=>i===o.findIndex(s=>s.name.toLowerCase()===r.name.toLowerCase()));for(let r of this.categories)yield this.categoryService.delete(r.id);for(let r of t)yield this.categoryService.add({name:r.name,color:r.color||"#ff6b9d",icon:r.icon||"\u{1F4CC}"});alert("Duplicate categories cleaned up successfully!")}catch(t){console.error("Error cleaning up duplicates:",t),alert("Error cleaning up duplicates. Please try again.")}})}getAnalyticsInsights(){let e=[];return this.mostUsedCategory&&e.push({type:"most-used",title:"Most Used Category",value:this.mostUsedCategory.name,icon:this.mostUsedCategory.icon,color:this.mostUsedCategory.color}),this.leastUsedCategory&&e.push({type:"least-used",title:"Least Used Category",value:this.leastUsedCategory.name,icon:this.leastUsedCategory.icon,color:this.leastUsedCategory.color}),e.push({type:"stats",title:"Category Statistics",value:`${this.usedCategories} used, ${this.unusedCategories} unused`,icon:"\u{1F4CA}"}),e}static \u0275fac=function(t){return new(t||n)(z(Ei),z(Ci),z(An))};static \u0275cmp=Gt({type:n,selectors:[["app-categories"]],decls:64,vars:15,consts:[[1,"categories-page"],[1,"page-header"],[1,"header-content"],[1,"header-icon"],[1,"header-text"],[1,"page-title"],[1,"page-description"],["class","analytics-section",4,"ngIf"],[1,"add-category-card"],[1,"card-header-modern"],[1,"header-title"],[1,"card-body-modern"],[1,"add-category-form",3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","categoryName",1,"form-label"],["type","text","id","categoryName","name","categoryName","placeholder","Enter category name","required","",1,"form-control",3,"ngModelChange","input","ngModel"],["class","error-message",4,"ngIf"],["for","categoryIcon",1,"form-label"],[1,"icon-group"],["type","text","id","categoryIcon","name","categoryIcon","placeholder","\u{1F4CC}","maxlength","2",1,"icon-input",3,"ngModelChange","ngModel"],["type","button",1,"btn-random-icon",3,"click"],[1,"random-icon"],["for","categoryColor",1,"form-label"],[1,"color-group"],["type","color","id","categoryColor","name","categoryColor",1,"color-input",3,"ngModelChange","ngModel"],["type","button",1,"btn-random-color",3,"click"],[1,"button-container"],["type","submit",1,"btn-add-category",3,"disabled"],[1,"btn-icon"],[1,"btn-text"],["class","search-filters-section",4,"ngIf"],[1,"categories-section"],[1,"section-header"],[1,"section-content"],[1,"section-icon"],[1,"section-title"],[1,"category-count"],["class","initialize-section","style","margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; text-align: center;",4,"ngIf"],["class","categories-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"analytics-section"],[1,"analytics-header"],[1,"analytics-grid"],[1,"analytics-card"],[1,"analytics-icon"],[1,"analytics-content"],[1,"analytics-value"],[1,"analytics-label"],["class","analytics-card",4,"ngFor","ngForOf"],[1,"error-message"],[1,"error-icon"],[1,"search-filters-section"],[1,"search-filters-header"],[1,"btn-clear-filters",3,"click"],[1,"search-filters-grid"],[1,"search-group"],["for","searchTerm"],["type","text","id","searchTerm","placeholder","Search categories...",1,"form-control",3,"ngModelChange","ngModel"],[1,"filter-group"],["for","filterByUsage"],["id","filterByUsage",1,"form-select",3,"ngModelChange","ngModel"],["value","all"],["value","used"],["value","unused"],["for","sortBy"],["id","sortBy",1,"form-select",3,"ngModelChange","ngModel"],["value","name"],["value","usage"],["value","color"],["for","sortOrder"],["id","sortOrder",1,"form-select",3,"ngModelChange","ngModel"],["value","asc"],["value","desc"],[1,"initialize-section",2,"margin-bottom","20px","padding","15px","background","#f8f9fa","border-radius","8px","text-align","center"],[2,"margin-bottom","15px","color","#6c757d"],[2,"padding","10px 20px","background","#007bff","color","white","border","none","border-radius","6px","cursor","pointer","font-weight","500",3,"click"],[2,"margin-right","8px"],[1,"categories-grid"],["class","category-card",4,"ngFor","ngForOf"],[1,"category-card"],[1,"category-content"],[1,"category-info"],[1,"category-color-indicator",3,"ngStyle"],[1,"category-icon"],[1,"category-name"],[1,"category-usage"],[1,"category-actions"],["title","Edit category",1,"btn-edit",3,"click"],[1,"edit-icon"],[1,"edit-text"],["title","Delete category",1,"btn-delete",3,"click"],[1,"delete-icon"],[1,"delete-text"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-title"],[1,"empty-description"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),v(4,"\u{1F4C2}"),m(),g(5,"div",4)(6,"h1",5),v(7,"Categories"),m(),g(8,"p",6),v(9,"Manage your expense categories and organize your spending"),m()()()(),te(10,nK,30,4,"div",7),g(11,"div",8)(12,"div",9)(13,"div",2)(14,"span",3),v(15,"\u2795"),m(),g(16,"h3",10),v(17,"Add New Category"),m()()(),g(18,"div",11)(19,"form",12),re("ngSubmit",function(){return r.addCategory()}),g(20,"div",13)(21,"div",14)(22,"label",15),v(23,"Category Name"),m(),g(24,"input",16),Oe("ngModelChange",function(o){return Ne(r.newCategory.name,o)||(r.newCategory.name=o),o}),re("input",function(){return r.clearValidationErrors()}),m(),te(25,rK,4,0,"div",17),m(),g(26,"div",14)(27,"label",18),v(28,"Icon"),m(),g(29,"div",19)(30,"input",20),Oe("ngModelChange",function(o){return Ne(r.newCategory.icon,o)||(r.newCategory.icon=o),o}),m(),g(31,"button",21),re("click",function(){return r.setRandomIcon()}),g(32,"span",22),v(33,"\u{1F3B2}"),m(),v(34," Random "),m()()(),g(35,"div",14)(36,"label",23),v(37,"Color"),m(),g(38,"div",24)(39,"input",25),Oe("ngModelChange",function(o){return Ne(r.newCategory.color,o)||(r.newCategory.color=o),o}),m(),g(40,"button",26),re("click",function(){return r.setRandomColor()}),g(41,"span",22),v(42,"\u{1F3B2}"),m(),v(43," Random "),m()()()(),g(44,"div",27)(45,"button",28)(46,"span",29),v(47,"\u2795"),m(),g(48,"span",30),v(49,"Add Category"),m()()()()()(),te(50,iK,39,4,"div",31),g(51,"div",32)(52,"div",33)(53,"div",34)(54,"span",35),v(55,"\u{1F4C2}"),m(),g(56,"h3",36),v(57,"Your Categories"),m()(),g(58,"div",37),v(59),m()(),te(60,oK,7,0,"div",38)(61,aK,2,1,"div",39)(62,cK,7,0,"div",40)(63,lK,7,0,"div",40),m()()),t&2&&(I(10),B("ngIf",r.categories.length>0),I(14),gn("error",r.isDuplicateCategory),Ae("ngModel",r.newCategory.name),I(),B("ngIf",r.isDuplicateCategory),I(5),Ae("ngModel",r.newCategory.icon),I(9),Ae("ngModel",r.newCategory.color),I(6),B("disabled",!r.newCategory.name.trim()||r.isDuplicateCategory),I(5),B("ngIf",r.categories.length>0),I(9),mn("",r.getFilteredCategories().length," of ",r.categories.length," Categories"),I(),B("ngIf",r.categories.length===0),I(),B("ngIf",r.getFilteredCategories().length>0),I(),B("ngIf",r.getFilteredCategories().length===0&&r.categories.length>0),I(),B("ngIf",r.categories.length===0))},dependencies:[on,Yr,_n,Lu,dr,ms,ys,_s,_i,vi,ur,gs,fo,tS,qn,ho],styles:[".categories-page[_ngcontent-%COMP%]{margin:0 auto;padding:1rem;background:#f8f9fa;min-height:100vh;max-width:100%;overflow-x:hidden}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b6b9b,#b76bb7);color:#fff;padding:2rem;border-radius:15px;margin-bottom:2rem;box-shadow:0 8px 25px #9b6b9b26}.header-icon[_ngcontent-%COMP%]{font-size:2rem;background:#667eea;border-radius:8px;width:50px;height:50px;display:flex;align-items:center;justify-content:center;color:#fff}.header-text[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.1)}.page-description[_ngcontent-%COMP%]{font-size:1rem;margin:0;font-weight:500}.analytics-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef}.analytics-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b9d,#ffa726,#ffeb3b);color:#fff;padding:1rem 1.5rem;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e9ecef}.analytics-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;display:flex;align-items:center;gap:.5rem}.btn-toggle-analytics[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:.5rem 1rem;border-radius:8px;cursor:pointer;font-weight:500;transition:all .3s ease}.btn-toggle-analytics[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea4d}.analytics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;padding:1.5rem}.analytics-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:1.5rem;border:1px solid #e9ecef;display:flex;align-items:center;gap:1rem}.analytics-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 32px #0000001f}.analytics-icon[_ngcontent-%COMP%]{font-size:1.5rem;background:#667eea;border-radius:6px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#fff;flex-shrink:0}.analytics-content[_ngcontent-%COMP%]{flex:1}.analytics-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#2c3e50;margin-bottom:.25rem}.analytics-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;font-weight:500}.add-category-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef;margin-bottom:1.5rem}.card-header-modern[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b9d,#ffa726,#ffeb3b);color:#fff;padding:1.5rem;border-bottom:1px solid #e9ecef;border-top-left-radius:12px;border-top-right-radius:12px}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header-icon[_ngcontent-%COMP%]{font-size:1.5rem;background:#667eea;border-radius:6px;width:35px;height:35px;display:flex;align-items:center;justify-content:center;color:#fff}.header-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0}.card-body-modern[_ngcontent-%COMP%]{padding:1.5rem}.add-category-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:.9rem}.form-control[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #e9ecef;border-radius:6px;font-size:1rem;transition:border-color .2s ease;background:#fff;width:100%;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-control.error[_ngcontent-%COMP%]{border-color:#dc3545}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.85rem;display:flex;align-items:center;gap:.5rem;margin-top:.25rem}.color-group[_ngcontent-%COMP%], .icon-group[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center;flex-wrap:wrap}.color-input[_ngcontent-%COMP%]{width:50px;height:40px;border:1px solid #e9ecef;border-radius:6px;cursor:pointer;background:none;padding:0}.icon-input[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #e9ecef;border-radius:6px;font-size:1.2rem;text-align:center;transition:border-color .2s ease;background:#fff;width:60px}.icon-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.btn-random-color[_ngcontent-%COMP%], .btn-random-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);color:#fff;border:none;padding:.875rem 1.5rem;border-radius:12px;cursor:pointer;font-weight:600;font-size:1rem;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;white-space:nowrap;box-shadow:0 5px 20px #ff6b354d;height:50px;min-width:fit-content}.btn-random-color[_ngcontent-%COMP%]:hover, .btn-random-icon[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #ff6b3566}@media (hover: none) and (pointer: coarse){.btn-random-color[_ngcontent-%COMP%]:hover, .btn-random-icon[_ngcontent-%COMP%]:hover{transform:none;box-shadow:0 5px 20px #ff6b354d}.btn-random-color[_ngcontent-%COMP%]:active, .btn-random-icon[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 2px 10px #ff6b3566}}.random-icon[_ngcontent-%COMP%]{font-size:.9rem}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem}.btn-add-category[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);color:#fff;border:none;padding:.875rem 1.5rem;border-radius:12px;cursor:pointer;font-weight:600;font-size:1rem;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;box-shadow:0 5px 20px #ff6b354d;height:50px;white-space:nowrap;min-width:200px}.btn-add-category[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #ff6b3566}@media (hover: none) and (pointer: coarse){.btn-add-category[_ngcontent-%COMP%]:hover:not(:disabled){transform:none;box-shadow:0 5px 20px #ff6b354d}.btn-add-category[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(1px);box-shadow:0 2px 10px #ff6b3566}}.btn-add-category[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn-icon[_ngcontent-%COMP%]{font-size:1rem}.btn-text[_ngcontent-%COMP%]{font-weight:600}.search-filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef}.search-filters-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b9d,#ffa726,#ffeb3b);color:#fff;padding:1rem 1.5rem;display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem;border-radius:8px 8px 0 0}.search-filters-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#fff;display:flex;align-items:center;gap:.5rem}.btn-clear-filters[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd23f,#3ec300);color:#fff;border:none;padding:.875rem 1.5rem;border-radius:12px;cursor:pointer;font-weight:600;font-size:1rem;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;box-shadow:0 5px 20px #ffd23f4d;height:50px;white-space:nowrap}.btn-clear-filters[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #ffd23f66}.search-filters-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.search-group[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.search-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:.9rem}.form-select[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #e9ecef;border-radius:6px;font-size:.9rem;transition:border-color .2s ease;background:#fff;cursor:pointer}.form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-select[_ngcontent-%COMP%]:hover{border-color:#667eea}.categories-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef}.section-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b9d,#ffa726,#ffeb3b);color:#fff;padding:1.5rem;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e9ecef}.section-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.section-icon[_ngcontent-%COMP%]{font-size:1.5rem;background:#fff3;border-radius:6px;width:35px;height:35px;display:flex;align-items:center;justify-content:center;color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#fff}.category-count[_ngcontent-%COMP%]{font-size:.9rem;color:#fffc;font-weight:500}.initialize-section[_ngcontent-%COMP%], .cleanup-section[_ngcontent-%COMP%]{margin:1.5rem;padding:1.5rem;border-radius:8px;text-align:center}.initialize-section[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef}.cleanup-section[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffeaa7}.initialize-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .cleanup-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;font-weight:500}.initialize-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .cleanup-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:6px;cursor:pointer;font-weight:600;font-size:.9rem;transition:background-color .2s ease;display:inline-flex;align-items:center;gap:.5rem}.initialize-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .cleanup-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#5a6fd8}.categories-grid[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;gap:1rem}.category-card[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;padding:1.5rem;transition:all .2s ease;width:100%}.category-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#667eea}.category-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:2rem;width:100%}.category-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;flex:1;min-width:0}.category-color-indicator[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;flex-shrink:0}.category-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:35px;height:35px;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:6px;flex-shrink:0}.category-name[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:1rem;flex:1;min-width:0;overflow:visible;text-overflow:unset;white-space:normal;word-wrap:break-word;word-break:break-word}.category-usage[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;font-weight:500;flex-shrink:0}.category-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-shrink:0}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:.5rem .75rem;border:none;border-radius:4px;cursor:pointer;font-weight:500;font-size:.85rem;transition:background-color .2s ease;display:flex;align-items:center;gap:.25rem;white-space:nowrap}.btn-edit[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background:#218838}.btn-delete[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background:#c82333}.edit-icon[_ngcontent-%COMP%], .delete-icon[_ngcontent-%COMP%]{font-size:.8rem}.edit-text[_ngcontent-%COMP%], .delete-text[_ngcontent-%COMP%]{font-weight:500}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1.5rem;color:#6c757d}.empty-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;opacity:.5}.empty-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:.5rem;color:#2c3e50}.empty-description[_ngcontent-%COMP%]{font-size:1rem;margin:0;opacity:.8}.custom-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);z-index:9999;animation:_ngcontent-%COMP%_overlayFadeIn .4s cubic-bezier(.4,0,.2,1);overflow-x:hidden}@media (max-width: 576px){.custom-modal-overlay[_ngcontent-%COMP%]{z-index:9998}}@keyframes _ngcontent-%COMP%_overlayFadeIn{0%{opacity:0;backdrop-filter:blur(0px);-webkit-backdrop-filter:blur(0px)}to{opacity:1;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px)}}.custom-modal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8f9fa);border-radius:20px;box-shadow:0 20px 60px #0000004d;max-width:500px;width:90%;max-height:90vh;overflow:hidden;position:absolute;z-index:9999;animation:_ngcontent-%COMP%_modalSlideIn .4s cubic-bezier(.4,0,.2,1);transform-origin:center}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translate(-50%,-50%) scale(.8)}50%{opacity:.8;transform:translate(-50%,-50%) scale(1.05)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_modalSlideOut{0%{opacity:1;transform:translate(-50%,-50%) scale(1)}to{opacity:0;transform:translate(-50%,-50%) scale(.8)}}.modal-closing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalSlideOut .3s cubic-bezier(.4,0,.2,1) forwards}.overlay-closing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_overlayFadeOut .3s cubic-bezier(.4,0,.2,1) forwards}@keyframes _ngcontent-%COMP%_overlayFadeOut{0%{opacity:1;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px)}to{opacity:0;backdrop-filter:blur(0px);-webkit-backdrop-filter:blur(0px)}}.modal-header-modern[_ngcontent-%COMP%]{padding:1.5rem 2rem 1rem;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;justify-content:space-between;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-top-left-radius:20px;border-top-right-radius:20px}.modal-title-modern[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;display:flex;align-items:center;gap:.75rem}.modal-icon[_ngcontent-%COMP%]{font-size:1.5rem}.modal-close-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;border-radius:50%;width:35px;height:35px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;font-size:1rem}.modal-close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.modal-body-modern[_ngcontent-%COMP%]{padding:2rem}.delete-modal[_ngcontent-%COMP%]   .modal-body-modern[_ngcontent-%COMP%]{padding:1.5rem}.form-group-modern[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-label-modern[_ngcontent-%COMP%]{display:block;font-weight:600;color:#333;margin-bottom:.75rem;font-size:.95rem}.form-control-modern[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;border:2px solid #e0e0e0;border-radius:12px;font-size:1rem;transition:all .3s ease;background:linear-gradient(135deg,#fff,#f8f9fa)}.form-control-modern[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #ff6b351a;transform:translateY(-1px)}.form-control-color-modern[_ngcontent-%COMP%]{width:60px;height:50px;border:2px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .3s ease}.form-control-color-modern[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.invalid-feedback-modern[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#dc3545;font-size:.875rem;margin-top:.5rem;padding:.5rem .75rem;background:#dc35451a;border-radius:8px}.error-icon[_ngcontent-%COMP%]{font-size:1rem}.modal-footer-modern[_ngcontent-%COMP%]{padding:1rem 2rem 2rem;display:flex;gap:1rem;justify-content:flex-end}.btn-cancel-modern[_ngcontent-%COMP%], .btn-save-modern[_ngcontent-%COMP%]{padding:.875rem 1.5rem;border:none;border-radius:12px;font-weight:600;display:inline-flex;align-items:center;gap:.5rem;transition:all .3s ease;cursor:pointer;font-size:.95rem}.btn-cancel-modern[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#5a6268);color:#fff;box-shadow:0 4px 15px #6c757d4d}.btn-cancel-modern[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #6c757d66}.btn-save-modern[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);color:#fff;box-shadow:0 4px 15px #ff6b354d}.btn-save-modern[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #ff6b3566}.delete-modal[_ngcontent-%COMP%]{max-width:450px;max-height:500px}.delete-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333)}.delete-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.delete-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;padding:1.5rem;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-radius:15px;border:1px solid #dee2e6}.category-icon-display[_ngcontent-%COMP%]{flex-shrink:0}.category-icon-large[_ngcontent-%COMP%]{font-size:2.5rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:50%;width:70px;height:70px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px #667eea4d}.category-info[_ngcontent-%COMP%]{flex:1}.category-label[_ngcontent-%COMP%]{color:#666;font-size:.85rem;margin-bottom:.25rem;text-transform:uppercase;letter-spacing:.5px;font-weight:600}.category-name[_ngcontent-%COMP%]{color:#333;font-weight:700;font-size:1.4rem;margin:0;line-height:1.2}.warning-alert[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff5f5,#fed7d7);border:1px solid #feb2b2;border-radius:12px;padding:1.5rem;border-left:4px solid #dc3545}.warning-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem}.warning-icon-container[_ngcontent-%COMP%]{flex-shrink:0;background:#dc35451a;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.warning-icon[_ngcontent-%COMP%]{font-size:1.25rem}.warning-text[_ngcontent-%COMP%]{color:#c53030;font-size:.9rem;line-height:1.6;flex:1}.warning-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:1rem;font-weight:700}.warning-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;opacity:.9}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;padding-top:1rem;border-top:1px solid #e9ecef;margin-top:1rem}.btn-delete-modern[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;padding:1rem 2rem;border:none;border-radius:12px;font-weight:600;display:inline-flex;align-items:center;gap:.5rem;transition:all .3s ease;cursor:pointer;font-size:.95rem;box-shadow:0 4px 15px #dc35454d;min-width:120px;justify-content:center}.btn-delete-modern[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #dc354566;background:linear-gradient(135deg,#c82333,#dc3545)}.btn-cancel-modern[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6c757d,#5a6268);color:#fff;padding:1rem 2rem;border:none;border-radius:12px;font-weight:600;display:inline-flex;align-items:center;gap:.5rem;transition:all .3s ease;cursor:pointer;font-size:.95rem;box-shadow:0 4px 15px #6c757d4d;min-width:120px;justify-content:center}.btn-cancel-modern[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #6c757d66;background:linear-gradient(135deg,#5a6268,#6c757d)}@media (max-width: 576px){.custom-modal[_ngcontent-%COMP%]{width:90%;max-width:350px;margin:0;position:fixed!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;max-height:80vh;overflow-y:auto;z-index:10001;min-height:200px}.modal-header-modern[_ngcontent-%COMP%]{padding:1rem 1.25rem .75rem}.modal-body-modern[_ngcontent-%COMP%]{padding:1.25rem}.modal-footer-modern[_ngcontent-%COMP%]{padding:.75rem 1.25rem 1.25rem;flex-direction:column}.modal-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}.btn-cancel-modern[_ngcontent-%COMP%], .btn-save-modern[_ngcontent-%COMP%], .btn-delete-modern[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:.875rem 1.25rem;font-size:.9rem}.delete-modal[_ngcontent-%COMP%]{max-width:320px;max-height:450px}.delete-content[_ngcontent-%COMP%]{gap:1rem}.delete-preview[_ngcontent-%COMP%]{padding:1rem;gap:1rem}.category-icon-large[_ngcontent-%COMP%]{width:60px;height:60px;font-size:2rem}.category-name[_ngcontent-%COMP%]{font-size:1.2rem}.warning-alert[_ngcontent-%COMP%]{padding:1rem}.warning-content[_ngcontent-%COMP%]{gap:.75rem}.warning-icon-container[_ngcontent-%COMP%]{width:35px;height:35px}.warning-icon[_ngcontent-%COMP%]{font-size:1rem}.warning-text[_ngcontent-%COMP%]{font-size:.85rem}.warning-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 768px){.categories-page[_ngcontent-%COMP%]{padding:.5rem}.page-header[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1rem}.page-title[_ngcontent-%COMP%]{font-size:1.5rem}.analytics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:1rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.search-filters-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.categories-grid[_ngcontent-%COMP%]{padding:1rem}.category-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.category-info[_ngcontent-%COMP%]{width:100%}.category-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.add-category-card[_ngcontent-%COMP%]{margin-bottom:1rem}.card-body-modern[_ngcontent-%COMP%]{padding:1rem}.color-group[_ngcontent-%COMP%], .icon-group[_ngcontent-%COMP%]{flex-direction:row;align-items:center;gap:.75rem;flex-wrap:wrap}.btn-random-color[_ngcontent-%COMP%], .btn-random-icon[_ngcontent-%COMP%]{flex:1;min-width:120px;justify-content:center;padding:.75rem 1rem;font-size:.9rem}.btn-add-category[_ngcontent-%COMP%]{width:100%;justify-content:center;min-width:unset}.button-container[_ngcontent-%COMP%]{margin-top:1.5rem}}@media (max-width: 480px){.page-header[_ngcontent-%COMP%]{padding:1rem}.header-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:1rem}.header-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.5rem}.page-title[_ngcontent-%COMP%]{font-size:1.5rem}.analytics-card[_ngcontent-%COMP%]{padding:1rem}.analytics-icon[_ngcontent-%COMP%]{width:35px;height:35px;font-size:1.25rem}.category-card[_ngcontent-%COMP%]{padding:1rem}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:.5rem;font-size:.8rem}.edit-text[_ngcontent-%COMP%], .delete-text[_ngcontent-%COMP%]{display:none}.add-category-card[_ngcontent-%COMP%]{margin-bottom:.75rem}.card-header-modern[_ngcontent-%COMP%]{padding:1rem}.card-body-modern[_ngcontent-%COMP%]{padding:.75rem}.form-row[_ngcontent-%COMP%]{gap:1rem}.form-group[_ngcontent-%COMP%]{gap:.25rem}.form-label[_ngcontent-%COMP%]{font-size:.85rem}.form-control[_ngcontent-%COMP%]{padding:.625rem .75rem;font-size:.9rem}.icon-input[_ngcontent-%COMP%]{width:50px;padding:.625rem .5rem;font-size:1rem;flex-shrink:0}.color-input[_ngcontent-%COMP%]{width:50px;height:35px;flex-shrink:0}.btn-random-color[_ngcontent-%COMP%], .btn-random-icon[_ngcontent-%COMP%]{padding:.625rem .75rem;font-size:.85rem;height:45px}.btn-add-category[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.9rem;height:45px}.button-container[_ngcontent-%COMP%]{margin-top:1rem}}"]})};function uK(n,e){if(n&1&&(g(0,"div",21)(1,"div",22),v(2),m(),g(3,"div",23)(4,"div",24),v(5),m(),g(6,"div",25),v(7),m()()()),n&2){let t=e.$implicit;I(2),J(t.icon),I(3),J(t.value),I(2),J(t.title)}}function dK(n,e){if(n&1&&(g(0,"div",20)(1,"div",21)(2,"div",22),v(3,"\u{1F4B0}"),m(),g(4,"div",23)(5,"div",24),v(6),Ke(7,"currency"),m(),g(8,"div",25),v(9,"Total Spent"),m()()(),g(10,"div",21)(11,"div",22),v(12,"\u{1F4C5}"),m(),g(13,"div",23)(14,"div",24),v(15),Ke(16,"currency"),m(),g(17,"div",25),v(18,"Average Monthly"),m()()(),te(19,uK,8,3,"div",26),m()),n&2){let t=$(2);I(6),J(yn(7,3,t.totalSpent,"INR")),I(9),J(yn(16,6,t.averageMonthlySpend,"INR")),I(4),B("ngForOf",t.getSpendingInsights())}}function hK(n,e){if(n&1){let t=Ve();g(0,"div",16)(1,"div",17)(2,"h3"),v(3,"\u{1F4C8} Spending Analytics"),m(),g(4,"button",18),re("click",function(){W(t);let i=$();return G(i.showAnalytics=!i.showAnalytics)}),v(5),m()(),te(6,dK,20,9,"div",19),m()}if(n&2){let t=$();I(5),ve(" ",t.showAnalytics?"Hide":"Show"," Analytics "),I(),B("ngIf",t.showAnalytics)}}function fK(n,e){if(n&1&&(g(0,"div",33),v(1),Ke(2,"currency"),m()),n&2){let t=$(2);gn("positive",t.getMonthlyComparison().change<0)("negative",t.getMonthlyComparison().change>0),I(),ve(" ",yn(2,5,t.getMonthlyComparison().change,"INR")," ")}}function pK(n,e){n&1&&(g(0,"div",37),v(1," First Month "),m())}function gK(n,e){if(n&1&&(g(0,"div",27)(1,"div",28)(2,"div",29)(3,"h3"),v(4,"Current Month Overview"),m(),g(5,"span",30),v(6),m()(),g(7,"div",31)(8,"div",32)(9,"div",33),v(10),Ke(11,"currency"),m(),g(12,"div",34),v(13,"Total Spent"),m()(),g(14,"div",32)(15,"div",33),v(16),m(),g(17,"div",34),v(18,"Expenses"),m()(),g(19,"div",32),te(20,fK,3,8,"div",35)(21,pK,2,0,"div",36),g(22,"div",34),v(23,"vs Last Month"),m()()()()()),n&2){let t,r,i,o,s=$();I(6),J((t=s.getCurrentMonthReport())==null?null:t.monthName),I(4),J(yn(11,5,(r=s.getCurrentMonthReport())==null?null:r.totalAmount,"INR")),I(6),J((i=s.getCurrentMonthReport())==null?null:i.expenseCount),I(4),B("ngIf",s.getMonthlyComparison().hasPreviousData),I(),B("ngIf",!s.getMonthlyComparison().hasPreviousData&&((o=s.getCurrentMonthReport())==null?null:o.totalAmount)>0)}}function mK(n,e){if(n&1&&(g(0,"option",60),v(1),m()),n&2){let t=e.$implicit;B("value",t),I(),J(t)}}function yK(n,e){if(n&1&&(g(0,"option",60),v(1),m()),n&2){let t=e.$implicit,r=$(2);B("value",t),I(),J(r.getMonthName(t))}}function _K(n,e){if(n&1&&(g(0,"option",60),v(1),m()),n&2){let t=e.$implicit;B("value",t.id),I(),mn(" ",t.icon," ",t.name," ")}}function vK(n,e){if(n&1){let t=Ve();g(0,"div",38)(1,"div",39)(2,"h3"),v(3,"\u{1F50D} Filter & Sort"),m(),g(4,"button",40),re("click",function(){W(t);let i=$();return G(i.clearFilters())}),v(5,"Clear All"),m()(),g(6,"div",41)(7,"div",42)(8,"label",43),v(9,"Year"),m(),g(10,"select",44),Oe("ngModelChange",function(i){W(t);let o=$();return Ne(o.filterYear,i)||(o.filterYear=i),G(i)}),re("change",function(){W(t);let i=$();return G(i.onFilterChange())}),g(11,"option",45),v(12,"All Years"),m(),te(13,mK,2,2,"option",46),m()(),g(14,"div",42)(15,"label",47),v(16,"Month"),m(),g(17,"select",48),Oe("ngModelChange",function(i){W(t);let o=$();return Ne(o.filterMonth,i)||(o.filterMonth=i),G(i)}),re("change",function(){W(t);let i=$();return G(i.onFilterChange())}),g(18,"option",45),v(19,"All Months"),m(),te(20,yK,2,2,"option",46),m()(),g(21,"div",42)(22,"label",49),v(23,"Category"),m(),g(24,"select",50),Oe("ngModelChange",function(i){W(t);let o=$();return Ne(o.filterCategory,i)||(o.filterCategory=i),G(i)}),re("change",function(){W(t);let i=$();return G(i.onFilterChange())}),g(25,"option",45),v(26,"All Categories"),m(),te(27,_K,2,3,"option",46),m()(),g(28,"div",42)(29,"label",51),v(30,"Sort By"),m(),g(31,"select",52),Oe("ngModelChange",function(i){W(t);let o=$();return Ne(o.sortBy,i)||(o.sortBy=i),G(i)}),g(32,"option",53),v(33,"Month"),m(),g(34,"option",54),v(35,"Amount"),m(),g(36,"option",55),v(37,"Expense Count"),m()()(),g(38,"div",42)(39,"label",56),v(40,"Order"),m(),g(41,"select",57),Oe("ngModelChange",function(i){W(t);let o=$();return Ne(o.sortOrder,i)||(o.sortOrder=i),G(i)}),g(42,"option",58),v(43,"Descending"),m(),g(44,"option",59),v(45,"Ascending"),m()()()()()}if(n&2){let t=$();I(10),Ae("ngModel",t.filterYear),I(3),B("ngForOf",t.getAvailableYears()),I(4),Ae("ngModel",t.filterMonth),I(3),B("ngForOf",t.getAvailableMonths()),I(4),Ae("ngModel",t.filterCategory),I(3),B("ngForOf",t.categories),I(4),Ae("ngModel",t.sortBy),I(10),Ae("ngModel",t.sortOrder)}}function CK(n,e){if(n&1&&(g(0,"div",72)(1,"span",73),v(2),m(),g(3,"span",74),v(4),m(),g(5,"span",75),v(6),Ke(7,"currency"),m()()),n&2){let t=e.$implicit;I(),rr("background-color",t.category.color),I(),J(t.category.icon),I(2),J(t.category.name),I(2),J(yn(7,5,t.amount,"INR"))}}function EK(n,e){if(n&1){let t=Ve();g(0,"div",63),re("click",function(){let i=W(t).$implicit,o=$(2);return G(o.selectMonth(i.monthKey))}),g(1,"div",64)(2,"h4",65),v(3),m(),g(4,"div",66),v(5,"\u2192"),m()(),g(6,"div",67)(7,"div",68),v(8),Ke(9,"currency"),m(),g(10,"div",69),v(11),m()(),g(12,"div",70),te(13,CK,8,8,"div",71),m()()}if(n&2){let t=e.$implicit;I(3),J(t.monthName),I(5),J(yn(9,4,t.totalAmount,"INR")),I(3),ve("",t.expenseCount," expenses"),I(2),B("ngForOf",t.categoryBreakdown.slice(0,3))}}function wK(n,e){if(n&1&&(g(0,"div",61),te(1,EK,14,7,"div",62),m()),n&2){let t=$();I(),B("ngForOf",t.getFilteredReports())}}function bK(n,e){n&1&&(g(0,"div",76)(1,"div",77),v(2,"\u{1F4CA}"),m(),g(3,"h6"),v(4,"No Reports Found"),m(),g(5,"p"),v(6,"Try adjusting your filters or add some expenses!"),m()())}function IK(n,e){if(n&1&&(g(0,"div",88)(1,"div",89)(2,"span",73),v(3),m(),g(4,"div",90)(5,"div",74),v(6),m(),g(7,"div",91),v(8),m()()(),g(9,"div",75),v(10),Ke(11,"currency"),m()()),n&2){let t=e.$implicit;I(2),rr("background-color",t.category.color),I(),J(t.category.icon),I(3),J(t.category.name),I(2),ve("",t.count," expenses"),I(2),J(yn(11,6,t.amount,"INR"))}}function DK(n,e){if(n&1&&(g(0,"div",92)(1,"div",93)(2,"div",94),v(3),Ke(4,"currency"),m(),g(5,"div",95)(6,"span",96),v(7),m()()(),g(8,"div",97)(9,"div",98),v(10),Ke(11,"date"),m(),g(12,"div",99),v(13),m()()()),n&2){let t=e.$implicit,r=$(2);I(3),J(yn(4,7,t.amount,"INR")),I(3),rr("background-color",r.getCategoryColor(t.categoryId)),I(),mn(" ",r.getCategoryIcon(t.categoryId)," ",r.getCategoryName(t.categoryId)," "),I(3),J(nn(11,10,t.date)),I(3),J(t.description||"No description")}}function SK(n,e){if(n&1){let t=Ve();g(0,"div",78)(1,"div",79)(2,"button",80),re("click",function(){W(t);let i=$();return G(i.showDetailedView=!1)}),v(3,"\u2190 Back to Overview"),m(),g(4,"h3"),v(5),m()(),g(6,"div",81)(7,"div",82)(8,"h4"),v(9,"Category Breakdown"),m(),g(10,"div",83),te(11,IK,12,9,"div",84),m()(),g(12,"div",85)(13,"h4"),v(14,"All Expenses"),m(),g(15,"div",86),te(16,DK,14,12,"div",87),m()()()()}if(n&2){let t,r,i,o=$();I(5),ve("",(t=o.getSelectedMonthReport())==null?null:t.monthName," - Detailed Report"),I(6),B("ngForOf",(r=o.getSelectedMonthReport())==null?null:r.categoryBreakdown),I(5),B("ngForOf",(i=o.getSelectedMonthReport())==null?null:i.expenses)}}var ky=class n{constructor(e,t){this.expenseService=e;this.categoryService=t}expenses=[];categories=[];monthlyReports=[];selectedMonth="";showDetailedView=!1;filterYear="";filterMonth="";filterCategory="";sortBy="month";sortOrder="desc";showAnalytics=!1;totalSpent=0;averageMonthlySpend=0;highestSpendingMonth=null;mostUsedCategory=null;spendingTrend="stable";ngOnInit(){this.loadData()}loadData(){return E(this,null,function*(){try{this.expenses=yield this.expenseService.getAll(),this.categories=yield this.categoryService.getAll(),this.generateMonthlyReports(),this.calculateAnalytics()}catch(e){console.error("Error loading reports:",e)}})}generateMonthlyReports(){let e={};this.expenses.forEach(t=>{let r=new Date(t.date),i=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;e[i]||(e[i]=[]),e[i].push(t)}),this.monthlyReports=[],Object.keys(e).sort().reverse().forEach(t=>{let r=e[t],i=r.reduce((u,d)=>u+d.amount,0),o=this.getCategoryBreakdown(r),[s,a]=t.split("-"),c=new Date(parseInt(s),parseInt(a)-1).toLocaleDateString("en-US",{month:"long",year:"numeric"});this.monthlyReports.push({monthKey:t,monthName:c,totalAmount:i,expenseCount:r.length,categoryBreakdown:o,expenses:r,year:parseInt(s),month:parseInt(a)})})}calculateAnalytics(){if(this.monthlyReports.length===0)return;let e=this.getFilteredReports();if(e.length===0){this.totalSpent=0,this.averageMonthlySpend=0,this.highestSpendingMonth=null,this.mostUsedCategory=null,this.spendingTrend="stable";return}this.totalSpent=e.reduce((i,o)=>i+o.totalAmount,0),this.averageMonthlySpend=this.totalSpent/e.length,this.highestSpendingMonth=e.reduce((i,o)=>o.totalAmount>i.totalAmount?o:i);let t={};if(this.getFilteredExpenses().forEach(i=>{t[i.categoryId]=(t[i.categoryId]||0)+1}),Object.keys(t).length>0){let i=Object.keys(t).reduce((o,s)=>t[s]>t[o]?s:o);this.mostUsedCategory=this.categories.find(o=>o.id===i)}else this.mostUsedCategory=null;if(e.length>=2){let i=e[0].totalAmount,o=e[1].totalAmount,s=i-o;s>0?this.spendingTrend="increasing":s<0?this.spendingTrend="decreasing":this.spendingTrend="stable"}else this.spendingTrend="stable"}getFilteredReports(){let e=[...this.monthlyReports];return this.filterYear&&(e=e.filter(t=>t.year.toString()===this.filterYear)),this.filterMonth&&(e=e.filter(t=>t.month.toString()===this.filterMonth)),this.filterCategory&&(e=e.filter(t=>t.categoryBreakdown.some(r=>r.category.id===this.filterCategory))),e.sort((t,r)=>{let i,o;switch(this.sortBy){case"month":i=new Date(t.year,t.month-1).getTime(),o=new Date(r.year,r.month-1).getTime();break;case"amount":i=t.totalAmount,o=r.totalAmount;break;case"expenseCount":i=t.expenseCount,o=r.expenseCount;break;default:i=new Date(t.year,t.month-1).getTime(),o=new Date(r.year,r.month-1).getTime()}return this.sortOrder==="asc"?i-o:o-i}),e}getAvailableYears(){return[...new Set(this.monthlyReports.map(t=>t.year.toString()))].sort((t,r)=>parseInt(r)-parseInt(t))}getAvailableMonths(){return[...new Set(this.monthlyReports.map(t=>t.month.toString()))].sort((t,r)=>parseInt(t)-parseInt(r))}getMonthName(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(e)-1]||e}clearFilters(){this.filterYear="",this.filterMonth="",this.filterCategory="",this.sortBy="month",this.sortOrder="desc",this.calculateAnalytics()}onFilterChange(){this.calculateAnalytics()}getCategoryBreakdown(e){let t={};return e.forEach(r=>{let i=this.categories.find(o=>o.id===r.categoryId);i&&(t[i.id]||(t[i.id]={amount:0,count:0,category:i}),t[i.id].amount+=r.amount,t[i.id].count+=1)}),Object.values(t).sort((r,i)=>i.amount-r.amount)}getCurrentMonthReport(){let e=new Date,t=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`;return this.monthlyReports.find(r=>r.monthKey===t)}getPreviousMonthReport(){let e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1),r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`;return this.monthlyReports.find(i=>i.monthKey===r)}getMonthlyComparison(){let e=this.getCurrentMonthReport(),t=this.getPreviousMonthReport();if(!e||!t)return{change:0,percentage:0,hasPreviousData:!1,status:e?"First Month":"No Data"};let r=e.totalAmount-t.totalAmount,i=t.totalAmount>0?r/t.totalAmount*100:0,o="No Change";return r>0?o="Increased":r<0&&(o="Decreased"),{change:r,percentage:parseFloat(i.toFixed(2)),hasPreviousData:!0,status:o}}selectMonth(e){this.selectedMonth=e,this.showDetailedView=!0}getSelectedMonthReport(){return this.monthlyReports.find(e=>e.monthKey===this.selectedMonth)}getCategoryName(e){let t=this.categories.find(r=>r.id===e);return t?t.name:"Unknown"}getCategoryIcon(e){let t=this.categories.find(r=>r.id===e);return t&&t.icon?t.icon:"\u{1F4CC}"}getCategoryColor(e){let t=this.categories.find(r=>r.id===e);return t&&t.color?t.color:"#6c757d"}getSpendingInsights(){let e=[];return this.highestSpendingMonth&&e.push({type:"highest",title:"Highest Spending Month",value:this.highestSpendingMonth.monthName,amount:this.highestSpendingMonth.totalAmount,icon:"\u{1F4C8}"}),this.mostUsedCategory&&e.push({type:"category",title:"Most Used Category",value:this.mostUsedCategory.name,icon:this.mostUsedCategory.icon||"\u{1F4CC}"}),e.push({type:"trend",title:"Spending Trend",value:this.spendingTrend.charAt(0).toUpperCase()+this.spendingTrend.slice(1),icon:this.spendingTrend==="increasing"?"\u{1F4C8}":this.spendingTrend==="decreasing"?"\u{1F4C9}":"\u27A1\uFE0F"}),e}getFilteredExpenses(){let e=[...this.expenses];return this.filterYear&&(e=e.filter(t=>new Date(t.date).getFullYear().toString()===this.filterYear)),this.filterMonth&&(e=e.filter(t=>(new Date(t.date).getMonth()+1).toString()===this.filterMonth)),this.filterCategory&&(e=e.filter(t=>t.categoryId===this.filterCategory)),e}static \u0275fac=function(t){return new(t||n)(z(Ci),z(Ei))};static \u0275cmp=Gt({type:n,selectors:[["app-monthly-reports"]],decls:24,vars:7,consts:[[1,"monthly-reports-page"],[1,"page-header"],[1,"header-content"],[1,"header-icon"],[1,"header-text"],[1,"page-title"],[1,"page-description"],["class","analytics-section",4,"ngIf"],["class","overview-section",4,"ngIf"],["class","filters-section",4,"ngIf"],[1,"reports-section"],[1,"section-header"],[1,"reports-count"],["class","reports-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","detailed-view",4,"ngIf"],[1,"analytics-section"],[1,"analytics-header"],[1,"btn-toggle-analytics",3,"click"],["class","analytics-grid",4,"ngIf"],[1,"analytics-grid"],[1,"analytics-card"],[1,"analytics-icon"],[1,"analytics-content"],[1,"analytics-value"],[1,"analytics-label"],["class","analytics-card",4,"ngFor","ngForOf"],[1,"overview-section"],[1,"overview-card"],[1,"overview-header"],[1,"month-badge"],[1,"overview-stats"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],["class","stat-value",3,"positive","negative",4,"ngIf"],["class","stat-value new-month",4,"ngIf"],[1,"stat-value","new-month"],[1,"filters-section"],[1,"filters-header"],[1,"btn-clear-filters",3,"click"],[1,"filters-grid"],[1,"filter-group"],["for","filterYear"],["id","filterYear",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","filterMonth"],["id","filterMonth",1,"form-select",3,"ngModelChange","change","ngModel"],["for","filterCategory"],["id","filterCategory",1,"form-select",3,"ngModelChange","change","ngModel"],["for","sortBy"],["id","sortBy",1,"form-select",3,"ngModelChange","ngModel"],["value","month"],["value","amount"],["value","expenseCount"],["for","sortOrder"],["id","sortOrder",1,"form-select",3,"ngModelChange","ngModel"],["value","desc"],["value","asc"],[3,"value"],[1,"reports-grid"],["class","report-card",3,"click",4,"ngFor","ngForOf"],[1,"report-card",3,"click"],[1,"report-header"],[1,"month-name"],[1,"report-arrow"],[1,"report-stats"],[1,"report-amount"],[1,"report-count"],[1,"category-preview"],["class","category-item",4,"ngFor","ngForOf"],[1,"category-item"],[1,"category-icon"],[1,"category-name"],[1,"category-amount"],[1,"empty-state"],[1,"empty-icon"],[1,"detailed-view"],[1,"detailed-header"],[1,"back-btn",3,"click"],[1,"detailed-content"],[1,"breakdown-section"],[1,"category-breakdown"],["class","category-item-detailed",4,"ngFor","ngForOf"],[1,"expenses-section"],[1,"expenses-list"],["class","expense-item",4,"ngFor","ngForOf"],[1,"category-item-detailed"],[1,"category-info"],[1,"category-details"],[1,"category-count"],[1,"expense-item"],[1,"expense-info"],[1,"expense-amount"],[1,"expense-category"],[1,"category-badge"],[1,"expense-details"],[1,"expense-date"],[1,"expense-description"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),v(4,"\u{1F4CA}"),m(),g(5,"div",4)(6,"h1",5),v(7,"Monthly Reports"),m(),g(8,"p",6),v(9,"Track your spending patterns and get insights"),m()()()(),te(10,hK,7,2,"div",7)(11,gK,24,8,"div",8)(12,vK,46,8,"div",9),g(13,"div",10)(14,"div",11)(15,"h3"),v(16,"Monthly Breakdown"),m(),g(17,"p"),v(18,"Click on any month to view detailed breakdown"),m(),g(19,"div",12),v(20),m()(),te(21,wK,2,1,"div",13)(22,bK,7,0,"div",14),m(),te(23,SK,17,3,"div",15),m()),t&2&&(I(10),B("ngIf",r.monthlyReports.length>0),I(),B("ngIf",r.getCurrentMonthReport()),I(),B("ngIf",r.monthlyReports.length>0),I(8),ve("",r.getFilteredReports().length," months"),I(),B("ngIf",r.getFilteredReports().length>0),I(),B("ngIf",r.getFilteredReports().length===0),I(),B("ngIf",r.showDetailedView&&r.getSelectedMonthReport()))},dependencies:[on,Yr,_n,dr,ys,_s,vi,ur,qn,Vu,ea],styles:[".monthly-reports-page[_ngcontent-%COMP%]{margin:0 auto;padding:1rem;background:#f8f9fa;min-height:100vh}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b6b9b,#b76bb7);color:#fff;padding:2rem;border-radius:12px;margin-bottom:1.5rem;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header-icon[_ngcontent-%COMP%]{font-size:2rem;background:#667eea;border-radius:8px;width:50px;height:50px;display:flex;align-items:center;justify-content:center;color:#fff}.header-text[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin:0 0 .25rem;color:#fff}.page-description[_ngcontent-%COMP%]{font-size:1rem;margin:0}.analytics-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef}.analytics-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b9d,#ffa726,#ffeb3b);color:#fff;padding:1rem 1.5rem;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e9ecef}.analytics-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;display:flex;align-items:center;gap:.5rem}.btn-toggle-analytics[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-weight:500;font-size:.9rem;transition:background-color .2s ease}.btn-toggle-analytics[_ngcontent-%COMP%]:hover{background:#5a6fd8}.analytics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;padding:1.5rem}.analytics-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:1.5rem;border:1px solid #e9ecef;display:flex;align-items:center;gap:1rem}.analytics-icon[_ngcontent-%COMP%]{font-size:1.5rem;background:#667eea;border-radius:6px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;color:#fff;flex-shrink:0}.analytics-content[_ngcontent-%COMP%]{flex:1}.analytics-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#2c3e50;margin-bottom:.25rem}.analytics-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;font-weight:500}.overview-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.overview-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef}.overview-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b9d,#ffa726,#ffeb3b);color:#fff;padding:1.5rem;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e9ecef}.overview-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0}.month-badge[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:.5rem 1rem;border-radius:20px;font-size:.9rem;font-weight:500}.overview-stats[_ngcontent-%COMP%]{padding:1.5rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.stat-item[_ngcontent-%COMP%]{text-align:center;background:#f8f9fa;padding:1.5rem;border-radius:8px;border:1px solid #e9ecef}.stat-value[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem}.stat-value.positive[_ngcontent-%COMP%]{color:#27ae60}.stat-value.negative[_ngcontent-%COMP%]{color:#e74c3c}.stat-value.new-month[_ngcontent-%COMP%]{color:#f39c12;font-size:1.5rem}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;font-weight:500}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef}.filters-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem;padding-bottom:.75rem;border-bottom:1px solid #e9ecef;background:linear-gradient(135deg,#ff6b9d,#ffa726,#ffeb3b);color:#fff;padding:1rem 1.5rem;border-radius:8px 8px 0 0}.filters-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#fff;display:flex;align-items:center;gap:.5rem}.btn-clear-filters[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd23f,#3ec300);color:#fff;border:none;padding:.875rem 1.5rem;border-radius:12px;cursor:pointer;font-weight:600;font-size:1rem;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;box-shadow:0 5px 20px #ffd23f4d;height:50px;white-space:nowrap}.btn-clear-filters[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #ffd23f66}.filters-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:.9rem}.form-select[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #e9ecef;border-radius:6px;font-size:.9rem;transition:border-color .2s ease;background:#fff;cursor:pointer}.form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-select[_ngcontent-%COMP%]:hover{border-color:#667eea}.reports-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef}.section-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b9d,#ffa726,#ffeb3b);color:#fff;padding:1.5rem;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e9ecef}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#fff}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0 0;color:#6c757d;font-size:.9rem}.reports-count[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;font-weight:500}.reports-grid[_ngcontent-%COMP%]{padding:1.5rem;display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem}.report-card[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;padding:1.5rem;transition:all .2s ease;cursor:pointer}.report-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a;border-color:#667eea}.report-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.month-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#2c3e50;margin:0}.report-arrow[_ngcontent-%COMP%]{font-size:1.25rem;color:#667eea;transition:transform .2s ease}.report-card[_ngcontent-%COMP%]:hover   .report-arrow[_ngcontent-%COMP%]{transform:translate(4px)}.report-stats[_ngcontent-%COMP%]{margin-bottom:1rem}.report-amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#2c3e50;margin-bottom:.25rem}.report-count[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;font-weight:500}.category-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.category-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem;background:#fff;border-radius:4px;border:1px solid #e9ecef}.category-icon[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.8rem;color:#fff}.category-name[_ngcontent-%COMP%]{flex:1;font-size:.85rem;color:#2c3e50;font-weight:500}.category-amount[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;font-weight:600}.detailed-view[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;border:1px solid #e9ecef;margin-top:1.5rem}.detailed-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b9d,#ffa726,#ffeb3b);color:#fff;padding:1.5rem;display:flex;align-items:center;gap:1rem;border-bottom:1px solid #e9ecef}.back-btn[_ngcontent-%COMP%]{background:#667eea;color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-weight:500;font-size:.9rem;transition:background-color .2s ease}.back-btn[_ngcontent-%COMP%]:hover{background:#5a6fd8}.detailed-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0;color:#fff}.detailed-content[_ngcontent-%COMP%]{padding:1.5rem}.breakdown-section[_ngcontent-%COMP%], .expenses-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;background:#f8f9fa;border-radius:8px;padding:1.5rem;border:1px solid #e9ecef}.breakdown-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .expenses-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#2c3e50;margin-bottom:1rem}.category-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.category-item-detailed[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;background:#fff;border-radius:6px;border:1px solid #e9ecef}.category-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.category-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.category-count[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;font-weight:500}.category-amount[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:1rem}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.expense-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;background:#fff;border-radius:6px;border:1px solid #e9ecef}.expense-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.expense-amount[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:1.1rem}.category-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.85rem;font-weight:500;color:#fff}.expense-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;text-align:right}.expense-date[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;font-weight:500}.expense-description[_ngcontent-%COMP%]{font-size:.9rem;color:#2c3e50;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:500}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1.5rem;color:#6c757d;background:#fff;border-radius:8px;margin:1.5rem;border:1px solid #e9ecef}.empty-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:.5rem;color:#2c3e50}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0;opacity:.8;font-weight:500}@media (max-width: 768px){.monthly-reports-page[_ngcontent-%COMP%]{padding:.5rem}.page-header[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1rem}.page-title[_ngcontent-%COMP%]{font-size:1.5rem}.analytics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:1rem}.filters-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.reports-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:1rem}.overview-stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.section-header[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;text-align:center}.detailed-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}}@media (max-width: 480px){.page-header[_ngcontent-%COMP%]{padding:1rem}.header-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:1rem}.header-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.5rem}.page-title[_ngcontent-%COMP%]{font-size:1.5rem}.analytics-card[_ngcontent-%COMP%]{padding:1rem}.analytics-icon[_ngcontent-%COMP%]{width:35px;height:35px;font-size:1.25rem}.detailed-content[_ngcontent-%COMP%]{padding:1rem}.expense-item[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem;text-align:center}.expense-info[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}.expense-details[_ngcontent-%COMP%]{text-align:center}}"]})};function TK(n,e){n&1&&(g(0,"span",21),v(1,"\u23F3"),m())}function xK(n,e){n&1&&(g(0,"span"),v(1,"Sign In"),m())}function MK(n,e){if(n&1&&(g(0,"div",22),v(1),m()),n&2){let t=$();I(),ve(" ",t.error," ")}}var Fy=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";loading=!1;error="";signIn(){return E(this,null,function*(){if(!this.email||!this.password){this.error="Please enter both email and password";return}this.loading=!0,this.error="";try{yield this.authService.signIn(this.email,this.password),this.router.navigate(["/dashboard"])}catch(e){this.error=this.getErrorMessage(e)}finally{this.loading=!1}})}goToRegister(){this.router.navigate(["/register"])}getErrorMessage(e){return e.code==="auth/user-not-found"?"No account found with this email address. Please check your email or create a new account.":e.code==="auth/wrong-password"?"Incorrect password. Please check your password and try again.":e.code==="auth/invalid-email"?"Invalid email address. Please enter a valid email format.":e.code==="auth/too-many-requests"?"Too many failed attempts. Please wait a few minutes and try again.":e.code==="auth/network-request-failed"?"Network error. Please check your internet connection and try again.":"An error occurred during sign-in. Please try again."}static \u0275fac=function(t){return new(t||n)(z(hr),z(dt))};static \u0275cmp=Gt({type:n,selectors:[["app-login"]],decls:30,vars:6,consts:[["loginForm","ngForm"],[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"brand"],[1,"brand-icon"],[1,"brand-title"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","placeholder","Enter your email",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","","placeholder","Enter your password",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn-primary",3,"disabled"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"register-link"],[1,"link",3,"click"],["class","error-message",4,"ngIf"],[1,"loading-spinner"],[1,"error-message"]],template:function(t,r){if(t&1){let i=Ve();g(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"span",5),v(5,"\u{1F4B0}"),m(),g(6,"h1",6),v(7,"Expense Tracker"),m()(),g(8,"p",7),v(9,"Sign in to manage your expenses"),m()(),g(10,"form",8,0),re("ngSubmit",function(){return W(i),G(r.signIn())}),g(12,"div",9)(13,"label",10),v(14,"Email"),m(),g(15,"input",11),Oe("ngModelChange",function(s){return W(i),Ne(r.email,s)||(r.email=s),G(s)}),m()(),g(16,"div",9)(17,"label",12),v(18,"Password"),m(),g(19,"input",13),Oe("ngModelChange",function(s){return W(i),Ne(r.password,s)||(r.password=s),G(s)}),m()(),g(20,"div",14)(21,"button",15),te(22,TK,2,0,"span",16)(23,xK,2,0,"span",17),m()()(),g(24,"div",18)(25,"p"),v(26,"Don't have an account? "),g(27,"a",19),re("click",function(){return W(i),G(r.goToRegister())}),v(28,"Sign up"),m()()(),te(29,MK,2,1,"div",20),m()()}if(t&2){let i=Qs(11);I(15),Ae("ngModel",r.email),I(4),Ae("ngModel",r.password),I(2),B("disabled",!i.form.valid||r.loading),I(),B("ngIf",r.loading),I(),B("ngIf",!r.loading),I(6),B("ngIf",r.error)}},dependencies:[on,_n,dr,ms,_i,ur,gs,fo,qn,ho],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:1rem}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2.5rem;box-shadow:0 20px 40px #0000001a;width:100%;max-width:400px}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:1rem}.brand-icon[_ngcontent-%COMP%]{font-size:2rem}.brand-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#333;margin:0}.login-subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:1rem}.login-form[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#333;margin-bottom:.5rem;font-size:.9rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;transition:all .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-actions[_ngcontent-%COMP%]{margin-top:2rem}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #667eea4d}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;cursor:pointer}.link[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:.75rem 1rem;border-radius:8px;margin-top:1rem;text-align:center;border:1px solid #fcc}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.brand-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};var Ly=class n{constructor(e){this.firebaseService=e}createDefaultCategories(){return E(this,null,function*(){let e=[{name:"Food & Dining",color:"#ff6b9d",icon:"\u{1F355}"},{name:"Transportation",color:"#4ecdc4",icon:"\u{1F697}"},{name:"Shopping",color:"#45b7d1",icon:"\u{1F6CD}\uFE0F"},{name:"Entertainment",color:"#96ceb4",icon:"\u{1F3AC}"},{name:"Healthcare",color:"#feca57",icon:"\u{1F3E5}"},{name:"Utilities",color:"#ff9ff3",icon:"\u{1F4A1}"},{name:"Education",color:"#54a0ff",icon:"\u{1F4DA}"},{name:"Travel",color:"#5f27cd",icon:"\u2708\uFE0F"},{name:"Gifts",color:"#ff6348",icon:"\u{1F381}"},{name:"Other",color:"#95a5a6",icon:"\u{1F4CC}"}];try{for(let t of e)yield this.firebaseService.addCategory(t);console.log("Default categories created successfully")}catch(t){console.error("Error creating default categories:",t)}})}static \u0275fac=function(t){return new(t||n)(ee(An))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function AK(n,e){n&1&&(g(0,"span",25),v(1,"\u23F3"),m())}function OK(n,e){n&1&&(g(0,"span"),v(1,"Create Account"),m())}function RK(n,e){if(n&1&&(g(0,"div",26),v(1),m()),n&2){let t=$();I(),ve(" ",t.error," ")}}var Vy=class n{constructor(e,t,r){this.authService=e;this.router=t;this.defaultCategoriesService=r}displayName="";email="";password="";confirmPassword="";loading=!1;error="";register(){return E(this,null,function*(){if(!this.displayName||!this.email||!this.password||!this.confirmPassword){this.error="Please fill in all fields";return}if(!this.passwordsMatch()){this.error="Passwords do not match";return}if(this.password.length<6){this.error="Password must be at least 6 characters long";return}this.loading=!0,this.error="";try{yield this.authService.register(this.email,this.password,this.displayName),yield this.defaultCategoriesService.createDefaultCategories(),this.router.navigate(["/dashboard"])}catch(e){this.error=this.getErrorMessage(e)}finally{this.loading=!1}})}goToLogin(){this.router.navigate(["/login"])}passwordsMatch(){return this.password===this.confirmPassword}getErrorMessage(e){return e.code==="auth/email-already-in-use"?"An account with this email already exists. Please sign in instead or use a different email.":e.code==="auth/invalid-email"?"Invalid email address. Please enter a valid email format.":e.code==="auth/weak-password"?"Password is too weak. Please choose a stronger password with at least 6 characters.":e.code==="auth/operation-not-allowed"?"Email/password accounts are not enabled. Please contact support.":e.code==="auth/network-request-failed"?"Network error. Please check your internet connection and try again.":"An error occurred during registration. Please try again."}static \u0275fac=function(t){return new(t||n)(z(hr),z(dt),z(Ly))};static \u0275cmp=Gt({type:n,selectors:[["app-register"]],decls:38,vars:8,consts:[["registerForm","ngForm"],[1,"register-container"],[1,"register-card"],[1,"register-header"],[1,"brand"],[1,"brand-icon"],[1,"brand-title"],[1,"register-subtitle"],[1,"register-form",3,"ngSubmit"],[1,"form-group"],["for","displayName",1,"form-label"],["type","text","id","displayName","name","displayName","required","","placeholder","Enter your full name",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","placeholder","Enter your email",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","","minlength","6","placeholder","Enter your password (min 6 characters)",1,"form-control",3,"ngModelChange","ngModel"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","name","confirmPassword","required","","placeholder","Confirm your password",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn-primary",3,"disabled"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"login-link"],[1,"link",3,"click"],["class","error-message",4,"ngIf"],[1,"loading-spinner"],[1,"error-message"]],template:function(t,r){if(t&1){let i=Ve();g(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"span",5),v(5,"\u{1F4B0}"),m(),g(6,"h1",6),v(7,"Expense Tracker"),m()(),g(8,"p",7),v(9,"Create your account to start tracking expenses"),m()(),g(10,"form",8,0),re("ngSubmit",function(){return W(i),G(r.register())}),g(12,"div",9)(13,"label",10),v(14,"Full Name"),m(),g(15,"input",11),Oe("ngModelChange",function(s){return W(i),Ne(r.displayName,s)||(r.displayName=s),G(s)}),m()(),g(16,"div",9)(17,"label",12),v(18,"Email"),m(),g(19,"input",13),Oe("ngModelChange",function(s){return W(i),Ne(r.email,s)||(r.email=s),G(s)}),m()(),g(20,"div",9)(21,"label",14),v(22,"Password"),m(),g(23,"input",15),Oe("ngModelChange",function(s){return W(i),Ne(r.password,s)||(r.password=s),G(s)}),m()(),g(24,"div",9)(25,"label",16),v(26,"Confirm Password"),m(),g(27,"input",17),Oe("ngModelChange",function(s){return W(i),Ne(r.confirmPassword,s)||(r.confirmPassword=s),G(s)}),m()(),g(28,"div",18)(29,"button",19),te(30,AK,2,0,"span",20)(31,OK,2,0,"span",21),m()()(),g(32,"div",22)(33,"p"),v(34,"Already have an account? "),g(35,"a",23),re("click",function(){return W(i),G(r.goToLogin())}),v(36,"Sign in"),m()()(),te(37,RK,2,1,"div",24),m()()}if(t&2){let i=Qs(11);I(15),Ae("ngModel",r.displayName),I(4),Ae("ngModel",r.email),I(4),Ae("ngModel",r.password),I(4),Ae("ngModel",r.confirmPassword),I(2),B("disabled",!i.form.valid||r.loading||!r.passwordsMatch()),I(),B("ngIf",r.loading),I(),B("ngIf",!r.loading),I(6),B("ngIf",r.error)}},dependencies:[on,_n,dr,ms,_i,ur,gs,fo,eS,qn,ho],styles:[".register-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:1rem}.register-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2.5rem;box-shadow:0 20px 40px #0000001a;width:100%;max-width:400px}.register-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:1rem}.brand-icon[_ngcontent-%COMP%]{font-size:2rem}.brand-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#333;margin:0}.register-subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:1rem}.register-form[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#333;margin-bottom:.5rem;font-size:.9rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;transition:all .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-control.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}.form-actions[_ngcontent-%COMP%]{margin-top:2rem}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #667eea4d}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.login-link[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;cursor:pointer}.link[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:.75rem 1rem;border-radius:8px;margin-top:1rem;text-align:center;border:1px solid #fcc}@media (max-width: 480px){.register-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.brand-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};var Va=class n{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.currentUser$.pipe(_t(e=>e!==void 0),At(1),pe(e=>e?!0:(this.router.navigate(["/login"]),!1)))}static \u0275fac=function(t){return new(t||n)(ee(hr),ee(dt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var KL=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",component:Fy},{path:"register",component:Vy},{path:"dashboard",component:Oy,canActivate:[Va]},{path:"expenses",component:Ry,canActivate:[Va]},{path:"categories",component:Ny,canActivate:[Va]},{path:"reports",component:ky,canActivate:[Va]}];var YL={apiKey:"AIzaSyBgq57IKhHsOG_4kAL3zhufM4_jC4b4lYY",authDomain:"expense-tracker-4d264.firebaseapp.com",projectId:"expense-tracker-4d264",storageBucket:"expense-tracker-4d264.firebasestorage.app",messagingSenderId:"136666664235",appId:"1:136666664235:web:9cbddb8eab9782b491096e",measurementId:"G-8W1P9M670J"};var nS="Service workers are disabled or not supported by this browser",Ml=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new de(r=>r.error(new F(5601,!1)));else{let r=null,i=new nt;this.worker=new de(u=>(r!==null&&u.next(r),i.subscribe(d=>u.next(d))));let o=()=>{let{controller:u}=e;u!==null&&(r=u,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Nt(()=>e.getRegistration()));let s=new nt;this.events=s.asObservable();let a=u=>{let{data:d}=u;d?.type&&s.next(d)};e.addEventListener("message",a),t?.get(tr,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(At(1)).subscribe(i=>{i.postMessage(V({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(_t(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(At(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(_t(i=>i.nonce===e),At(1),pe(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},NK=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new nt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=Ti,this.notificationClicks=Ti,this.notificationCloses=Ti,this.pushSubscriptionChanges=Ti,this.subscription=Ti;return}this.messages=this.sw.eventsOfType("PUSH").pipe(pe(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(pe(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(pe(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(pe(i=>i.data)),this.pushManager=this.sw.registration.pipe(pe(i=>i.pushManager));let r=this.pushManager.pipe(Nt(i=>i.getSubscription()));this.subscription=new de(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(nS));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Nt(c=>c.subscribe(r)),At(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(nS));let t=r=>{if(r===null)throw new F(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new F(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(At(1),Nt(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(ee(Ml))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),kK=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Ti,this.unrecoverable=Ti;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(nS));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new F(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(ee(Ml))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var ZL=new Q("");function FK(){let n=k(ph);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=k(ZL),t=k(Te),r=k(tr);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=QL(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),QL(+a[0])]);break;default:throw new F(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope}).catch(s=>console.error(Ri(5604,!1)))})})}function QL(n){return new Promise(e=>setTimeout(e,n))}function LK(n,e){return new Ml(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var ph=class{enabled;scope;registrationStrategy};function JL(n,e={}){return Lt([NK,kK,{provide:ZL,useValue:n},{provide:ph,useValue:e},{provide:Ml,useFactory:LK,deps:[ph,Qe]},bc(FK)])}var XL={providers:[Fv(),cC({eventCoalescing:!0}),CE(KL),KO(),DR(()=>SR(YL)),AN(()=>RN()),lL(()=>uL()),wL(()=>bL()),JL("ngsw-worker.js",{enabled:!Pu(),registrationStrategy:"registerWhenStable:30000"})]};var jy=class n{constructor(){}scrollToTop(){window.scrollTo({top:0,left:0,behavior:"smooth"});let e=document.querySelector(".main-content");e&&e.scrollTo({top:0,left:0,behavior:"smooth"})}scrollToElement(e){let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}scrollToPosition(e,t=0){window.scrollTo({top:e,left:t,behavior:"smooth"})}getScrollPosition(){return{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function jK(n,e){n&1&&(g(0,"div",3)(1,"div",4),v(2,"\u23F3"),m(),g(3,"p"),v(4,"Loading..."),m()())}function UK(n,e){if(n&1){let t=Ve();g(0,"div",35)(1,"div",36)(2,"span",37),v(3),m(),g(4,"button",38),re("click",function(){W(t);let i=$(2);return G(i.signOut())}),g(5,"span",39),v(6,"\u{1F6AA}"),m()()()()}if(n&2){let t=e.ngIf;I(3),J(t.displayName||t.email)}}function BK(n,e){if(n&1){let t=Ve();g(0,"div",40),re("click",function(){W(t);let i=$(2);return G(i.closeSidebar())}),m()}}function $K(n,e){if(n&1){let t=Ve();g(0,"div",5)(1,"header",6)(2,"div",7)(3,"div",8)(4,"button",9),re("click",function(){W(t);let i=$();return G(i.toggleSidebar())}),g(5,"span",10),v(6,"\u2630"),m()(),g(7,"div",11)(8,"span",12),v(9,"\u{1F4B0}"),m(),g(10,"span",13),v(11,"Expense Tracker"),m()()(),g(12,"nav",14)(13,"a",15),re("click",function(){W(t);let i=$();return G(i.onNavClick())}),g(14,"span",16),v(15,"\u{1F4CA}"),m(),g(16,"span",17),v(17,"Dashboard"),m()(),g(18,"a",18),re("click",function(){W(t);let i=$();return G(i.onNavClick())}),g(19,"span",16),v(20,"\u{1F4B8}"),m(),g(21,"span",17),v(22,"Expenses"),m()(),g(23,"a",19),re("click",function(){W(t);let i=$();return G(i.onNavClick())}),g(24,"span",16),v(25,"\u{1F3F7}\uFE0F"),m(),g(26,"span",17),v(27,"Categories"),m()(),g(28,"a",20),re("click",function(){W(t);let i=$();return G(i.onNavClick())}),g(29,"span",16),v(30,"\u{1F4CA}"),m(),g(31,"span",17),v(32,"Reports"),m()()(),te(33,UK,7,1,"div",21),Ke(34,"async"),m()(),te(35,BK,1,0,"div",22),g(36,"aside",23)(37,"div",24)(38,"div",25)(39,"span",12),v(40,"\u{1F4B0}"),m(),g(41,"span",13),v(42,"Expense Tracker"),m()()(),g(43,"nav",26)(44,"a",27),re("click",function(){W(t);let i=$();return G(i.onNavClick())}),g(45,"span",28),v(46,"\u{1F4CA}"),m(),g(47,"span",29),v(48,"Dashboard"),m()(),g(49,"a",30),re("click",function(){W(t);let i=$();return G(i.onNavClick())}),g(50,"span",28),v(51,"\u{1F4B8}"),m(),g(52,"span",29),v(53,"Expenses"),m()(),g(54,"a",31),re("click",function(){W(t);let i=$();return G(i.onNavClick())}),g(55,"span",28),v(56,"\u{1F3F7}\uFE0F"),m(),g(57,"span",29),v(58,"Categories"),m()(),g(59,"a",32),re("click",function(){W(t);let i=$();return G(i.onNavClick())}),g(60,"span",28),v(61,"\u{1F4CA}"),m(),g(62,"span",29),v(63,"Reports"),m()()()(),g(64,"main",33)(65,"div",34),nr(66,"router-outlet"),m()()()}if(n&2){let t=$();I(33),B("ngIf",nn(34,6,t.currentUser$)),I(2),B("ngIf",t.sidebarOpen),I(),gn("sidebar-open",t.sidebarOpen),I(28),gn("content-blurred",t.sidebarOpen)}}function zK(n,e){n&1&&(g(0,"div",41),nr(1,"router-outlet"),m())}var Uy=class n{constructor(e,t,r){this.scrollService=e;this.authService=t;this.router=r;this.restoreLastRoute(),this.router.events.subscribe(()=>{this.saveCurrentRoute()})}sidebarOpen=!1;get currentUser$(){return this.authService.currentUser$}toggleSidebar(){console.log("Toggle sidebar called"),this.sidebarOpen=!this.sidebarOpen,this.sidebarOpen?document.body.style.overflow="hidden":document.body.style.overflow=""}closeSidebar(){console.log("Close sidebar called"),this.sidebarOpen=!1,document.body.style.overflow=""}signOut(){return E(this,null,function*(){try{yield this.authService.signOut(),this.router.navigate(["/login"])}catch(e){console.error("Error signing out:",e)}})}saveCurrentRoute(){let e=this.router.url;e&&e!=="/login"&&e!=="/register"&&localStorage.setItem("lastRoute",e)}restoreLastRoute(){let e=localStorage.getItem("lastRoute");e&&e!=="/login"&&e!=="/register"&&this.authService.currentUser$.pipe(_t(t=>t!==void 0),At(1)).subscribe(t=>{t&&this.router.url==="/dashboard"&&setTimeout(()=>{this.router.navigate([e])},100)})}onNavClick(){this.closeSidebar(),this.scrollService.scrollToTop(),this.saveCurrentRoute()}static \u0275fac=function(t){return new(t||n)(z(jy),z(hr),z(dt))};static \u0275cmp=Gt({type:n,selectors:[["app-root"]],decls:6,vars:9,consts:[["class","loading-container",4,"ngIf"],["class","app-container",4,"ngIf"],["class","auth-container",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"app-container"],[1,"app-header"],[1,"header-content"],[1,"header-left"],["aria-label","Toggle sidebar",1,"sidebar-toggle",3,"click"],[1,"hamburger-icon"],[1,"brand"],[1,"brand-icon"],[1,"brand-text"],[1,"header-nav"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link",3,"click"],[1,"nav-icon"],[1,"nav-text"],["routerLink","/expenses","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/categories","routerLinkActive","active",1,"nav-link",3,"click"],["routerLink","/reports","routerLinkActive","active",1,"nav-link",3,"click"],["class","user-section",4,"ngIf"],["class","sidebar-overlay",3,"click",4,"ngIf"],[1,"sidebar"],[1,"sidebar-header"],[1,"sidebar-brand"],[1,"sidebar-nav"],["routerLink","/dashboard","routerLinkActive","active",1,"sidebar-link",3,"click"],[1,"link-icon"],[1,"link-text"],["routerLink","/expenses","routerLinkActive","active",1,"sidebar-link",3,"click"],["routerLink","/categories","routerLinkActive","active",1,"sidebar-link",3,"click"],["routerLink","/reports","routerLinkActive","active",1,"sidebar-link",3,"click"],[1,"main-content"],[1,"content-container"],[1,"user-section"],[1,"user-info"],[1,"user-name"],["title","Sign out",1,"sign-out-btn",3,"click"],[1,"sign-out-icon"],[1,"sidebar-overlay",3,"click"],[1,"auth-container"]],template:function(t,r){t&1&&(te(0,jK,5,0,"div",0),Ke(1,"async"),te(2,$K,67,8,"div",1),Ke(3,"async"),te(4,zK,2,0,"div",2),Ke(5,"async")),t&2&&(B("ngIf",nn(1,3,r.currentUser$)===void 0),I(2),B("ngIf",nn(3,5,r.currentUser$)),I(2),B("ngIf",nn(5,7,r.currentUser$)===null))},dependencies:[id,Wo,vE,on,_n,NC],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;position:relative;overflow-x:hidden}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{overflow-x:hidden;position:relative;height:100%;margin:0;padding:0}@supports (height: 100dvh){.sidebar[_ngcontent-%COMP%], .sidebar-overlay[_ngcontent-%COMP%]{height:100dvh;min-height:100dvh;max-height:100dvh}}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%], .sidebar-overlay[_ngcontent-%COMP%]{height:100vh!important;min-height:100vh!important;max-height:100vh!important;top:0!important}}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b35,#f7931e);box-shadow:0 2px 10px #0000001a;position:sticky;top:0;z-index:100;padding:0}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;margin:0 auto}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.sidebar-toggle[_ngcontent-%COMP%]{background:#fff3;border:none;border-radius:8px;padding:.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;min-width:44px;min-height:44px}.sidebar-toggle[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.05)}@media (min-width: 769px){.sidebar-toggle[_ngcontent-%COMP%]{display:none}}.hamburger-icon[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.brand-icon[_ngcontent-%COMP%]{font-size:1.5rem}.brand-text[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#fff}.header-nav[_ngcontent-%COMP%]{display:flex;gap:1rem}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;color:#fff;text-decoration:none;border-radius:8px;transition:all .3s ease;font-weight:500}.nav-link[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-1px)}.nav-link.active[_ngcontent-%COMP%]{background:#ffffff4d}.nav-icon[_ngcontent-%COMP%]{font-size:1rem}.nav-text[_ngcontent-%COMP%]{font-size:.9rem}.user-section[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:1rem}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#fff3;padding:.5rem 1rem;border-radius:8px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.user-name[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:.9rem;max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sign-out-btn[_ngcontent-%COMP%]{background:#fff3;border:none;border-radius:6px;padding:.25rem .5rem;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.sign-out-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.05)}.sign-out-icon[_ngcontent-%COMP%]{font-size:.9rem;color:#fff}.auth-container[_ngcontent-%COMP%]{min-height:100vh;width:100%}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;min-height:100vh;max-height:100vh;background:#00000080;z-index:200;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);padding-top:env(safe-area-inset-top);box-sizing:border-box}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:-300px;width:300px;height:100vh;min-height:100vh;max-height:100vh;background:linear-gradient(135deg,#ff8c42,#ffa726,#ffcc02);box-shadow:4px 0 20px #00000026;z-index:300;transition:left .3s ease;overflow-y:auto;display:flex;flex-direction:column;padding-top:env(safe-area-inset-top);box-sizing:border-box}.sidebar.sidebar-open[_ngcontent-%COMP%]{left:0}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:1.5rem;border-bottom:1px solid rgba(255,255,255,.2);flex-shrink:0}.sidebar-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.sidebar-nav[_ngcontent-%COMP%]{padding:1rem 0;flex:1;min-height:0;overflow-y:auto;display:flex;flex-direction:column}.sidebar-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem;color:#fff;text-decoration:none;transition:all .3s ease;border-left:3px solid transparent}.sidebar-link[_ngcontent-%COMP%]:hover{background:#ffffff1a;border-left-color:#ffffff80}.sidebar-link.active[_ngcontent-%COMP%]{background:#fff3;border-left-color:#fff}.link-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:24px;text-align:center}.link-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}.main-content[_ngcontent-%COMP%]{flex:1;background:#f8f9fa;transition:filter .3s ease}.main-content.content-blurred[_ngcontent-%COMP%]{filter:blur(4px);pointer-events:none}.content-container[_ngcontent-%COMP%]{margin:0 auto;padding:2rem 1.5rem}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{padding:1rem}.header-nav[_ngcontent-%COMP%]{display:none}.sidebar-toggle[_ngcontent-%COMP%]{display:flex}.sidebar[_ngcontent-%COMP%]{width:280px;left:-280px;height:100vh;min-height:100vh;max-height:100vh;top:0}.sidebar-overlay[_ngcontent-%COMP%]{height:100vh;min-height:100vh;max-height:100vh;top:0}.content-container[_ngcontent-%COMP%]{padding:1rem}.brand-text[_ngcontent-%COMP%]{font-size:1.1rem}.user-section[_ngcontent-%COMP%]{margin-left:.5rem}.user-info[_ngcontent-%COMP%]{padding:.25rem .5rem}.user-name[_ngcontent-%COMP%]{max-width:100px;font-size:.8rem}}@media (max-width: 480px){.header-content[_ngcontent-%COMP%]{padding:.75rem}.sidebar[_ngcontent-%COMP%]{width:260px;left:-260px;height:100vh;min-height:100vh;max-height:100vh;top:0}.sidebar-overlay[_ngcontent-%COMP%]{height:100vh;min-height:100vh;max-height:100vh;top:0}.content-container[_ngcontent-%COMP%]{padding:.75rem}}.loading-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-size:1.2rem}.loading-spinner[_ngcontent-%COMP%]{font-size:3rem;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};qC(Uy,XL).catch(n=>console.error(n));
