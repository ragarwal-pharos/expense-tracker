import{i as k}from"./chunk-LK6VNFKO.js";import{Aa as _,Ga as C,Hc as E,Ic as I,Ja as m,Jc as F,Kc as T,Lc as R,Mc as z,Nc as N,Qb as O,Tc as V,Ua as l,Va as t,Wa as n,Wb as S,Wc as L,Ya as h,Z as g,Za as u,_ as p,_a as d,cb as w,d as f,gb as i,hb as y,ib as x,lb as P,mb as v,nb as M,wa as s}from"./chunk-BZFO6NJ3.js";function j(o,r){o&1&&(t(0,"span",24),i(1,"\u23F3"),n())}function D(o,r){o&1&&(t(0,"span"),i(1,"Send Reset Link"),n())}function q(o,r){if(o&1){let e=h();t(0,"div",14)(1,"p",15),i(2," Enter your email address and we'll send you a link to reset your password. "),n(),t(3,"form",16,0),u("ngSubmit",function(){g(e);let c=d();return p(c.sendResetEmail())}),t(5,"div",17)(6,"label",18),i(7,"Email Address"),n(),t(8,"input",19),M("ngModelChange",function(c){g(e);let b=d();return v(b.email,c)||(b.email=c),p(c)}),n()(),t(9,"div",20)(10,"button",21),m(11,j,2,0,"span",22)(12,D,2,0,"span",23),n()()()()}if(o&2){let e=w(4),a=d();s(8),P("ngModel",a.email),s(2),l("disabled",!e.form.valid||a.loading),s(),l("ngIf",a.loading),s(),l("ngIf",!a.loading)}}function Y(o,r){o&1&&(t(0,"span",24),i(1,"\u23F3"),n())}function W(o,r){o&1&&(t(0,"span"),i(1,"Resend Email"),n())}function B(o,r){if(o&1){let e=h();t(0,"div",25)(1,"div",26),i(2,"\u2705"),n(),t(3,"h3",27),i(4,"Check Your Email"),n(),t(5,"p",28),i(6," We've sent a password reset link to "),t(7,"strong"),i(8),n()(),t(9,"p",29),i(10," Click the link in the email to reset your password. The link will expire in 1 hour. "),n(),t(11,"div",30)(12,"h4"),i(13,"Not receiving the email?"),n(),t(14,"ul")(15,"li"),i(16,"Check your spam/junk folder"),n(),t(17,"li"),i(18,"Verify the email address is correct"),n(),t(19,"li"),i(20,"Wait a few minutes for delivery"),n(),t(21,"li"),i(22,"Add noreply@expense-tracker-4d264.firebaseapp.com to your contacts"),n()()(),t(23,"div",31)(24,"button",32),u("click",function(){g(e);let c=d();return p(c.resendEmail())}),m(25,Y,2,0,"span",22)(26,W,2,0,"span",23),n()()()}if(o&2){let e=d();s(8),y(e.email),s(16),l("disabled",e.resendLoading),s(),l("ngIf",e.resendLoading),s(),l("ngIf",!e.resendLoading)}}function $(o,r){if(o&1&&(t(0,"div",33),i(1),n()),o&2){let e=d();s(),x(" ",e.error," ")}}function G(o,r){if(o&1&&(t(0,"div",34),i(1),n()),o&2){let e=d();s(),x(" ",e.success," ")}}var A=class o{constructor(r,e){this.authService=r;this.router=e}email="";loading=!1;resendLoading=!1;emailSent=!1;error="";success="";sendResetEmail(){return f(this,null,function*(){if(!this.email){this.error="Please enter your email address";return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)){this.error="Please enter a valid email address";return}this.loading=!0,this.error="",this.success="";try{console.log("Sending reset email to:",this.email),console.log("Current auth state:",this.authService.getCurrentUser()),yield this.authService.sendPasswordResetEmail(this.email),this.emailSent=!0,console.log("Reset email sent successfully"),this.success=`Reset link sent to ${this.email}. Please check your email (including spam folder).`}catch(e){console.error("Error in sendResetEmail:",e),e.message.includes("No account found")?this.error=`${e.message} If you're sure this is the correct email, try creating a new account.`:e.message.includes("network")?this.error=`${e.message} Please check your internet connection.`:e.message.includes("too many requests")?this.error=`${e.message} Please wait 5-10 minutes before trying again.`:this.error=e.message||"An error occurred while sending the reset email. Please try again."}finally{this.loading=!1}})}resendEmail(){return f(this,null,function*(){this.resendLoading=!0,this.error="",this.success="";try{yield this.authService.sendPasswordResetEmail(this.email),this.success="Reset link sent again successfully!"}catch(r){this.error=this.getErrorMessage(r)}finally{this.resendLoading=!1}})}goToLogin(){this.router.navigate(["/login"])}getErrorMessage(r){return r.code==="auth/user-not-found"?"No account found with this email address. Please check your email or create a new account.":r.code==="auth/invalid-email"?"Invalid email address. Please enter a valid email format.":r.code==="auth/too-many-requests"?"Too many requests. Please wait a few minutes and try again.":r.code==="auth/network-request-failed"?"Network error. Please check your internet connection and try again.":"An error occurred while sending the reset email. Please try again."}static \u0275fac=function(e){return new(e||o)(_(E),_(k))};static \u0275cmp=C({type:o,selectors:[["app-forgot-password"]],decls:17,vars:4,consts:[["resetForm","ngForm"],[1,"forgot-password-container"],[1,"forgot-password-card"],[1,"forgot-password-header"],[1,"brand"],[1,"brand-icon"],[1,"brand-title"],[1,"forgot-password-subtitle"],["class","forgot-password-form",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"navigation-links"],[1,"link",3,"click"],["class","error-message",4,"ngIf"],["class","success-notification",4,"ngIf"],[1,"forgot-password-form"],[1,"instruction-text"],[1,"reset-form",3,"ngSubmit"],[1,"form-group"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","placeholder","Enter your email address",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn-primary",3,"disabled"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"loading-spinner"],[1,"success-message"],[1,"success-icon"],[1,"success-title"],[1,"success-text"],[1,"success-instruction"],[1,"troubleshooting-tips"],[1,"success-actions"],[1,"btn-secondary",3,"click","disabled"],[1,"error-message"],[1,"success-notification"]],template:function(e,a){e&1&&(t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"span",5),i(5,"\u{1F4B0}"),n(),t(6,"h1",6),i(7,"Expense Tracker"),n()(),t(8,"p",7),i(9,"Reset your password"),n()(),m(10,q,13,4,"div",8)(11,B,27,4,"div",9),t(12,"div",10)(13,"a",11),u("click",function(){return a.goToLogin()}),i(14,"\u2190 Back to Sign In"),n()(),m(15,$,2,1,"div",12)(16,G,2,1,"div",13),n()()),e&2&&(s(10),l("ngIf",!a.emailSent),s(),l("ngIf",a.emailSent),s(4),l("ngIf",a.error),s(),l("ngIf",a.success))},dependencies:[S,O,L,N,I,F,T,V,z,R],styles:[".forgot-password-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:1rem}.forgot-password-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2.5rem;box-shadow:0 20px 40px #0000001a;width:100%;max-width:450px}.forgot-password-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:1rem}.brand-icon[_ngcontent-%COMP%]{font-size:2rem}.brand-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#333;margin:0}.forgot-password-subtitle[_ngcontent-%COMP%]{color:#666;margin:0;font-size:1rem}.instruction-text[_ngcontent-%COMP%]{color:#666;text-align:center;margin-bottom:1.5rem;line-height:1.5}.reset-form[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#333;margin-bottom:.5rem;font-size:.9rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;transition:all .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-actions[_ngcontent-%COMP%]{margin-top:2rem}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #667eea4d}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;background:linear-gradient(135deg,#f8f9fa,#e9ecef);color:#495057;border:2px solid #e9ecef;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #0000001a;border-color:#667eea;color:#667eea}.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.success-message[_ngcontent-%COMP%]{text-align:center;padding:1rem 0}.success-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_bounce .6s ease-in-out}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}.success-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#28a745;margin:0 0 1rem}.success-text[_ngcontent-%COMP%]{color:#666;margin:0 0 1rem;line-height:1.5}.success-instruction[_ngcontent-%COMP%]{color:#888;font-size:.9rem;margin:0 0 1.5rem;line-height:1.4}.success-actions[_ngcontent-%COMP%]{margin-top:1.5rem}.navigation-links[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;cursor:pointer;transition:color .3s ease}.link[_ngcontent-%COMP%]:hover{color:#5a6fd8;text-decoration:underline}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:.75rem 1rem;border-radius:8px;margin-top:1rem;text-align:center;border:1px solid #fcc}.success-notification[_ngcontent-%COMP%]{background:#d4edda;color:#155724;padding:.75rem 1rem;border-radius:8px;margin-top:1rem;text-align:center;border:1px solid #c3e6cb}.troubleshooting-tips[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #eee}.troubleshooting-tips[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;color:#555;margin-bottom:.5rem}.troubleshooting-tips[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.troubleshooting-tips[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin-bottom:.3rem;line-height:1.4}@media (max-width: 480px){.forgot-password-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.brand-title[_ngcontent-%COMP%]{font-size:1.5rem}.success-icon[_ngcontent-%COMP%]{font-size:2.5rem}.success-title[_ngcontent-%COMP%]{font-size:1.25rem}}"]})};export{A as ForgotPasswordComponent};
