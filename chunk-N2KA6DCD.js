import{a as be}from"./chunk-3WGKAHTM.js";import{a as xe,b as _e}from"./chunk-F66EWD7R.js";import{a as ue}from"./chunk-RX2VGYNJ.js";import{a as ye}from"./chunk-MSWVJJ4W.js";import{a as he}from"./chunk-KIFJSNSH.js";import"./chunk-IX24VT3U.js";import{g as ne,i as ie}from"./chunk-COTLGU4O.js";import{Fa as A,Hc as oe,Ia as x,Ic as re,Jc as ae,Kc as se,Lc as le,Mc as de,Nb as Z,Ob as B,Pb as Q,Pc as ce,Qb as X,Qc as ge,Rc as pe,Sb as ee,Sc as me,Ta as c,Ua as r,Ub as te,Va as a,Vb as V,Vc as fe,Wa as D,Xa as S,Y as _,Ya as f,Z as b,Za as p,a as T,b as W,bb as K,cb as Y,d as P,e as $,fb as l,gb as E,hb as z,ib as k,jb as R,kb as C,lb as w,mb as M,nb as U,ob as F,pb as q,qb as H,rb as N,sb as J,tb as L,ub as G,va as d,za as O}from"./chunk-HYY45DGL.js";function Oe(s,e){if(s&1&&D(0,"div",2),s&2){let t=e.$implicit;Y("width",t.width,"%")("height",t.height,"px")("margin-bottom",t.marginBottom,"px")}}var j=class s{type="card";lines=[{width:100,height:20,marginBottom:10},{width:80,height:16,marginBottom:8},{width:60,height:16,marginBottom:0}];static \u0275fac=function(t){return new(t||s)};static \u0275cmp=A({type:s,selectors:[["app-skeleton"]],inputs:{type:"type",lines:"lines"},decls:2,vars:2,consts:[[1,"skeleton-container",3,"ngClass"],["class","skeleton-line",3,"width","height","margin-bottom",4,"ngFor","ngForOf"],[1,"skeleton-line"]],template:function(t,n){t&1&&(r(0,"div",0),x(1,Oe,1,6,"div",1),a()),t&2&&(c("ngClass",n.type),d(),c("ngForOf",n.lines))},dependencies:[V,Z,B],styles:[".skeleton-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}.skeleton-line[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite;border-radius:4px}.skeleton-container.card[_ngcontent-%COMP%]{padding:1rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.skeleton-container.list-item[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #f0f0f0}.skeleton-container.expense-item[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;background:#f8f9fa;margin-bottom:.5rem}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}"]})};var De=()=>[1,2,3,4,5],Se=()=>({width:30,height:20,marginBottom:8}),ke=()=>({width:60,height:16,marginBottom:4}),Ie=()=>({width:40,height:14,marginBottom:0}),Fe=(s,e,t)=>[s,e,t],Te=s=>({background:s});function Ae(s,e){s&1&&D(0,"app-loading",43)}function Ye(s,e){if(s&1&&(r(0,"option",68),l(1),a()),s&2){let t=e.$implicit;c("value",t.id),d(),k(" ",t.icon," ",t.name," ")}}function ze(s,e){if(s&1){let t=S();r(0,"button",69),f("click",function(){_(t);let i=p(2);return b(i.clearCategory())}),l(1," \u2715 "),a()}}function Ne(s,e){if(s&1&&(r(0,"span",40),l(1),a()),s&2){let t=p(2);d(),E(t.isEditMode?"\u{1F4BE}":"\u2795")}}function Be(s,e){if(s&1&&D(0,"app-loading",70),s&2){let t=p(2);c("message",U(t.isEditMode?"Saving...":"Adding..."))}}function Ve(s,e){if(s&1&&(r(0,"span",41),l(1),a()),s&2){let t=p(2);d(),E(t.isEditMode?"Save Changes":"Add Expense")}}function je(s,e){if(s&1){let t=S();r(0,"button",71),f("click",function(){_(t);let i=p(2);return b(i.cancelEdit())}),r(1,"span",40),l(2,"\u274C"),a(),r(3,"span",41),l(4,"Cancel"),a()()}}function We(s,e){if(s&1){let t=S();r(0,"div",44)(1,"div",12)(2,"div",4)(3,"span",14),l(4),a(),r(5,"h5",8),l(6),a()()(),r(7,"div",16)(8,"form",45,0),f("ngSubmit",function(){_(t);let i=p();return b(i.addExpense())}),r(10,"div",46)(11,"div",47)(12,"label",48),l(13,"Amount"),a(),r(14,"div",49)(15,"span",50),l(16,"\u20B9"),a(),r(17,"input",51),M("ngModelChange",function(i){_(t);let o=p();return w(o.amountInput,i)||(o.amountInput=i),b(i)}),f("input",function(i){_(t);let o=p();return b(o.onAmountInput(i))})("keypress",function(i){_(t);let o=p();return b(o.onAmountKeypress(i))}),a()()(),r(18,"div",47)(19,"label",52),l(20,"Date"),a(),r(21,"input",53),M("ngModelChange",function(i){_(t);let o=p();return w(o.newExpense.date,i)||(o.newExpense.date=i),b(i)}),a()(),r(22,"div",47)(23,"label",54),l(24,"Category"),a(),r(25,"div",55)(26,"select",56),M("ngModelChange",function(i){_(t);let o=p();return w(o.newExpense.categoryId,i)||(o.newExpense.categoryId=i),b(i)}),r(27,"option",57),l(28,"\u{1F3F7}\uFE0F Select a category"),a(),x(29,Ye,2,3,"option",22),a(),x(30,ze,2,0,"button",58),a()(),r(31,"div",47)(32,"label",59),l(33,"Description"),a(),r(34,"input",60),M("ngModelChange",function(i){_(t);let o=p();return w(o.newExpense.description,i)||(o.newExpense.description=i),b(i)}),a()(),r(35,"div",61)(36,"label",38),l(37,"\xA0"),a(),r(38,"div",62)(39,"button",63),x(40,Ne,2,1,"span",64)(41,Be,1,2,"app-loading",65)(42,Ve,2,1,"span",66),a(),x(43,je,5,0,"button",67),a()()()()()()}if(s&2){let t=p();d(4),E(t.isEditMode?"\u270F\uFE0F":"\u2795"),d(2),E(t.isEditMode?"Edit Expense":"Add New Expense"),d(11),C("ngModel",t.amountInput),d(4),C("ngModel",t.newExpense.date),c("max",t.getMaxDate()),d(5),C("ngModel",t.newExpense.categoryId),d(),c("selected",!t.newExpense.categoryId),d(2),c("ngForOf",t.categories),d(),c("ngIf",t.newExpense.categoryId),d(4),C("ngModel",t.newExpense.description),d(5),c("disabled",!t.isFormValid()||t.isSaving),d(),c("ngIf",!t.isSaving),d(),c("ngIf",t.isSaving),d(),c("ngIf",!t.isSaving),d(),c("ngIf",t.isEditMode)}}function Le(s,e){if(s&1){let t=S();r(0,"div",72)(1,"span",73),l(2),r(3,"button",74),f("click",function(){_(t);let i=p();return b(i.clearCategoryFilter())}),l(4," \u2715 "),a()()()}if(s&2){let t=p();d(2),k(" ",t.getCategoryIcon(t.filterCategory)," ",t.getCategoryName(t.filterCategory)," ")}}function $e(s,e){if(s&1&&(r(0,"option",68),l(1),a()),s&2){let t=e.$implicit;c("value",t.id),d(),k("",t.icon," ",t.name)}}function Ke(s,e){s&1&&D(0,"app-skeleton",85),s&2&&c("lines",H(4,Fe,F(1,Se),F(2,ke),F(3,Ie)))}function Re(s,e){s&1&&(r(0,"div",83),x(1,Ke,1,8,"app-skeleton",84),a()),s&2&&(d(),c("ngForOf",F(1,De)))}function Ue(s,e){s&1&&D(0,"app-loading",101)}function qe(s,e){s&1&&(r(0,"span",97),l(1,"\u{1F5D1}\uFE0F"),a())}function He(s,e){if(s&1){let t=S();r(0,"div",87)(1,"div",88)(2,"div",89),l(3),N(4,"currency"),a(),r(5,"div",90)(6,"span",91),l(7),a()()(),r(8,"div",92)(9,"div",93),l(10),N(11,"date"),a(),r(12,"div",94),l(13),a()(),r(14,"div",95)(15,"button",96),f("click",function(){let i=_(t).$implicit,o=p(3);return b(o.editExpense(i))}),r(16,"span",97),l(17,"\u270F\uFE0F"),a()(),r(18,"button",98),f("click",function(){let i=_(t).$implicit,o=p(3);return b(o.deleteExpense(i))}),x(19,Ue,1,0,"app-loading",99)(20,qe,2,0,"span",100),a()()()}if(s&2){let t=e.$implicit,n=e.index,i=p(3);Y("animation-delay",n*.1+"s"),d(3),E(L(4,11,t.amount,"INR")),d(3),c("ngStyle",q(16,Te,i.getCategoryColor(t.categoryId))),d(),k(" ",i.getCategoryIcon(t.categoryId)," ",i.getCategoryName(t.categoryId)," "),d(3),E(J(11,14,t.date)),d(3),E(t.description||"No description"),d(5),c("disabled",i.isDeleting),d(),c("ngIf",i.isDeleting),d(),c("ngIf",!i.isDeleting)}}function Je(s,e){if(s&1&&(r(0,"div",83),x(1,He,21,18,"div",86),a()),s&2){let t=p(2);d(),c("ngForOf",t.getPaginatedExpenses())}}function Ge(s,e){s&1&&(r(0,"div",102)(1,"div",103),l(2,"\u{1F4CB}"),a(),r(3,"h6"),l(4,"No expenses found"),a(),r(5,"p"),l(6,"Add your first expense using the form above!"),a()())}function Ze(s,e){if(s&1){let t=S();r(0,"div",104)(1,"div",105)(2,"div",106)(3,"span",107),l(4),a()(),r(5,"div",108)(6,"div",109)(7,"button",110),f("click",function(){_(t);let i=p(2);return b(i.goToPage(i.currentPage-1))}),l(8," \u2190 Previous "),a(),r(9,"span",111),l(10),a(),r(11,"button",112),f("click",function(){_(t);let i=p(2);return b(i.goToPage(i.currentPage+1))}),l(12," Next \u2192 "),a()()()()()}if(s&2){let t=p(2);d(4),R(" Showing ",t.getStartIndex()+1," to ",t.getEndIndex()," of ",t.getFilteredExpenses().length," expenses "),d(3),c("disabled",t.currentPage===1),d(3),k(" Page ",t.currentPage," of ",t.getTotalPages()," "),d(),c("disabled",t.currentPage===t.getTotalPages())}}function Qe(s,e){if(s&1&&(r(0,"div",75)(1,"div",12)(2,"div",76)(3,"div",4)(4,"span",14),l(5,"\u{1F4CB}"),a(),r(6,"h5",8),l(7,"All Expenses"),a()(),r(8,"div",77)(9,"div",78),l(10),N(11,"currency"),a(),r(12,"div",79),l(13),a()()()(),r(14,"div",16),x(15,Re,2,2,"div",80)(16,Je,2,1,"div",81)(17,Ge,7,0,"ng-template",null,1,G),a(),r(19,"div",16),x(20,Ze,13,7,"div",82),a()()),s&2){let t=K(18),n=p();d(10),E(L(11,6,n.getTotalAmount(),"INR")),d(3),z("",n.getFilteredExpenses().length," expenses"),d(2),c("ngIf",n.isLoading),d(),c("ngIf",!n.isLoading&&n.getFilteredExpenses().length>0)("ngIfElse",t),d(4),c("ngIf",n.getFilteredExpenses().length>n.itemsPerPage)}}var Ce=class s{constructor(e,t,n,i,o,h,g){this.expenseService=e;this.categoryService=t;this.firebaseService=n;this.filterStateService=i;this.dialogService=o;this.router=h;this.route=g}expenses=[];categories=[];newExpense={id:"",description:"",amount:0,date:new Date().toISOString().split("T")[0],categoryId:"",paymentMethod:"",tags:[],priority:"medium",notes:"",location:"",receiptNumber:""};amountInput="";filterAmount="";filterCategory="";filterDate="";filterDateFrom="";filterDateTo="";sortBy="date";sortOrder="desc";dashboardPeriod="all";dashboardMonth="";dashboardYear="";dashboardStartDate="";dashboardEndDate="";dashboardMonthOnly="";dashboardYearOnly="";isEditMode=!1;editingExpenseId="";currentPage=1;itemsPerPage=10;isLoading=!0;isSaving=!1;isDeleting=!1;isEditing=!1;isFiltering=!1;subscription=new $;ngOnInit(){this.route.queryParams.subscribe(e=>{let t=e.edit,n=e.mode,i=e.category,o=e.filter;t&&n==="edit"&&(this.isEditMode=!0,this.editingExpenseId=t,console.log("Edit mode activated for expense:",t)),i&&o==="category"&&(this.filterCategory=i,console.log("Category filter applied:",i))}),this.loadDashboardFilterState(),this.subscription.add(this.filterStateService.filterState$.subscribe(e=>{console.log("Filter state changed in expenses component:",e),this.loadDashboardFilterState()})),this.subscription.add(this.firebaseService.expenses$.subscribe(e=>{this.expenses=e,console.log(`Received ${e.length} expenses from Firebase`),this.isEditMode&&this.editingExpenseId&&this.loadExpenseForEditing()})),this.subscription.add(this.firebaseService.categories$.subscribe(e=>{this.categories=e,console.log(`Received ${e.length} categories from Firebase`)})),this.subscription.add(this.firebaseService.loading$.subscribe(e=>{this.isLoading=e}))}ngOnDestroy(){this.subscription.unsubscribe()}loadDashboardFilterState(){let e=this.filterStateService.getFilterState();if(console.log("Loading dashboard filter state from service:",e),this.dashboardPeriod=e.selectedPeriod,this.dashboardMonth=e.selectedMonth,this.dashboardYear=e.selectedYear,this.dashboardStartDate=e.customStartDate,this.dashboardEndDate=e.customEndDate,this.dashboardMonthOnly=e.selectedMonthOnly||"",this.dashboardYearOnly=e.selectedYearOnly||"",this.dashboardPeriod==="custom"&&this.dashboardStartDate&&this.dashboardEndDate)this.filterDateFrom=this.dashboardStartDate,this.filterDateTo=this.dashboardEndDate,console.log("Populated expenses page date filters with dashboard custom range:",{filterDateFrom:this.filterDateFrom,filterDateTo:this.filterDateTo});else if(this.dashboardPeriod==="monthly"&&this.dashboardMonth&&this.dashboardYear){let t=parseInt(this.dashboardMonth),n=parseInt(this.dashboardYear),i=new Date(n,t,1),o=new Date(n,t+1,0);this.filterDateFrom=i.toISOString().split("T")[0],this.filterDateTo=o.toISOString().split("T")[0],console.log("Populated expenses page date filters with dashboard monthly range:",{filterDateFrom:this.filterDateFrom,filterDateTo:this.filterDateTo})}else if(this.dashboardPeriod==="yearly"&&this.dashboardYear){let t=parseInt(this.dashboardYear),n=new Date(t,0,1),i=new Date(t,11,31);this.filterDateFrom=n.toISOString().split("T")[0],this.filterDateTo=i.toISOString().split("T")[0],console.log("Populated expenses page date filters with dashboard yearly range:",{filterDateFrom:this.filterDateFrom,filterDateTo:this.filterDateTo})}else if(this.dashboardPeriod==="last30"){let t=new Date,n=new Date;n.setDate(t.getDate()-30),this.filterDateFrom=n.toISOString().split("T")[0],this.filterDateTo=t.toISOString().split("T")[0],console.log("Populated expenses page date filters with dashboard last 30 days range:",{filterDateFrom:this.filterDateFrom,filterDateTo:this.filterDateTo})}else if(this.dashboardPeriod==="last7"){let t=new Date,n=new Date;n.setDate(t.getDate()-7),this.filterDateFrom=n.toISOString().split("T")[0],this.filterDateTo=t.toISOString().split("T")[0],console.log("Populated expenses page date filters with dashboard last 7 days range:",{filterDateFrom:this.filterDateFrom,filterDateTo:this.filterDateTo})}else if(this.dashboardPeriod==="monthOnly"&&this.dashboardMonthOnly&&this.dashboardYearOnly){let t=parseInt(this.dashboardMonthOnly),n=parseInt(this.dashboardYearOnly),i=new Date(Date.UTC(n,t,1)),o=new Date(Date.UTC(n,t+1,0));this.filterDateFrom=i.toISOString().split("T")[0],this.filterDateTo=o.toISOString().split("T")[0],console.log("Populated expenses page date filters with dashboard month only range:",{filterDateFrom:this.filterDateFrom,filterDateTo:this.filterDateTo})}console.log("Dashboard filter state loaded into expenses component:",{period:this.dashboardPeriod,month:this.dashboardMonth,year:this.dashboardYear,startDate:this.dashboardStartDate,endDate:this.dashboardEndDate,monthOnly:this.dashboardMonthOnly,yearOnly:this.dashboardYearOnly})}loadExpenseForEditing(){let e=this.expenses.find(t=>t.id===this.editingExpenseId);e?(this.newExpense=T({},e),this.amountInput=e.amount.toString(),console.log("Loaded expense for editing:",e)):(console.error("Expense not found for editing:",this.editingExpenseId),this.isEditMode=!1,this.editingExpenseId="")}addExpense(){return P(this,null,function*(){if(yield this.validateExpense())try{this.isSaving=!0,this.isEditMode?yield this.saveExpenseChanges():yield this.createNewExpense()}finally{this.isSaving=!1}})}createNewExpense(){return P(this,null,function*(){try{let e=parseFloat(this.amountInput);if(isNaN(e)||e<=0){yield this.dialogService.warning("Please enter a valid amount greater than 0.");return}let t={description:this.newExpense.description,amount:e,date:this.newExpense.date,categoryId:this.newExpense.categoryId,paymentMethod:this.newExpense.paymentMethod||"Cash",tags:this.newExpense.tags||[],priority:this.newExpense.priority||"medium",notes:this.newExpense.notes||"",location:this.newExpense.location||"",receiptNumber:this.newExpense.receiptNumber||""},n=yield this.expenseService.add(t);console.log(`Expense added with Firebase ID: ${n}`),this.resetForm(),yield this.dialogService.success("Expense added successfully!"),yield this.checkAchievements()}catch(e){console.error("Error adding expense:",e),yield this.dialogService.error("Error adding expense. Please try again.")}})}saveExpenseChanges(){return P(this,null,function*(){try{let e=parseFloat(this.amountInput);if(isNaN(e)||e<=0){yield this.dialogService.warning("Please enter a valid amount greater than 0.");return}let t=W(T({},this.newExpense),{amount:e});yield this.expenseService.update(t),console.log("Expense updated successfully"),this.isEditMode=!1,this.editingExpenseId="",this.resetForm(),yield this.dialogService.success("Expense updated successfully!"),this.router.navigate(["/expenses"])}catch(e){console.error("Error updating expense:",e),yield this.dialogService.error("Error updating expense. Please try again.")}})}cancelEdit(){this.isEditMode=!1,this.editingExpenseId="",this.resetForm(),this.router.navigate(["/expenses"])}editExpense(e){return P(this,null,function*(){try{let t=yield this.dialogService.prompt("Enter expense description:","Edit Expense",e.description,"text","Enter description...","Description");if(t===null)return;let n=yield this.dialogService.prompt("Enter expense amount:","Edit Expense",e.amount.toString(),"number","Enter amount...","Amount (\u20B9)");if(n===null)return;let i=yield this.dialogService.prompt("Enter expense date:","Edit Expense",e.date,"date","","Date");if(i===null)return;let o=this.categories.map(I=>({value:I.id,label:I.name,icon:I.icon})),h=yield this.dialogService.select("Select a category:","Edit Expense",o,e.categoryId);if(h===null)return;let g=parseFloat(n);if(isNaN(g)||g<=0){yield this.dialogService.error("Invalid Amount! Please enter a valid number greater than 0.");return}if(!/^\d{4}-\d{2}-\d{2}$/.test(i)){yield this.dialogService.error("Invalid Date! Please enter date in YYYY-MM-DD format (e.g., 2024-01-15).");return}let m=new Date(i),v=new Date;if(m.setHours(0,0,0,0),v.setHours(0,0,0,0),m>v){yield this.dialogService.error("Cannot edit expenses to future dates. Please select today's date or a past date.");return}let y=this.categories.find(I=>I.id===h);if(!y){yield this.dialogService.error(`Error: Category with ID "${h}" does not exist. Please select a valid category from the list.`);return}let we=W(T({},e),{description:t,amount:g,date:i,categoryId:h});yield this.expenseService.update(we);let Me=`Expense updated successfully!

Description: ${t}
Amount: \u20B9${g}
Date: ${i}
Category: ${y.icon} ${y.name}`;yield this.dialogService.success(Me)}catch(t){console.error("Error editing expense:",t),yield this.dialogService.error("Error updating expense. Please try again.")}})}deleteExpense(e){return P(this,null,function*(){if(yield this.dialogService.confirm(`Are you sure you want to delete "${e.description}" (\u20B9${e.amount})?`,"Delete Expense")){this.isDeleting=!0;try{yield this.expenseService.delete(e.id),yield this.dialogService.success("Expense deleted successfully!")}catch(n){console.error("Error deleting expense:",n),yield this.dialogService.error("Error deleting expense. Please try again.")}finally{this.isDeleting=!1}}})}validateExpense(){return P(this,null,function*(){if(!this.newExpense.description?.trim())return yield this.dialogService.warning("Please enter a description."),!1;let e=parseFloat(this.amountInput);if(isNaN(e)||e<=0)return yield this.dialogService.warning("Please enter a valid amount greater than 0."),!1;if(!this.newExpense.categoryId)return yield this.dialogService.warning("Please select a category."),!1;if(!this.newExpense.date)return yield this.dialogService.warning("Please select a date."),!1;let t=new Date(this.newExpense.date),n=new Date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t>n?(yield this.dialogService.warning("Cannot add expenses for future dates. Please select today's date or a past date."),!1):!0})}isFormValid(){let e=parseFloat(this.amountInput);return!!(this.newExpense.description?.trim()&&this.amountInput&&!isNaN(e)&&e>0&&this.newExpense.categoryId&&this.newExpense.date)}resetForm(){this.newExpense={id:"",description:"",amount:0,date:new Date().toISOString().split("T")[0],categoryId:"",paymentMethod:"",tags:[],priority:"medium",notes:"",location:"",receiptNumber:""},this.amountInput=""}getFilteredExpenses(){let e=[...this.expenses];if(this.filterAmount){let t=parseFloat(this.filterAmount);isNaN(t)||(e=e.filter(n=>n.amount>=t))}return this.filterCategory&&(e=e.filter(t=>t.categoryId===this.filterCategory)),this.filterDateFrom||this.filterDateTo?e=e.filter(t=>{let n=new Date(t.date),i=this.filterDateFrom?new Date(this.filterDateFrom):null,o=this.filterDateTo?new Date(this.filterDateTo):null;return i&&o?n>=i&&n<=o:i?n>=i:o?n<=o:!0}):this.filterDate&&(e=e.filter(t=>t.date===this.filterDate)),e=this.applyDashboardFilters(e),e.sort((t,n)=>{let i,o;switch(this.sortBy){case"date":i=t.createdAt?new Date(t.createdAt).getTime():new Date(t.date).getTime(),o=n.createdAt?new Date(n.createdAt).getTime():new Date(n.date).getTime();break;case"amount":i=t.amount,o=n.amount;break;default:i=t.createdAt?new Date(t.createdAt).getTime():new Date(t.date).getTime(),o=n.createdAt?new Date(n.createdAt).getTime():new Date(n.date).getTime()}return this.sortOrder==="asc"?i>o?1:-1:i<o?1:-1}),e}applyDashboardFilters(e){if(console.log("Applying dashboard filters:",{period:this.dashboardPeriod,month:this.dashboardMonth,year:this.dashboardYear,startDate:this.dashboardStartDate,endDate:this.dashboardEndDate,monthOnly:this.dashboardMonthOnly,yearOnly:this.dashboardYearOnly,totalExpenses:e.length}),!this.dashboardPeriod||this.dashboardPeriod==="all")return console.log("No dashboard filter active, returning all expenses"),e;let t=new Date;switch(this.dashboardPeriod){case"monthly":if(this.dashboardMonth&&this.dashboardYear){let g=parseInt(this.dashboardMonth),u=parseInt(this.dashboardYear);console.log("Applying monthly filter:",{month:g,year:u});let m=e.filter(v=>{let y=new Date(v.date);return y.getMonth()===g&&y.getFullYear()===u});return console.log(`Monthly filter: ${e.length} -> ${m.length} expenses`),m}console.log("Monthly filter: missing month or year");break;case"yearly":if(this.dashboardYear){let g=parseInt(this.dashboardYear);console.log("Applying yearly filter:",{year:g});let u=e.filter(m=>new Date(m.date).getFullYear()===g);return console.log(`Yearly filter: ${e.length} -> ${u.length} expenses`),u}console.log("Yearly filter: missing year");break;case"last30":let n=new Date;n.setDate(t.getDate()-30),console.log("Applying last 30 days filter:",{thirtyDaysAgo:n});let i=e.filter(g=>new Date(g.date)>=n);return console.log(`Last 30 days filter: ${e.length} -> ${i.length} expenses`),i;case"last7":let o=new Date;o.setDate(t.getDate()-7),console.log("Applying last 7 days filter:",{sevenDaysAgo:o});let h=e.filter(g=>new Date(g.date)>=o);return console.log(`Last 7 days filter: ${e.length} -> ${h.length} expenses`),h;case"custom":if(this.dashboardStartDate&&this.dashboardEndDate){console.log("Applying custom date range filter:",{startDate:this.dashboardStartDate,endDate:this.dashboardEndDate});let g=e.filter(u=>{let m=new Date(u.date),v=new Date(this.dashboardStartDate),y=new Date(this.dashboardEndDate);return m>=v&&m<=y});return console.log(`Custom filter: ${e.length} -> ${g.length} expenses`),g}console.log("Custom date range filter: missing start or end date");break;case"monthOnly":if(this.dashboardMonthOnly&&this.dashboardYearOnly){let g=parseInt(this.dashboardMonthOnly),u=parseInt(this.dashboardYearOnly);console.log("Applying month only filter:",{month:g,year:u});let m=e.filter(v=>{let y=new Date(v.date);return y.getMonth()===g&&y.getFullYear()===u});return console.log(`Month only filter: ${e.length} -> ${m.length} expenses`),m}console.log("Month only filter: missing month or year");break}return console.log("No matching dashboard filter, returning all expenses"),e}getCategoryName(e){return this.categories.find(n=>n.id===e)?.name||"Unknown"}getCategoryColor(e){return this.categories.find(n=>n.id===e)?.color||"#999"}getCategoryIcon(e){return this.categories.find(n=>n.id===e)?.icon||"\u{1F4CC}"}getMonthName(e){let t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=parseInt(e);return t[n]||"Unknown"}clearDashboardFilters(){this.dashboardPeriod="all",this.dashboardMonth="",this.dashboardYear="",this.dashboardStartDate="",this.dashboardEndDate="",this.dashboardMonthOnly="",this.dashboardYearOnly="",this.filterDateFrom="",this.filterDateTo="";let e=this.route.snapshot.queryParams;this.router.navigate([],{queryParams:{category:e.category,filter:e.filter},replaceUrl:!0})}clearFilters(){this.filterAmount="",this.filterCategory="",this.filterDate="",this.filterDateFrom="",this.filterDateTo="",this.sortBy="date",this.sortOrder="desc",this.dashboardPeriod="all",this.dashboardMonth="",this.dashboardYear="",this.dashboardStartDate="",this.dashboardEndDate="",this.dashboardMonthOnly="",this.dashboardYearOnly="",this.resetPagination(),this.router.navigate([],{queryParams:{},replaceUrl:!0})}clearCategoryFilter(){this.filterCategory="",this.resetPagination(),this.router.navigate([],{queryParams:{},queryParamsHandling:"merge"})}onCategoryFilterChange(){this.resetPagination()}clearCategory(){this.newExpense.categoryId=""}onAmountInput(e){let t=e.target,n=t.value;n=n.replace(/[^0-9.]/g,"");let i=n.split(".");i.length>2&&(n=i[0]+"."+i.slice(1).join("")),i.length===2&&i[1].length>2&&(n=i[0]+"."+i[1].substring(0,2)),t.value=n,this.amountInput=n}onAmountKeypress(e){let t=e.key,i=e.target.value;if(!([8,9,27,13,46].indexOf(e.keyCode)!==-1||e.keyCode===65&&e.ctrlKey===!0||e.keyCode===67&&e.ctrlKey===!0||e.keyCode===86&&e.ctrlKey===!0||e.keyCode===88&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39)){if(t>="0"&&t<="9"||t==="."){if(t==="."&&i.includes(".")){e.preventDefault();return}return}e.preventDefault()}}onFilterAmountInput(e){let t=e.target,n=t.value;n=n.replace(/[^0-9.]/g,"");let i=n.split(".");i.length>2&&(n=i[0]+"."+i.slice(1).join("")),i.length===2&&i[1].length>2&&(n=i[0]+"."+i[1].substring(0,2)),t.value=n,this.filterAmount=n,this.resetPagination()}onFilterAmountKeypress(e){let t=e.key,i=e.target.value;if(!([8,9,27,13,46].indexOf(e.keyCode)!==-1||e.keyCode===65&&e.ctrlKey===!0||e.keyCode===67&&e.ctrlKey===!0||e.keyCode===86&&e.ctrlKey===!0||e.keyCode===88&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39)){if(t>="0"&&t<="9"||t==="."){if(t==="."&&i.includes(".")){e.preventDefault();return}return}e.preventDefault()}}getTotalAmount(){return this.getFilteredExpenses().reduce((e,t)=>e+t.amount,0)}getAverageAmount(){let e=this.getFilteredExpenses();return e.length>0?e.reduce((t,n)=>t+n.amount,0)/e.length:0}getExpenseCount(){return this.getFilteredExpenses().length}checkAchievements(){return P(this,null,function*(){let e=this.expenses.length;e===10?yield this.dialogService.success("Congratulations! You've logged your 10th expense. Keep up the great tracking!"):e===50?yield this.dialogService.success("Amazing! You've logged 50 expenses. You're becoming a tracking expert!"):e===100&&(yield this.dialogService.success("Incredible! You've logged 100 expenses. You're a financial tracking master!"));let t={};this.expenses.forEach(n=>{t[n.categoryId]=(t[n.categoryId]||0)+1});for(let[n,i]of Object.entries(t))if(i===10){let o=this.getCategoryName(n);yield this.dialogService.success(`${o} mastery achieved! You've logged 10 expenses in this category.`)}yield this.checkDailyStreak()})}checkDailyStreak(){return P(this,null,function*(){let e=new Date().toISOString().split("T")[0],t=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],n=this.expenses.some(o=>o.date===e),i=this.expenses.some(o=>o.date===t);if(n&&i){let o=1,h=new Date(Date.now()-24*60*60*1e3);for(;;){let g=h.toISOString().split("T")[0];if(this.expenses.some(m=>m.date===g))o++,h.setDate(h.getDate()-1);else break}o>=7&&(yield this.dialogService.success(`Daily streak of ${o} days achieved! Keep it up!`))}})}generateId(){return Math.random().toString(36).substr(2,9)}getMonthlyExpenses(){let e={};return this.expenses.forEach(t=>{let n=new Date(t.date),i=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;e[i]||(e[i]=[]),e[i].push(t)}),e}getCurrentMonthExpenses(){let e=new Date,t=e.getMonth(),n=e.getFullYear();return this.expenses.filter(i=>{let o=new Date(i.date);return o.getMonth()===t&&o.getFullYear()===n})}getCurrentMonthTotal(){return this.getCurrentMonthExpenses().reduce((e,t)=>e+t.amount,0)}getPreviousMonthExpenses(){let e=new Date,t=e.getMonth()===0?11:e.getMonth()-1,n=e.getMonth()===0?e.getFullYear()-1:e.getFullYear();return this.expenses.filter(i=>{let o=new Date(i.date);return o.getMonth()===t&&o.getFullYear()===n})}getPreviousMonthTotal(){return this.getPreviousMonthExpenses().reduce((e,t)=>e+t.amount,0)}getMonthlyComparison(){let e=this.getCurrentMonthTotal(),t=this.getPreviousMonthTotal();if(t===0)return{change:0,percentage:0,hasPreviousData:!1};let n=e-t,i=n/t*100;return{change:n,percentage:i,hasPreviousData:!0}}getMonthlyReport(){let e=this.getMonthlyExpenses(),t=[];return Object.entries(e).forEach(([n,i])=>{let o=i.reduce((u,m)=>u+m.amount,0),h=o/i.length,g=this.getCategoryBreakdown(i);t.push({month:n,total:o,average:h,count:i.length,categoryBreakdown:g})}),t.sort((n,i)=>i.month.localeCompare(n.month))}getCategoryBreakdown(e){let t={};return e.forEach(n=>{t[n.categoryId]=(t[n.categoryId]||0)+n.amount}),Object.entries(t).map(([n,i])=>({categoryId:n,categoryName:this.getCategoryName(n),amount:i,percentage:i/e.reduce((o,h)=>o+h.amount,0)*100}))}validateCategoryExists(e){return this.categories.some(t=>t.id===e)}getCategoryById(e){return this.categories.find(n=>n.id===e)||null}getExpensesWithUnknownCategories(){return this.expenses.filter(e=>!this.categories.find(t=>t.id===e.categoryId))}getUnknownCategoryCount(){return this.getExpensesWithUnknownCategories().length}getMaxDate(){return new Date().toISOString().split("T")[0]}onFromDateChange(){this.filterDateTo&&this.filterDateFrom&&this.filterDateTo<this.filterDateFrom&&(this.filterDateTo=""),this.resetPagination()}onToDateChange(){this.filterDateFrom&&this.filterDateTo&&this.filterDateTo<this.filterDateFrom&&(this.dialogService.warning("To Date cannot be earlier than From Date. Please select a valid date range."),this.filterDateTo=""),this.resetPagination()}getPaginatedExpenses(){let e=this.getFilteredExpenses(),t=this.getStartIndex(),n=this.getEndIndex();return e.slice(t,n)}getStartIndex(){return(this.currentPage-1)*this.itemsPerPage}getEndIndex(){let e=this.getFilteredExpenses();return Math.min(this.currentPage*this.itemsPerPage,e.length)}getTotalPages(){let e=this.getFilteredExpenses();return Math.ceil(e.length/this.itemsPerPage)}goToPage(e){let t=this.getTotalPages();e>=1&&e<=t&&(this.currentPage=e)}resetPagination(){this.currentPage=1}onSortChange(){this.resetPagination()}static \u0275fac=function(t){return new(t||s)(O(xe),O(_e),O(he),O(be),O(ye),O(ie),O(ne))};static \u0275cmp=A({type:s,selectors:[["app-expenses"]],decls:68,vars:16,consts:[["expenseForm","ngForm"],["noExpenses",""],[1,"container-fluid","px-4","py-3"],[1,"page-header","mb-4"],[1,"d-flex","align-items-center"],[1,"header-icon","me-3"],[1,"fs-1"],[1,"page-title","mb-1"],[1,"mb-0"],["message","Loading expenses...","type","card",4,"ngIf"],["class","add-expense-card mb-4",4,"ngIf"],[1,"filters-card","mb-4"],[1,"card-header-modern"],[1,"d-flex","align-items-center","justify-content-between"],[1,"header-icon-small","me-2"],["class","active-filter-indicator",4,"ngIf"],[1,"card-body-modern"],[1,"filters-row"],[1,"filter-group"],["for","filterCategory",1,"form-label-modern"],["id","filterCategory",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","filterDateFrom",1,"form-label-modern"],["type","date","id","filterDateFrom",1,"form-control-modern",3,"ngModelChange","change","ngModel","max"],["for","filterDateTo",1,"form-label-modern"],["type","date","id","filterDateTo",1,"form-control-modern",3,"ngModelChange","change","ngModel","max","min"],["for","filterAmount",1,"form-label-modern"],["type","text","id","filterAmount","placeholder","0",1,"form-control-modern",3,"ngModelChange","input","keypress","ngModel"],["for","sortBy",1,"form-label-modern"],["id","sortBy",1,"form-select",3,"ngModelChange","change","ngModel"],["value","date"],["value","amount"],["for","sortOrder",1,"form-label-modern"],["id","sortOrder",1,"form-select",3,"ngModelChange","change","ngModel"],["value","desc"],["value","asc"],[1,"filter-group","button-group"],[1,"form-label-modern"],["type","button",1,"btn-clear-filters",3,"click"],[1,"btn-icon"],[1,"btn-text"],["class","expenses-list-card",4,"ngIf"],["message","Loading expenses...","type","card"],[1,"add-expense-card","mb-4"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","expenseAmount",1,"form-label-modern"],[1,"input-group-modern"],[1,"input-group-text-modern"],["type","text","id","expenseAmount","placeholder","0.00","name","amount","required","",1,"form-control-modern",3,"ngModelChange","input","keypress","ngModel"],["for","expenseDate",1,"form-label-modern"],["type","date","id","expenseDate","name","date","required","",1,"form-control-modern",3,"ngModelChange","ngModel","max"],["for","expenseCategory",1,"form-label-modern"],[1,"category-select-container"],["id","expenseCategory","name","categoryId","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","",3,"selected"],["type","button","class","clear-category-btn","title","Clear selection",3,"click",4,"ngIf"],["for","expenseDescription",1,"form-label-modern"],["type","text","id","expenseDescription","placeholder","e.g., Lunch at restaurant, Uber ride, Movie ticket, Groceries, etc.","name","description",1,"form-control-modern",3,"ngModelChange","ngModel"],[1,"form-group","button-group"],[1,"d-flex","gap-2"],["type","submit",1,"btn-add-expense",3,"disabled"],["class","btn-icon",4,"ngIf"],["type","button","size","small",3,"message",4,"ngIf"],["class","btn-text",4,"ngIf"],["type","button","class","btn-cancel",3,"click",4,"ngIf"],[3,"value"],["type","button","title","Clear selection",1,"clear-category-btn",3,"click"],["type","button","size","small",3,"message"],["type","button",1,"btn-cancel",3,"click"],[1,"active-filter-indicator"],[1,"filter-badge"],["title","Clear category filter",1,"clear-filter-btn",3,"click"],[1,"expenses-list-card"],[1,"d-flex","justify-content-between","align-items-center"],[1,"expenses-summary"],[1,"total-amount"],[1,"expenses-count"],["class","expenses-list",4,"ngIf"],["class","expenses-list",4,"ngIf","ngIfElse"],["class","pagination-controls mb-3",4,"ngIf"],[1,"expenses-list"],["type","expense-item",3,"lines",4,"ngFor","ngForOf"],["type","expense-item",3,"lines"],["class","expense-item",3,"animation-delay",4,"ngFor","ngForOf"],[1,"expense-item"],[1,"expense-main"],[1,"expense-amount"],[1,"expense-category"],[1,"category-badge",3,"ngStyle"],[1,"expense-details"],[1,"expense-date"],[1,"expense-description"],[1,"expense-actions"],["title","Edit",1,"btn-action","edit-btn",3,"click"],[1,"action-icon"],["title","Delete",1,"btn-action","delete-btn",3,"click","disabled"],["message","Deleting...","type","button","size","small",4,"ngIf"],["class","action-icon",4,"ngIf"],["message","Deleting...","type","button","size","small"],[1,"no-expenses"],[1,"no-expenses-icon"],[1,"pagination-controls","mb-3"],[1,"pagination-layout"],[1,"pagination-info"],[1,"text-muted"],[1,"pagination-navigation"],[1,"pagination-buttons"],["type","button","title","Previous page",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"page-info"],["type","button","title","Next page",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"]],template:function(t,n){t&1&&(r(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"span",6),l(5,"\u{1F4B8}"),a()(),r(6,"div")(7,"h1",7),l(8),a(),r(9,"p",8),l(10),a()()()(),x(11,Ae,1,0,"app-loading",9)(12,We,44,15,"div",10),r(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",4)(17,"span",14),l(18,"\u{1F50D}"),a(),r(19,"h5",8),l(20,"Filters"),a()(),x(21,Le,5,2,"div",15),a()(),r(22,"div",16)(23,"div",17)(24,"div",18)(25,"label",19),l(26,"Category"),a(),r(27,"select",20),M("ngModelChange",function(o){return w(n.filterCategory,o)||(n.filterCategory=o),o}),f("change",function(){return n.onCategoryFilterChange()}),r(28,"option",21),l(29,"\u{1F3F7}\uFE0F All Categories"),a(),x(30,$e,2,3,"option",22),a()(),r(31,"div",18)(32,"label",23),l(33,"From Date"),a(),r(34,"input",24),M("ngModelChange",function(o){return w(n.filterDateFrom,o)||(n.filterDateFrom=o),o}),f("change",function(){return n.onFromDateChange()}),a()(),r(35,"div",18)(36,"label",25),l(37,"To Date"),a(),r(38,"input",26),M("ngModelChange",function(o){return w(n.filterDateTo,o)||(n.filterDateTo=o),o}),f("change",function(){return n.onToDateChange()}),a()(),r(39,"div",18)(40,"label",27),l(41,"Min Amount"),a(),r(42,"input",28),M("ngModelChange",function(o){return w(n.filterAmount,o)||(n.filterAmount=o),o}),f("input",function(o){return n.onFilterAmountInput(o)})("keypress",function(o){return n.onFilterAmountKeypress(o)}),a()(),r(43,"div",18)(44,"label",29),l(45,"Sort By"),a(),r(46,"select",30),M("ngModelChange",function(o){return w(n.sortBy,o)||(n.sortBy=o),o}),f("change",function(){return n.onSortChange()}),r(47,"option",31),l(48,"\u{1F4C5} Date"),a(),r(49,"option",32),l(50,"\u{1F4B0} Amount"),a()()(),r(51,"div",18)(52,"label",33),l(53,"Order"),a(),r(54,"select",34),M("ngModelChange",function(o){return w(n.sortOrder,o)||(n.sortOrder=o),o}),f("change",function(){return n.onSortChange()}),r(55,"option",35),l(56,"\u2B07\uFE0F Descending"),a(),r(57,"option",36),l(58,"\u2B06\uFE0F Ascending"),a()()(),r(59,"div",37)(60,"label",38),l(61,"\xA0"),a(),r(62,"button",39),f("click",function(){return n.clearFilters()}),r(63,"span",40),l(64,"\u{1F504}"),a(),r(65,"span",41),l(66,"Clear Filters"),a()()()()()(),x(67,Qe,21,9,"div",42),a()),t&2&&(d(8),z(" ",n.filterCategory&&n.getCategoryName(n.filterCategory)?n.getCategoryName(n.filterCategory)+" Expenses":"Expenses"," "),d(2),z(" ",n.filterCategory&&n.getCategoryName(n.filterCategory)?"Viewing expenses for "+n.getCategoryName(n.filterCategory):"Track and manage your daily expenses"," "),d(),c("ngIf",n.isLoading),d(),c("ngIf",!n.isLoading),d(9),c("ngIf",n.filterCategory&&n.getCategoryName(n.filterCategory)),d(6),C("ngModel",n.filterCategory),d(3),c("ngForOf",n.categories),d(4),C("ngModel",n.filterDateFrom),c("max",n.getMaxDate()),d(4),C("ngModel",n.filterDateTo),c("max",n.getMaxDate())("min",n.filterDateFrom),d(4),C("ngModel",n.filterAmount),d(4),C("ngModel",n.sortBy),d(8),C("ngModel",n.sortOrder),d(13),c("ngIf",!n.isLoading))},dependencies:[V,B,Q,X,fe,de,ge,pe,oe,ce,re,ae,me,le,se,ue,j,te,ee],styles:[`.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:300px;padding:2rem}.loading-spinner[_ngcontent-%COMP%]{text-align:center;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #9b6b9b;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}.loading-text[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;margin:0;color:#666}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.pagination-controls[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;padding:1rem;border:1px solid #e9ecef;margin-bottom:1.5rem}.pagination-layout[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.pagination-info[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;flex-shrink:0}.pagination-navigation[_ngcontent-%COMP%]{flex-shrink:0}.pagination-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.page-info[_ngcontent-%COMP%]{font-weight:600;color:#495057;font-size:.9rem}.pagination-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:8px;font-weight:500;transition:all .3s ease;min-width:80px;white-space:nowrap}.pagination-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.pagination-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b6b9b,#b76bb7);color:#fff;padding:2rem;border-radius:15px;margin-bottom:2rem;box-shadow:0 8px 25px #9b6b9b26}.header-icon[_ngcontent-%COMP%]{background:#fff3;border-radius:50%;width:60px;height:60px;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.page-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.1)}.page-header[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-weight:500}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;align-items:start;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-label-modern[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:.5rem;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.form-control-modern[_ngcontent-%COMP%]{height:50px;border:2px solid #e9ecef;border-radius:12px;padding:.75rem 1rem;font-size:1rem;transition:all .3s ease;background:#fff}.form-control-modern[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 .2rem #667eea40;outline:none}.input-group-modern[_ngcontent-%COMP%]{display:flex;align-items:center;height:50px;border:2px solid #e9ecef;border-radius:12px;overflow:hidden;transition:all .3s ease}.input-group-modern[_ngcontent-%COMP%]:focus-within{border-color:var(--primary);box-shadow:0 0 0 .2rem #667eea40}.input-group-text-modern[_ngcontent-%COMP%]{background:#f8f9fa;border:none;padding:.75rem 1rem;font-weight:600;color:#666;border-right:2px solid #e9ecef}.input-group-modern[_ngcontent-%COMP%]   .form-control-modern[_ngcontent-%COMP%]{border:none;border-radius:0;flex-grow:1}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}.btn-add-expense[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);color:#fff;border:none;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600;display:inline-flex;align-items:center;gap:.5rem;transition:all .3s ease;cursor:pointer;box-shadow:0 5px 20px #ff6b354d;height:50px;white-space:nowrap}.btn-add-expense[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #ff6b3566}.btn-add-expense[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.add-expense-card[_ngcontent-%COMP%], .filters-card[_ngcontent-%COMP%], .expenses-list-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#fff8f0);border-radius:20px;box-shadow:0 10px 30px #0000001a;border:1px solid #ffe4b3;overflow:hidden;transition:transform .3s ease,box-shadow .3s ease;margin-bottom:2rem}.add-expense-card[_ngcontent-%COMP%]:hover, .filters-card[_ngcontent-%COMP%]:hover, .expenses-list-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 40px #00000026}.card-header-modern[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fa709a,#fee140);color:#fff;padding:1.5rem 2rem;border:none;position:relative}.card-header-modern[_ngcontent-%COMP%]   .active-filter-indicator[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]{background:#fff3;border:1px solid rgba(255,255,255,.3);border-radius:20px;padding:.5rem 1rem;font-size:.9rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.card-header-modern[_ngcontent-%COMP%]   .active-filter-indicator[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]   .clear-filter-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:.8rem;cursor:pointer;padding:.2rem;border-radius:50%;transition:all .2s ease}.card-header-modern[_ngcontent-%COMP%]   .active-filter-indicator[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]   .clear-filter-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.card-header-modern[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.1) 50%,transparent 70%);animation:_ngcontent-%COMP%_shimmer 2s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.header-icon-small[_ngcontent-%COMP%]{font-size:1.2rem;background:#fff3;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.card-body-modern[_ngcontent-%COMP%]{padding:2rem;background:linear-gradient(135deg,#fff,#fff8f0)}.filters-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;align-items:end}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.btn-clear-filters[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd23f,#3ec300);color:#fff;border:none;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600;display:inline-flex;align-items:center;gap:.5rem;transition:all .3s ease;cursor:pointer;box-shadow:0 5px 20px #ffd23f4d;height:50px;white-space:nowrap}.btn-clear-filters[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #ffd23f66}.expenses-summary[_ngcontent-%COMP%]{text-align:right}.total-amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:.25rem}.expenses-count[_ngcontent-%COMP%]{font-size:.9rem;color:#fffc}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.expense-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.5rem;background:linear-gradient(135deg,#fff,#fff8f0);border-radius:15px;border:1px solid #ffe4b3;transition:all .4s cubic-bezier(.4,0,.2,1);animation:slideInUp .6s ease-out;box-shadow:0 4px 15px #00000014;position:relative;overflow:hidden;min-height:80px;gap:1rem}.expense-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(180deg,var(--primary),var(--secondary));transform:scaleY(0);transition:transform .3s ease}.expense-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 8px 25px #0000001f}.expense-item[_ngcontent-%COMP%]:hover:before{transform:scaleY(1)}.expense-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.expense-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.expense-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.expense-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.expense-item[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.expense-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;flex-shrink:0;min-width:120px;max-width:150px}.expense-amount[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#333}.expense-category[_ngcontent-%COMP%]{display:flex;align-items:center}.category-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;color:#fff;font-size:.9rem;font-weight:600;display:inline-flex;align-items:center;gap:.5rem}.expense-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;flex-grow:1;margin-left:2rem;justify-content:center;min-height:60px;text-align:center;width:300px;max-width:300px}.expense-date[_ngcontent-%COMP%]{font-size:.9rem;color:#666;font-weight:500;line-height:1.2;text-align:center}.expense-description[_ngcontent-%COMP%]{font-size:.9rem;color:#999;max-width:100%;overflow:visible;text-overflow:unset;white-space:normal;line-height:1.3;margin-top:.25rem;text-align:center;width:100%;word-wrap:break-word;word-break:break-word}.expense-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-left:1.5rem;flex-shrink:0;align-items:center;min-width:100px}.btn-action[_ngcontent-%COMP%]{width:40px;height:40px;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .3s ease;cursor:pointer}.edit-btn[_ngcontent-%COMP%]{background:#667eea1a;color:var(--primary)}.edit-btn[_ngcontent-%COMP%]:hover{background:var(--primary);color:#fff;transform:scale(1.1)}.delete-btn[_ngcontent-%COMP%]{background:#f5576c1a;color:#f5576c}.delete-btn[_ngcontent-%COMP%]:hover{background:#f5576c;color:#fff;transform:scale(1.1)}.action-icon[_ngcontent-%COMP%]{font-size:1rem}.no-expenses[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;color:#666}.no-expenses-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.no-expenses[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-bottom:.5rem;color:#333}.no-expenses[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#999;margin:0}.category-select-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.clear-category-btn[_ngcontent-%COMP%]{position:absolute;right:55px;top:50%;transform:translateY(-50%);z-index:10;width:14px;height:14px;padding:0;display:flex;align-items:center;justify-content:center;font-size:8px;background:#dc3545;border-radius:50%;border:1px solid white;color:#fff;transition:all .2s ease;box-shadow:0 1px 2px #00000026;cursor:pointer;min-width:14px;min-height:14px}.clear-category-btn[_ngcontent-%COMP%]:hover{background:#c82333;transform:translateY(-50%) scale(1.1);box-shadow:0 3px 6px #0000004d}.form-select[_ngcontent-%COMP%]{height:50px;border:2px solid #e9ecef;border-radius:12px;padding:.75rem 1rem;font-size:1rem;transition:all .3s ease;background:#fff;padding-right:65px;max-height:200px;overflow-y:auto;width:100%;appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");background-position:right 12px center;background-repeat:no-repeat;background-size:16px 12px}.form-select[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 .2rem #667eea40;outline:none}@media (max-width: 768px){.pagination-layout[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.pagination-info[_ngcontent-%COMP%]{text-align:center;order:1}.pagination-navigation[_ngcontent-%COMP%]{order:2}.pagination-buttons[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap;gap:.75rem}.pagination-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:100px;padding:.5rem 1rem;font-size:.9rem}.page-info[_ngcontent-%COMP%]{order:2;text-align:center;width:100%;margin:.5rem 0}.form-row[_ngcontent-%COMP%], .filters-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.button-group[_ngcontent-%COMP%]{align-items:stretch}.btn-add-expense[_ngcontent-%COMP%], .btn-clear-filters[_ngcontent-%COMP%]{width:100%;justify-content:center}.card-body-modern[_ngcontent-%COMP%]{padding:1.5rem}.expense-item[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:1rem;padding:1rem;min-height:auto}.expense-main[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-between;align-items:center;min-width:auto;max-width:none}.expense-details[_ngcontent-%COMP%]{margin-left:0;width:100%;margin-top:.5rem;min-height:auto;max-width:none}.expense-actions[_ngcontent-%COMP%]{margin-left:0;width:100%;justify-content:center;margin-top:.5rem;min-width:auto}.form-select[_ngcontent-%COMP%]{padding-right:80px;max-height:150px}.clear-category-btn[_ngcontent-%COMP%]{width:24px;height:24px;font-size:12px;right:45px}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:1.5rem}.page-title[_ngcontent-%COMP%]{font-size:2rem}.header-icon[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.2rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{width:100%}.form-control-modern[_ngcontent-%COMP%]{height:55px;font-size:16px;padding:.75rem 1rem}.input-group-modern[_ngcontent-%COMP%]{height:55px}.input-group-text-modern[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.9rem}.filter-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem}.filter-group[_ngcontent-%COMP%]{width:100%}.filter-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:55px;font-size:16px}.btn-clear-filters[_ngcontent-%COMP%]{width:100%;height:55px;font-size:1rem}.expense-item[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem}.expense-main[_ngcontent-%COMP%]{width:100%;gap:.75rem}.expense-details[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;text-align:center}.expense-amount[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700}.expense-category[_ngcontent-%COMP%]{font-size:.9rem}.expense-date[_ngcontent-%COMP%]{font-size:.85rem}.expense-description[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.4;text-align:center;width:100%;max-width:none;overflow:visible;text-overflow:unset;white-space:normal;word-wrap:break-word;word-break:break-word}.expense-actions[_ngcontent-%COMP%]{flex-direction:row;gap:.75rem;justify-content:center;width:100%}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{flex:1;height:45px;font-size:.9rem;padding:.5rem 1rem}.edit-text[_ngcontent-%COMP%], .delete-text[_ngcontent-%COMP%]{display:inline}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%], .btn-add-expense[_ngcontent-%COMP%], .btn-clear-filters[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.form-label-modern[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:.5rem}.expense-item[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease}.expense-item[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-add-expense[_ngcontent-%COMP%]:active{transform:scale(.95)}.expense-list[_ngcontent-%COMP%]{gap:1rem;padding:1rem}.expense-card[_ngcontent-%COMP%]{border-radius:12px}.form-select[_ngcontent-%COMP%]{height:55px;font-size:16px;padding:.75rem 1rem}.clear-category-btn[_ngcontent-%COMP%]{height:32px;width:32px;font-size:1.2rem}}@media (max-width: 480px){.pagination-controls[_ngcontent-%COMP%]{padding:.75rem}.pagination-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.pagination-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;min-width:auto;justify-content:center}.page-info[_ngcontent-%COMP%]{order:1;margin-bottom:.5rem}.pagination-info[_ngcontent-%COMP%]{font-size:.8rem}.page-header[_ngcontent-%COMP%]{padding:1rem}.page-title[_ngcontent-%COMP%]{font-size:1.8rem}.form-row[_ngcontent-%COMP%]{gap:.75rem}.expense-item[_ngcontent-%COMP%]{padding:.75rem}.expense-main[_ngcontent-%COMP%]{gap:.5rem}.expense-amount[_ngcontent-%COMP%]{font-size:1.2rem}.expense-description[_ngcontent-%COMP%]{font-size:.9rem}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{font-size:.8rem;padding:.5rem .75rem}.edit-text[_ngcontent-%COMP%], .delete-text[_ngcontent-%COMP%]{display:none}.edit-icon[_ngcontent-%COMP%], .delete-icon[_ngcontent-%COMP%]{font-size:1.1rem}.filter-controls[_ngcontent-%COMP%], .expense-list[_ngcontent-%COMP%]{padding:.75rem}}@media (max-width: 768px) and (orientation: landscape){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.expense-item[_ngcontent-%COMP%]{flex-direction:row}.expense-main[_ngcontent-%COMP%]{flex-direction:row;width:auto}.expense-details[_ngcontent-%COMP%]{flex-direction:row;text-align:left}.expense-actions[_ngcontent-%COMP%]{width:auto}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}select.form-select[_ngcontent-%COMP%]{direction:ltr!important;writing-mode:horizontal-tb!important;transform:translateZ(0)!important}select.form-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{direction:ltr!important;writing-mode:horizontal-tb!important}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:9998;display:flex;align-items:center;justify-content:center;padding:20px}.modal-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:15px;box-shadow:0 20px 60px #0000004d;max-width:500px;width:100%;max-height:90vh;overflow:hidden;position:relative;z-index:9999;animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-content[_ngcontent-%COMP%]{border:none;border-radius:15px;overflow:hidden}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem 1rem;border:none;border-top-left-radius:15px;border-top-right-radius:15px;display:flex;align-items:center;justify-content:space-between}.modal-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0}.btn-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .2s}.btn-close[_ngcontent-%COMP%]:hover{background:#fff3}.modal-body[_ngcontent-%COMP%]{padding:2rem;max-height:60vh;overflow-y:auto}.modal-footer[_ngcontent-%COMP%]{padding:1rem 2rem 2rem;border-top:1px solid #e0e0e0;background:#f8f9fa;display:flex;gap:1rem;justify-content:flex-end}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.9rem}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268;transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #667eea66}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:.5rem;display:block}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center}.input-group-text[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-right:none;padding:.75rem 1rem;border-radius:12px 0 0 12px;color:#666;font-weight:600}.form-control[_ngcontent-%COMP%]{border:2px solid #e9ecef;border-radius:0 12px 12px 0;padding:.75rem 1rem;font-size:1rem;transition:all .3s ease;background:#fff;flex:1}.form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26;outline:none}.mb-3[_ngcontent-%COMP%]{margin-bottom:1.5rem}@media (max-width: 576px){.modal[_ngcontent-%COMP%]{padding:10px}.modal-dialog[_ngcontent-%COMP%]{max-width:100%}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem 1.5rem;flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}`]})};export{Ce as ExpensesComponent};
